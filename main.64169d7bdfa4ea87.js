"use strict";(self.webpackChunkplease_take_your_turn=self.webpackChunkplease_take_your_turn||[]).push([[179],{58:(Zr,gi,it)=>{it.d(gi,{BH:()=>Yr,DV:()=>M,Dv:()=>yn,G6:()=>ta,GJ:()=>na,L:()=>xt,LL:()=>Ts,Pz:()=>je,Sg:()=>$a,UG:()=>Dn,UI:()=>Q,US:()=>zt,Wj:()=>Di,Wl:()=>pu,Yr:()=>ea,ZB:()=>ke,ZR:()=>_o,aH:()=>Wn,b$:()=>gr,cI:()=>yo,dS:()=>oh,eu:()=>Qi,g5:()=>j,gK:()=>_r,gQ:()=>J,h$:()=>oi,hl:()=>Ga,hu:()=>Ve,jU:()=>qe,lb:()=>ia,m9:()=>gu,ne:()=>Yt,p$:()=>oe,pd:()=>Sn,r3:()=>x,ru:()=>Nr,tV:()=>H,uI:()=>qn,ug:()=>zl,vZ:()=>ge,w1:()=>Xo,w9:()=>za,xO:()=>kt,xb:()=>$,z$:()=>ct,zd:()=>rt});const D={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ve=function(A,C){if(!A)throw j(C)},j=function(A){return new Error("Firebase Database ("+D.SDK_VERSION+") INTERNAL ASSERT FAILED: "+A)},ze=function(A){const C=[];let P=0;for(let G=0;G<A.length;G++){let V=A.charCodeAt(G);V<128?C[P++]=V:V<2048?(C[P++]=V>>6|192,C[P++]=63&V|128):55296==(64512&V)&&G+1<A.length&&56320==(64512&A.charCodeAt(G+1))?(V=65536+((1023&V)<<10)+(1023&A.charCodeAt(++G)),C[P++]=V>>18|240,C[P++]=V>>12&63|128,C[P++]=V>>6&63|128,C[P++]=63&V|128):(C[P++]=V>>12|224,C[P++]=V>>6&63|128,C[P++]=63&V|128)}return C},zt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(A,C){if(!Array.isArray(A))throw Error("encodeByteArray takes an array as a parameter");this.init_();const P=C?this.byteToCharMapWebSafe_:this.byteToCharMap_,G=[];for(let V=0;V<A.length;V+=3){const xe=A[V],me=V+1<A.length,Ce=me?A[V+1]:0,ai=V+2<A.length,li=ai?A[V+2]:0;let X=(15&Ce)<<2|li>>6,Cs=63&li;ai||(Cs=64,me||(X=64)),G.push(P[xe>>2],P[(3&xe)<<4|Ce>>4],P[X],P[Cs])}return G.join("")},encodeString(A,C){return this.HAS_NATIVE_SUPPORT&&!C?btoa(A):this.encodeByteArray(ze(A),C)},decodeString(A,C){return this.HAS_NATIVE_SUPPORT&&!C?atob(A):function(A){const C=[];let P=0,G=0;for(;P<A.length;){const V=A[P++];if(V<128)C[G++]=String.fromCharCode(V);else if(V>191&&V<224){const xe=A[P++];C[G++]=String.fromCharCode((31&V)<<6|63&xe)}else if(V>239&&V<365){const ai=((7&V)<<18|(63&A[P++])<<12|(63&A[P++])<<6|63&A[P++])-65536;C[G++]=String.fromCharCode(55296+(ai>>10)),C[G++]=String.fromCharCode(56320+(1023&ai))}else{const xe=A[P++],me=A[P++];C[G++]=String.fromCharCode((15&V)<<12|(63&xe)<<6|63&me)}}return C.join("")}(this.decodeStringToByteArray(A,C))},decodeStringToByteArray(A,C){this.init_();const P=C?this.charToByteMapWebSafe_:this.charToByteMap_,G=[];for(let V=0;V<A.length;){const xe=P[A.charAt(V++)],Ce=V<A.length?P[A.charAt(V)]:0;++V;const li=V<A.length?P[A.charAt(V)]:64;++V;const Pt=V<A.length?P[A.charAt(V)]:64;if(++V,null==xe||null==Ce||null==li||null==Pt)throw new Fn;G.push(xe<<2|Ce>>4),64!==li&&(G.push(Ce<<4&240|li>>2),64!==Pt&&G.push(li<<6&192|Pt))}return G},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let A=0;A<this.ENCODED_VALS.length;A++)this.byteToCharMap_[A]=this.ENCODED_VALS.charAt(A),this.charToByteMap_[this.byteToCharMap_[A]]=A,this.byteToCharMapWebSafe_[A]=this.ENCODED_VALS_WEBSAFE.charAt(A),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[A]]=A,A>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(A)]=A,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(A)]=A)}}};class Fn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oi=function(A){const C=ze(A);return zt.encodeByteArray(C,!0)},xt=function(A){return oi(A).replace(/\./g,"")},H=function(A){try{return zt.decodeString(A,!0)}catch(C){console.error("base64Decode failed: ",C)}return null};function oe(A){return ke(void 0,A)}function ke(A,C){if(!(C instanceof Object))return C;switch(C.constructor){case Date:return new Date(C.getTime());case Object:void 0===A&&(A={});break;case Array:A=[];break;default:return C}for(const P in C)!C.hasOwnProperty(P)||!bt(P)||(A[P]=ke(A[P],C[P]));return A}function bt(A){return"__proto__"!==A}const Xe=()=>{try{return function Pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const A=process.env.__FIREBASE_DEFAULTS__;return A?JSON.parse(A):void 0})()||(()=>{if(typeof document>"u")return;let A;try{A=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const C=A&&H(A[1]);return C&&JSON.parse(C)})()}catch(A){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${A}`)}},Wn=()=>{var A;return null===(A=Xe())||void 0===A?void 0:A.config},je=A=>{var C;return null===(C=Xe())||void 0===C?void 0:C[`_${A}`]};class Yr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((C,P)=>{this.resolve=C,this.reject=P})}wrapCallback(C){return(P,G)=>{P?this.reject(P):this.resolve(G),"function"==typeof C&&(this.promise.catch(()=>{}),1===C.length?C(P):C(P,G))}}}function $a(A,C){if(A.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const G=C||"demo-project",V=A.iat||0,xe=A.sub||A.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${G}`,aud:G,iat:V,exp:V+3600,auth_time:V,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},A);return[xt(JSON.stringify({alg:"none",type:"JWT"})),xt(JSON.stringify(me)),""].join(".")}function ct(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function Dn(){var A;const C=null===(A=Xe())||void 0===A?void 0:A.forceEnvironment;if("node"===C)return!0;if("browser"===C)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function qe(){return"object"==typeof self&&self.self===self}function Nr(){const A="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof A&&void 0!==A.id}function gr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xo(){const A=ct();return A.indexOf("MSIE ")>=0||A.indexOf("Trident/")>=0}function ea(){return!0===D.NODE_CLIENT||!0===D.NODE_ADMIN}function ta(){return!Dn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ga(){try{return"object"==typeof indexedDB}catch{return!1}}function Qi(){return new Promise((A,C)=>{try{let P=!0;const G="validate-browser-context-for-indexeddb-analytics-module",V=self.indexedDB.open(G);V.onsuccess=()=>{V.result.close(),P||self.indexedDB.deleteDatabase(G),A(!0)},V.onupgradeneeded=()=>{P=!1},V.onerror=()=>{var xe;C((null===(xe=V.error)||void 0===xe?void 0:xe.message)||"")}}catch(P){C(P)}})}class _o extends Error{constructor(C,P,G){super(P),this.code=C,this.customData=G,this.name="FirebaseError",Object.setPrototypeOf(this,_o.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ts.prototype.create)}}class Ts{constructor(C,P,G){this.service=C,this.serviceName=P,this.errors=G}create(C,...P){const G=P[0]||{},V=`${this.service}/${C}`,xe=this.errors[C],me=xe?function $l(A,C){return A.replace(mr,(P,G)=>{const V=C[G];return null!=V?String(V):`<${G}?>`})}(xe,G):"Error";return new _o(V,`${this.serviceName}: ${me} (${V}).`,G)}}const mr=/\{\$([^}]+)}/g;function yo(A){return JSON.parse(A)}function pu(A){return JSON.stringify(A)}const Li=function(A){let C={},P={},G={},V="";try{const xe=A.split(".");C=yo(H(xe[0])||""),P=yo(H(xe[1])||""),V=xe[2],G=P.d||{},delete P.d}catch{}return{header:C,claims:P,data:G,signature:V}},za=function(A){const P=Li(A).claims;return!!P&&"object"==typeof P&&P.hasOwnProperty("iat")},na=function(A){const C=Li(A).claims;return"object"==typeof C&&!0===C.admin};function x(A,C){return Object.prototype.hasOwnProperty.call(A,C)}function M(A,C){if(Object.prototype.hasOwnProperty.call(A,C))return A[C]}function $(A){for(const C in A)if(Object.prototype.hasOwnProperty.call(A,C))return!1;return!0}function Q(A,C,P){const G={};for(const V in A)Object.prototype.hasOwnProperty.call(A,V)&&(G[V]=C.call(P,A[V],V,A));return G}function ge(A,C){if(A===C)return!0;const P=Object.keys(A),G=Object.keys(C);for(const V of P){if(!G.includes(V))return!1;const xe=A[V],me=C[V];if(ue(xe)&&ue(me)){if(!ge(xe,me))return!1}else if(xe!==me)return!1}for(const V of G)if(!P.includes(V))return!1;return!0}function ue(A){return null!==A&&"object"==typeof A}function kt(A){const C=[];for(const[P,G]of Object.entries(A))Array.isArray(G)?G.forEach(V=>{C.push(encodeURIComponent(P)+"="+encodeURIComponent(V))}):C.push(encodeURIComponent(P)+"="+encodeURIComponent(G));return C.length?"&"+C.join("&"):""}function rt(A){const C={};return A.replace(/^\?/,"").split("&").forEach(G=>{if(G){const[V,xe]=G.split("=");C[decodeURIComponent(V)]=decodeURIComponent(xe)}}),C}function Sn(A){const C=A.indexOf("?");if(!C)return"";const P=A.indexOf("#",C);return A.substring(C,P>0?P:void 0)}class J{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let C=1;C<this.blockSize;++C)this.pad_[C]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(C,P){P||(P=0);const G=this.W_;if("string"==typeof C)for(let Pt=0;Pt<16;Pt++)G[Pt]=C.charCodeAt(P)<<24|C.charCodeAt(P+1)<<16|C.charCodeAt(P+2)<<8|C.charCodeAt(P+3),P+=4;else for(let Pt=0;Pt<16;Pt++)G[Pt]=C[P]<<24|C[P+1]<<16|C[P+2]<<8|C[P+3],P+=4;for(let Pt=16;Pt<80;Pt++){const X=G[Pt-3]^G[Pt-8]^G[Pt-14]^G[Pt-16];G[Pt]=4294967295&(X<<1|X>>>31)}let li,xr,V=this.chain_[0],xe=this.chain_[1],me=this.chain_[2],Ce=this.chain_[3],ai=this.chain_[4];for(let Pt=0;Pt<80;Pt++){Pt<40?Pt<20?(li=Ce^xe&(me^Ce),xr=1518500249):(li=xe^me^Ce,xr=1859775393):Pt<60?(li=xe&me|Ce&(xe|me),xr=2400959708):(li=xe^me^Ce,xr=3395469782);const X=(V<<5|V>>>27)+li+ai+xr+G[Pt]&4294967295;ai=Ce,Ce=me,me=4294967295&(xe<<30|xe>>>2),xe=V,V=X}this.chain_[0]=this.chain_[0]+V&4294967295,this.chain_[1]=this.chain_[1]+xe&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+Ce&4294967295,this.chain_[4]=this.chain_[4]+ai&4294967295}update(C,P){if(null==C)return;void 0===P&&(P=C.length);const G=P-this.blockSize;let V=0;const xe=this.buf_;let me=this.inbuf_;for(;V<P;){if(0===me)for(;V<=G;)this.compress_(C,V),V+=this.blockSize;if("string"==typeof C){for(;V<P;)if(xe[me]=C.charCodeAt(V),++me,++V,me===this.blockSize){this.compress_(xe),me=0;break}}else for(;V<P;)if(xe[me]=C[V],++me,++V,me===this.blockSize){this.compress_(xe),me=0;break}}this.inbuf_=me,this.total_+=P}digest(){const C=[];let P=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let V=this.blockSize-1;V>=56;V--)this.buf_[V]=255&P,P/=256;this.compress_(this.buf_);let G=0;for(let V=0;V<5;V++)for(let xe=24;xe>=0;xe-=8)C[G]=this.chain_[V]>>xe&255,++G;return C}}function Yt(A,C){const P=new Qt(A,C);return P.subscribe.bind(P)}class Qt{constructor(C,P){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=P,this.task.then(()=>{C(this)}).catch(G=>{this.error(G)})}next(C){this.forEachObserver(P=>{P.next(C)})}error(C){this.forEachObserver(P=>{P.error(C)}),this.close(C)}complete(){this.forEachObserver(C=>{C.complete()}),this.close()}subscribe(C,P,G){let V;if(void 0===C&&void 0===P&&void 0===G)throw new Error("Missing Observer.");V=function Ee(A,C){if("object"!=typeof A||null===A)return!1;for(const P of C)if(P in A&&"function"==typeof A[P])return!0;return!1}(C,["next","error","complete"])?C:{next:C,error:P,complete:G},void 0===V.next&&(V.next=Ci),void 0===V.error&&(V.error=Ci),void 0===V.complete&&(V.complete=Ci);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?V.error(this.finalError):V.complete()}catch{}}),this.observers.push(V),xe}unsubscribeOne(C){void 0===this.observers||void 0===this.observers[C]||(delete this.observers[C],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(C){if(!this.finalized)for(let P=0;P<this.observers.length;P++)this.sendOne(P,C)}sendOne(C,P){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[C])try{P(this.observers[C])}catch(G){typeof console<"u"&&console.error&&console.error(G)}})}close(C){this.finalized||(this.finalized=!0,void 0!==C&&(this.finalError=C),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ci(){}const yn=function(A,C,P,G){let V;if(G<C?V="at least "+C:G>P&&(V=0===P?"none":"no more than "+P),V)throw new Error(A+" failed: Was called with "+G+(1===G?" argument.":" arguments.")+" Expects "+V+".")};function _r(A,C){return`${A} failed: ${C} argument `}function Di(A,C,P,G){if((!G||P)&&"function"!=typeof P)throw new Error(_r(A,C)+"must be a valid function.")}function ia(A,C,P,G){if((!G||P)&&("object"!=typeof P||null===P))throw new Error(_r(A,C)+"must be a valid context object.")}const oh=function(A){const C=[];let P=0;for(let G=0;G<A.length;G++){let V=A.charCodeAt(G);if(V>=55296&&V<=56319){const xe=V-55296;G++,Ve(G<A.length,"Surrogate pair missing trail surrogate."),V=65536+(xe<<10)+(A.charCodeAt(G)-56320)}V<128?C[P++]=V:V<2048?(C[P++]=V>>6|192,C[P++]=63&V|128):V<65536?(C[P++]=V>>12|224,C[P++]=V>>6&63|128,C[P++]=63&V|128):(C[P++]=V>>18|240,C[P++]=V>>12&63|128,C[P++]=V>>6&63|128,C[P++]=63&V|128)}return C},zl=function(A){let C=0;for(let P=0;P<A.length;P++){const G=A.charCodeAt(P);G<128?C++:G<2048?C+=2:G>=55296&&G<=56319?(C+=4,P++):C+=3}return C};function gu(A){return A&&A._delegate?A._delegate:A}},953:(Zr,gi,it)=>{function D(n){return"function"==typeof n}let Ve=!1;const j={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else Ve&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Ve=n},get useDeprecatedSynchronousErrorHandling(){return Ve}};function ze(n){setTimeout(()=>{throw n},0)}const cn={closed:!0,next(n){},error(n){if(j.useDeprecatedSynchronousErrorHandling)throw n;ze(n)},complete(){}},zt=Array.isArray||(n=>n&&"number"==typeof n.length);function Fn(n){return null!==n&&"object"==typeof n}const xt=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class H{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof H)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(D(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof xt?oe(o.errors):[o]}}if(zt(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(Fn(l))try{l.unsubscribe()}catch(u){e=e||[],u instanceof xt?e=e.concat(oe(u.errors)):e.push(u)}}}if(e)throw new xt(e)}add(e){let t=e;if(!e)return H.EMPTY;switch(typeof e){case"function":t=new H(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof H)){const s=t;t=new H,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof H){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function oe(n){return n.reduce((e,t)=>e.concat(t instanceof xt?t.errors:t),[])}H.EMPTY=((n=new H).closed=!0,n);const ke="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Pe extends H{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=cn;break;case 1:if(!e){this.destination=cn;break}if("object"==typeof e){e instanceof Pe?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new zn(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new zn(this,e,t,i)}}[ke](){return this}static create(e,t,i){const r=new Pe(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class zn extends Pe{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;D(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==cn&&(o=Object.create(t),D(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;j.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=j;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):ze(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;ze(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);j.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),j.useDeprecatedSynchronousErrorHandling)throw i;ze(i)}}__tryOrSetError(e,t,i){if(!j.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return j.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(ze(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const Xe="function"==typeof Symbol&&Symbol.observable||"@@observable";function Jn(n){return n}function Wn(n){return 0===n.length?Jn:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let je=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function ft(n,e,t){if(n){if(n instanceof Pe)return n;if(n[ke])return n[ke]()}return n||e||t?new Pe(n,e,t):new Pe(cn)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||j.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),j.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){j.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function tn(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof Pe?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=Yr(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[Xe](){return this}pipe(...t){return 0===t.length?this:Wn(t)(this)}toPromise(t){return new(t=Yr(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Yr(n){if(n||(n=j.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const ct=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class qn extends H{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class Dn extends Pe{constructor(e){super(e),this.destination=e}}let qe=(()=>{class n extends je{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ke](){return new Dn(this)}lift(t){const i=new Nr(this,this);return i.operator=t,i}next(t){if(this.closed)throw new ct;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new ct;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new ct;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new ct;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new ct;return this.hasError?(t.error(this.thrownError),H.EMPTY):this.isStopped?(t.complete(),H.EMPTY):(this.observers.push(t),new qn(this,t))}asObservable(){const t=new je;return t.source=this,t}}return n.create=(e,t)=>new Nr(e,t),n})();class Nr extends qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):H.EMPTY}}function gr(n){return n&&"function"==typeof n.schedule}function Ne(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new Xo(n,e))}}class Xo{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new Qr(e,this.project,this.thisArg))}}class Qr extends Pe{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const ea=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},Qi=function Ga(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Ts=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function $l(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const mr=n=>{if(n&&"function"==typeof n[Xe])return(n=>e=>{const t=n[Xe]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Ts(n))return ea(n);if($l(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ze),e))(n);if(n&&"function"==typeof n[Qi])return(n=>e=>{const t=n[Qi]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${Fn(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function Li(n,e){return new je(t=>{const i=new H;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function x(n,e){return e?function na(n,e){if(null!=n){if(function vo(n){return n&&"function"==typeof n[Xe]}(n))return function yo(n,e){return new je(t=>{const i=new H;return i.add(e.schedule(()=>{const r=n[Xe]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if($l(n))return function pu(n,e){return new je(t=>{const i=new H;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(Ts(n))return Li(n,e);if(function za(n){return n&&"function"==typeof n[Qi]}(n)||"string"==typeof n)return function Gl(n,e){if(!n)throw new Error("Iterable cannot be null");return new je(t=>{const i=new H;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[Qi](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof je?n:new je(mr(n))}class M extends Pe{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Q extends Pe{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function ue(n,e){if(e.closed)return;if(n instanceof je)return n.subscribe(e);let t;try{t=mr(n)(e)}catch(i){e.error(i)}return t}function Be(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(Be((r,s)=>x(n(r,s)).pipe(Ne((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new kt(n,t)))}class kt{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new rt(e,this.project,this.concurrent))}}class rt extends Q{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new M(this),i=this.destination;i.add(t);const r=ue(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function J(n=Number.POSITIVE_INFINITY){return Be(Jn,n)}function Yt(n,e){return e?Li(n,e):new je(ea(n))}function Qt(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return gr(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof je?n[0]:J(e)(Yt(n,t))}class pn extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ct;return this._value}next(e){super.next(this._value=e)}}function Ee(...n){let e=n[n.length-1];return gr(e)?(n.pop(),Li(n,e)):Yt(n)}function Ci(){return function(e){return e.lift(new yn(e))}}class yn{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new _r(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class _r extends Pe{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Jr extends je{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new H,e.add(this.source.subscribe(new ia(this.getSubject(),this))),e.closed&&(this._connection=null,e=H.EMPTY)),e}refCount(){return Ci()(this)}}const Di=(()=>{const n=Jr.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class ia extends Dn{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class Wt{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function Wa(){return new qe}function qs(){return n=>Ci()(function Jt(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new Wt(r,e));const s=Object.create(i,Di);return s.source=i,s.subjectFactory=r,s}}(Wa)(n))}function Bt(n,e){return"function"==typeof e?t=>t.pipe(Bt((i,r)=>x(n(i,r)).pipe(Ne((s,o)=>e(i,s,r,o))))):t=>t.lift(new Xr(n))}class Xr{constructor(e){this.project=e}call(e,t){return t.subscribe(new Wl(e,this.project))}}class Wl extends Q{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new M(this),r=this.destination;r.add(i),this.innerSubscription=ue(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function Eo(n,e){return t=>t.lift(new gu(n,e))}class gu{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new A(e,this.compare,this.keySelector))}}class A extends Pe{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}function C(n){for(let e in n)if(n[e]===C)return e;throw Error("Could not find renamed property on target object.")}function P(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function G(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(G).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function V(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const xe=C({__forward_ref__:C});function me(n){return n.__forward_ref__=me,n.toString=function(){return G(this())},n}function Ce(n){return ai(n)?n():n}function ai(n){return"function"==typeof n&&n.hasOwnProperty(xe)&&n.__forward_ref__===me}function li(n){return n&&!!n.\u0275providers}const Pt="https://g.co/ng/security#xss";class X extends Error{constructor(e,t){super(function Cs(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Ue(n){return"string"==typeof n?n:null==n?"":String(n)}function Ae(n,e){throw new X(-201,!1)}function es(n,e){null==n&&function He(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function mt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vi(n){return qa(n,_u)||qa(n,uh)}function qa(n,e){return n.hasOwnProperty(e)?n[e]:null}function bo(n){return n&&(n.hasOwnProperty(ch)||n.hasOwnProperty(kv))?n[ch]:null}const _u=C({\u0275prov:C}),ch=C({\u0275inj:C}),uh=C({ngInjectableDef:C}),kv=C({ngInjectorDef:C});var _t=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_t||{});let Za;function Ji(n){const e=Za;return Za=n,e}function Ya(n,e,t){const i=Vi(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&_t.Optional?null:void 0!==e?e:void Ae(G(n))}const un=globalThis;class ve{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Kl={},bg="__NG_DI_FLAG__",hh="ngTempTokenPath",Vv=/\n/gm,fh="__source";let Ks;function sa(n){const e=Ks;return Ks=n,e}function Ig(n,e=_t.Default){if(void 0===Ks)throw new X(-203,!1);return null===Ks?Ya(n,void 0,e):Ks.get(n,e&_t.Optional?null:void 0,e)}function W(n,e=_t.Default){return(function yg(){return Za}()||Ig)(Ce(n),e)}function be(n,e=_t.Default){return W(n,vu(e))}function vu(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Tg(n){const e=[];for(let t=0;t<n.length;t++){const i=Ce(n[t]);if(Array.isArray(i)){if(0===i.length)throw new X(900,!1);let r,s=_t.Default;for(let o=0;o<i.length;o++){const a=i[o],l=eC(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(W(r,s))}else e.push(W(i))}return e}function Zl(n,e){return n[bg]=e,n.prototype[bg]=e,n}function eC(n){return n[bg]}function Ds(n){return{toString:n}.toString()}var ph=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ph||{}),Pr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pr||{});const Zs={},Ot=[],gh=C({\u0275cmp:C}),Eu=C({\u0275dir:C}),Cg=C({\u0275pipe:C}),mh=C({\u0275mod:C}),ts=C({\u0275fac:C}),Qa=C({__NG_ELEMENT_ID__:C}),Hv=C({__NG_ENV_ID__:C});function _h(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function Dg(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];$v(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function yh(n){return 3===n||4===n||6===n}function $v(n){return 64===n.charCodeAt(0)}function Ja(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Gv(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Gv(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const vh="ng-template";function tC(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==_h(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Eh(n){return 4===n.type&&n.value!==vh}function nC(n,e,t){return e===(4!==n.type||t?n.value:vh)}function Sg(n,e,t){let i=4;const r=n.attrs||[],s=function Ys(n){for(let e=0;e<n.length;e++)if(yh(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!nC(n,l,t)||""===l&&1===e.length){if(Xi(i))return!1;o=!0}}else{const u=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!tC(n.attrs,u,t)){if(Xi(i))return!1;o=!0}continue}const g=wo(8&i?"class":l,r,Eh(n),t);if(-1===g){if(Xi(i))return!1;o=!0;continue}if(""!==u){let m;m=g>s?"":r[g+1].toLowerCase();const y=8&i?m:null;if(y&&-1!==_h(y,u,0)||2&i&&u!==m){if(Xi(i))return!1;o=!0}}}}else{if(!o&&!Xi(i)&&!Xi(l))return!1;if(o&&Xi(l))continue;o=!1,i=l|1&i}}return Xi(i)||o}function Xi(n){return 0==(1&n)}function wo(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function rC(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function bh(n,e,t=!1){for(let i=0;i<e.length;i++)if(Sg(n,e[i],t))return!0;return!1}function Ag(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function zv(n,e){return n?":not("+e.trim()+")":e}function Rg(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Xi(o)&&(e+=zv(s,r),r=""),i=o,s=s||!Xi(i);t++}return""!==r&&(e+=zv(s,r)),e}function Si(n){return Ds(()=>{const e=Pg(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ph.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pr.Emulated,styles:n.styles||Ot,_:null,schemas:n.schemas||null,tView:null,id:""};Wv(t);const i=n.dependencies;return t.directiveDefs=Io(i,!1),t.pipeDefs=Io(i,!0),t.id=function wh(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function xg(n){return st(n)||Ln(n)}function Xa(n){return null!==n}function It(n){return Ds(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ql(n,e){if(null==n)return Zs;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function ae(n){return Ds(()=>{const e=Pg(n);return Wv(e),e})}function Bi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function st(n){return n[gh]||null}function Ln(n){return n[Eu]||null}function ei(n){return n[Cg]||null}function yr(n,e){const t=n[mh]||null;if(!t&&!0===e)throw new Error(`Type ${G(n)} does not have '\u0275mod' property.`);return t}function Pg(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Zs,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ql(n.inputs,e),outputs:Ql(n.outputs)}}function Wv(n){n.features?.forEach(e=>e(n))}function Io(n,e){if(!n)return null;const t=e?ei:xg;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(Xa)}const An=0,Te=1,Qe=2,Dt=3,ns=4,bu=5,mi=6,To=7,Vn=8,Co=9,Jl=10,Ke=11,tl=12,Ih=13,Do=14,Rn=15,Xl=16,oa=17,Ss=18,nl=19,wu=20,Qs=21,Js=22,il=23,ec=24,pt=25,Iu=1,qv=2,is=7,la=9,ti=11;function Ui(n){return Array.isArray(n)&&"object"==typeof n[Iu]}function er(n){return Array.isArray(n)&&!0===n[Iu]}function Tu(n){return 0!=(4&n.flags)}function sl(n){return n.componentOffset>-1}function tc(n){return 1==(1&n.flags)}function As(n){return!!n.template}function Cu(n){return 0!=(512&n[Qe])}function ol(n,e){return n.hasOwnProperty(ts)?n[ts]:null}let _i=null,nc=!1;function rs(n){const e=_i;return _i=n,e}const al={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function s0(n){if(!Du(n)||n.dirty){if(!n.producerMustRecompute(n)&&!uC(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function a0(n){n.dirty=!0,function o0(n){if(void 0===n.liveConsumerNode)return;const e=nc;nc=!0;try{for(const t of n.liveConsumerNode)t.dirty||a0(t)}finally{nc=e}}(n),n.consumerMarkedDirty?.(n)}function Lg(n){return n&&(n.nextProducerIndex=0),rs(n)}function l0(n,e){if(rs(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Du(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Dh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function uC(n){Su(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(s0(t),i!==t.version))return!0}return!1}function dC(n){if(Su(n),Du(n))for(let e=0;e<n.producerNode.length;e++)Dh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Dh(n,e){if(function hC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Su(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Dh(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Su(r),r.producerIndexOfThis[i]=e}}function Du(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Su(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Sh=null;function u0(n){const e=rs(null);try{return n()}finally{rs(e)}}const d0=()=>{},_M=(()=>({...al,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:d0}))();class yM{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function qt(){return h0}function h0(n){return n.type.prototype.ngOnChanges&&(n.setInput=Au),_C}function _C(){const n=Kn(this),e=n?.current;if(e){const t=n.previous;if(t===Zs)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Au(n,e,t,i){const r=this.declaredInputs[t],s=Kn(n)||function yC(n,e){return n[f0]=e}(n,{previous:Zs,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new yM(l&&l.currentValue,e,a===Zs),n[i]=e}qt.ngInherit=!0;const f0="__ngSimpleChanges__";function Kn(n){return n[f0]||null}const ss=function(n,e,t){};function rn(n){for(;Array.isArray(n);)n=n[An];return n}function ll(n,e){return rn(e[n])}function tr(n,e){return rn(e[n.index])}function xu(n,e){return n.data[e]}function rc(n,e){return n[e]}function nr(n,e){const t=e[n];return Ui(t)?t:t[An]}function eo(n,e){return null==e?null:n[e]}function Gg(n){n[oa]=0}function bC(n){1024&n[Qe]||(n[Qe]|=1024,wC(n,1))}function _0(n){1024&n[Qe]&&(n[Qe]&=-1025,wC(n,-1))}function wC(n,e){let t=n[Dt];if(null===t)return;t[bu]+=e;let i=t;for(t=t[Dt];null!==t&&(1===e&&1===i[bu]||-1===e&&0===i[bu]);)t[bu]+=e,i=t,t=t[Dt]}const We={lFrame:kh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function v0(){return We.bindingsEnabled}function sc(){return null!==We.skipHydrationRootTNode}function ee(){return We.lFrame.lView}function St(){return We.lFrame.tView}function Ft(n){return We.lFrame.contextLView=n,n[Vn]}function Lt(n){return We.lFrame.contextLView=null,n}function Ai(){let n=Ph();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ph(){return We.lFrame.currentTNode}function os(n,e){const t=We.lFrame;t.currentTNode=n,t.isParent=e}function Wg(){return We.lFrame.isParent}function Ou(){We.lFrame.isParent=!1}function Ri(){const n=We.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function to(){return We.lFrame.bindingIndex++}function ir(n){const e=We.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function xC(n,e){const t=We.lFrame;t.bindingIndex=t.bindingRootIndex=n,ku(e)}function ku(n){We.lFrame.currentDirectiveIndex=n}function w0(){return We.lFrame.currentQueryIndex}function Kg(n){We.lFrame.currentQueryIndex=n}function Zg(n){const e=n[Te];return 2===e.type?e.declTNode:1===e.type?n[mi]:null}function I0(n,e,t){if(t&_t.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&_t.Host||(r=Zg(s),null===r||(s=s[Do],10&r.type))););if(null===r)return!1;e=r,n=s}const i=We.lFrame=T0();return i.currentTNode=e,i.lView=n,!0}function Fu(n){const e=T0(),t=n[Te];We.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function T0(){const n=We.lFrame,e=null===n?null:n.child;return null===e?kh(n):e}function kh(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Fh(){const n=We.lFrame;return We.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const C0=Fh;function ul(){const n=Fh();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ni(){return We.lFrame.selectedIndex}function Ao(n){We.lFrame.selectedIndex=n}function gn(){const n=We.lFrame;return xu(n.tView,n.selectedIndex)}let R0=!0;function oc(){return R0}function ca(n){R0=n}function ac(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function Lh(n,e,t){N0(n,e,3,t)}function Vh(n,e,t,i){(3&n[Qe])===t&&N0(n,e,t,i)}function Lu(n,e){let t=n[Qe];(3&t)===e&&(t&=8191,t+=1,n[Qe]=t)}function N0(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[oa]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[oa]+=65536),(a<s||-1==s)&&(Uh(n,t,e,l),n[oa]=(4294901760&n[oa])+l+2),l++}function Bh(n,e){ss(4,n,e);const t=rs(null);try{e.call(n)}finally{rs(t),ss(5,n,e)}}function Uh(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[Qe]>>13<n[oa]>>16&&(3&n[Qe])===e&&(n[Qe]+=8192,Bh(a,s)):Bh(a,s)}const ua=-1;class lc{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Jg(n){return n!==ua}function Vu(n){return 32767&n}function dl(n,e){let t=function UC(n){return n>>16}(n),i=e;for(;t>0;)i=i[Do],t--;return i}let Xg=!0;function Hh(n){const e=Xg;return Xg=n,e}const O0=255,Bu=5;let HC=0;const no={};function $h(n,e){const t=M0(n,e);if(-1!==t)return t;const i=e[Te];i.firstCreatePass&&(n.injectorIndex=e.length,em(i.data,n),em(e,null),em(i.blueprint,null));const r=Gh(n,e),s=n.injectorIndex;if(Jg(r)){const o=Vu(r),a=dl(r,e),l=a[Te].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=r,s}function em(n,e){n.push(0,0,0,0,0,0,0,0,e)}function M0(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Gh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=H0(r),null===i)return ua;if(t++,r=r[Do],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return ua}function tm(n,e,t){!function $C(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Qa)&&(i=t[Qa]),null==i&&(i=t[Qa]=HC++);const r=i&O0;e.data[n+(r>>Bu)]|=1<<r}(n,e,t)}function k0(n,e,t){if(t&_t.Optional||void 0!==n)return n;Ae()}function F0(n,e,t,i){if(t&_t.Optional&&void 0===i&&(i=null),!(t&(_t.Self|_t.Host))){const r=n[Co],s=Ji(void 0);try{return r?r.get(e,i,t&_t.Optional):Ya(e,i,t&_t.Optional)}finally{Ji(s)}}return k0(i,0,t)}function L0(n,e,t,i=_t.Default,r){if(null!==n){if(2048&e[Qe]&&!(i&_t.Self)){const o=function j0(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Qe]&&!(512&o[Qe]);){const a=V0(s,o,t,i|_t.Self,no);if(a!==no)return a;let l=s.parent;if(!l){const u=o[wu];if(u){const h=u.get(t,no,i);if(h!==no)return h}l=H0(o),o=o[Do]}s=l}return r}(n,e,t,i,no);if(o!==no)return o}const s=V0(n,e,t,i,no);if(s!==no)return s}return F0(e,t,i,r)}function V0(n,e,t,i,r){const s=function zC(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Qa)?n[Qa]:void 0;return"number"==typeof e?e>=0?e&O0:WC:e}(t);if("function"==typeof s){if(!I0(e,n,i))return i&_t.Host?k0(r,0,i):F0(e,t,i,r);try{let o;if(o=s(i),null!=o||i&_t.Optional)return o;Ae()}finally{C0()}}else if("number"==typeof s){let o=null,a=M0(n,e),l=ua,u=i&_t.Host?e[Rn][mi]:null;for((-1===a||i&_t.SkipSelf)&&(l=-1===a?Gh(n,e):e[a+8],l!==ua&&U0(i,!1)?(o=e[Te],a=Vu(l),e=dl(l,e)):a=-1);-1!==a;){const h=e[Te];if(B0(s,a,h.data)){const g=GC(a,e,t,o,i,u);if(g!==no)return g}l=e[a+8],l!==ua&&U0(i,e[Te].data[a+8]===u)&&B0(s,a,e)?(o=h,a=Vu(l),e=dl(l,e)):a=-1}}return r}function GC(n,e,t,i,r,s){const o=e[Te],a=o.data[n+8],h=Uu(a,o,t,null==i?sl(a)&&Xg:i!=o&&0!=(3&a.type),r&_t.Host&&s===a);return null!==h?hl(e,o,h,a):no}function Uu(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,h=s>>20,m=r?a+h:n.directiveEnd;for(let y=i?a:a+h;y<m;y++){const E=o[y];if(y<l&&t===E||y>=l&&E.type===t)return y}if(r){const y=o[l];if(y&&As(y)&&y.type===t)return l}return null}function hl(n,e,t,i){let r=n[t];const s=e.data;if(function Qg(n){return n instanceof lc}(r)){const o=r;o.resolving&&function q(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,`Circular dependency in DI detected for ${n}${t}`)}(function wt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ue(n)}(s[t]));const a=Hh(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Ji(o.injectImpl):null;I0(n,i,_t.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function FC(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=h0(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&Ji(u),Hh(a),o.resolving=!1,C0()}}return r}function B0(n,e,t){return!!(t[e+(n>>Bu)]&1<<n)}function U0(n,e){return!(n&_t.Self||n&_t.Host&&e)}class xi{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return L0(this._tNode,this._lView,e,vu(i),t)}}function WC(){return new xi(Ai(),ee())}function Nn(n){return Ds(()=>{const e=n.prototype.constructor,t=e[ts]||rm(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[ts]||rm(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function rm(n){return ai(n)?()=>{const e=rm(Ce(n));return e&&e()}:ol(n)}function H0(n){const e=n[Te],t=e.type;return 2===t?e.declTNode:1===t?n[mi]:null}function Rs(n){return function nm(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(yh(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Ai(),n)}const Hu="__parameters__";function fl(n,e,t){return Ds(()=>{const i=function uc(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,u,h){const g=l.hasOwnProperty(Hu)?l[Hu]:Object.defineProperty(l,Hu,{value:[]})[Hu];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function dc(n,e){n.forEach(t=>Array.isArray(t)?dc(t,e):e(t))}function zh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Wh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function zu(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Or(n,e,t){let i=gl(n,e);return i>=0?n[1|i]=t:(i=~i,function QC(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function cm(n,e){const t=gl(n,e);if(t>=0)return n[1|t]}function gl(n,e){return function G0(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const hc=Zl(fl("Optional"),8),Zh=Zl(fl("SkipSelf"),4);function tf(n){return 128==(128&n.flags)}var c=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(c||{});const d=/^>|^->|<!--|-->|--!>|<!-$/g,p=/(<|>)/g,_="\u200b$1\u200b";const T=new Map;let N=0;const Fr="__ngContext__";function xn(n,e){Ui(e)?(n[Fr]=e[nl],function Z(n){T.set(n[nl],n)}(e)):n[Fr]=e}let dD;function hD(n,e){return dD(n,e)}function Em(n){const e=n[Dt];return er(e)?e[Dt]:e}function PM(n){return MM(n[tl])}function OM(n){return MM(n[ns])}function MM(n){for(;null!==n&&!er(n);)n=n[ns];return n}function sf(n,e,t,i,r){if(null!=i){let s,o=!1;er(i)?s=i:Ui(i)&&(o=!0,i=i[An]);const a=rn(i);0===n&&null!==t?null==r?VM(e,t,a):Ku(e,t,a,r||null,!0):1===n&&null!==t?Ku(e,t,a,r||null,!0):2===n?function dE(n,e,t){const i=cE(n,e);i&&function w9(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function C9(n,e,t,i,r){const s=t[is];s!==rn(t)&&sf(e,n,i,s,r);for(let a=ti;a<t.length;a++){const l=t[a];wm(l[Te],l,n,e,i,s)}}(e,n,s,t,r)}}function fD(n,e){return n.createComment(function v(n){return n.replace(d,e=>e.replace(p,_))}(e))}function aE(n,e,t){return n.createElement(e,t)}function FM(n,e){const t=n[la],i=t.indexOf(e);_0(e),t.splice(i,1)}function lE(n,e){if(n.length<=ti)return;const t=ti+e,i=n[t];if(i){const r=i[Xl];null!==r&&r!==n&&FM(r,i),e>0&&(n[t-1][ns]=i[ns]);const s=Wh(n,ti+e);!function p9(n,e){wm(n,e,e[Ke],2,null,null),e[An]=null,e[mi]=null}(i[Te],i);const o=s[Ss];null!==o&&o.detachView(s[Te]),i[Dt]=null,i[ns]=null,i[Qe]&=-129}return i}function pD(n,e){if(!(256&e[Qe])){const t=e[Ke];e[il]&&dC(e[il]),e[ec]&&dC(e[ec]),t.destroyNode&&wm(n,e,t,3,null,null),function _9(n){let e=n[tl];if(!e)return gD(n[Te],n);for(;e;){let t=null;if(Ui(e))t=e[tl];else{const i=e[ti];i&&(t=i)}if(!t){for(;e&&!e[ns]&&e!==n;)Ui(e)&&gD(e[Te],e),e=e[Dt];null===e&&(e=n),Ui(e)&&gD(e[Te],e),t=e&&e[ns]}e=t}}(e)}}function gD(n,e){if(!(256&e[Qe])){e[Qe]&=-129,e[Qe]|=256,function b9(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof lc)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];ss(4,a,l);try{l.call(a)}finally{ss(5,a,l)}}else{ss(4,r,s);try{s.call(r)}finally{ss(5,r,s)}}}}}(n,e),function E9(n,e){const t=n.cleanup,i=e[To];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[To]=null);const r=e[Qs];if(null!==r){e[Qs]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[Te].type&&e[Ke].destroy();const t=e[Xl];if(null!==t&&er(e[Dt])){t!==e[Dt]&&FM(t,e);const i=e[Ss];null!==i&&i.detachView(n)}!function _e(n){T.delete(n[nl])}(e)}}function mD(n,e,t){return function LM(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[An];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Pr.None||s===Pr.Emulated)return null}return tr(i,t)}}(n,e.parent,t)}function Ku(n,e,t,i,r){n.insertBefore(e,t,i,r)}function VM(n,e,t){n.appendChild(e,t)}function BM(n,e,t,i,r){null!==i?Ku(n,e,t,i,r):VM(n,e,t)}function cE(n,e){return n.parentNode(e)}function UM(n,e,t){return HM(n,e,t)}let _D,hE,bD,fE,HM=function jM(n,e,t){return 40&n.type?tr(n,t):null};function uE(n,e,t,i){const r=mD(n,i,e),s=e[Ke],a=UM(i.parent||e[mi],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)BM(s,r,t[l],a,!1);else BM(s,r,t,a,!1);void 0!==_D&&_D(s,i,e,t,r)}function bm(n,e){if(null!==e){const t=e.type;if(3&t)return tr(e,n);if(4&t)return yD(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return bm(n,i);{const r=n[e.index];return er(r)?yD(-1,r):rn(r)}}if(32&t)return hD(e,n)()||rn(n[e.index]);{const i=GM(n,e);return null!==i?Array.isArray(i)?i[0]:bm(Em(n[Rn]),i):bm(n,e.next)}}return null}function GM(n,e){return null!==e?n[Rn][mi].projection[e.projection]:null}function yD(n,e){const t=ti+n+1;if(t<e.length){const i=e[t],r=i[Te].firstChild;if(null!==r)return bm(i,r)}return e[is]}function vD(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&xn(rn(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)vD(n,e,t.child,i,r,s,!1),sf(e,n,r,a,s);else if(32&l){const u=hD(t,i);let h;for(;h=u();)sf(e,n,r,h,s);sf(e,n,r,a,s)}else 16&l?WM(n,e,i,t,r,s):sf(e,n,r,a,s);t=o?t.projectionNext:t.next}}function wm(n,e,t,i,r,s){vD(t,i,n.firstChild,e,r,s,!1)}function WM(n,e,t,i,r,s){const o=t[Rn],l=o[mi].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)sf(e,n,r,l[u],s);else{let u=l;const h=o[Dt];tf(i)&&(u.flags|=128),vD(n,e,u,h,r,s,!0)}}function qM(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function KM(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Dg(n,e,i),null!==r&&qM(n,e,r),null!==s&&function S9(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function af(n){return function ED(){if(void 0===hE&&(hE=null,un.trustedTypes))try{hE=un.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return hE}()?.createHTML(n)||n}function lf(){if(void 0!==bD)return bD;if(typeof document<"u")return document;throw new X(210,!1)}function ZM(n){return function wD(){if(void 0===fE&&(fE=null,un.trustedTypes))try{fE=un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return fE}()?.createHTML(n)||n}class JM{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Pt})`}}function mc(n){return n instanceof JM?n.changingThisBreaksApplicationSecurity:n}class V9{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(af(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class B9{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=af(e),t}}const j9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ID(n){return(n=String(n)).match(j9)?n:"unsafe:"+n}function _l(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Tm(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const ek=_l("area,br,col,hr,img,wbr"),tk=_l("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nk=_l("rp,rt"),TD=Tm(ek,Tm(tk,_l("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tm(nk,_l("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tm(nk,tk)),CD=_l("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ik=Tm(CD,_l("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_l("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),H9=_l("script,style,template");class $9{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!TD.hasOwnProperty(t))return this.sanitizedSomething=!0,!H9.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!ik.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;CD[a]&&(l=ID(l)),this.buf.push(" ",o,'="',rk(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();TD.hasOwnProperty(t)&&!ek.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(rk(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const G9=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,z9=/([^\#-~ |!])/g;function rk(n){return n.replace(/&/g,"&amp;").replace(G9,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(z9,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let pE;function DD(n){return"content"in n&&function q9(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var cf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(cf||{});function sk(n){const e=function Cm(){const n=ee();return n&&n[Jl].sanitizer}();return e?ZM(e.sanitize(cf.HTML,n)||""):function Im(n,e){const t=function L9(n){return n instanceof JM&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Pt})`)}return t===e}(n,"HTML")?ZM(mc(n)):function W9(n,e){let t=null;try{pE=pE||function XM(n){const e=new B9(n);return function U9(){try{return!!(new window.DOMParser).parseFromString(af(""),"text/html")}catch{return!1}}()?new V9(e):e}(n);let i=e?String(e):"";t=pE.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=pE.getInertBodyElement(i)}while(i!==s);return af((new $9).sanitizeChildren(DD(t)||t))}finally{if(t){const i=DD(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(lf(),Ue(n))}const Dm=new ve("ENVIRONMENT_INITIALIZER"),ck=new ve("INJECTOR",-1),uk=new ve("INJECTOR_DEF_TYPES");class SD{get(e,t=Kl){if(t===Kl){const i=new Error(`NullInjectorError: No provider for ${G(e)}!`);throw i.name="NullInjectorError",i}return t}}function X9(...n){return{\u0275providers:hk(0,n),\u0275fromNgModule:!0}}function hk(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return dc(e,o=>{const a=o;gE(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&fk(r,s),t}function fk(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];AD(r,s=>{e(s,i)})}}function gE(n,e,t,i){if(!(n=Ce(n)))return!1;let r=null,s=bo(n);const o=!s&&st(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=bo(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)gE(u,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;i.add(r);try{dc(s.imports,h=>{gE(h,e,t,i)&&(u||=[],u.push(h))})}finally{}void 0!==u&&fk(u,e)}if(!a){const u=ol(r)||(()=>new r);e({provide:r,useFactory:u,deps:Ot},r),e({provide:uk,useValue:r,multi:!0},r),e({provide:Dm,useValue:()=>W(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const u=n;AD(l,h=>{e(h,u)})}}}return r!==n&&void 0!==n.providers}function AD(n,e){for(let t of n)li(t)&&(t=t.\u0275providers),Array.isArray(t)?AD(t,e):e(t)}const eq=C({provide:String,useValue:C});function RD(n){return null!==n&&"object"==typeof n&&eq in n}function Zu(n){return"function"==typeof n}const ND=new ve("Set Injector scope."),mE={},nq={};let xD;function _E(){return void 0===xD&&(xD=new SD),xD}class cs{}class uf extends cs{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,OD(e,o=>this.processProvider(o)),this.records.set(ck,df(void 0,this)),r.has("environment")&&this.records.set(cs,df(void 0,this));const s=this.records.get(ND);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(uk.multi,Ot,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=sa(this),i=Ji(void 0);try{return e()}finally{sa(t),Ji(i)}}get(e,t=Kl,i=_t.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Hv))return e[Hv](this);i=vu(i);const s=sa(this),o=Ji(void 0);try{if(!(i&_t.SkipSelf)){let l=this.records.get(e);if(void 0===l){const u=function aq(n){return"function"==typeof n||"object"==typeof n&&n instanceof ve}(e)&&Vi(e);l=u&&this.injectableDefInScope(u)?df(PD(e),mE):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&_t.Self?_E():this.parent).get(e,t=i&_t.Optional&&t===Kl?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[hh]=a[hh]||[]).unshift(G(e)),s)throw a;return function Yl(n,e,t,i){const r=n[hh];throw e[fh]&&r.unshift(e[fh]),n.message=function jv(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=G(e);if(Array.isArray(e))r=e.map(G).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):G(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Vv,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[hh]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Ji(o),sa(s)}}resolveInjectorInitializers(){const e=sa(this),t=Ji(void 0);try{const r=this.get(Dm.multi,Ot,_t.Self);for(const s of r)s()}finally{sa(e),Ji(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(G(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){let t=Zu(e=Ce(e))?e:Ce(e&&e.provide);const i=function rq(n){return RD(n)?df(void 0,n.useValue):df(mk(n),mE)}(e);if(Zu(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=df(void 0,mE,!0),r.factory=()=>Tg(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===mE&&(t.value=nq,t.value=t.factory()),"object"==typeof t.value&&t.value&&function oq(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ce(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function PD(n){const e=Vi(n),t=null!==e?e.factory:ol(n);if(null!==t)return t;if(n instanceof ve)throw new X(204,!1);if(n instanceof Function)return function iq(n){const e=n.length;if(e>0)throw zu(e,"?"),new X(204,!1);const t=function Ka(n){return n&&(n[_u]||n[uh])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new X(204,!1)}function mk(n,e,t){let i;if(Zu(n)){const r=Ce(n);return ol(r)||PD(r)}if(RD(n))i=()=>Ce(n.useValue);else if(function gk(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Tg(n.deps||[]));else if(function pk(n){return!(!n||!n.useExisting)}(n))i=()=>W(Ce(n.useExisting));else{const r=Ce(n&&(n.useClass||n.provide));if(!function sq(n){return!!n.deps}(n))return ol(r)||PD(r);i=()=>new r(...Tg(n.deps))}return i}function df(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function OD(n,e){for(const t of n)Array.isArray(t)?OD(t,e):t&&li(t)?OD(t.\u0275providers,e):e(t)}const yE=new ve("AppId",{providedIn:"root",factory:()=>lq}),lq="ng",_k=new ve("Platform Initializer"),No=new ve("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),yk=new ve("CSP nonce",{providedIn:"root",factory:()=>lf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let vk=(n,e,t)=>null;function jD(n,e,t=!1){return vk(n,e,t)}class yq{}class wk{}class Eq{resolveComponentFactory(e){throw function vq(n){const e=Error(`No component factory found for ${G(n)}.`);return e.ngComponent=n,e}(e)}}let TE=(()=>{class n{static#e=this.NULL=new Eq}return n})();function bq(){return pf(Ai(),ee())}function pf(n,e){return new Rt(tr(n,e))}let Rt=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=bq}return n})();function wq(n){return n instanceof Rt?n.nativeElement:n}class GD{}let us=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Iq(){const n=ee(),t=nr(Ai().index,n);return(Ui(t)?t:n)[Ke]}()}return n})(),Tq=(()=>{class n{static#e=this.\u0275prov=le({token:n,providedIn:"root",factory:()=>null})}return n})();class gf{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Tk=new gf("16.2.12"),zD={};function Ak(n,e=null,t=null,i){const r=Rk(n,e,t,i);return r.resolveInjectorInitializers(),r}function Rk(n,e=null,t=null,i,r=new Set){const s=[t||Ot,X9(n)];return i=i||("object"==typeof n?void 0:G(n)),new uf(s,e||_E(),i||null,r)}let sr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Kl;static#t=this.NULL=new SD;static create(t,i){if(Array.isArray(t))return Ak({name:""},i,t,"");{const r=t.name??"";return Ak({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=le({token:n,providedIn:"any",factory:()=>W(ck)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function WD(n){return n.ngOriginalError}class yl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&WD(e);for(;t&&WD(t);)t=WD(t);return t||null}}function qD(n){return e=>{setTimeout(n,void 0,e)}}const Se=class Pq extends qe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=qD(s),r&&(r=qD(r)),o&&(o=qD(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof H&&e.add(a),a}};function xk(...n){}class ot{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Se(!1),this.onMicrotaskEmpty=new Se(!1),this.onStable=new Se(!1),this.onError=new Se(!1),typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Oq(){const n="function"==typeof un.requestAnimationFrame;let e=un[n?"requestAnimationFrame":"setTimeout"],t=un[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Fq(n){const e=()=>{!function kq(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(un,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,ZD(n),n.isCheckStableRunning=!0,KD(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),ZD(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function Vq(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,s,o,a);try{return Pk(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Ok(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return Pk(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),Ok(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,ZD(n),KD(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ot.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(ot.isInAngularZone())throw new X(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Mq,xk,xk);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Mq={};function KD(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ZD(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Pk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ok(n){n._nesting--,KD(n)}class Lq{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Se,this.onMicrotaskEmpty=new Se,this.onStable=new Se,this.onError=new Se}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const Mk=new ve("",{providedIn:"root",factory:kk});function kk(){const n=be(ot);let e=!0;return Qt(new je(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new je(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const o=n.onUnstable.subscribe(()=>{ot.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(qs()))}function vl(n){return n instanceof Function?n():n}let YD=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}return n})();function Rm(n){for(;n;){n[Qe]|=64;const e=Em(n);if(Cu(n)&&!e)return n;n=e}return null}const Uk=new ve("",{providedIn:"root",factory:()=>!1});let SE=null;function Gk(n,e){return n[e]??qk()}function zk(n,e){const t=qk();t.producerNode?.length&&(n[e]=SE,t.lView=n,SE=Wk())}const Kq={...al,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Rm(n.lView)},lView:null};function Wk(){return Object.create(Kq)}function qk(){return SE??=Wk(),SE}const at={};function ne(n){Kk(St(),ee(),Ni()+n,!1)}function Kk(n,e,t,i){if(!i)if(3==(3&e[Qe])){const s=n.preOrderCheckHooks;null!==s&&Lh(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Vh(e,s,0,t)}Ao(t)}function R(n,e=_t.Default){const t=ee();return null===t?W(n,e):L0(Ai(),t,Ce(n),e)}function AE(n,e,t,i,r,s,o,a,l,u,h){const g=e.blueprint.slice();return g[An]=r,g[Qe]=140|i,(null!==u||n&&2048&n[Qe])&&(g[Qe]|=2048),Gg(g),g[Dt]=g[Do]=n,g[Vn]=t,g[Jl]=o||n&&n[Jl],g[Ke]=a||n&&n[Ke],g[Co]=l||n&&n[Co]||null,g[mi]=s,g[nl]=function z(){return N++}(),g[Js]=h,g[wu]=u,g[Rn]=2==e.type?n[Rn]:g,g}function vf(n,e,t,i,r){let s=n.data[e];if(null===s)s=function QD(n,e,t,i,r){const s=Ph(),o=Wg(),l=n.data[e]=function n7(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return sc()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,i,r),function qg(){return We.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Pu(){const n=We.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return os(s,!0),s}function Nm(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Yk(n,e,t,i,r){const s=Gk(e,il),o=Ni(),a=2&i;try{Ao(-1),a&&e.length>pt&&Kk(n,e,pt,!1),ss(a?2:0,r);const u=a?s:null,h=Lg(u);try{null!==u&&(u.dirty=!1),t(i,r)}finally{l0(u,h)}}finally{a&&null===e[il]&&zk(e,il),Ao(o),ss(a?3:1,r)}}function JD(n,e,t){if(Tu(e)){const i=rs(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{rs(i)}}}function XD(n,e,t){v0()&&(function c7(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;sl(t)&&function m7(n,e,t){const i=tr(e,n),r=Qk(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=RE(n,AE(n,r,null,o,i,e,null,n[Jl].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||$h(t,e),xn(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],u=hl(e,n,a,t);xn(u,e),null!==o&&_7(0,a-r,u,l,0,o),As(l)&&(nr(t.index,e)[Vn]=hl(e,n,a,t))}}(n,e,t,tr(t,e)),64==(64&t.flags)&&nF(n,e,t))}function e1(n,e,t=tr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function Qk(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=t1(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function t1(n,e,t,i,r,s,o,a,l,u,h){const g=pt+i,m=g+r,y=function Yq(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:at);return t}(g,m),E="function"==typeof u?u():u;return y[Te]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:E,incompleteFirstPass:!1,ssrId:h}}let Jk=n=>null;function Xk(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?eF(t,e,r,s):i.hasOwnProperty(r)&&eF(t,e,i[r],s)}return t}function eF(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Ns(n,e,t,i,r,s,o,a){const l=tr(e,t);let h,u=e.inputs;!a&&null!=u&&(h=u[i])?(o1(n,t,h,i,r),sl(e)&&function s7(n,e){const t=nr(e,n);16&t[Qe]||(t[Qe]|=64)}(t,e.index)):3&e.type&&(i=function r7(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}function n1(n,e,t,i){if(v0()){const r=null===i?null:{"":-1},s=function d7(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(bh(e,o.selectors,!1))if(i||(i=[]),As(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),i1(n,e,a.length)}else i.unshift(o),i1(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&tF(n,e,t,o,r,a),r&&function h7(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new X(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=Ja(t.mergedAttrs,t.attrs)}function tF(n,e,t,i,r,s){for(let u=0;u<i.length;u++)tm($h(t,e),n,i[u].type);!function p7(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let u=0;u<i.length;u++){const h=i[u];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,l=Nm(n,e,i.length,null);for(let u=0;u<i.length;u++){const h=i[u];t.mergedAttrs=Ja(t.mergedAttrs,h.hostAttrs),g7(n,t,e,l,h),f7(l,h,r),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function i7(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,u=null;for(let h=e.directiveStart;h<r;h++){const g=s[h],m=t?t.get(g):null,E=m?m.outputs:null;l=Xk(g.inputs,h,l,m?m.inputs:null),u=Xk(g.outputs,h,u,E);const w=null===l||null===o||Eh(e)?null:y7(l,h,o);a.push(w)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}(n,t,s)}function nF(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function PC(){return We.lFrame.currentDirectiveIndex}();try{Ao(s);for(let a=i;a<r;a++){const l=n.data[a],u=e[a];ku(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&u7(l,u)}}finally{Ao(-1),ku(o)}}function u7(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function i1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function f7(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;As(e)&&(t[""]=n)}}function g7(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=ol(r.type)),o=new lc(s,As(r),R);n.blueprint[i]=o,t[i]=o,function a7(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function l7(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Nm(n,t,r.hostVars,at),r)}function ga(n,e,t,i,r,s){const o=tr(n,e);!function r1(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Ue(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[Ke],o,s,n.value,t,i,r)}function _7(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)iF(i,t,o[a++],o[a++],o[a++])}function iF(n,e,t,i,r){const s=rs(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{rs(s)}}function y7(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function rF(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function sF(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];Kg(t[i]),o.contentQueries(2,e[s],s)}}}function RE(n,e){return n[tl]?n[Ih][ns]=e:n[tl]=e,n[Ih]=e,e}function s1(n,e,t){Kg(0);const i=rs(null);try{e(n,t)}finally{rs(i)}}function oF(n){return n[To]||(n[To]=[])}function aF(n){return n.cleanup||(n.cleanup=[])}function cF(n,e){const t=n[Co],i=t?t.get(yl,null):null;i&&i.handleError(e)}function o1(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];iF(n.data[o],e[o],i,a,r)}}function El(n,e,t){const i=ll(e,n);!function kM(n,e,t){n.setValue(e,t)}(n[Ke],i,t)}function v7(n,e){const t=nr(e,n),i=t[Te];!function E7(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[An];null!==r&&null===t[Js]&&(t[Js]=jD(r,t[Co])),a1(i,t,t[Vn])}function a1(n,e,t){Fu(e);try{const i=n.viewQuery;null!==i&&s1(1,i,t);const r=n.template;null!==r&&Yk(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&sF(n,e),n.staticViewQueries&&s1(2,n.viewQuery,t);const s=n.components;null!==s&&function b7(n,e){for(let t=0;t<e.length;t++)v7(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Qe]&=-5,ul()}}let uF=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function mC(n,e,t){const i=Object.create(_M);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>a0(i),run:()=>{if(i.dirty=!1,i.hasRun&&!uC(i))return;i.hasRun=!0;const o=Lg(i);try{i.cleanupFn(),i.cleanupFn=d0,i.fn(r)}finally{l0(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},r);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}return n})();function NE(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=V(r,a):2==s&&(i=V(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function xm(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push(rn(s)),er(s)&&dF(s,i);const o=t.type;if(8&o)xm(n,e,t.child,i);else if(32&o){const a=hD(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=GM(e,t);if(Array.isArray(a))i.push(...a);else{const l=Em(e[Rn]);xm(l[Te],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function dF(n,e){for(let t=ti;t<n.length;t++){const i=n[t],r=i[Te].firstChild;null!==r&&xm(i[Te],i,r,e)}n[is]!==n[An]&&e.push(n[is])}function xE(n,e,t,i=!0){const r=e[Jl],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{hF(n,e,n.template,t)}catch(l){throw i&&cF(e,l),l}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function hF(n,e,t,i){const r=e[Qe];if(256!=(256&r)){e[Jl].effectManager?.flush(),Fu(e);try{Gg(e),function Oh(n){return We.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Yk(n,e,t,2,i);const o=3==(3&r);if(o){const u=n.preOrderCheckHooks;null!==u&&Lh(e,u,null)}else{const u=n.preOrderHooks;null!==u&&Vh(e,u,0,null),Lu(e,0)}if(function T7(n){for(let e=PM(n);null!==e;e=OM(e)){if(!e[qv])continue;const t=e[la];for(let i=0;i<t.length;i++){bC(t[i])}}}(e),fF(e,2),null!==n.contentQueries&&sF(n,e),o){const u=n.contentCheckHooks;null!==u&&Lh(e,u)}else{const u=n.contentHooks;null!==u&&Vh(e,u,1),Lu(e,1)}!function Zq(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=Gk(e,ec);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)Ao(~s);else{const o=s,a=t[++r],l=t[++r];xC(a,o),i.dirty=!1;const u=Lg(i);try{l(2,e[o])}finally{l0(i,u)}}}}finally{null===e[ec]&&zk(e,ec),Ao(-1)}}(n,e);const a=n.components;null!==a&&gF(e,a,0);const l=n.viewQuery;if(null!==l&&s1(2,l,i),o){const u=n.viewCheckHooks;null!==u&&Lh(e,u)}else{const u=n.viewHooks;null!==u&&Vh(e,u,2),Lu(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Qe]&=-73,_0(e)}finally{ul()}}}function fF(n,e){for(let t=PM(n);null!==t;t=OM(t))for(let i=ti;i<t.length;i++)pF(t[i],e)}function C7(n,e,t){pF(nr(e,n),t)}function pF(n,e){if(!function $g(n){return 128==(128&n[Qe])}(n))return;const t=n[Te],i=n[Qe];if(80&i&&0===e||1024&i||2===e)hF(t,n,t.template,n[Vn]);else if(n[bu]>0){fF(n,1);const r=t.components;null!==r&&gF(n,r,1)}}function gF(n,e,t){for(let i=0;i<e.length;i++)C7(n,e[i],t)}class Pm{get rootNodes(){const e=this._lView,t=e[Te];return xm(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vn]}set context(e){this._lView[Vn]=e}get destroyed(){return 256==(256&this._lView[Qe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Dt];if(er(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(lE(e,i),Wh(t,i))}this._attachedToViewContainer=!1}pD(this._lView[Te],this._lView)}onDestroy(e){!function cl(n,e){if(256==(256&n[Qe]))throw new X(911,!1);null===n[Qs]&&(n[Qs]=[]),n[Qs].push(e)}(this._lView,e)}markForCheck(){Rm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Qe]&=-129}reattach(){this._lView[Qe]|=128}detectChanges(){xE(this._lView[Te],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function m9(n,e){wm(n,e,e[Ke],2,null,null)}(this._lView[Te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e}}class D7 extends Pm{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;xE(e[Te],e,e[Vn],!1)}checkNoChanges(){}get context(){return null}}class mF extends TE{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=st(e);return new Om(t,this.ngModule)}}function _F(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class A7{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=vu(i);const r=this.injector.get(e,zD,i);return r!==zD||t===zD?r:this.parentInjector.get(e,t,i)}}class Om extends wk{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=_F(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return _F(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function sC(n){return n.map(Rg).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof cs?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new A7(e,s):e,a=o.get(GD,null);if(null===a)throw new X(407,!1);const g={rendererFactory:a,sanitizer:o.get(Tq,null),effectManager:o.get(uF,null),afterRenderEventManager:o.get(YD,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=i?function Qq(n,e,t,i){const s=i.get(Uk,!1)||t===Pr.ShadowDom,o=n.selectRootElement(e,s);return function Jq(n){Jk(n)}(o),o}(m,i,this.componentDef.encapsulation,o):aE(m,y,function S7(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),O=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let S=null;null!==E&&(S=jD(E,o,!0));const k=t1(0,null,null,1,0,null,null,null,null,null,null),L=AE(null,k,null,O,null,null,g,m,o,null,S);let Y,ye;Fu(L);try{const Me=this.componentDef;let Ge,fn=null;Me.findHostDirectiveDefs?(Ge=[],fn=new Map,Me.findHostDirectiveDefs(Me,Ge,fn),Ge.push(Me)):Ge=[Me];const Gn=function N7(n,e){const t=n[Te],i=pt;return n[i]=e,vf(t,i,2,"#host",null)}(L,E),Yi=function x7(n,e,t,i,r,s,o){const a=r[Te];!function P7(n,e,t,i){for(const r of n)e.mergedAttrs=Ja(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(NE(e,e.mergedAttrs,!0),null!==t&&KM(i,t,e))}(i,n,e,o);let l=null;null!==e&&(l=jD(e,r[Co]));const u=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const g=AE(r,Qk(t),null,h,r[n.index],n,s,u,null,null,l);return a.firstCreatePass&&i1(a,n,i.length-1),RE(r,g),r[n.index]=g}(Gn,E,Me,Ge,L,g,m);ye=xu(k,pt),E&&function M7(n,e,t,i){if(i)Dg(n,t,["ng-version",Tk.full]);else{const{attrs:r,classes:s}=function Ng(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Xi(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Dg(n,t,r),s&&s.length>0&&qM(n,t,s.join(" "))}}(m,Me,E,i),void 0!==t&&function k7(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(ye,this.ngContentSelectors,t),Y=function O7(n,e,t,i,r,s){const o=Ai(),a=r[Te],l=tr(o,r);tF(a,r,o,t,null,i);for(let h=0;h<t.length;h++)xn(hl(r,a,o.directiveStart+h,o),r);nF(a,r,o),l&&xn(l,r);const u=hl(r,a,o.directiveStart+o.componentOffset,o);if(n[Vn]=r[Vn]=u,null!==s)for(const h of s)h(u,e);return JD(a,o,n),u}(Yi,Me,Ge,fn,L,[F7]),a1(k,L,null)}finally{ul()}return new R7(this.componentType,Y,pf(ye,L),L,ye)}}class R7 extends yq{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new D7(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;o1(s[Te],s,r,e,t),this.previousInputValues.set(e,t),Rm(nr(this._tNode.index,s))}}get injector(){return new xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function F7(){const n=Ai();ac(ee()[Te],n)}function Xt(n){let e=function yF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(As(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=PE(n.inputs),o.inputTransforms=PE(n.inputTransforms),o.declaredInputs=PE(n.declaredInputs),o.outputs=PE(n.outputs);const a=r.hostBindings;a&&U7(n,a);const l=r.viewQuery,u=r.contentQueries;if(l&&V7(n,l),u&&B7(n,u),P(n.inputs,r.inputs),P(n.declaredInputs,r.declaredInputs),P(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),P(o.inputTransforms,r.inputTransforms)),As(r)&&r.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Xt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function L7(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Ja(r.hostAttrs,t=Ja(t,r.hostAttrs))}}(i)}function PE(n){return n===Zs?{}:n===Ot?[]:n}function V7(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function B7(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function U7(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Mm(n){return e=>{e.findHostDirectiveDefs=vF,e.hostDirectives=(Array.isArray(n)?n:n()).map(t=>"function"==typeof t?{directive:Ce(t),inputs:Zs,outputs:Zs}:{directive:Ce(t.directive),inputs:EF(t.inputs),outputs:EF(t.outputs)})}}function vF(n,e,t){if(null!==n.hostDirectives)for(const i of n.hostDirectives){const r=Ln(i.directive);G7(r.declaredInputs,i.inputs),vF(r,e,t),t.set(r,i),e.push(r)}}function EF(n){if(void 0===n||0===n.length)return Zs;const e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function G7(n,e){for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=n[t])}function OE(n){return!!l1(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function l1(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ma(n,e,t){return n[e]=t}function vr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Yu(n,e,t,i){const r=vr(n,e,t);return vr(n,e+1,i)||r}function Ht(n,e,t,i){const r=ee();return vr(r,to(),e)&&(St(),ga(gn(),r,n,e,t,i)),Ht}function bf(n,e,t,i){return vr(n,to(),t)?e+Ue(t)+i:at}function wf(n,e,t,i,r,s){const a=Yu(n,function So(){return We.lFrame.bindingIndex}(),t,r);return ir(2),a?e+Ue(t)+i+Ue(r)+s:at}function ce(n,e,t,i,r,s,o,a){const l=ee(),u=St(),h=n+pt,g=u.firstCreatePass?function uK(n,e,t,i,r,s,o,a,l){const u=e.consts,h=vf(e,n,4,o||null,eo(u,a));n1(e,t,h,eo(u,l)),ac(e,h);const g=h.tView=t1(2,h,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,u,l,e,t,i,r,s,o):u.data[h];os(g,!1);const m=kF(u,l,g,n);oc()&&uE(u,l,m,g),xn(m,l),RE(l,l[h]=rF(m,l,m,g)),tc(g)&&XD(u,l,g),null!=o&&e1(l,g,a)}let kF=function FF(n,e,t,i){return ca(!0),e[Ke].createComment("")};function yi(n){return rc(function NC(){return We.lFrame.contextLView}(),pt+n)}function ie(n,e,t){const i=ee();return vr(i,to(),e)&&Ns(St(),gn(),i,n,e,i[Ke],t,!1),ie}function p1(n,e,t,i,r){const o=r?"class":"style";o1(n,t,e.inputs[o],o,i)}function fe(n,e,t,i){const r=ee(),s=St(),o=pt+n,a=r[Ke],l=s.firstCreatePass?function pK(n,e,t,i,r,s){const o=e.consts,l=vf(e,n,2,i,eo(o,r));return n1(e,t,l,eo(o,s)),null!==l.attrs&&NE(l,l.attrs,!1),null!==l.mergedAttrs&&NE(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,t,i):s.data[o],u=LF(s,r,l,a,e,n);r[o]=u;const h=tc(l);return os(l,!0),KM(a,u,l),32!=(32&l.flags)&&oc()&&uE(s,r,u,l),0===function TC(){return We.lFrame.elementDepthCount}()&&xn(u,r),function xh(){We.lFrame.elementDepthCount++}(),h&&(XD(s,r,l),JD(s,l,r)),null!==i&&e1(r,l),fe}function pe(){let n=Ai();Wg()?Ou():(n=n.parent,os(n,!1));const e=n;(function zg(n){return We.skipHydrationRootTNode===n})(e)&&function RC(){We.skipHydrationRootTNode=null}(),function CC(){We.lFrame.elementDepthCount--}();const t=St();return t.firstCreatePass&&(ac(t,n),Tu(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function x0(n){return 0!=(8&n.flags)}(e)&&p1(t,e,ee(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function VC(n){return 0!=(16&n.flags)}(e)&&p1(t,e,ee(),e.stylesWithoutHost,!1),pe}function Er(n,e,t,i){return fe(n,e,t,i),pe(),Er}let LF=(n,e,t,i,r,s)=>(ca(!0),aE(i,r,function A0(){return We.lFrame.currentNamespace}()));function _a(n,e,t){const i=ee(),r=St(),s=n+pt,o=r.firstCreatePass?function _K(n,e,t,i,r){const s=e.consts,o=eo(s,i),a=vf(e,n,8,"ng-container",o);return null!==o&&NE(a,o,!0),n1(e,t,a,eo(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];os(o,!0);const a=VF(r,i,o,n);return i[s]=a,oc()&&uE(r,i,a,o),xn(a,i),tc(o)&&(XD(r,i,o),JD(r,o,i)),null!=t&&e1(i,o),_a}function ya(){let n=Ai();const e=St();return Wg()?Ou():(n=n.parent,os(n,!1)),e.firstCreatePass&&(ac(e,n),Tu(n)&&e.queries.elementEnd(n)),ya}function Bm(n,e,t){return _a(n,e,t),ya(),Bm}let VF=(n,e,t,i)=>(ca(!0),fD(e[Ke],""));function vi(){return ee()}function Um(n){return!!n&&"function"==typeof n.then}function BF(n){return!!n&&"function"==typeof n.subscribe}function $e(n,e,t,i){const r=ee(),s=St(),o=Ai();return function jF(n,e,t,i,r,s,o){const a=tc(i),u=n.firstCreatePass&&aF(n),h=e[Vn],g=oF(e);let m=!0;if(3&i.type||o){const w=tr(i,e),I=o?o(w):w,O=g.length,S=o?L=>o(rn(L[i.index])):i.index;let k=null;if(!o&&a&&(k=function EK(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[To],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==k)(k.__ngLastListenerFn__||k).__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,m=!1;else{s=$F(i,e,h,s,!1);const L=t.listen(I,r,s);g.push(s,L),u&&u.push(r,S,O,O+1)}}else s=$F(i,e,h,s,!1);const y=i.outputs;let E;if(m&&null!==y&&(E=y[r])){const w=E.length;if(w)for(let I=0;I<w;I+=2){const Y=e[E[I]][E[I+1]].subscribe(s),ye=g.length;g.push(s,Y),u&&u.push(r,i.index,ye,-(ye+1))}}}(s,r,r[Ke],o,n,e,i),$e}function HF(n,e,t,i){try{return ss(6,e,t),!1!==t(i)}catch(r){return cF(n,r),!1}finally{ss(7,e,t)}}function $F(n,e,t,i,r){return function s(o){if(o===Function)return i;Rm(n.componentOffset>-1?nr(n.index,e):e);let l=HF(e,t,i,o),u=s.__ngNextListenerFn__;for(;u;)l=HF(e,t,u,o)&&l,u=u.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function de(n=1){return function OC(n){return(We.lFrame.contextLView=function MC(n,e){for(;n>0;)e=e[Do],n--;return e}(n,We.lFrame.contextLView))[Vn]}(n)}function bK(n,e){let t=null;const i=function iC(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?bh(n,s,!0):Ag(i,s))return r}else t=r}return t}function VE(n){const e=ee()[Rn][mi];if(!e.projection){const i=e.projection=zu(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?bK(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function BE(n,e=0,t){const i=ee(),r=St(),s=vf(r,pt+n,16,null,t||null);null===s.projection&&(s.projection=e),Ou(),(!i[Js]||sc())&&32!=(32&s.flags)&&function T9(n,e,t){WM(e[Ke],0,e,t,mD(n,t,e),UM(t.parent||e[mi],t,e))}(r,i,s)}function UE(n,e,t){return jE(n,"",e,"",t),UE}function jE(n,e,t,i,r){const s=ee(),o=bf(s,e,t,i);return o!==at&&Ns(St(),gn(),s,n,o,s[Ke],r,!1),jE}function HE(n,e){return n<<17|e<<2}function _c(n){return n>>17&32767}function g1(n){return 2|n}function Qu(n){return(131068&n)>>2}function m1(n,e){return-131069&n|e<<2}function _1(n){return 1|n}function JF(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?_c(s):Qu(s),l=!1;for(;0!==a&&(!1===l||o);){const h=n[a+1];SK(n[a],e)&&(l=!0,n[a+1]=i?_1(h):g1(h)),a=i?_c(h):Qu(h)}l&&(n[t+1]=i?g1(s):_1(s))}function SK(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&gl(n,e)>=0}const Pi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function XF(n){return n.substring(Pi.key,Pi.keyEnd)}function e2(n,e){const t=Pi.textEnd;return t===e?-1:(e=Pi.keyEnd=function xK(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Pi.key=e,t),Rf(n,e,t))}function Rf(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function gt(n,e){return function xo(n,e,t,i){const r=ee(),s=St(),o=ir(2);s.firstUpdatePass&&a2(s,n,o,i),e!==at&&vr(r,o,e)&&c2(s,s.data[Ni()],r,r[Ke],n,r[o+1]=function HK(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=G(mc(n)))),n}(e,t),i,o)}(n,e,null,!0),gt}function Ju(n){!function Po(n,e,t,i){const r=St(),s=ir(2);r.firstUpdatePass&&a2(r,null,s,i);const o=ee();if(t!==at&&vr(o,s,t)){const a=r.data[Ni()];if(d2(a,i)&&!o2(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=V(l,t||"")),p1(r,a,o,t,i)}else!function jK(n,e,t,i,r,s,o,a){r===at&&(r=Ot);let l=0,u=0,h=0<r.length?r[0]:null,g=0<s.length?s[0]:null;for(;null!==h||null!==g;){const m=l<r.length?r[l+1]:void 0,y=u<s.length?s[u+1]:void 0;let w,E=null;h===g?(l+=2,u+=2,m!==y&&(E=g,w=y)):null===g||null!==h&&h<g?(l+=2,E=h):(u+=2,E=g,w=y),null!==E&&c2(n,e,t,i,E,w,o,a),h=l<r.length?r[l]:null,g=u<s.length?s[u]:null}}(r,a,o,o[Ke],o[s+1],o[s+1]=function BK(n,e,t){if(null==t||""===t)return Ot;const i=[],r=mc(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(UK,Ea,n,!0)}function Ea(n,e){for(let t=function RK(n){return function n2(n){Pi.key=0,Pi.keyEnd=0,Pi.value=0,Pi.valueEnd=0,Pi.textEnd=n.length}(n),e2(n,Rf(n,0,Pi.textEnd))}(e);t>=0;t=e2(e,t))Or(n,XF(e),!0)}function o2(n,e){return e>=n.expandoStartIndex}function a2(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Ni()],o=o2(n,t);d2(s,i)&&null===e&&!o&&(e=!1),e=function kK(n,e,t,i){const r=function Mh(n){const e=We.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=jm(t=y1(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=y1(r,n,e,t,i),null===s){let l=function FK(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Qu(i))return n[_c(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=y1(null,n,e,l[1],i),l=jm(l,e.attrs,i),function LK(n,e,t,i){n[_c(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function VK(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=jm(i,n[s].hostAttrs,t);return jm(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function CK(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=_c(o),l=Qu(o);n[i]=t;let h,u=!1;if(Array.isArray(t)?(h=t[1],(null===h||gl(t,h)>0)&&(u=!0)):h=t,r)if(0!==l){const m=_c(n[a+1]);n[i+1]=HE(m,a),0!==m&&(n[m+1]=m1(n[m+1],i)),n[a+1]=function IK(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=HE(a,0),0!==a&&(n[a+1]=m1(n[a+1],i)),a=i;else n[i+1]=HE(l,0),0===a?a=i:n[l+1]=m1(n[l+1],i),l=i;u&&(n[i+1]=g1(n[i+1])),JF(n,h,i,!0),JF(n,h,i,!1),function DK(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&gl(s,e)>=0&&(t[i+1]=_1(t[i+1]))}(e,h,n,i,s),o=HE(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function y1(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=jm(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function jm(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Or(n,o,!!t||e[++s]))}return void 0===n?null:n}function UK(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Or(n,i,t)}function c2(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,u=l[a+1],h=function TK(n){return 1==(1&n)}(u)?u2(l,e,t,r,Qu(u),o):void 0;$E(h)||($E(s)||function wK(n){return 2==(2&n)}(u)&&(s=u2(l,null,t,r,a,o)),function D9(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:c.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=c.Important),n.setStyle(t,i,r,s))}}(i,o,ll(Ni(),t),r,s))}function u2(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],u=Array.isArray(l),h=u?l[1]:l,g=null===h;let m=t[r+1];m===at&&(m=g?Ot:void 0);let y=g?cm(m,i):h===i?m:void 0;if(u&&!$E(y)&&(y=cm(l,i)),$E(y)&&(a=y,o))return a;const E=n[r+1];r=o?_c(E):Qu(E)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=cm(l,i))}return a}function $E(n){return void 0!==n}function d2(n,e){return 0!=(n.flags&(e?8:16))}function yt(n,e=""){const t=ee(),i=St(),r=n+pt,s=i.firstCreatePass?vf(i,r,1,e,null):i.data[r],o=h2(i,t,s,e,n);t[r]=o,oc()&&uE(i,t,o,s),os(s,!1)}let h2=(n,e,t,i,r)=>(ca(!0),function oE(n,e){return n.createText(e)}(e[Ke],i));function br(n){return yc("",n,""),br}function yc(n,e,t){const i=ee(),r=bf(i,n,e,t);return r!==at&&El(i,Ni(),r),yc}function GE(n,e,t,i,r){const s=ee(),o=wf(s,n,e,t,i,r);return o!==at&&El(s,Ni(),o),GE}function ro(n,e,t){const i=ee();return vr(i,to(),e)&&Ns(St(),gn(),i,n,e,i[Ke],t,!0),ro}const Xu=void 0;var uZ=["en",[["a","p"],["AM","PM"],Xu],[["AM","PM"],Xu,Xu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xu,"{1} 'at' {0}",Xu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function cZ(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Nf={};function Lr(n){const e=function dZ(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=x2(e);if(t)return t;const i=e.split("-")[0];if(t=x2(i),t)return t;if("en"===i)return uZ;throw new X(701,!1)}function x2(n){return n in Nf||(Nf[n]=un.ng&&un.ng.common&&un.ng.common.locales&&un.ng.common.locales[n]),Nf[n]}var En=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(En||{});const xf="en-US";let P2=xf;function b1(n,e,t,i,r){if(n=Ce(n),Array.isArray(n))for(let s=0;s<n.length;s++)b1(n[s],e,t,i,r);else{const s=St(),o=ee(),a=Ai();let l=Zu(n)?n:Ce(n.provide);const u=mk(n),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(Zu(n)||!n.multi){const y=new lc(u,r,R),E=I1(l,e,r?h:h+m,g);-1===E?(tm($h(a,o),s,l),w1(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[E]=y,o[E]=y)}else{const y=I1(l,e,h+m,g),E=I1(l,e,h,h+m),I=E>=0&&t[E];if(r&&!I||!r&&!(y>=0&&t[y])){tm($h(a,o),s,l);const O=function lY(n,e,t,i,r){const s=new lc(n,t,R);return s.multi=[],s.index=e,s.componentProviders=0,iL(s,r,i&&!t),s}(r?aY:oY,t.length,r,i,u);!r&&I&&(t[E].providerFactory=O),w1(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(O),o.push(O)}else w1(s,n,y>-1?y:E,iL(t[r?E:y],u,!r&&i));!r&&i&&I&&t[E].componentProviders++}}}function w1(n,e,t,i){const r=Zu(e),s=function tq(n){return!!n.useClass}(e);if(r||s){const l=(s?Ce(e.useClass):e).prototype.ngOnDestroy;if(l){const u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const h=u.indexOf(t);-1===h?u.push(t,[i,l]):u[h+1].push(i,l)}else u.push(t,l)}}}function iL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function I1(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function oY(n,e,t,i){return T1(this.multi,[])}function aY(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=hl(t,t[Te],this.providerFactory.index,i);s=a.slice(0,o),T1(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],T1(r,s);return s}function T1(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function sn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function sY(n,e,t){const i=St();if(i.firstCreatePass){const r=As(n);b1(t,i.data,i.blueprint,r,!0),b1(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class ed{}class rL{}class C1 extends ed{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mF(this);const r=yr(e);this._bootstrapComponents=vl(r.bootstrap),this._r3Injector=Rk(e,t,[{provide:ed,useValue:this},{provide:TE,useValue:this.componentFactoryResolver},...i],G(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class D1 extends rL{constructor(e){super(),this.moduleType=e}create(e){return new C1(this.moduleType,e,[])}}class sL extends ed{constructor(e){super(),this.componentFactoryResolver=new mF(this),this.instance=null;const t=new uf([...e.providers,{provide:ed,useValue:this},{provide:TE,useValue:this.componentFactoryResolver}],e.parent||_E(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function S1(n,e,t=null){return new sL({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let dY=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=hk(0,t.type),r=i.length>0?S1([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=le({token:n,providedIn:"environment",factory:()=>new n(W(cs))})}return n})();function xs(n){n.getStandaloneInjector=e=>e.get(dY).getOrCreateStandaloneInjector(n)}function Oo(n,e,t,i){return fL(ee(),Ri(),n,e,t,i)}function Pf(n,e,t,i,r){return function pL(n,e,t,i,r,s,o){const a=e+t;return Yu(n,a,r,s)?ma(n,a+2,o?i.call(o,r,s):i(r,s)):Km(n,a+2)}(ee(),Ri(),n,e,t,i,r)}function ZE(n,e,t,i,r,s){return function gL(n,e,t,i,r,s,o,a){const l=e+t;return function ME(n,e,t,i,r){const s=Yu(n,e,t,i);return vr(n,e+2,r)||s}(n,l,r,s,o)?ma(n,l+3,a?i.call(a,r,s,o):i(r,s,o)):Km(n,l+3)}(ee(),Ri(),n,e,t,i,r,s)}function hL(n,e,t,i,r,s,o){return function mL(n,e,t,i,r,s,o,a,l){const u=e+t;return function io(n,e,t,i,r,s){const o=Yu(n,e,t,i);return Yu(n,e+2,r,s)||o}(n,u,r,s,o,a)?ma(n,u+4,l?i.call(l,r,s,o,a):i(r,s,o,a)):Km(n,u+4)}(ee(),Ri(),n,e,t,i,r,s,o)}function Km(n,e){const t=n[e];return t===at?void 0:t}function fL(n,e,t,i,r,s){const o=e+t;return vr(n,o,r)?ma(n,o+1,s?i.call(s,r):i(r)):Km(n,o+1)}function YE(n,e){const t=St();let i;const r=n+pt;t.firstCreatePass?(i=function DY(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=ol(i.type)),a=Ji(R);try{const l=Hh(!1),u=s();return Hh(l),function fK(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,ee(),r,u),u}finally{Ji(a)}}function QE(n,e,t){const i=n+pt,r=ee(),s=rc(r,i);return function Zm(n,e){return n[Te].data[e].pure}(r,i)?fL(r,Ri(),e,s.transform,t,s):s.transform(t)}function xY(){return this._results[Symbol.iterator]()}class R1{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Se)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=R1.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=xY)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function as(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function am(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function OY(n,e,t,i=!0){const r=e[Te];if(function y9(n,e,t,i){const r=ti+i,s=t.length;i>0&&(t[r-1][ns]=e),i<s-ti?(e[ns]=t[r],zh(t,ti+i,e)):(t.push(e),e[ns]=null),e[Dt]=t;const o=e[Xl];null!==o&&t!==o&&function v9(n,e){const t=n[la];e[Rn]!==e[Dt][Dt][Rn]&&(n[qv]=!0),null===t?n[la]=[e]:t.push(e)}(o,e);const a=e[Ss];null!==a&&a.insertView(n),e[Qe]|=128}(r,e,n,t),i){const s=yD(t,n),o=e[Ke],a=cE(o,n[is]);null!==a&&function g9(n,e,t,i,r,s){i[An]=r,i[mi]=e,wm(n,i,t,1,r,s)}(r,n[mi],o,e,a,s)}}let tt=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=FY}return n})();const MY=tt,kY=class extends MY{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function PY(n,e,t,i){const r=e.tView,a=AE(n,r,t,4096&n[Qe]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Xl]=n[e.index];const u=n[Ss];return null!==u&&(a[Ss]=u.createEmbeddedView(r)),a1(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new Pm(r)}};function FY(){return JE(Ai(),ee())}function JE(n,e){return 4&n.type?new kY(e,n,pf(n,e)):null}let so=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=HY}return n})();function HY(){return TL(Ai(),ee())}const $Y=so,wL=class extends $Y{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return pf(this._hostTNode,this._hostLView)}get injector(){return new xi(this._hostTNode,this._hostLView)}get parentInjector(){const e=Gh(this._hostTNode,this._hostLView);if(Jg(e)){const t=dl(e,this._hostLView),i=Vu(e);return new xi(t[Te].data[i+8],t)}return new xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=IL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ti}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,s){const o=e&&!function Gu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const w=t||{};a=w.index,i=w.injector,r=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const l=o?e:new Om(st(e)),u=i||this.parentInjector;if(!s&&null==l.ngModule){const I=(o?u:this.parentInjector).get(cs,null);I&&(s=I)}st(l.componentType??{});const y=l.create(u,r,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function EC(n){return er(n[Dt])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const u=r[Dt],h=new wL(u,u[mi],u[Dt]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return OY(a,r,o,!i),e.attachToViewContainerRef(),zh(N1(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=IL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=lE(this._lContainer,t);i&&(Wh(N1(this._lContainer),t),pD(i[Te],i))}detach(e){const t=this._adjustIndex(e,-1),i=lE(this._lContainer,t);return i&&null!=Wh(N1(this._lContainer),t)?new Pm(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function IL(n){return n[8]}function N1(n){return n[8]||(n[8]=[])}function TL(n,e){let t;const i=e[n.index];return er(i)?t=i:(t=rF(i,e,null,n),e[n.index]=t,RE(e,t)),CL(t,e,n,i),new wL(t,n,e)}let CL=function DL(n,e,t,i){if(n[is])return;let r;r=8&t.type?rn(i):function GY(n,e){const t=n[Ke],i=t.createComment(""),r=tr(e,n);return Ku(t,cE(t,r),i,function I9(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[is]=r};class x1{constructor(e){this.queryList=e,this.matches=null}clone(){return new x1(this.queryList)}setDirty(){this.queryList.setDirty()}}class P1{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new P1(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==xL(e,t).matches&&this.queries[t].setDirty()}}class SL{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class O1{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new O1(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class M1{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new M1(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,qY(t,s)),this.matchTNodeWithReadOption(e,t,Uu(t,e,s,!1,!1))}else i===tt?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Uu(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Rt||r===so||r===tt&&4&t.type)this.addMatch(t.index,-2);else{const s=Uu(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function qY(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function ZY(n,e,t,i){return-1===t?function KY(n,e){return 11&n.type?pf(n,e):4&n.type?JE(n,e):null}(e,n):-2===t?function YY(n,e,t){return t===Rt?pf(e,n):t===tt?JE(e,n):t===so?TL(e,n):void 0}(n,e,i):hl(n,n[Te],t,e)}function AL(n,e,t,i){const r=e[Ss].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const u=o[l];a.push(u<0?null:ZY(e,s[u],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function k1(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=AL(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const u=s[a+1],h=e[-l];for(let g=ti;g<h.length;g++){const m=h[g];m[Xl]===m[Dt]&&k1(m[Te],m,u,i)}if(null!==h[la]){const g=h[la];for(let m=0;m<g.length;m++){const y=g[m];k1(y[Te],y,u,i)}}}}}return i}function Ze(n){const e=ee(),t=St(),i=w0();Kg(i+1);const r=xL(t,i);if(n.dirty&&function m0(n){return 4==(4&n[Qe])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?k1(t,e,i,[]):AL(t,e,r,i);n.reset(s,wq),n.notifyOnChanges()}return!0}return!1}function hs(n,e,t){const i=St();i.firstCreatePass&&(NL(i,new SL(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),RL(i,ee(),e)}function Vt(n,e,t,i){const r=St();if(r.firstCreatePass){const s=Ai();NL(r,new SL(e,t,i),s.index),function JY(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}RL(r,ee(),t)}function Ye(){return function QY(n,e){return n[Ss].queries[e].queryList}(ee(),w0())}function RL(n,e,t){const i=new R1(4==(4&t));(function t7(n,e,t,i){const r=oF(e);r.push(t),n.firstCreatePass&&aF(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Ss]&&(e[Ss]=new P1),e[Ss].queries.push(new x1(i))}function NL(n,e,t){null===n.queries&&(n.queries=new O1),n.queries.track(new M1(e,t))}function xL(n,e){return n.queries.getByIndex(e)}function ji(n,e){return JE(n,e)}const j1=new ve("Application Initializer");let H1=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=be(j1,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(Um(s))t.push(s);else if(BF(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),KL=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Ps=new ve("LocaleId",{providedIn:"root",factory:()=>be(Ps,_t.Optional|_t.SkipSelf)||function vQ(){return typeof $localize<"u"&&$localize.locale||xf}()});let ZL=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pn(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class wQ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let YL=(()=>{class n{compileModuleSync(t){return new D1(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=vl(yr(t).declarations).reduce((o,a)=>{const l=st(a);return l&&o.push(new Om(l)),o},[]);return new wQ(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const eV=new ve(""),nb=new ve("");let q1,z1=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,q1||(function GQ(n){q1=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(W(ot),W(W1),W(nb))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),W1=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return q1?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),vc=null;const tV=new ve("AllowMultipleToken"),K1=new ve("PlatformDestroyListeners"),Z1=new ve("appBootstrapListener");class iV{constructor(e,t){this.name=e,this.token=t}}function sV(n,e,t=[]){const i=`Platform: ${e}`,r=new ve(i);return(s=[])=>{let o=Y1();if(!o||o.injector.get(tV,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function qQ(n){if(vc&&!vc.get(tV,!1))throw new X(400,!1);(function nV(){!function fC(n){Sh=n}(()=>{throw new X(600,!1)})})(),vc=n;const e=n.get(aV);(function rV(n){n.get(_k,null)?.forEach(t=>t())})(n)}(function oV(n=[],e){return sr.create({name:e,providers:[{provide:ND,useValue:"platform"},{provide:K1,useValue:new Set([()=>vc=null])},...n]})}(a,i))}return function ZQ(n){const e=Y1();if(!e)throw new X(401,!1);return e}()}}function Y1(){return vc?.get(aV)??null}let aV=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function YQ(n="zone.js",e){return"noop"===n?new Lq:"zone.js"===n?new ot(e):n}(i?.ngZone,function lV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function uY(n,e,t){return new C1(n,e,t)}(t.moduleType,this.injector,function fV(n){return[{provide:ot,useFactory:n},{provide:Dm,multi:!0,useFactory:()=>{const e=be(JQ,{optional:!0});return()=>e.initialize()}},{provide:hV,useFactory:QQ},{provide:Mk,useFactory:kk}]}(()=>r)),o=s.injector.get(yl,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{ib(this._modules,s),a.unsubscribe()})}),function cV(n,e,t){try{const i=t();return Um(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(H1);return a.runInitializers(),a.donePromise.then(()=>(function O2(n){es(n,"Expected localeId to be defined"),"string"==typeof n&&(P2=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ps,xf)||xf),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=uV({},i);return function zQ(n,e,t){const i=new D1(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Ec);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new X(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(K1,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(W(sr))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function uV(n,e){return Array.isArray(e)?e.reduce(uV,n):{...n,...e}}let Ec=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=be(hV),this.zoneIsStable=be(Mk),this.componentTypes=[],this.components=[],this.isStable=be(ZL).hasPendingTasks.pipe(Bt(t=>t?Ee(!1):this.zoneIsStable),Eo(),qs()),this._injector=be(cs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof wk;if(!this._injector.get(H1).done)throw!r&&function el(n){const e=st(n)||Ln(n)||ei(n);return null!==e&&e.standalone}(t),new X(405,!1);let o;o=r?t:this._injector.get(TE).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function WQ(n){return n.isBoundToModule}(o)?void 0:this._injector.get(ed),u=o.create(sr.NULL,[],i||o.selector,a),h=u.location.nativeElement,g=u.injector.get(eV,null);return g?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),ib(this.components,u),g?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new X(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;ib(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(Z1,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ib(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ib(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const hV=new ve("",{providedIn:"root",factory:()=>be(yl).handleError.bind(void 0)});function QQ(){const n=be(ot),e=be(yl);return t=>n.runOutsideAngular(()=>e.handleError(t))}let JQ=(()=>{class n{constructor(){this.zone=be(ot),this.applicationRef=be(Ec)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Os=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=eJ}return n})();function eJ(n){return function tJ(n,e,t){if(sl(n)&&!t){const i=nr(n.index,e);return new Pm(i,i)}return 47&n.type?new Pm(e[Rn],e):null}(Ai(),ee(),16==(16&n))}class yV{constructor(){}supports(e){return OE(e)}create(e){return new aJ(e)}}const oJ=(n,e)=>e;class aJ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||oJ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<EV(i,r,s)?t:i,a=EV(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const u=a-r,h=l-r;if(u!=h){for(let m=0;m<u;m++){const y=m<s.length?s[m]:s[m]=0,E=y+m;h<=E&&E<u&&(s[m]=y+1)}s[o.previousIndex]=h-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!OE(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function W7(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new lJ(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new vV),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class lJ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cJ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class vV{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new cJ,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EV(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class bV{constructor(){}supports(e){return e instanceof Map||l1(e)}create(){return new uJ}}class uJ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||l1(e)))throw new X(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new dJ(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class dJ{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function wV(){return new ob([new yV])}let ob=(()=>{class n{static#e=this.\u0275prov=le({token:n,providedIn:"root",factory:wV});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||wV()),deps:[[n,new Zh,new hc]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new X(901,!1)}}return n})();function IV(){return new Jm([new bV])}let Jm=(()=>{class n{static#e=this.\u0275prov=le({token:n,providedIn:"root",factory:IV});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||IV()),deps:[[n,new Zh,new hc]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new X(901,!1)}}return n})();const pJ=sV(null,"core",[]);let gJ=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(W(Ec))};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})();function nS(n,e){const t=st(n),i=e.elementInjector||_E();return new Om(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}let iS=null;function bc(){return iS}class RJ{}const Ei=new ve("DocumentToken");let rS=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:function(){return be(xJ)},providedIn:"platform"})}return n})();const NJ=new ve("Location Initialized");let xJ=(()=>{class n extends rS{constructor(){super(),this._doc=be(Ei),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bc().getBaseHref(this._doc)}onPopState(t){const i=bc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=bc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function sS(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function PV(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function bl(n){return n&&"?"!==n[0]?"?"+n:n}let nd=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:function(){return be(MV)},providedIn:"root"})}return n})();const OV=new ve("appBaseHref");let MV=(()=>{class n extends nd{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??be(Ei).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sS(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+bl(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+bl(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+bl(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(W(rS),W(OV,8))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PJ=(()=>{class n extends nd{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=sS(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+bl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+bl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(W(rS),W(OV,8))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),oS=(()=>{class n{constructor(t){this._subject=new Se,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function kJ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(PV(kV(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+bl(i))}normalize(t){return n.stripTrailingSlash(function MJ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,kV(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bl(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=bl;static#t=this.joinWithSlash=sS;static#n=this.stripTrailingSlash=PV;static#i=this.\u0275fac=function(i){return new(i||n)(W(nd))};static#r=this.\u0275prov=le({token:n,factory:function(){return function OJ(){return new oS(W(nd))}()},providedIn:"root"})}return n})();function kV(n){return n.replace(/\/index.html$/,"")}var Hi=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Hi||{}),$t=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}($t||{}),Ms=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ms||{}),ui=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(ui||{});function cb(n,e){return ao(Lr(n)[En.DateFormat],e)}function ub(n,e){return ao(Lr(n)[En.TimeFormat],e)}function db(n,e){return ao(Lr(n)[En.DateTimeFormat],e)}function oo(n,e){const t=Lr(n),i=t[En.NumberSymbols][e];if(typeof i>"u"){if(e===ui.CurrencyDecimal)return t[En.NumberSymbols][ui.Decimal];if(e===ui.CurrencyGroup)return t[En.NumberSymbols][ui.Group]}return i}function VV(n){if(!n[En.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[En.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ao(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function cS(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const qJ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xm={},KJ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var wl=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(wl||{}),Kt=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Kt||{}),Zt=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Zt||{});function uS(n,e,t,i){let r=function iX(n){if(jV(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return hb(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(qJ))return function rX(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,l=Number(n[6]||0),u=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,l,u),e}(i)}const e=new Date(n);if(!jV(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Il(t,e)||e;let a,o=[];for(;e;){if(a=KJ.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const h=o.pop();if(!h)break;e=h}}let l=r.getTimezoneOffset();i&&(l=UV(i,l),r=function nX(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function tX(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(UV(e,r)-r))}(r,i,!0));let u="";return o.forEach(h=>{const g=function eX(n){if(hS[n])return hS[n];let e;switch(n){case"G":case"GG":case"GGG":e=bn(Zt.Eras,$t.Abbreviated);break;case"GGGG":e=bn(Zt.Eras,$t.Wide);break;case"GGGGG":e=bn(Zt.Eras,$t.Narrow);break;case"y":e=bi(Kt.FullYear,1,0,!1,!0);break;case"yy":e=bi(Kt.FullYear,2,0,!0,!0);break;case"yyy":e=bi(Kt.FullYear,3,0,!1,!0);break;case"yyyy":e=bi(Kt.FullYear,4,0,!1,!0);break;case"Y":e=mb(1);break;case"YY":e=mb(2,!0);break;case"YYY":e=mb(3);break;case"YYYY":e=mb(4);break;case"M":case"L":e=bi(Kt.Month,1,1);break;case"MM":case"LL":e=bi(Kt.Month,2,1);break;case"MMM":e=bn(Zt.Months,$t.Abbreviated);break;case"MMMM":e=bn(Zt.Months,$t.Wide);break;case"MMMMM":e=bn(Zt.Months,$t.Narrow);break;case"LLL":e=bn(Zt.Months,$t.Abbreviated,Hi.Standalone);break;case"LLLL":e=bn(Zt.Months,$t.Wide,Hi.Standalone);break;case"LLLLL":e=bn(Zt.Months,$t.Narrow,Hi.Standalone);break;case"w":e=dS(1);break;case"ww":e=dS(2);break;case"W":e=dS(1,!0);break;case"d":e=bi(Kt.Date,1);break;case"dd":e=bi(Kt.Date,2);break;case"c":case"cc":e=bi(Kt.Day,1);break;case"ccc":e=bn(Zt.Days,$t.Abbreviated,Hi.Standalone);break;case"cccc":e=bn(Zt.Days,$t.Wide,Hi.Standalone);break;case"ccccc":e=bn(Zt.Days,$t.Narrow,Hi.Standalone);break;case"cccccc":e=bn(Zt.Days,$t.Short,Hi.Standalone);break;case"E":case"EE":case"EEE":e=bn(Zt.Days,$t.Abbreviated);break;case"EEEE":e=bn(Zt.Days,$t.Wide);break;case"EEEEE":e=bn(Zt.Days,$t.Narrow);break;case"EEEEEE":e=bn(Zt.Days,$t.Short);break;case"a":case"aa":case"aaa":e=bn(Zt.DayPeriods,$t.Abbreviated);break;case"aaaa":e=bn(Zt.DayPeriods,$t.Wide);break;case"aaaaa":e=bn(Zt.DayPeriods,$t.Narrow);break;case"b":case"bb":case"bbb":e=bn(Zt.DayPeriods,$t.Abbreviated,Hi.Standalone,!0);break;case"bbbb":e=bn(Zt.DayPeriods,$t.Wide,Hi.Standalone,!0);break;case"bbbbb":e=bn(Zt.DayPeriods,$t.Narrow,Hi.Standalone,!0);break;case"B":case"BB":case"BBB":e=bn(Zt.DayPeriods,$t.Abbreviated,Hi.Format,!0);break;case"BBBB":e=bn(Zt.DayPeriods,$t.Wide,Hi.Format,!0);break;case"BBBBB":e=bn(Zt.DayPeriods,$t.Narrow,Hi.Format,!0);break;case"h":e=bi(Kt.Hours,1,-12);break;case"hh":e=bi(Kt.Hours,2,-12);break;case"H":e=bi(Kt.Hours,1);break;case"HH":e=bi(Kt.Hours,2);break;case"m":e=bi(Kt.Minutes,1);break;case"mm":e=bi(Kt.Minutes,2);break;case"s":e=bi(Kt.Seconds,1);break;case"ss":e=bi(Kt.Seconds,2);break;case"S":e=bi(Kt.FractionalSeconds,1);break;case"SS":e=bi(Kt.FractionalSeconds,2);break;case"SSS":e=bi(Kt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=pb(wl.Short);break;case"ZZZZZ":e=pb(wl.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=pb(wl.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=pb(wl.Long);break;default:return null}return hS[n]=e,e}(h);u+=g?g(r,t,l):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function hb(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Il(n,e){const t=function LJ(n){return Lr(n)[En.LocaleId]}(n);if(Xm[t]=Xm[t]||{},Xm[t][e])return Xm[t][e];let i="";switch(e){case"shortDate":i=cb(n,Ms.Short);break;case"mediumDate":i=cb(n,Ms.Medium);break;case"longDate":i=cb(n,Ms.Long);break;case"fullDate":i=cb(n,Ms.Full);break;case"shortTime":i=ub(n,Ms.Short);break;case"mediumTime":i=ub(n,Ms.Medium);break;case"longTime":i=ub(n,Ms.Long);break;case"fullTime":i=ub(n,Ms.Full);break;case"short":const r=Il(n,"shortTime"),s=Il(n,"shortDate");i=fb(db(n,Ms.Short),[r,s]);break;case"medium":const o=Il(n,"mediumTime"),a=Il(n,"mediumDate");i=fb(db(n,Ms.Medium),[o,a]);break;case"long":const l=Il(n,"longTime"),u=Il(n,"longDate");i=fb(db(n,Ms.Long),[l,u]);break;case"full":const h=Il(n,"fullTime"),g=Il(n,"fullDate");i=fb(db(n,Ms.Full),[h,g])}return i&&(Xm[t][e]=i),i}function fb(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function Mo(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function bi(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function YJ(n,e){switch(n){case Kt.FullYear:return e.getFullYear();case Kt.Month:return e.getMonth();case Kt.Date:return e.getDate();case Kt.Hours:return e.getHours();case Kt.Minutes:return e.getMinutes();case Kt.Seconds:return e.getSeconds();case Kt.FractionalSeconds:return e.getMilliseconds();case Kt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===Kt.Hours)0===a&&-12===t&&(a=12);else if(n===Kt.FractionalSeconds)return function ZJ(n,e){return Mo(n,3).substring(0,e)}(a,e);const l=oo(o,ui.MinusSign);return Mo(a,e,l,i,r)}}function bn(n,e,t=Hi.Format,i=!1){return function(r,s){return function QJ(n,e,t,i,r,s){switch(t){case Zt.Months:return function aS(n,e,t){const i=Lr(n),s=ao([i[En.MonthsFormat],i[En.MonthsStandalone]],e);return ao(s,t)}(e,r,i)[n.getMonth()];case Zt.Days:return function LV(n,e,t){const i=Lr(n),s=ao([i[En.DaysFormat],i[En.DaysStandalone]],e);return ao(s,t)}(e,r,i)[n.getDay()];case Zt.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const u=function HJ(n){const e=Lr(n);return VV(e),(e[En.ExtraData][2]||[]).map(i=>"string"==typeof i?cS(i):[cS(i[0]),cS(i[1])])}(e),h=function $J(n,e,t){const i=Lr(n);VV(i);const s=ao([i[En.ExtraData][0],i[En.ExtraData][1]],e)||[];return ao(s,t)||[]}(e,r,i),g=u.findIndex(m=>{if(Array.isArray(m)){const[y,E]=m,w=o>=y.hours&&a>=y.minutes,I=o<E.hours||o===E.hours&&a<E.minutes;if(y.hours<E.hours){if(w&&I)return!0}else if(w||I)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(-1!==g)return h[g]}return function VJ(n,e,t){const i=Lr(n),s=ao([i[En.DayPeriodsFormat],i[En.DayPeriodsStandalone]],e);return ao(s,t)}(e,r,i)[o<12?0:1];case Zt.Eras:return function BJ(n,e){return ao(Lr(n)[En.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function pb(n){return function(e,t,i){const r=-1*i,s=oo(t,ui.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case wl.Short:return(r>=0?"+":"")+Mo(o,2,s)+Mo(Math.abs(r%60),2,s);case wl.ShortGMT:return"GMT"+(r>=0?"+":"")+Mo(o,1,s);case wl.Long:return"GMT"+(r>=0?"+":"")+Mo(o,2,s)+":"+Mo(Math.abs(r%60),2,s);case wl.Extended:return 0===i?"Z":(r>=0?"+":"")+Mo(o,2,s)+":"+Mo(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const JJ=0,gb=4;function BV(n){return hb(n.getFullYear(),n.getMonth(),n.getDate()+(gb-n.getDay()))}function dS(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=BV(t),o=function XJ(n){const e=hb(n,JJ,1).getDay();return hb(n,0,1+(e<=gb?gb:gb+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return Mo(r,n,oo(i,ui.MinusSign))}}function mb(n,e=!1){return function(t,i){return Mo(BV(t).getFullYear(),n,oo(i,ui.MinusSign),e)}}const hS={};function UV(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function jV(n){return n instanceof Date&&!isNaN(n.valueOf())}const yS=/\s+/,zV=[];let vS=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=zV,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(yS):zV}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(yS):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(yS).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(R(ob),R(Jm),R(Rt),R(us))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class yX{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ba=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new yX(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),qV(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{qV(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(R(so),R(tt),R(ob))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function qV(n,e){n.context.$implicit=e.item}let ko=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new vX,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){KV("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){KV("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(R(so),R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class vX{constructor(){this.$implicit=null,this.ngIf=null}}function KV(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${G(e)}'.`)}let Tl=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(R(so))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[qt]})}return n})();class TX{createSubscription(e,t){return u0(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){u0(()=>e.unsubscribe())}}class CX{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const DX=new CX,SX=new TX;let YV=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Um(t))return DX;if(BF(t))return SX;throw function Fo(n,e){return new X(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(R(Os,16))};static#t=this.\u0275pipe=Bi({name:"async",type:n,pure:!1,standalone:!0})}return n})(),QV=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=Bi({name:"json",type:n,pure:!1,standalone:!0})}return n})(),TS=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})();function yb(n){return"server"===n}let qX=(()=>{class n{static#e=this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new KX(W(Ei),window)})}return n})();class KX{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ZX(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class vee extends RJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class SS extends vee{static makeCurrent(){!function AJ(n){iS||(iS=n)}(new SS)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Eee(){return n_=n_||document.querySelector("base"),n_?n_.getAttribute("href"):null}();return null==t?null:function bee(n){bb=bb||document.createElement("a"),bb.setAttribute("href",n);const e=bb.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){n_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function mX(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let bb,n_=null,Iee=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})();const AS=new ve("EventManagerPlugins");let rB=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new X(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(W(AS),W(ot))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})();class sB{constructor(e){this._doc=e}}const RS="ng-app-id";let oB=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yb(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${RS}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(RS),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(RS,this.appId),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(W(Ei),W(yE),W(yk,8),W(No))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})();const NS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xS=/%COMP%/g,See=new ve("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function lB(n,e){return e.map(t=>t.replace(xS,n))}let cB=(()=>{class n{constructor(t,i,r,s,o,a,l,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=yb(a),this.defaultRenderer=new PS(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Pr.ShadowDom&&(i={...i,encapsulation:Pr.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof dB?r.applyToHost(t):r instanceof OS&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case Pr.Emulated:s=new dB(l,u,i,this.appId,h,o,a,g);break;case Pr.ShadowDom:return new xee(l,u,t,i,o,a,this.nonce,g);default:s=new OS(l,u,i,h,o,a,g)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(W(rB),W(oB),W(yE),W(See),W(Ei),W(No),W(ot),W(yk))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})();class PS{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(NS[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(uB(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(uB(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new X(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=NS[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=NS[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(c.DashCase|c.Important)?e.style.setProperty(t,i,r&c.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&c.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=bc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function uB(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class xee extends PS{constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=lB(r.id,r.styles);for(const h of u){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class OS extends PS{constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?lB(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class dB extends OS{constructor(e,t,i,r,s,o,a,l){const u=r+"-"+i.id;super(e,t,i,s,o,a,l,u),this.contentAttr=function Aee(n){return"_ngcontent-%COMP%".replace(xS,n)}(u),this.hostAttr=function Ree(n){return"_nghost-%COMP%".replace(xS,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Pee=(()=>{class n extends sB{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(W(Ei))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})();const hB=["alt","control","meta","shift"],Oee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mee={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let kee=(()=>{class n extends sB{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),hB.forEach(u=>{const h=i.indexOf(u);h>-1&&(i.splice(h,1),o+=u+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=Oee[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),hB.forEach(o=>{o!==r&&(0,Mee[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(W(Ei))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})();const pB=[{provide:No,useValue:"browser"},{provide:_k,useValue:function Fee(){SS.makeCurrent()},multi:!0},{provide:Ei,useFactory:function Vee(){return function x9(n){bD=n}(document),document},deps:[]}],Bee=sV(pJ,"browser",pB),Uee=new ve(""),gB=[{provide:nb,useClass:class wee{addToWindow(e){un.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new X(5103,!1);return s},un.getAllAngularTestabilities=()=>e.getAllTestabilities(),un.getAllAngularRootElements=()=>e.getAllRootElements(),un.frameworkStabilizers||(un.frameworkStabilizers=[]),un.frameworkStabilizers.push(i=>{const r=un.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?bc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:eV,useClass:z1,deps:[ot,W1,nb]},{provide:z1,useClass:z1,deps:[ot,W1,nb]}],mB=[{provide:ND,useValue:"root"},{provide:yl,useFactory:function Lee(){return new yl},deps:[]},{provide:AS,useClass:Pee,multi:!0,deps:[Ei,ot,No]},{provide:AS,useClass:kee,multi:!0,deps:[Ei]},cB,oB,rB,{provide:GD,useExisting:cB},{provide:class YX{},useClass:Iee,deps:[]},[]];let jee=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:yE,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(W(Uee,12))};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({providers:[...mB,...gB],imports:[TS,gJ]})}return n})(),_B=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(W(Ei))};static#t=this.\u0275prov=le({token:n,factory:function(i){let r=null;return r=i?new i:function $ee(){return new _B(W(Ei))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;class kS extends Pe{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Zee extends Pe{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function FS(n,e,t,i,r=new Zee(n,t,i)){if(!r.closed)return e instanceof je?e.subscribe(r):mr(e)(r)}const bB={};function LS(...n){let e,t;return gr(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&zt(n[0])&&(n=n[0]),Yt(n,t).lift(new Yee(e))}class Yee{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Qee(e,this.resultSelector))}}class Qee extends kS{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(bB),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(FS(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===bB?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const wb=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function Ib(...n){return function Jee(){return J(1)}()(Ee(...n))}const Ic=new je(n=>n.complete());function Tb(n){return n?function Xee(n){return new je(e=>n.schedule(()=>e.complete()))}(n):Ic}function wB(n){return new je(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?x(t):Tb()).subscribe(e)})}function Lf(n,e){return new je(e?t=>e.schedule(ete,0,{error:n,subscriber:t}):t=>t.error(n))}function ete({error:n,subscriber:e}){e.error(n)}const IB=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Br(n){return e=>0===n?Tb():e.lift(new tte(n))}class tte{constructor(e){if(this.total=e,this.total<0)throw new IB}call(e,t){return t.subscribe(new nte(e,this.total))}}class nte extends Pe{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function Vf(...n){const e=n[n.length-1];return gr(e)?(n.pop(),t=>Ib(n,t,e)):t=>Ib(n,t)}function di(n,e){return function(i){return i.lift(new ite(n,e))}}class ite{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new rte(e,this.predicate,this.thisArg))}}class rte extends Pe{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function Cb(n=null){return e=>e.lift(new ste(n))}class ste{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ote(e,this.defaultValue))}}class ote extends Pe{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function TB(n=cte){return e=>e.lift(new ate(n))}class ate{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new lte(e,this.errorFactory))}}class lte extends Pe{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function cte(){return new wb}function Tc(n,e){const t=arguments.length>=2;return i=>i.pipe(n?di((r,s)=>n(r,s,i)):Jn,Br(1),t?Cb(e):TB(()=>new wb))}function i_(n,e){return Be(n,e,1)}function Cc(){}function wi(n,e,t){return function(r){return r.lift(new ute(n,e,t))}}class ute{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new dte(e,this.nextOrObserver,this.error,this.complete))}}class dte extends Pe{constructor(e,t,i,r){super(e),this._tapNext=Cc,this._tapError=Cc,this._tapComplete=Cc,this._tapError=i||Cc,this._tapComplete=r||Cc,D(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Cc,this._tapError=t.error||Cc,this._tapComplete=t.complete||Cc)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function Bf(n){return function(t){const i=new hte(n),r=t.lift(i);return i.caught=r}}class hte{constructor(e){this.selector=e}call(e,t){return t.subscribe(new fte(e,this.selector,this.caught))}}class fte extends Q{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new M(this);this.add(i);const r=ue(t,i);r!==i&&this.add(r)}}}function Uf(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new pte(n,e,t))}}class pte{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new gte(e,this.accumulator,this.seed,this.hasSeed))}}class gte extends Pe{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function VS(n){return function(t){return 0===n?Tb():t.lift(new mte(n))}}class mte{constructor(e){if(this.total=e,this.total<0)throw new IB}call(e,t){return t.subscribe(new _te(e,this.total))}}class _te extends Pe{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<i;s++){const o=t++%i;e.next(r[o])}}e.complete()}}class Ete{constructor(e){this.value=e}call(e,t){return t.subscribe(new bte(e,this.value))}}class bte extends Pe{constructor(e,t){super(e),this.value=t}_next(e){this.destination.next(this.value)}}function BS(n){return e=>e.lift(new wte(n))}class wte{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Ite(e,this.callback))}}class Ite extends Pe{constructor(e,t){super(e),this.add(new H(t))}}function dn(n){return e=>e.lift(new Tte(n))}class Tte{constructor(e){this.notifier=e}call(e,t){const i=new Cte(e),r=ue(this.notifier,new M(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class Cte extends Q{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const dt="primary",r_=Symbol("RouteTitle");class Dte{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jf(n){return new Dte(n)}function Ste(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function wa(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!CB(n[r],e[r]))return!1;return!0}function CB(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function DB(n){return n.length>0?n[n.length-1]:null}function Dc(n){return function Kee(n){return!!n&&(n instanceof je||"function"==typeof n.lift&&"function"==typeof n.subscribe)}(n)?n:Um(n)?x(Promise.resolve(n)):Ee(n)}const Rte={exact:function RB(n,e,t){if(!id(n.segments,e.segments)||!Db(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!RB(n.children[i],e.children[i],t))return!1;return!0},subset:NB},SB={exact:function Nte(n,e){return wa(n,e)},subset:function xte(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>CB(n[t],e[t]))},ignored:()=>!0};function AB(n,e,t){return Rte[t.paths](n.root,e.root,t.matrixParams)&&SB[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function NB(n,e,t){return xB(n,e,e.segments,t)}function xB(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!id(r,t)||e.hasChildren()||!Db(r,t,i))}if(n.segments.length===t.length){if(!id(n.segments,t)||!Db(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!NB(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(id(n.segments,r)&&Db(n.segments,r,i)&&n.children[dt])&&xB(n.children[dt],e,s,i)}}function Db(n,e,t){return e.every((i,r)=>SB[t](n[r].parameters,i.parameters))}class Hf{constructor(e=new on([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jf(this.queryParams)),this._queryParamMap}toString(){return Mte.serialize(this)}}class on{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sb(this)}}class s_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jf(this.parameters)),this._parameterMap}toString(){return MB(this)}}function id(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let o_=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:function(){return new US},providedIn:"root"})}return n})();class US{parse(e){const t=new zte(e);return new Hf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${a_(e.root,!0)}`,i=function Lte(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Ab(t)}=${Ab(r)}`).join("&"):`${Ab(t)}=${Ab(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function kte(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const Mte=new US;function Sb(n){return n.segments.map(e=>MB(e)).join("/")}function a_(n,e){if(!n.hasChildren())return Sb(n);if(e){const t=n.children[dt]?a_(n.children[dt],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==dt&&i.push(`${r}:${a_(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Ote(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===dt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==dt&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===dt?[a_(n.children[dt],!1)]:[`${r}:${a_(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dt]?`${Sb(n)}/${t[0]}`:`${Sb(n)}/(${t.join("//")})`}}function PB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ab(n){return PB(n).replace(/%3B/gi,";")}function jS(n){return PB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rb(n){return decodeURIComponent(n)}function OB(n){return Rb(n.replace(/\+/g,"%20"))}function MB(n){return`${jS(n.path)}${function Fte(n){return Object.keys(n).map(e=>`;${jS(e)}=${jS(n[e])}`).join("")}(n.parameters)}`}const Vte=/^[^\/()?;#]+/;function HS(n){const e=n.match(Vte);return e?e[0]:""}const Bte=/^[^\/()?;=#]+/,jte=/^[^=?&#]+/,$te=/^[^&#]+/;class zte{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new on([],{}):new on([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[dt]=new on(e,t)),i}parseSegment(){const e=HS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new s_(Rb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Ute(n){const e=n.match(Bte);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=HS(this.remaining);r&&(i=r,this.capture(i))}e[Rb(t)]=Rb(i)}parseQueryParam(e){const t=function Hte(n){const e=n.match(jte);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Gte(n){const e=n.match($te);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=OB(t),s=OB(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=HS(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new X(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=dt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[dt]:new on([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}}function kB(n){return n.segments.length>0?new on([],{[dt]:n}):n}function FB(n){const e={};for(const i of Object.keys(n.children)){const s=FB(n.children[i]);if(i===dt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Wte(n){if(1===n.numberOfChildren&&n.children[dt]){const e=n.children[dt];return new on(n.segments.concat(e.segments),e.children)}return n}(new on(n.segments,e))}function rd(n){return n instanceof Hf}function LB(n){let e;const r=kB(function t(s){const o={};for(const l of s.children){const u=t(l);o[l.outlet]=u}const a=new on(s.url,o);return s===n&&(e=a),a}(n.root));return e??r}function VB(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return $S(r,r,r,t,i);const s=function Kte(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new UB(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]="string"==typeof u?u.split("/"):u}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new UB(t,e,i)}(e);if(s.toRoot())return $S(r,r,new on([],{}),t,i);const o=function Zte(n,e,t){if(n.isAbsolute)return new xb(e,!0,0);if(!t)return new xb(e,!1,NaN);if(null===t.parent)return new xb(t,!0,0);const i=Nb(n.commands[0])?0:1;return function Yte(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new X(4005,!1);r=i.segments.length}return new xb(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?c_(o.segmentGroup,o.index,s.commands):jB(o.segmentGroup,o.index,s.commands);return $S(r,o.segmentGroup,a,t,i)}function Nb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function l_(n){return"object"==typeof n&&null!=n&&n.outlets}function $S(n,e,t,i,r){let o,s={};i&&Object.entries(i).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`}),o=n===e?t:BB(n,e,t);const a=kB(FB(o));return new Hf(a,s,r)}function BB(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:BB(s,e,t)}),new on(n.segments,i)}class UB{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Nb(i[0]))throw new X(4003,!1);const r=i.find(l_);if(r&&r!==DB(i))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xb{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function jB(n,e,t){if(n||(n=new on([],{})),0===n.segments.length&&n.hasChildren())return c_(n,e,t);const i=function Jte(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(l_(a))break;const l=`${a}`,u=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!$B(l,u,o))return s;i+=2}else{if(!$B(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new on(n.segments.slice(0,i.pathIndex),{});return s.children[dt]=new on(n.segments.slice(i.pathIndex),n.children),c_(s,0,r)}return i.match&&0===r.length?new on(n.segments,{}):i.match&&!n.hasChildren()?GS(n,e,t):i.match?c_(n,0,r):GS(n,e,t)}function c_(n,e,t){if(0===t.length)return new on(n.segments,{});{const i=function Qte(n){return l_(n[0])?n[0].outlets:{[dt]:n}}(t),r={};if(Object.keys(i).some(s=>s!==dt)&&n.children[dt]&&1===n.numberOfChildren&&0===n.children[dt].segments.length){const s=c_(n.children[dt],e,t);return new on(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=jB(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new on(n.segments,r)}}function GS(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(l_(s)){const l=Xte(s.outlets);return new on(i,l)}if(0===r&&Nb(t[0])){i.push(new s_(n.segments[e].path,HB(t[0]))),r++;continue}const o=l_(s)?s.outlets[dt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Nb(a)?(i.push(new s_(o,HB(a))),r+=2):(i.push(new s_(o,{})),r++)}return new on(i,{})}function Xte(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=GS(new on([],{}),0,i))}),e}function HB(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function $B(n,e,t){return n==t.path&&wa(e,t.parameters)}const u_="imperative";class Ia{constructor(e,t){this.id=e,this.url=t}}class Pb extends Ia{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sc extends Ia{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class d_ extends Ia{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $f extends Ia{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class Ob extends Ia{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class GB extends Ia{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ene extends Ia{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tne extends Ia{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nne extends Ia{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ine extends Ia{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rne{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sne{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class one{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ane{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lne{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cne{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zB{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class zS{}class WS{constructor(e){this.url=e}}class une{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new h_,this.attachRef=null}}let h_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new une,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class WB{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=qS(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=qS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=KS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return KS(e,this._root).map(t=>t.value)}}function qS(n,e){if(n===e.value)return e;for(const t of e.children){const i=qS(n,t);if(i)return i}return null}function KS(n,e){if(n===e.value)return[e];for(const t of e.children){const i=KS(n,t);if(i.length)return i.unshift(e),i}return[]}class Cl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Gf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class qB extends WB{constructor(e,t){super(e),this.snapshot=t,ZS(this,e)}toString(){return this.snapshot.toString()}}function KB(n,e){const t=function dne(n,e){const o=new Mb([],{},{},"",{},dt,e,null,{});return new YB("",new Cl(o,[]))}(0,e),i=new pn([new s_("",{})]),r=new pn({}),s=new pn({}),o=new pn({}),a=new pn(""),l=new zf(i,r,o,a,s,dt,e,t.root);return l.snapshot=t.root,new qB(new Cl(l,[]),t)}class zf{constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ne(u=>u[r_]))??Ee(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ne(e=>jf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ne(e=>jf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ZB(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function hne(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Mb{get title(){return this.data?.[r_]}constructor(e,t,i,r,s,o,a,l,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class YB extends WB{constructor(e,t){super(t),this.url=e,ZS(this,t)}toString(){return QB(this._root)}}function ZS(n,e){e.value._routerState=n,e.children.forEach(t=>ZS(n,t))}function QB(n){const e=n.children.length>0?` { ${n.children.map(QB).join(", ")} } `:"";return`${n.value}${e}`}function YS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wa(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),wa(e.params,t.params)||n.paramsSubject.next(t.params),function Ate(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wa(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),wa(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function QS(n,e){const t=wa(n.params,e.params)&&function Pte(n,e){return id(n,e)&&n.every((t,i)=>wa(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||QS(n.parent,e.parent))}let JB=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=dt,this.activateEvents=new Se,this.deactivateEvents=new Se,this.attachEvents=new Se,this.detachEvents=new Se,this.parentContexts=be(h_),this.location=be(so),this.changeDetector=be(Os),this.environmentInjector=be(cs),this.inputBinder=be(kb,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new fne(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=ae({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[qt]})}return n})();class fne{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===zf?this.route:e===h_?this.childContexts:this.parent.get(e,t)}}const kb=new ve("");let XB=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=LS([i.queryParams,i.params,i.data]).pipe(Bt(([s,o,a],l)=>(a={...s,...o,...a},0===l?Ee(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=function SJ(n){const e=st(n);if(!e)return null;const t=new Om(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})();function f_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function gne(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return f_(n,i,r);return f_(n,i)})}(n,e,t);return new Cl(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>f_(n,a)),o}}const i=function mne(n){return new zf(new pn(n.url),new pn(n.params),new pn(n.queryParams),new pn(n.fragment),new pn(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>f_(n,s));return new Cl(i,r)}}const JS="ngNavigationCancelingError";function eU(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=rd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=tU(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function tU(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[JS]=!0,i.cancellationCode=e,t&&(i.url=t),i}function nU(n){return n&&n[JS]}let iU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Si({type:n,selectors:[["ng-component"]],standalone:!0,features:[xs],decls:1,vars:0,template:function(i,r){1&i&&Er(0,"router-outlet")},dependencies:[JB],encapsulation:2})}return n})();function XS(n){const e=n.children&&n.children.map(XS),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dt&&(t.component=iU),t}function Lo(n){return n.outlet||dt}function p_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Tne{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),YS(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Gf(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Gf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Gf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Gf(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new cne(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ane(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(YS(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),YS(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=p_(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class rU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Fb{constructor(e,t){this.component=e,this.route=t}}function Cne(n,e,t){const i=n._root;return g_(i,e?e._root:null,t,[i.value])}function Wf(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function JO(n){return null!==Vi(n)}(n)?e.get(n):n:i}function g_(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Gf(e);return n.children.forEach(o=>{(function Sne(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Ane(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!id(n.url,e.url);case"pathParamsOrQueryParamsChange":return!id(n.url,e.url)||!wa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!QS(n,e)||!wa(n.queryParams,e.queryParams);default:return!QS(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new rU(i)):(s.data=o.data,s._resolvedData=o._resolvedData),g_(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Fb(a.outlet.component,o))}else o&&m_(e,a,r),r.canActivateChecks.push(new rU(i)),g_(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>m_(a,t.getContext(o),r)),r}function m_(n,e,t){const i=Gf(n),r=n.value;Object.entries(i).forEach(([s,o])=>{m_(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Fb(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function __(n){return"function"==typeof n}function sU(n){return n instanceof wb||"EmptyError"===n?.name}const Lb=Symbol("INITIAL_VALUE");function qf(){return Bt(n=>LS(n.map(e=>e.pipe(Br(1),Vf(Lb)))).pipe(Ne(e=>{for(const t of e)if(!0!==t){if(t===Lb)return Lb;if(!1===t||t instanceof Hf)return t}return!0}),di(e=>e!==Lb),Br(1)))}function oU(n){return function Fi(...n){return Wn(n)}(wi(e=>{if(rd(e))throw eU(0,e)}),Ne(e=>!0===e))}class Vb{constructor(e){this.segmentGroup=e||null}}class aU{constructor(e){this.urlTree=e}}function Kf(n){return Lf(new Vb(n))}function lU(n){return Lf(new aU(n))}class Kne{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new X(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ee(i);if(r.numberOfChildren>1||!r.children[dt])return Lf(new X(4e3,!1));r=r.children[dt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Hf(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new on(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new X(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const eA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zne(n,e,t,i,r){const s=tA(n,e,t);return s.matched?(i=function yne(n,e){return n.providers&&!n._injector&&(n._injector=S1(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function zne(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Ee(r.map(o=>{const a=Wf(o,n);return Dc(function Mne(n){return n&&__(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(qf(),oU()):Ee(!0)}(i,e,t).pipe(Ne(o=>!0===o?s:{...eA}))):Ee(s)}function tA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...eA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Ste)(t,n,e);if(!r)return{...eA};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function cU(n,e,t,i){return t.length>0&&function Jne(n,e,t){return t.some(i=>Bb(n,e,i)&&Lo(i)!==dt)}(n,t,i)?{segmentGroup:new on(e,Qne(i,new on(t,n.children))),slicedSegments:[]}:0===t.length&&function Xne(n,e,t){return t.some(i=>Bb(n,e,i))}(n,t,i)?{segmentGroup:new on(n.segments,Yne(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new on(n.segments,n.children),slicedSegments:t}}function Yne(n,e,t,i,r){const s={};for(const o of i)if(Bb(n,t,o)&&!r[Lo(o)]){const a=new on([],{});s[Lo(o)]=a}return{...r,...s}}function Qne(n,e){const t={};t[dt]=e;for(const i of n)if(""===i.path&&Lo(i)!==dt){const r=new on([],{});t[Lo(i)]=r}return t}function Bb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class iie{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Kne(this.urlSerializer,this.urlTree)}noMatchError(e){return new X(4002,!1)}recognize(){const e=cU(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,dt).pipe(Bf(t=>{if(t instanceof aU)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Vb?this.noMatchError(t):t}),Ne(t=>{const i=new Mb([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dt,this.rootComponentType,null,{}),r=new Cl(i,t),s=new YB("",r),o=function qte(n,e,t=null,i=null){return VB(LB(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,dt).pipe(Bf(i=>{throw i instanceof Vb?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=ZB(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return x(r).pipe(i_(s=>{const o=i.children[s],a=function wne(n,e){const t=n.filter(i=>Lo(i)===e);return t.push(...n.filter(i=>Lo(i)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Uf((s,o)=>(s.push(...o),s)),Cb(null),function yte(n,e){const t=arguments.length>=2;return i=>i.pipe(n?di((r,s)=>n(r,s,i)):Jn,VS(1),t?Cb(e):TB(()=>new wb))}(),Be(s=>{if(null===s)return Kf(i);const o=uU(s);return function rie(n){n.sort((e,t)=>e.value.outlet===dt?-1:t.value.outlet===dt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),Ee(o)}))}processSegment(e,t,i,r,s,o){return x(t).pipe(i_(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(Bf(l=>{if(l instanceof Vb)return Ee(null);throw l}))),Tc(a=>!!a),Bf(a=>{if(sU(a))return function tie(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?Ee([]):Kf(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return function eie(n,e,t,i){return!!(Lo(n)===i||i!==dt&&Bb(e,t,n))&&("**"===n.path||tA(e,n,t).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):Kf(r):Kf(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?lU(s):this.applyRedirects.lineralizeSegments(i,s).pipe(Be(o=>{const a=new on(o,{});return this.processSegment(e,t,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:u,positionalParamSegments:h}=tA(t,r,s);if(!a)return Kf(t);const g=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?lU(g):this.applyRedirects.lineralizeSegments(r,g).pipe(Be(m=>this.processSegment(e,i,t,m.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a;if("**"===i.path){const l=r.length>0?DB(r).parameters:{};a=Ee({snapshot:new Mb(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dU(i),Lo(i),i.component??i._loadedComponent??null,i,hU(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=Zne(t,i,r,e).pipe(Ne(({matched:l,consumedSegments:u,remainingSegments:h,parameters:g})=>l?{snapshot:new Mb(u,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dU(i),Lo(i),i.component??i._loadedComponent??null,i,hU(i)),consumedSegments:u,remainingSegments:h}:null));return a.pipe(Bt(l=>null===l?Kf(t):this.getChildConfig(e=i._injector??e,i,r).pipe(Bt(({routes:u})=>{const h=i._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:y}=l,{segmentGroup:E,slicedSegments:w}=cU(t,m,y,u);if(0===w.length&&E.hasChildren())return this.processChildren(h,u,E).pipe(Ne(O=>null===O?null:[new Cl(g,O)]));if(0===u.length&&0===w.length)return Ee([new Cl(g,[])]);const I=Lo(i)===s;return this.processSegment(h,u,E,w,I?dt:s,!0).pipe(Ne(O=>[new Cl(g,O)]))}))))}getChildConfig(e,t,i){return t.children?Ee({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ee({routes:t._loadedRoutes,injector:t._loadedInjector}):function Gne(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Ee(!0):Ee(r.map(o=>{const a=Wf(o,n);return Dc(function Nne(n){return n&&__(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(qf(),oU())}(e,t,i).pipe(Be(r=>r?this.configLoader.loadChildren(e,t).pipe(wi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function qne(n){return Lf(tU(!1,3))}())):Ee({routes:[],injector:e})}}function sie(n){const e=n.value.routeConfig;return e&&""===e.path}function uU(n){const e=[],t=new Set;for(const i of n){if(!sie(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=uU(i.children);e.push(new Cl(i.value,r))}return e.filter(i=>!t.has(i))}function dU(n){return n.data||{}}function hU(n){return n.resolve||{}}function fU(n){return"string"==typeof n.title||null===n.title}function nA(n){return Bt(e=>{const t=n(e);return t?x(t).pipe(Ne(()=>e)):Ee(e)})}const Zf=new ve("ROUTES");let iA=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=be(YL)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ee(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Dc(t.loadComponent()).pipe(Ne(pU),wi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),BS(()=>{this.componentLoaders.delete(t)})),r=new Jr(i,()=>new qe).pipe(Ci());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ee({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function hie(n,e,t,i){return Dc(n.loadChildren()).pipe(Ne(pU),Be(r=>r instanceof rL||Array.isArray(r)?Ee(r):x(e.compileModuleAsync(r))),Ne(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get(Zf,[],{optional:!0,self:!0}).flat()),{routes:o.map(XS),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(BS(()=>{this.childrenLoaders.delete(i)})),o=new Jr(s,()=>new qe).pipe(Ci());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pU(n){return function fie(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ub=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qe,this.transitionAbortSubject=new qe,this.configLoader=be(iA),this.environmentInjector=be(cs),this.urlSerializer=be(o_),this.rootContexts=be(h_),this.inputBindingEnabled=null!==be(kb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ee(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new sne(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new rne(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new pn({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:u_,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(di(s=>0!==s.id),Ne(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Bt(s=>{this.currentTransition=s;let o=!1,a=!1;return Ee(s).pipe(wi(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Bt(l=>{const u=l.currentBrowserUrl.toString(),h=!t.navigated||l.extractedUrl.toString()!==u||u!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const m="";return this.events.next(new $f(l.id,this.urlSerializer.serialize(l.rawUrl),m,0)),l.resolve(null),Ic}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Ee(l).pipe(Bt(m=>{const y=this.transitions?.getValue();return this.events.next(new Pb(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Ic:Promise.resolve(m)}),function oie(n,e,t,i,r,s){return Be(o=>function nie(n,e,t,i,r,s,o="emptyOnly"){return new iie(n,e,t,i,r,o,s).recognize()}(n,e,t,i,o.extractedUrl,r,s).pipe(Ne(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),wi(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new GB(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:m,extractedUrl:y,source:E,restoredState:w,extras:I}=l,O=new Pb(m,this.urlSerializer.serialize(y),E,w);this.events.next(O);const S=KB(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:S,urlAfterRedirects:y,extras:{...I,skipLocationChange:!1,replaceUrl:!1}},Ee(s)}{const m="";return this.events.next(new $f(l.id,this.urlSerializer.serialize(l.extractedUrl),m,1)),l.resolve(null),Ic}}),wi(l=>{const u=new ene(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Ne(l=>(this.currentTransition=s={...l,guards:Cne(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Fne(n,e){return Be(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ee({...t,guardsResult:!0}):function Lne(n,e,t,i){return x(n).pipe(Be(r=>function $ne(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ee(s.map(a=>{const l=p_(e)??r,u=Wf(a,l);return Dc(function One(n){return n&&__(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,i):l.runInContext(()=>u(n,e,t,i))).pipe(Tc())})).pipe(qf()):Ee(!0)}(r.component,r.route,t,e,i)),Tc(r=>!0!==r,!0))}(o,i,r,n).pipe(Be(a=>a&&function Rne(n){return"boolean"==typeof n}(a)?function Vne(n,e,t,i){return x(e).pipe(i_(r=>Ib(function Une(n,e){return null!==n&&e&&e(new one(n)),Ee(!0)}(r.route.parent,i),function Bne(n,e){return null!==n&&e&&e(new lne(n)),Ee(!0)}(r.route,i),function Hne(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Dne(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>wB(()=>Ee(o.guards.map(l=>{const u=p_(o.node)??t,h=Wf(l,u);return Dc(function Pne(n){return n&&__(n.canActivateChild)}(h)?h.canActivateChild(i,n):u.runInContext(()=>h(i,n))).pipe(Tc())})).pipe(qf())));return Ee(s).pipe(qf())}(n,r.path,t),function jne(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ee(!0);const r=i.map(s=>wB(()=>{const o=p_(e)??t,a=Wf(s,o);return Dc(function xne(n){return n&&__(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Tc())}));return Ee(r).pipe(qf())}(n,r.route,t))),Tc(r=>!0!==r,!0))}(i,s,n,e):Ee(a)),Ne(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),wi(l=>{if(s.guardsResult=l.guardsResult,rd(l.guardsResult))throw eU(0,l.guardsResult);const u=new tne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),di(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),nA(l=>{if(l.guards.canActivateChecks.length)return Ee(l).pipe(wi(u=>{const h=new nne(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),Bt(u=>{let h=!1;return Ee(u).pipe(function aie(n,e){return Be(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ee(t);let s=0;return x(r).pipe(i_(o=>function lie(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!fU(r)&&(s[r_]=r.title),function cie(n,e,t,i){const r=function uie(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Ee({});const s={};return x(r).pipe(Be(o=>function die(n,e,t,i){const r=p_(e)??i,s=Wf(n,r);return Dc(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(Tc(),wi(a=>{s[o]=a}))),VS(1),function vte(n){return e=>e.lift(new Ete(n))}(s),Bf(o=>sU(o)?Ic:Lf(o)))}(s,n,e,i).pipe(Ne(o=>(n._resolvedData=o,n.data=ZB(n,t).resolve,r&&fU(r)&&(n.data[r_]=r.title),null)))}(o.route,i,n,e)),wi(()=>s++),VS(1),Be(o=>s===r.length?Ee(t):Ic))})}(t.paramsInheritanceStrategy,this.environmentInjector),wi({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",2)}}))}),wi(u=>{const h=new ine(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),nA(l=>{const u=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(wi(m=>{h.component=m}),Ne(()=>{})));for(const m of h.children)g.push(...u(m));return g};return LS(u(l.targetSnapshot.root)).pipe(Cb(),Br(1))}),nA(()=>this.afterPreactivation()),Ne(l=>{const u=function pne(n,e,t){const i=f_(n,e._root,t?t._root:void 0);return new qB(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:u},s}),wi(()=>{this.events.next(new zS)}),((n,e,t,i)=>Ne(r=>(new Tne(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Br(1),wi({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),dn(this.transitionAbortSubject.pipe(wi(l=>{throw l}))),BS(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Bf(l=>{if(a=!0,nU(l))this.events.next(new d_(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function _ne(n){return nU(n)&&rd(n.url)}(l)?this.events.next(new WS(l.url)):s.resolve(!1);else{this.events.next(new Ob(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(u){s.reject(u)}}return Ic}))}))}cancelNavigationTransition(t,i,r){const s=new d_(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gU(n){return n!==u_}let mU=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===dt);return i}getResolvedTitleForRoute(t){return t.data[r_]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:function(){return be(pie)},providedIn:"root"})}return n})(),pie=(()=>{class n extends mU{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(W(_B))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:function(){return be(_ie)},providedIn:"root"})}return n})();class mie{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let _ie=(()=>{class n extends mie{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Nn(n)))(r||n)}}();static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const jb=new ve("",{providedIn:"root",factory:()=>({})});let yie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:function(){return be(vie)},providedIn:"root"})}return n})(),vie=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var y_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(y_||{});function _U(n,e){n.events.pipe(di(t=>t instanceof Sc||t instanceof d_||t instanceof Ob||t instanceof $f),Ne(t=>t instanceof Sc||t instanceof $f?y_.COMPLETE:t instanceof d_&&(0===t.code||1===t.code)?y_.REDIRECTING:y_.FAILED),di(t=>t!==y_.REDIRECTING),Br(1)).subscribe(()=>{e()})}function Eie(n){throw n}function bie(n,e,t){return e.parse("/")}const wie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Iie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=be(KL),this.isNgZoneEnabled=!1,this._events=new qe,this.options=be(jb,{optional:!0})||{},this.pendingTasks=be(ZL),this.errorHandler=this.options.errorHandler||Eie,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||bie,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=be(yie),this.routeReuseStrategy=be(gie),this.titleStrategy=be(mU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=be(Zf,{optional:!0})?.flat()??[],this.navigationTransitions=be(Ub),this.urlSerializer=be(o_),this.location=be(oS),this.componentInputBindingEnabled=!!be(kb,{optional:!0}),this.eventsSubscription=new H,this.isNgZoneEnabled=be(ot)instanceof ot&&ot.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Hf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=KB(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(yU(i)&&this._events.next(i));if(i instanceof Pb)gU(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof $f)this.rawUrlTree=r.rawUrl;else if(i instanceof GB){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof zS)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof d_)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof WS){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||gU(r.source)};this.scheduleNavigation(s,u_,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof Ob&&this.restoreHistory(r,!0),i instanceof Sc&&(this.navigated=!0),yU(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),u_,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(XS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:o;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=LB(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),g=this.currentUrlTree.root}return VB(g,t,h,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=rd(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,u_,null,i)}navigate(t,i={skipLocationChange:!1}){return function Tie(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new X(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...wie}:!1===i?{...Iie}:i,rd(t))return AB(this.currentUrlTree,t,r);const s=this.parseUrl(t);return AB(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((g,m)=>{a=g,l=m});const h=this.pendingTasks.add();return _U(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(g=>Promise.reject(g))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yU(n){return!(n instanceof zS||n instanceof WS)}class vU{}let Sie=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(di(t=>t instanceof Sc),i_(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=S1(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return x(r).pipe(J())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Ee(null);const s=r.pipe(Be(o=>null===o?Ee(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?x([s,this.loader.loadComponent(i)]).pipe(J()):s})}static#e=this.\u0275fac=function(i){return new(i||n)(W(lo),W(YL),W(cs),W(vU),W(iA))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const sA=new ve("");let EU=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Pb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof $f&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zB&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zB(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){!function Zk(){throw new Error("invalid")}()};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})();function Dl(n,e){return{\u0275kind:n,\u0275providers:e}}function wU(){const n=be(sr);return e=>{const t=n.get(Ec);if(e!==t.components[0])return;const i=n.get(lo),r=n.get(IU);1===n.get(oA)&&i.initialNavigation(),n.get(TU,null,_t.Optional)?.setUpPreloading(),n.get(sA,null,_t.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const IU=new ve("",{factory:()=>new qe}),oA=new ve("",{providedIn:"root",factory:()=>1}),TU=new ve("");function xie(n){return Dl(0,[{provide:TU,useExisting:Sie},{provide:vU,useExisting:n}])}const CU=new ve("ROUTER_FORROOT_GUARD"),Oie=[oS,{provide:o_,useClass:US},lo,h_,{provide:zf,useFactory:function bU(n){return n.routerState.root},deps:[lo]},iA,[]];function Mie(){return new iV("Router",lo)}let DU=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[Oie,[],{provide:Zf,multi:!0,useValue:t},{provide:CU,useFactory:Vie,deps:[[lo,new hc,new Zh]]},{provide:jb,useValue:i||{}},i?.useHash?{provide:nd,useClass:PJ}:{provide:nd,useClass:MV},{provide:sA,useFactory:()=>{const n=be(qX),e=be(ot),t=be(jb),i=be(Ub),r=be(o_);return t.scrollOffset&&n.setOffset(t.scrollOffset),new EU(r,i,n,e,t)}},i?.preloadingStrategy?xie(i.preloadingStrategy).\u0275providers:[],{provide:iV,multi:!0,useFactory:Mie},i?.initialNavigation?Bie(i):[],i?.bindToComponentInputs?Dl(8,[XB,{provide:kb,useExisting:XB}]).\u0275providers:[],[{provide:SU,useFactory:wU},{provide:Z1,multi:!0,useExisting:SU}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Zf,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(W(CU,8))};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})();function Vie(n){return"guarded"}function Bie(n){return["disabled"===n.initialNavigation?Dl(3,[{provide:j1,multi:!0,useFactory:()=>{const e=be(lo);return()=>{e.setUpLocationChangeListener()}}},{provide:oA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Dl(2,[{provide:oA,useValue:0},{provide:j1,multi:!0,deps:[sr],useFactory:e=>{const t=e.get(NJ,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(lo),s=e.get(IU);_U(r,()=>{i(!0)}),e.get(Ub).afterPreactivation=()=>(i(!0),s.closed?Ee(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const SU=new ve(""),jie=[];let Hie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({imports:[DU.forRoot(jie),DU]})}return n})();class aA{constructor(e){this.key="",this.players=[],this.secondsPerTurn=60,this.minutesForGame=60,this.startTime=null,this.endTime=null,this.inProgress=!1,e?(this.key=e.key,this.code=e.code,this.secondsPerTurn=e.secondsPerTurn,this.minutesForGame=e.minutesForGame,this.inProgress=e.inProgress,this.startTime=e.startTime??null,this.endTime=e.endTime??null,this.players=e.players):this.code=Math.floor(100*Math.random()+1).toString()}addPlayer(){const e=new $ie(this.getNextPlayerNumber());return this.players.push(e),e}findPlayer(e){return this.players.find(t=>t.number===e)}getNextPlayerNumber(){return(Math.max(0,...this.players.map(e=>+e.number))+1).toString()}}class $ie{constructor(e){this.number="",this.name="",this.color="",this.myTurn=!1,this.number=e}}var ps=it(534);(0,ps.registerVersion)("firebase","10.7.1","app");class Wie extends H{constructor(e,t){super()}schedule(e,t=0){return this}}class Hb extends Wie{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let AU=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class Vo extends AU{constructor(e,t=AU.now){super(e,()=>Vo.delegate&&Vo.delegate!==this?Vo.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return Vo.delegate&&Vo.delegate!==this?Vo.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const RU=new class Kie extends Vo{}(class qie extends Hb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}),Zie=RU,$b=new Vo(Hb),Gb=$b;class gs{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return Ee(this.value);case"E":return Lf(this.error);case"C":return Tb()}throw new Error("unexpected notification kind value")}static createNext(e){return typeof e<"u"?new gs("N",e):gs.undefinedValueNotification}static createError(e){return new gs("E",void 0,e)}static createComplete(){return gs.completeNotification}}function Yf(n,e=0){return function(i){return i.lift(new Qie(n,e))}}gs.completeNotification=new gs("C"),gs.undefinedValueNotification=new gs("N",void 0);class Qie{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new zb(e,this.scheduler,this.delay))}}class zb extends Pe{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(zb.dispatch,this.delay,new Jie(e,this.destination)))}_next(e){this.scheduleMessage(gs.createNext(e))}_error(e){this.scheduleMessage(gs.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(gs.createComplete()),this.unsubscribe()}}class Jie{constructor(e,t){this.notification=e,this.destination=t}}let Xie=1;const ere=Promise.resolve(),Wb={};function NU(n){return n in Wb&&(delete Wb[n],!0)}const xU={setImmediate(n){const e=Xie++;return Wb[e]=!0,ere.then(()=>NU(e)&&n()),e},clearImmediate(n){NU(n)}},PU=new class nre extends Vo{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class tre extends Hb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=xU.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(xU.clearImmediate(t),e.scheduled=void 0)}}),lA=PU;function cA(n){return!zt(n)&&n-parseFloat(n)+1>=0}class qb extends je{constructor(e,t=0,i=lA){super(),this.source=e,this.delayTime=t,this.scheduler=i,(!cA(t)||t<0)&&(this.delayTime=0),(!i||"function"!=typeof i.schedule)&&(this.scheduler=lA)}static create(e,t=0,i=lA){return new qb(e,t,i)}static dispatch(e){const{source:t,subscriber:i}=e;return this.add(t.subscribe(i))}_subscribe(e){return this.scheduler.schedule(qb.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function Kb(n,e=0){return function(i){return i.lift(new ire(n,e))}}class ire{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new qb(t,this.delay,this.scheduler).subscribe(e)}}const v_=new gf("ANGULARFIRE2_VERSION");class Zb{constructor(){return((n,e)=>{const t=(0,ps.getApps)(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i})(sre)}}const sre="app-check";function Qf(){}class OU{zone;delegate;constructor(e,t=RU){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{e.apply(this,[o])})},t,i)}}class ore{zone;task=null;constructor(e){this.zone=e}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qf,{},Qf,Qf)),t.pipe(wi({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Yb=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new OU(Zone.current)),this.insideAngular=t.run(()=>new OU(Zone.current,$b)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(W(ot))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jf(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function MU(n){return n.pipe(Yf(Jf().outsideAngular))}function hi(n){return function lre(n){return function(t){return(t=t.lift(new ore(n.ngZone))).pipe(Kb(n.outsideAngular),Yf(n.insideAngular))}}(Jf())(n)}var co=it(106);co.Z.registerVersion("firebase","10.7.1","app-compat");const hre=["ngOnDestroy"];class kU{constructor(e){return e}}const Xf=new ve("angularfire2.app.options"),ep=new ve("angularfire2.app.name");function E_(n,e,t){const r="object"==typeof t&&t||{};r.name=r.name||"string"==typeof t&&t||"[DEFAULT]";const o=co.Z.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>co.Z.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;gre("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new kU(o)}const gre=(n,...e)=>{},mre={provide:kU,useFactory:E_,deps:[Xf,ot,[new hc,ep]]};let _re=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:Xf,useValue:t},{provide:ep,useValue:i}]}}constructor(t){co.Z.registerVersion("angularfire",v_.full,"core"),co.Z.registerVersion("angularfire",v_.full,"app-compat"),co.Z.registerVersion("angular",Tk.full,t.toString())}static \u0275fac=function(i){return new(i||n)(W(No))};static \u0275mod=It({type:n});static \u0275inj=mt({providers:[mre]})}return n})();function Qb(n,e,t,i,r){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function yre(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(r,o)||(FU("error",`${e} was already initialized on the ${t} Firebase App with different settings.${vre?" You may need to reload as Firebase is not HMR aware.":""}`),FU("warn",{is:r,was:o})),s;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}const vre=typeof module<"u"&&!!module.hot,FU=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],it(980);class Ere extends qe{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new bre(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let o;if(this.closed)throw new ct;if(this.isStopped||this.hasError?o=H.EMPTY:(this.observers.push(e),o=new qn(this,e)),r&&e.add(e=new zb(e,r)),t)for(let a=0;a<s&&!e.closed;a++)e.next(i[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(i[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||Zie).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(e-r[o].time<i);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&r.splice(0,o),r}}class bre{constructor(e,t){this.time=e,this.value=t}}function LU(n,e,t){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},r=>r.lift(function wre({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:i}){let r,o,s=0,a=!1,l=!1;return function(h){let g;s++,!r||a?(a=!1,r=new Ere(n,e,i),g=r.subscribe(this),o=h.subscribe({next(m){r.next(m)},error(m){a=!0,r.error(m)},complete(){l=!0,o=void 0,r.complete()}}),l&&(o=void 0)):g=r.subscribe(this),this.add(()=>{s--,g.unsubscribe(),g=void 0,o&&!l&&t&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}function VU(n,e){return e?Bt(()=>n,e):Bt(()=>n)}const uA=new ve("angularfire2.auth.use-emulator"),dA=new ve("angularfire2.auth.settings"),hA=new ve("angularfire2.auth.tenant-id"),fA=new ve("angularfire2.auth.langugage-code"),pA=new ve("angularfire2.auth.use-device-language"),gA=new ve("angularfire.auth.persistence"),mA=(n,e,t,i,r,s,o,a)=>Qb(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(const[u,h]of Object.entries(o))l.settings[u]=h;return a&&l.setPersistence(a),l},[t,i,r,s,o,a]);let _A=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,s,o,a,l,u,h,g,m,y){const E=new qe,w=Ee(void 0).pipe(Yf(o.outsideAngular),Bt(()=>s.runOutsideAngular(()=>Promise.resolve().then(it.bind(it,980)))),Ne(()=>E_(t,s,i)),Ne(I=>mA(I,s,a,u,h,g,l,m)),LU({bufferSize:1,refCount:!1}));if(yb(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ee(null);else{w.pipe(Tc()).subscribe();const I=w.pipe(Bt(k=>k.getRedirectResult().then(L=>L,()=>null)),hi,LU({bufferSize:1,refCount:!1})),O=w.pipe(Bt(k=>new je(L=>({unsubscribe:s.runOutsideAngular(()=>k.onAuthStateChanged(Y=>L.next(Y),Y=>L.error(Y),()=>L.complete()))})))),S=w.pipe(Bt(k=>new je(L=>({unsubscribe:s.runOutsideAngular(()=>k.onIdTokenChanged(Y=>L.next(Y),Y=>L.error(Y),()=>L.complete()))}))));this.authState=I.pipe(VU(O),Kb(o.outsideAngular),Yf(o.insideAngular)),this.user=I.pipe(VU(S),Kb(o.outsideAngular),Yf(o.insideAngular)),this.idToken=this.user.pipe(Bt(k=>k?x(k.getIdToken()):Ee(null))),this.idTokenResult=this.user.pipe(Bt(k=>k?x(k.getIdTokenResult()):Ee(null))),this.credential=Qt(I,E,this.authState.pipe(di(k=>!k))).pipe(Ne(k=>k?.user?k:null),Kb(o.outsideAngular),Yf(o.insideAngular))}return((n,e,t,i={})=>new Proxy(n,{get:(r,s)=>t.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(hre.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(u=>t.run(()=>u)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,u)=>o.then(h=>{const g=h?.(...u);return i?.spy?.apply&&i.spy.apply(s,u,g),g})})})}))(this,w,s,{spy:{apply:(I,O,S)=>{(I.startsWith("signIn")||I.startsWith("createUser"))&&S.then(k=>E.next(k))}}})}static \u0275fac=function(i){return new(i||n)(W(Xf),W(ep,8),W(No),W(ot),W(Yb),W(uA,8),W(dA,8),W(hA,8),W(fA,8),W(pA,8),W(gA,8),W(Zb,8))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function Jb(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new Tre(n,t))}}class Tre{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new Cre(e,this.observables,this.project))}}class Cre extends kS{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let s=0;s<r;s++)this.toRespond.push(s);for(let s=0;s<r;s++)this.add(FS(this,t[s],void 0,s))}notifyNext(e,t,i){this.values[i]=t;const r=this.toRespond;if(r.length>0){const s=r.indexOf(i);-1!==s&&r.splice(s,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class Sre{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new Are(e,this.predicate))}}class Are extends Pe{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=!!t}catch(t){this.destination.error(t)}}}var Bo=it(537),K=it(861),b=it(58),ks=it(879);const BU="@firebase/database";let yA="";function vA(n){yA=n}class Rre{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,b.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,b.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Nre{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,b.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const jU=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Rre(e)}}catch{}return new Nre},od=jU("localStorage"),EA=jU("sessionStorage"),tp=new ks.Yd("@firebase/database"),HU=function(){let n=1;return function(){return n++}}(),$U=function(n){const e=(0,b.dS)(n),t=new b.gQ;t.update(e);const i=t.digest();return b.US.encodeByteArray(i)},b_=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=b_.apply(null,i):e+="object"==typeof i?(0,b.Wl)(i):i,e+=" "}return e};let ad=null,GU=!0;const zU=function(n,e){(0,b.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(tp.logLevel=ks.in.VERBOSE,ad=tp.log.bind(tp),e&&EA.set("logging_enabled",!0)):"function"==typeof n?ad=n:(ad=null,EA.remove("logging_enabled"))},$i=function(...n){if(!0===GU&&(GU=!1,null===ad&&!0===EA.get("logging_enabled")&&zU(!0)),ad){const e=b_.apply(null,n);ad(e)}},w_=function(n){return function(...e){$i(n,...e)}},bA=function(...n){const e="FIREBASE INTERNAL ERROR: "+b_(...n);tp.error(e)},Ta=function(...n){const e=`FIREBASE FATAL ERROR: ${b_(...n)}`;throw tp.error(e),new Error(e)},wr=function(...n){const e="FIREBASE WARNING: "+b_(...n);tp.warn(e)},Xb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ac="[MIN_NAME]",Sl="[MAX_NAME]",ld=function(n,e){if(n===e)return 0;if(n===Ac||e===Sl)return-1;if(e===Ac||n===Sl)return 1;{const t=KU(n),i=KU(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},Ore=function(n,e){return n===e?0:n<e?-1:1},I_=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,b.Wl)(e))},wA=function(n){if("object"!=typeof n||null===n)return(0,b.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,b.Wl)(e[i]),t+=":",t+=wA(n[e[i]]);return t+="}",t},WU=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Gi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const qU=function(n){(0,b.hu)(!Xb(n),"Invalid JSON number");const i=1023;let r,s,o,a,l;0===n?(s=0,o=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const u=[];for(l=52;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(r?1:0),u.reverse();const h=u.join("");let g="";for(l=0;l<64;l+=8){let m=parseInt(h.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),g+=m}return g.toLowerCase()},Lre=new RegExp("^-?(0*)\\d{1,10}$"),KU=function(n){if(Lre.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},np=function(n){try{n()}catch(e){setTimeout(()=>{throw wr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},T_=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class jre{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){wr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Hre{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?($i("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wr(e)}}let C_=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const XU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nj="websocket",ij="long_polling";class TA{constructor(e,t,i,r,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=od.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&od.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rj(n,e,t){let i;if((0,b.hu)("string"==typeof e,"typeof type must == string"),(0,b.hu)("object"==typeof t,"typeof params must == object"),e===nj)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ij)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function $re(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Gi(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}class Gre{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,b.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,b.p$)(this.counters_)}}const CA={},DA={};function SA(n){const e=n.toString();return CA[e]||(CA[e]=new Gre),CA[e]}class Wre{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&np(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Rc{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w_(e),this.stats_=SA(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),rj(t,ij,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Wre(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,b.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new AA((...s)=>{const[o,a,l,u,h]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&XU.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Rc.forceAllow_=!0}static forceDisallow(){Rc.forceDisallow_=!0}static isAvailable(){return!((0,b.Yr)()||!Rc.forceAllow_&&(Rc.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,b.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,b.h$)(t),r=WU(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,b.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,b.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class AA{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,b.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=HU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=AA.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){$i("frame writing exception"),a.stack&&$i(a.stack),$i(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||$i("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,b.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{$i("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let tw=null;typeof MozWebSocket<"u"?tw=MozWebSocket:typeof WebSocket<"u"&&(tw=WebSocket);let ip=(()=>{class n{constructor(t,i,r,s,o,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w_(this.connId),this.stats_=SA(i),this.connURL=n.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){const a={v:"5"};return!(0,b.Yr)()&&typeof location<"u"&&location.hostname&&XU.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),s&&(a.ac=s),o&&(a.p=o),rj(t,nj,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,od.set("previous_websocket_failure",!0);try{let r;if((0,b.Yr)()){r={headers:{"User-Agent":`Firebase/5/${yA}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new tw(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==tw&&!n.forceDisallow_}static previouslyFailed(){return od.isInMemoryStorage||!0===od.get("previous_websocket_failure")}markConnectionHealthy(){od.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,b.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,b.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,b.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=WU(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),dj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Rc,ip]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=ip&&ip.isAvailable();let r=i&&!ip.previouslyFailed();if(t.webSocketOnly&&(i||wr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ip];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class yj{constructor(e,t,i,r,s,o,a,l,u,h){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w_("c:"+this.id+":"),this.transportManager_=new dj(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=T_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=I_("t",e),i=I_("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=I_("t",e),i=I_("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=I_("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?bA("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bA("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&wr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),T_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):T_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(od.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class vj{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Ej{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,b.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,b.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class nw extends Ej{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,b.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nw}getInitialEvent(e){return(0,b.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class en{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Gt(){return new en("")}function vt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Nc(n){return n.pieces_.length-n.pieceNum_}function mn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new en(n.pieces_,e)}function NA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function D_(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Ij(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new en(e,0)}function Bn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof en)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new en(t,0)}function Et(n){return n.pieceNum_>=n.pieces_.length}function Ur(n,e){const t=vt(n),i=vt(e);if(null===t)return e;if(t===i)return Ur(mn(n),mn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function pse(n,e){const t=D_(n,0),i=D_(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=ld(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function xA(n,e){if(Nc(n)!==Nc(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function uo(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Nc(n)>Nc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class gse{constructor(e,t){this.errorPrefix_=t,this.parts_=D_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,b.ug)(this.parts_[i]);Tj(this)}}function Tj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+cd(n))}function cd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class PA extends Ej{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new PA}getInitialEvent(e){return(0,b.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const S_=1e3;let rw,ud=(()=>{class n extends vj{constructor(t,i,r,s,o,a,l,u){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=w_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=S_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!(0,b.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");PA.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&nw.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_((0,b.Wl)(o)),(0,b.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new b.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,b.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,b.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const u=l.d,h=l.s;n.warnOnListenWarnings_(u,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),"ok"!==h&&this.removeListen_(r,s),t.onComplete&&t.onComplete(h,u))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,b.r3)(t,"w")){const r=(0,b.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();wr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,b.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,b.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,b.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const o={p:t};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();const a={p:i,d:r};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,b.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):bA("Unrecognized action received from server: "+(0,b.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,b.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=S_,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=S_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=S_),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,K.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,u=null;const h=function(){u?u.close():(l=!0,s())};t.realtime_={close:h,sendRequest:function(y){(0,b.hu)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,E]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?$i("getToken() completed but was canceled"):($i("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=E&&E.token,u=new yj(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,w=>{wr(w+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),l||(t.repoInfo_.nodeAdmin&&wr(y),h())}}})()}interrupt(t){$i("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){$i("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,b.xb)(this.interruptReasons_)&&(this.reconnectDelay_=S_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(o=>wA(o)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new en(t).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){$i("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){$i("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,b.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+yA.replace(/\./g,"-")]=1,(0,b.uI)()?t["framework.cordova"]=1:(0,b.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=nw.getInstance().currentlyOnline();return(0,b.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Tt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Tt(e,t)}}class iw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Tt(Ac,e),r=new Tt(Ac,t);return 0!==this.compare(i,r)}minPost(){return Tt.MIN}}class Sj extends iw{static get __EMPTY_NODE(){return rw}static set __EMPTY_NODE(e){rw=e}compare(e,t){return ld(e.name,t.name)}isDefinedOn(e){throw(0,b.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Tt.MIN}maxPost(){return new Tt(Sl,rw)}makePost(e,t){return(0,b.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Tt(e,rw)}toString(){return".key"}}const Ca=new Sj;class sw{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let MA,Uo=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??ms.EMPTY_NODE,this.right=o??ms.EMPTY_NODE}copy(t,i,r,s,o){return new n(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ms.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return ms.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ms{constructor(e,t=ms.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ms(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Uo.BLACK,null,null))}remove(e){return new ms(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Uo.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sw(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sw(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sw(this.root_,null,this.comparator_,!0,e)}}function Ise(n,e){return ld(n.name,e.name)}function OA(n,e){return ld(n,e)}ms.EMPTY_NODE=new class wse{copy(e,t,i,r,s){return this}insert(e,t,i){return new Uo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Aj=function(n){return"number"==typeof n?"number:"+qU(n):"string:"+n},Rj=function(n){if(n.isLeafNode()){const e=n.val();(0,b.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,b.r3)(e,".sv"),"Priority must be a string or number.")}else(0,b.hu)(n===MA||n.isEmpty(),"priority of unexpected type.");(0,b.hu)(n===MA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Nj,xj,Pj,rp=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,b.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Rj(this.priorityNode_)}static set __childrenNodeConstructor(t){Nj=t}static get __childrenNodeConstructor(){return Nj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Et(t)?this:".priority"===vt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=vt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,b.hu)(".priority"!==r||1===Nc(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(mn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Aj(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?qU(this.value_):this.value_,this.lazyHash_=$U(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,b.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return(0,b.hu)(s>=0,"Unknown leaf type: "+i),(0,b.hu)(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const wn=new class Sse extends iw{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?ld(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Tt.MIN}maxPost(){return new Tt(Sl,new rp("[PRIORITY-POST]",Pj))}makePost(e,t){const i=xj(e);return new Tt(t,new rp("[PRIORITY-POST]",i))}toString(){return".priority"}},Ase=Math.log(2);class Rse{constructor(e){this.count=parseInt(Math.log(e+1)/Ase,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ow=function(n,e,t,i){n.sort(e);const r=function(l,u){const h=u-l;let g,m;if(0===h)return null;if(1===h)return g=n[l],m=t?t(g):g,new Uo(m,g.node,Uo.BLACK,null,null);{const y=parseInt(h/2,10)+l,E=r(l,y),w=r(y+1,u);return g=n[y],m=t?t(g):g,new Uo(m,g.node,Uo.BLACK,E,w)}},a=function(l){let u=null,h=null,g=n.length;const m=function(E,w){const I=g-E,O=g;g-=E;const S=r(I+1,O),k=n[I],L=t?t(k):k;y(new Uo(L,k.node,w,null,S))},y=function(E){u?(u.left=E,u=E):(h=E,u=E)};for(let E=0;E<l.count;++E){const w=l.nextBitIsOne(),I=Math.pow(2,l.count-(E+1));w?m(I,Uo.BLACK):(m(I,Uo.BLACK),m(I,Uo.RED))}return h}(new Rse(n.length));return new ms(i||e,a)};let kA;const sp={};class Al{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,b.hu)(sp&&wn,"ChildrenNode.ts has not been loaded"),kA=kA||new Al({".priority":sp},{".priority":wn}),kA}get(e){const t=(0,b.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ms?t:null}hasIndex(e){return(0,b.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,b.hu)(e!==Ca,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Tt.Wrap);let a,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();a=r?ow(i,e.getCompare()):sp;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Al(h,u)}addToIndexes(e,t){const i=(0,b.UI)(this.indexes_,(r,s)=>{const o=(0,b.DV)(this.indexSet_,s);if((0,b.hu)(o,"Missing index implementation for "+s),r===sp){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Tt.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),ow(a,o.getCompare())}return sp}{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new Tt(e.name,a))),l.insert(e,e.node)}});return new Al(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,b.UI)(this.indexes_,r=>{if(r===sp)return r;{const s=t.get(e.name);return s?r.remove(new Tt(e.name,s)):r}});return new Al(i,this.indexSet_)}}let A_,lt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Rj(this.priorityNode_),this.children_.isEmpty()&&(0,b.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return A_||(A_=new n(new ms(OA),null,Al.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||A_}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?A_:i}}getChild(t){const i=vt(t);return null===i?this:this.getImmediateChild(i).getChild(mn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,b.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Tt(t,i);let s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?A_:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){const r=vt(t);if(null===r)return i;{(0,b.hu)(".priority"!==vt(t)||1===Nc(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(mn(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(wn,(a,l)=>{i[a]=l.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Aj(this.getPriority().val())+":"),this.forEachChild(wn,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":$U(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new Tt(t,i));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Tt(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Tt(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Tt.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Tt.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===R_?-1:0}withIndex(t){if(t===Ca||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ca||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(wn),s=i.getIterator(wn);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Ca?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const R_=new class Nse extends lt{constructor(){super(new ms(OA),lt.EMPTY_NODE,Al.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return lt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Tt,{MIN:{value:new Tt(Ac,lt.EMPTY_NODE)},MAX:{value:new Tt(Sl,R_)}}),Sj.__EMPTY_NODE=lt.EMPTY_NODE,rp.__childrenNodeConstructor=lt,function Tse(n){MA=n}(R_),function Dse(n){Pj=n}(R_);const xse=!0;function Zn(n,e=null){if(null===n)return lt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,b.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new rp(n,Zn(e));if(n instanceof Array||!xse){let t=lt.EMPTY_NODE;return Gi(n,(i,r)=>{if((0,b.r3)(n,i)&&"."!==i.substring(0,1)){const s=Zn(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Zn(e))}{const t=[];let i=!1;if(Gi(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Zn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new Tt(o,l)))}}),0===t.length)return lt.EMPTY_NODE;const s=ow(t,Ise,o=>o.name,OA);if(i){const o=ow(t,wn.getCompare());return new lt(s,Zn(e),new Al({".priority":o},{".priority":wn}))}return new lt(s,Zn(e),Al.Default)}}!function Cse(n){xj=n}(Zn);class FA extends iw{constructor(e){super(),this.indexPath_=e,(0,b.hu)(!Et(e)&&".priority"!==vt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?ld(e.name,t.name):s}makePost(e,t){const i=Zn(e),r=lt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Tt(t,r)}maxPost(){const e=lt.EMPTY_NODE.updateChild(this.indexPath_,R_);return new Tt(Sl,e)}toString(){return D_(this.indexPath_,0).join("/")}}const LA=new class Pse extends iw{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?ld(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Tt.MIN}maxPost(){return Tt.MAX}makePost(e,t){const i=Zn(e);return new Tt(t,i)}toString(){return".value"}};function Oj(n){return{type:"value",snapshotNode:n}}function op(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function N_(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function x_(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class VA{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){(0,b.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(N_(t,a)):(0,b.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(op(t,i)):o.trackChildChange(x_(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(wn,(r,s)=>{t.hasChild(r)||i.trackChildChange(N_(r,s))}),t.isLeafNode()||t.forEachChild(wn,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(x_(r,s,o))}else i.trackChildChange(op(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?lt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class P_{constructor(e){this.indexedFilter_=new VA(e.getIndex()),this.index_=e.getIndex(),this.startPost_=P_.getStartPost_(e),this.endPost_=P_.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new Tt(t,i))||(i=lt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=lt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(lt.EMPTY_NODE);const s=this;return t.forEachChild(wn,(o,a)=>{s.matches(new Tt(o,a))||(r=r.updateImmediateChild(o,lt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Mse{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new P_(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new Tt(t,i))||(i=lt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=lt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=lt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),o++}}}else{let s;r=t.withIndex(this.index_),r=r.updatePriority(lt.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,lt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){const g=this.index_.getCompare();o=(m,y)=>g(y,m)}else o=this.index_.getCompare();const a=e;(0,b.hu)(a.numChildren()===this.limit_,"");const l=new Tt(t,i),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(t)){const g=a.getImmediateChild(t);let m=r.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=r.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(h&&!i.isEmpty()&&y>=0)return s?.trackChildChange(x_(t,i,g)),a.updateImmediateChild(t,i);{s?.trackChildChange(N_(t,g));const w=a.updateImmediateChild(t,lt.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(op(m.name,m.node)),w.updateImmediateChild(m.name,m.node)):w}}return i.isEmpty()?e:h&&o(u,l)>=0?(null!=s&&(s.trackChildChange(N_(u.name,u.node)),s.trackChildChange(op(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(u.name,lt.EMPTY_NODE)):e}}class aw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,b.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,b.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ac}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,b.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,b.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Sl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,b.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wn}copy(){const e=new aw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function BA(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function UA(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function lw(n,e){const t=n.copy();return t.index_=e,t}function Mj(n){const e={};if(n.isDefault())return e;let t;if(n.index_===wn?t="$priority":n.index_===LA?t="$value":n.index_===Ca?t="$key":((0,b.hu)(n.index_ instanceof FA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,b.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,b.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,b.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,b.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,b.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function kj(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==wn&&(e.i=n.index_.toString()),e}class cw extends vj{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=w_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,b.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=cw.getListenId_(e,i),a={};this.listens_[o]=a;const l=Mj(e._queryParams);this.restRequest_(s+".json",l,(u,h)=>{let g=h;if(404===u&&(g=null,u=null),null===u&&this.onDataUpdate_(s,g,!1,i),(0,b.DV)(this.listens_,o)===a){let m;m=u?401===u?"permission_denied":"rest_error:"+u:"ok",r(m,null)}})}unlisten(e,t){const i=cw.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Mj(e._queryParams),i=e._path.toString(),r=new b.BH;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,b.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,b.cI)(a.responseText)}catch{wr("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&wr("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class Use{constructor(){this.rootNode_=lt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function uw(){return{value:null,children:new Map}}function ap(n,e,t){if(Et(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=vt(e);n.children.has(i)||n.children.set(i,uw()),ap(n.children.get(i),e=mn(e),t)}}function jA(n,e){if(Et(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(wn,(i,r)=>{ap(n,new en(i),r)}),jA(n,e)}}if(n.children.size>0){const t=vt(e);return e=mn(e),n.children.has(t)&&jA(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function HA(n,e,t){null!==n.value?t(e,n.value):function jse(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{HA(r,new en(e.toString()+"/"+i),t)})}class Hse{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Gi(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class zse{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Hse(e);const i=1e4+2e4*Math.random();T_(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Gi(e,(r,s)=>{s>0&&(0,b.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),T_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Da=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Da||{});function zA(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class dw{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Da.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Et(this.path)){if(null!=this.affectedTree.value)return(0,b.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new en(e));return new dw(Gt(),t,this.revert)}}return(0,b.hu)(vt(this.path)===e,"operationForChild called for unrelated child."),new dw(mn(this.path),this.affectedTree,this.revert)}}class O_{constructor(e,t){this.source=e,this.path=t,this.type=Da.LISTEN_COMPLETE}operationForChild(e){return Et(this.path)?new O_(this.source,Gt()):new O_(this.source,mn(this.path))}}class dd{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Da.OVERWRITE}operationForChild(e){return Et(this.path)?new dd(this.source,Gt(),this.snap.getImmediateChild(e)):new dd(this.source,mn(this.path),this.snap)}}class lp{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Da.MERGE}operationForChild(e){if(Et(this.path)){const t=this.children.subtree(new en(e));return t.isEmpty()?null:t.value?new dd(this.source,Gt(),t.value):new lp(this.source,Gt(),t)}return(0,b.hu)(vt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new lp(this.source,mn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class xc{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Et(e))return this.isFullyInitialized()&&!this.filtered_;const t=vt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Wse{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function M_(n,e,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,l)=>function Zse(n,e,t){if(null==e.childName||null==t.childName)throw(0,b.g5)("Should only compare child_ events.");const i=new Tt(e.childName,e.snapshotNode),r=new Tt(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,a,l)),o.forEach(a=>{const l=function Kse(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,n.query_))})})}function hw(n,e){return{eventCache:n,serverCache:e}}function k_(n,e,t,i){return hw(new xc(e,t,i),n.serverCache)}function Lj(n,e,t,i){return hw(n.eventCache,new xc(e,t,i))}function fw(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function hd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let WA;class In{constructor(e,t=(()=>(WA||(WA=new ms(Ore)),WA))()){this.value=e,this.children=t}static fromObject(e){let t=new In(null);return Gi(e,(i,r)=>{t=t.set(new en(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Gt(),value:this.value};if(Et(e))return null;{const i=vt(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(mn(e),t);return null!=s?{path:Bn(new en(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Et(e))return this;{const t=vt(e),i=this.children.get(t);return null!==i?i.subtree(mn(e)):new In(null)}}set(e,t){if(Et(e))return new In(t,this.children);{const i=vt(e),s=(this.children.get(i)||new In(null)).set(mn(e),t),o=this.children.insert(i,s);return new In(this.value,o)}}remove(e){if(Et(e))return this.children.isEmpty()?new In(null):new In(null,this.children);{const t=vt(e),i=this.children.get(t);if(i){const r=i.remove(mn(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new In(null):new In(this.value,s)}return this}}get(e){if(Et(e))return this.value;{const t=vt(e),i=this.children.get(t);return i?i.get(mn(e)):null}}setTree(e,t){if(Et(e))return t;{const i=vt(e),s=(this.children.get(i)||new In(null)).setTree(mn(e),t);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new In(this.value,o)}}fold(e){return this.fold_(Gt(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Bn(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Gt(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Et(e))return null;{const s=vt(e),o=this.children.get(s);return o?o.findOnPath_(mn(e),Bn(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Gt(),t)}foreachOnPath_(e,t,i){if(Et(e))return this;{this.value&&i(t,this.value);const r=vt(e),s=this.children.get(r);return s?s.foreachOnPath_(mn(e),Bn(t,r),i):new In(null)}}foreach(e){this.foreach_(Gt(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Bn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class jo{constructor(e){this.writeTree_=e}static empty(){return new jo(new In(null))}}function F_(n,e,t){if(Et(e))return new jo(new In(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=Ur(r,e);return s=s.updateChild(o,t),new jo(n.writeTree_.set(r,s))}{const r=new In(t),s=n.writeTree_.setTree(e,r);return new jo(s)}}}function qA(n,e,t){let i=n;return Gi(t,(r,s)=>{i=F_(i,Bn(e,r),s)}),i}function Vj(n,e){if(Et(e))return jo.empty();{const t=n.writeTree_.setTree(e,new In(null));return new jo(t)}}function KA(n,e){return null!=fd(n,e)}function fd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ur(t.path,e)):null}function Bj(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(wn,(i,r)=>{e.push(new Tt(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Tt(i,r.value))}),e}function Pc(n,e){if(Et(e))return n;{const t=fd(n,e);return new jo(null!=t?new In(t):n.writeTree_.subtree(e))}}function ZA(n){return n.writeTree_.isEmpty()}function cp(n,e){return Uj(Gt(),n.writeTree_,e)}function Uj(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,b.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=Uj(Bn(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(Bn(n,".priority"),i)),t}}function pw(n,e){return zj(e,n)}function toe(n,e){if(n.snap)return uo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&uo(Bn(n.path,t),e))return!0;return!1}function ioe(n){return n.visible}function jj(n,e,t){let i=jo.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let a;if(s.snap)uo(t,o)?(a=Ur(t,o),i=F_(i,a,s.snap)):uo(o,t)&&(a=Ur(o,t),i=F_(i,Gt(),s.snap.getChild(a)));else{if(!s.children)throw(0,b.g5)("WriteRecord should have .snap or .children");if(uo(t,o))a=Ur(t,o),i=qA(i,a,s.children);else if(uo(o,t))if(a=Ur(o,t),Et(a))i=qA(i,Gt(),s.children);else{const l=(0,b.DV)(s.children,vt(a));if(l){const u=l.getChild(mn(a));i=F_(i,Gt(),u)}}}}}return i}function Hj(n,e,t,i,r){if(i||r){const s=Pc(n.visibleWrites,e);return!r&&ZA(s)?t:r||null!=t||KA(s,Gt())?cp(jj(n.allWrites,function(u){return(u.visible||r)&&(!i||!~i.indexOf(u.writeId))&&(uo(u.path,e)||uo(e,u.path))},e),t||lt.EMPTY_NODE):null}{const s=fd(n.visibleWrites,e);if(null!=s)return s;{const o=Pc(n.visibleWrites,e);return ZA(o)?t:null!=t||KA(o,Gt())?cp(o,t||lt.EMPTY_NODE):null}}}function gw(n,e,t,i){return Hj(n.writeTree,n.treePath,e,t,i)}function YA(n,e){return function roe(n,e,t){let i=lt.EMPTY_NODE;const r=fd(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(wn,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=Pc(n.visibleWrites,e);return t.forEachChild(wn,(o,a)=>{const l=cp(Pc(s,new en(o)),a);i=i.updateImmediateChild(o,l)}),Bj(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return Bj(Pc(n.visibleWrites,e)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(n.writeTree,n.treePath,e)}function $j(n,e,t,i){return function soe(n,e,t,i,r){(0,b.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Bn(e,t);if(KA(n.visibleWrites,s))return null;{const o=Pc(n.visibleWrites,s);return ZA(o)?r.getChild(t):cp(o,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function mw(n,e){return function aoe(n,e){return fd(n.visibleWrites,e)}(n.writeTree,Bn(n.treePath,e))}function QA(n,e,t){return function ooe(n,e,t,i){const r=Bn(e,t),s=fd(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?cp(Pc(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Gj(n,e){return zj(Bn(n.treePath,e),n.writeTree)}function zj(n,e){return{treePath:n,writeTree:e}}class doe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,b.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,b.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,x_(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,N_(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,op(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,b.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,x_(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const Wj=new class hoe{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class JA{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new xc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return QA(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:hd(this.viewCache_),s=function uoe(n,e,t,i,r,s){return function loe(n,e,t,i,r,s,o){let a;const l=Pc(n.visibleWrites,e),u=fd(l,Gt());if(null!=u)a=u;else{if(null==t)return[];a=cp(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const h=[],g=o.getCompare(),m=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let y=m.getNext();for(;y&&h.length<r;)0!==g(y,i)&&h.push(y),y=m.getNext();return h}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function qj(n,e,t,i,r,s){const o=e.eventCache;if(null!=mw(i,t))return e;{let a,l;if(Et(t))if((0,b.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=hd(e),g=YA(i,u instanceof lt?u:lt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),g,s)}else{const u=gw(i,hd(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=vt(t);if(".priority"===u){(0,b.hu)(1===Nc(t),"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const g=$j(i,t,h,l);a=null!=g?n.filter.updatePriority(h,g):o.getNode()}else{const h=mn(t);let g;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const m=$j(i,t,o.getNode(),l);g=null!=m?o.getNode().getImmediateChild(u).updateChild(h,m):o.getNode().getImmediateChild(u)}else g=QA(i,u,e.serverCache);a=null!=g?n.filter.updateChild(o.getNode(),u,g,h,r,s):o.getNode()}}return k_(e,a,o.isFullyInitialized()||Et(t),n.filter.filtersNodes())}}function _w(n,e,t,i,r,s,o,a){const l=e.serverCache;let u;const h=o?n.filter:n.filter.getIndexedFilter();if(Et(t))u=h.updateFullNode(l.getNode(),i,null);else if(h.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(t,i);u=h.updateFullNode(l.getNode(),y,null)}else{const y=vt(t);if(!l.isCompleteForPath(t)&&Nc(t)>1)return e;const E=mn(t),I=l.getNode().getImmediateChild(y).updateChild(E,i);u=".priority"===y?h.updatePriority(l.getNode(),I):h.updateChild(l.getNode(),y,I,E,Wj,null)}const g=Lj(e,u,l.isFullyInitialized()||Et(t),h.filtersNodes());return qj(n,g,t,r,new JA(r,g,s),a)}function XA(n,e,t,i,r,s,o){const a=e.eventCache;let l,u;const h=new JA(r,e,s);if(Et(t))u=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=k_(e,u,!0,n.filter.filtersNodes());else{const g=vt(t);if(".priority"===g)u=n.filter.updatePriority(e.eventCache.getNode(),i),l=k_(e,u,a.isFullyInitialized(),a.isFiltered());else{const m=mn(t),y=a.getNode().getImmediateChild(g);let E;if(Et(m))E=i;else{const w=h.getCompleteChild(g);E=null!=w?".priority"===NA(m)&&w.getChild(Ij(m)).isEmpty()?w:w.updateChild(m,i):lt.EMPTY_NODE}l=y.equals(E)?e:k_(e,n.filter.updateChild(a.getNode(),g,E,m,h,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function Kj(n,e){return n.eventCache.isCompleteForChild(e)}function Zj(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function eR(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,l=e;u=Et(t)?i:new In(null).setTree(t,i);const h=e.serverCache.getNode();return u.children.inorderTraversal((g,m)=>{if(h.hasChild(g)){const E=Zj(0,e.serverCache.getNode().getImmediateChild(g),m);l=_w(n,l,new en(g),E,r,s,o,a)}}),u.children.inorderTraversal((g,m)=>{const y=!e.serverCache.isCompleteForChild(g)&&null===m.value;if(!h.hasChild(g)&&!y){const w=Zj(0,e.serverCache.getNode().getImmediateChild(g),m);l=_w(n,l,new en(g),w,r,s,o,a)}}),l}class boe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new VA(i.getIndex()),s=function kse(n){return n.loadsAllData()?new VA(n.getIndex()):n.hasLimit()?new Mse(n):new P_(n)}(i);this.processor_=function foe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(lt.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(lt.EMPTY_NODE,a.getNode(),null),h=new xc(l,o.isFullyInitialized(),r.filtersNodes()),g=new xc(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=hw(g,h),this.eventGenerator_=new Wse(this.query_)}get query(){return this.query_}}function Toe(n,e){const t=hd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Et(e)&&!t.getImmediateChild(vt(e)).isEmpty())?t.getChild(e):null}function Yj(n){return 0===n.eventRegistrations_.length}function Qj(n,e,t){const i=[];if(t){(0,b.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(o)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function Jj(n,e,t,i){e.type===Da.MERGE&&null!==e.source.queryId&&((0,b.hu)(hd(n.viewCache_),"We should always have a full cache before handling merges"),(0,b.hu)(fw(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function goe(n,e,t,i,r){const s=new doe;let o,a;if(t.type===Da.OVERWRITE){const u=t;u.source.fromUser?o=XA(n,e,u.path,u.snap,i,r,s):((0,b.hu)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Et(u.path),o=_w(n,e,u.path,u.snap,i,r,a,s))}else if(t.type===Da.MERGE){const u=t;u.source.fromUser?o=function _oe(n,e,t,i,r,s,o){let a=e;return i.foreach((l,u)=>{const h=Bn(t,l);Kj(e,vt(h))&&(a=XA(n,a,h,u,r,s,o))}),i.foreach((l,u)=>{const h=Bn(t,l);Kj(e,vt(h))||(a=XA(n,a,h,u,r,s,o))}),a}(n,e,u.path,u.children,i,r,s):((0,b.hu)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=eR(n,e,u.path,u.children,i,r,a,s))}else if(t.type===Da.ACK_USER_WRITE){const u=t;o=u.revert?function Eoe(n,e,t,i,r,s){let o;if(null!=mw(i,t))return e;{const a=new JA(i,e,r),l=e.eventCache.getNode();let u;if(Et(t)||".priority"===vt(t)){let h;if(e.serverCache.isFullyInitialized())h=gw(i,hd(e));else{const g=e.serverCache.getNode();(0,b.hu)(g instanceof lt,"serverChildren would be complete if leaf node"),h=YA(i,g)}u=n.filter.updateFullNode(l,h,s)}else{const h=vt(t);let g=QA(i,h,e.serverCache);null==g&&e.serverCache.isCompleteForChild(h)&&(g=l.getImmediateChild(h)),u=null!=g?n.filter.updateChild(l,h,g,mn(t),a,s):e.eventCache.getNode().hasChild(h)?n.filter.updateChild(l,h,lt.EMPTY_NODE,mn(t),a,s):l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=gw(i,hd(e)),o.isLeafNode()&&(u=n.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=mw(i,Gt()),k_(e,u,o,n.filter.filtersNodes())}}(n,e,u.path,i,r,s):function yoe(n,e,t,i,r,s,o){if(null!=mw(r,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(Et(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return _w(n,e,t,l.getNode().getChild(t),r,s,a,o);if(Et(t)){let u=new In(null);return l.getNode().forEachChild(Ca,(h,g)=>{u=u.set(new en(h),g)}),eR(n,e,t,u,r,s,a,o)}return e}{let u=new In(null);return i.foreach((h,g)=>{const m=Bn(t,h);l.isCompleteForPath(m)&&(u=u.set(h,l.getNode().getChild(m)))}),eR(n,e,t,u,r,s,a,o)}}(n,e,u.path,u.affectedTree,i,r,s)}else{if(t.type!==Da.LISTEN_COMPLETE)throw(0,b.g5)("Unknown operation type: "+t.type);o=function voe(n,e,t,i,r){const s=e.serverCache;return qj(n,Lj(e,s.getNode(),s.isFullyInitialized()||Et(t),s.isFiltered()),t,i,Wj,r)}(n,e,t.path,i,s)}const l=s.getChanges();return function moe(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=fw(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(Oj(fw(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,r,e,t,i);return function poe(n,e){(0,b.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,b.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,b.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Xj(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Xj(n,e,t,i){return function qse(n,e,t,i){const r=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Ose(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),M_(n,r,"child_removed",e,i,t),M_(n,r,"child_added",e,i,t),M_(n,r,"child_moved",s,i,t),M_(n,r,"child_changed",e,i,t),M_(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let yw,Ew;class eH{constructor(){this.views=new Map}}function tR(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,b.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Jj(s,e,t,i)}{let s=[];for(const o of n.views.values())s=s.concat(Jj(o,e,t,i));return s}}function tH(n,e,t,i,r){const o=n.views.get(e._queryIdentifier);if(!o){let a=gw(t,r?i:null),l=!1;a?l=!0:i instanceof lt?(a=YA(t,i),l=!1):(a=lt.EMPTY_NODE,l=!1);const u=hw(new xc(a,l,!1),new xc(i,r,!1));return new boe(e,u)}return o}function nH(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Oc(n,e){let t=null;for(const i of n.views.values())t=t||Toe(i,e);return t}function iH(n,e){return e._queryParams.loadsAllData()?vw(n):n.views.get(e._queryIdentifier)}function rH(n,e){return null!=iH(n,e)}function Mc(n){return null!=vw(n)}function vw(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Moe=1;class sH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new In(null),this.pendingWriteTree_=function coe(){return{visibleWrites:jo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nR(n,e,t,i,r){return function Qse(n,e,t,i,r){(0,b.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=F_(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?up(n,new dd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function kc(n,e,t=!1){const i=function Xse(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function eoe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,b.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&toe(a,i.path)?r=!1:uo(i.path,a.path)&&(s=!0)),o--}return!!r&&(s?(function noe(n){n.visibleWrites=jj(n.allWrites,ioe,Gt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=Vj(n.visibleWrites,i.path):Gi(i.children,l=>{n.visibleWrites=Vj(n.visibleWrites,Bn(i.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new In(null);return null!=i.snap?s=s.set(Gt(),!0):Gi(i.children,o=>{s=s.set(new en(o),!0)}),up(n,new dw(i.path,s,t))}return[]}function L_(n,e,t){return up(n,new dd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function bw(n,e,t,i,r=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||rH(o,e))){const l=function xoe(n,e,t,i){const r=e._queryIdentifier,s=[];let o=[];const a=Mc(n);if("default"===r)for(const[l,u]of n.views.entries())o=o.concat(Qj(u,t,i)),Yj(u)&&(n.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=n.views.get(r);l&&(o=o.concat(Qj(l,t,i)),Yj(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Mc(n)&&s.push(new(function Aoe(){return(0,b.hu)(yw,"Reference.ts has not been loaded"),yw}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,i);(function Roe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!r){const h=-1!==u.findIndex(m=>m._queryParams.loadsAllData()),g=n.syncPointTree_.findOnPath(s,(m,y)=>Mc(y));if(h&&!g){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function joe(n){return n.fold((e,t,i)=>{if(t&&Mc(t))return[vw(t)];{let r=[];return t&&(r=nH(t)),Gi(i,(s,o)=>{r=r.concat(o)}),r}})}(m);for(let E=0;E<y.length;++E){const w=y[E],I=w.query,O=cH(n,w);n.listenProvider_.startListening(B_(I),V_(n,I),O.hashFn,O.onComplete)}}}!g&&u.length>0&&!i&&(h?n.listenProvider_.stopListening(B_(e),null):u.forEach(m=>{const y=n.queryToTagMap.get(Iw(m));n.listenProvider_.stopListening(B_(m),y)}))}!function Hoe(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=Iw(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,u)}return a}function oH(n,e,t,i){const r=rR(n,i);if(null!=r){const s=sR(r),o=s.path,a=s.queryId,l=Ur(o,e);return oR(n,o,new dd(zA(a),l,t))}return[]}function iR(n,e,t,i=!1){const r=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(m,y)=>{const E=Ur(m,r);s=s||Oc(y,E),o=o||Mc(y)});let l,a=n.syncPointTree_.get(r);a?(o=o||Mc(a),s=s||Oc(a,Gt())):(a=new eH,n.syncPointTree_=n.syncPointTree_.set(r,a)),null!=s?l=!0:(l=!1,s=lt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((y,E)=>{const w=Oc(E,Gt());w&&(s=s.updateImmediateChild(y,w))}));const u=rH(a,e);if(!u&&!e._queryParams.loadsAllData()){const m=Iw(e);(0,b.hu)(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function $oe(){return Moe++}();n.queryToTagMap.set(m,y),n.tagToQueryMap.set(y,m)}let g=function Noe(n,e,t,i,r,s){const o=tH(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function Coe(n,e){n.eventRegistrations_.push(e)}(o,t),function Doe(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(wn,(s,o)=>{i.push(op(s,o))}),t.isFullyInitialized()&&i.push(Oj(t.getNode())),Xj(n,i,t.getNode(),e)}(o,t)}(a,e,t,pw(n.pendingWriteTree_,r),s,l);if(!u&&!o&&!i){const m=iH(a,e);g=g.concat(function Goe(n,e,t){const i=e._path,r=V_(n,e),s=cH(n,t),o=n.listenProvider_.startListening(B_(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)(0,b.hu)(!Mc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,g)=>{if(!Et(u)&&h&&Mc(h))return[vw(h).query];{let m=[];return h&&(m=m.concat(nH(h).map(y=>y.query))),Gi(g,(y,E)=>{m=m.concat(E)}),m}});for(let u=0;u<l.length;++u){const h=l[u];n.listenProvider_.stopListening(B_(h),V_(n,h))}}return o}(n,e,m))}return g}function ww(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const u=Oc(a,Ur(o,e));if(u)return u});return Hj(r,e,s,t,!0)}function up(n,e){return aH(e,n.syncPointTree_,null,pw(n.pendingWriteTree_,Gt()))}function aH(n,e,t,i){if(Et(n.path))return lH(n,e,t,i);{const r=e.get(Gt());null==t&&null!=r&&(t=Oc(r,Gt()));let s=[];const o=vt(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const u=t?t.getImmediateChild(o):null,h=Gj(i,o);s=s.concat(aH(a,l,u,h))}return r&&(s=s.concat(tR(r,n,i,t))),s}}function lH(n,e,t,i){const r=e.get(Gt());null==t&&null!=r&&(t=Oc(r,Gt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,u=Gj(i,o),h=n.operationForChild(o);h&&(s=s.concat(lH(h,a,l,u)))}),r&&(s=s.concat(tR(r,n,i,t))),s}function cH(n,e){const t=e.query,i=V_(n,t);return{hashFn:()=>(function woe(n){return n.viewCache_.serverCache.getNode()}(e)||lt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Voe(n,e,t){const i=rR(n,t);if(i){const r=sR(i),s=r.path,o=r.queryId,a=Ur(s,e);return oR(n,s,new O_(zA(o),a))}return[]}(n,t._path,i):function Loe(n,e){return up(n,new O_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Fre(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return bw(n,t,null,s)}}}}function V_(n,e){const t=Iw(e);return n.queryToTagMap.get(t)}function Iw(n){return n._path.toString()+"$"+n._queryIdentifier}function rR(n,e){return n.tagToQueryMap.get(e)}function sR(n){const e=n.indexOf("$");return(0,b.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new en(n.substr(0,e))}}function oR(n,e,t){const i=n.syncPointTree_.get(e);return(0,b.hu)(i,"Missing sync point for query tag that we're tracking"),tR(i,t,pw(n.pendingWriteTree_,e),null)}function B_(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Ooe(){return(0,b.hu)(Ew,"Reference.ts has not been loaded"),Ew}())(n._repo,n._path):n}class aR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new aR(t)}node(){return this.node_}}class lR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Bn(this.path_,e);return new lR(this.syncTree_,t)}node(){return ww(this.syncTree_,this.path_)}}const zoe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},uH=function(n,e,t){return n&&"object"==typeof n?((0,b.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Woe(n[".sv"],e,t):"object"==typeof n[".sv"]?qoe(n[".sv"],e):void(0,b.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Woe=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,b.hu)(!1,"Unexpected server value: "+n)},qoe=function(n,e,t){n.hasOwnProperty("increment")||(0,b.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,b.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,b.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},dH=function(n,e,t,i){return uR(e,new lR(t,n),i)},cR=function(n,e,t){return uR(n,new aR(e),t)};function uR(n,e,t){const i=n.getPriority().val(),r=uH(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=uH(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new rp(a,Zn(r)):n}{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new rp(r))),o.forEachChild(wn,(a,l)=>{const u=uR(l,e.getImmediateChild(a),t);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}class dR{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Tw(n,e){let t=e instanceof en?e:new en(e),i=n,r=vt(t);for(;null!==r;){const s=(0,b.DV)(i.node.children,r)||{children:{},childCount:0};i=new dR(r,i,s),t=mn(t),r=vt(t)}return i}function pd(n){return n.node.value}function hR(n,e){n.node.value=e,fR(n)}function hH(n){return n.node.childCount>0}function Cw(n,e){Gi(n.node.children,(t,i)=>{e(new dR(t,n,i))})}function fH(n,e,t,i){t&&!i&&e(n),Cw(n,r=>{fH(r,e,!0,i)}),t&&i&&e(n)}function U_(n){return new en(null===n.parent?n.name:U_(n.parent)+"/"+n.name)}function fR(n){null!==n.parent&&function Yoe(n,e,t){const i=function Koe(n){return void 0===pd(n)&&!hH(n)}(t),r=(0,b.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,fR(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,fR(n))}(n.parent,n.name,n)}const Qoe=/[\[\].#$\/\u0000-\u001F\u007F]/,Joe=/[\[\].#$\u0000-\u001F\u007F]/,pR=10485760,Dw=function(n){return"string"==typeof n&&0!==n.length&&!Qoe.test(n)},pH=function(n){return"string"==typeof n&&0!==n.length&&!Joe.test(n)},j_=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Xb(n)||n&&"object"==typeof n&&(0,b.r3)(n,".sv")},Sa=function(n,e,t,i){i&&void 0===e||H_((0,b.gK)(n,"value"),e,t)},H_=function(n,e,t){const i=t instanceof en?new gse(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+cd(i));if("function"==typeof e)throw new Error(n+"contains a function "+cd(i)+" with contents = "+e.toString());if(Xb(e))throw new Error(n+"contains "+e.toString()+" "+cd(i));if("string"==typeof e&&e.length>pR/3&&(0,b.ug)(e)>pR)throw new Error(n+"contains a string greater than "+pR+" utf8 bytes "+cd(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Gi(e,(o,a)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Dw(o)))throw new Error(n+" contains an invalid key ("+o+") "+cd(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function mse(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,b.ug)(e),Tj(n)})(i,o),H_(n,a,i),function _se(n){const e=n.parts_.pop();n.byteLength_-=(0,b.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+cd(i)+" in addition to actual children.")}},gH=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,b.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Gi(e,(o,a)=>{const l=new en(o);if(H_(r,a,Bn(t,l)),".priority"===NA(l)&&!j_(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=D_(i);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!Dw(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(pse);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&uo(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},gR=function(n,e,t){if(!t||void 0!==e){if(Xb(e))throw new Error((0,b.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!j_(e))throw new Error((0,b.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},$_=function(n,e,t,i){if(!(i&&void 0===t||Dw(t)))throw new Error((0,b.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},G_=function(n,e,t,i){if(!(i&&void 0===t||pH(t)))throw new Error((0,b.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},tae=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),G_(n,e,t,i)},ho=function(n,e){if(".info"===vt(e))throw new Error(n+" failed = Can't modify data under /.info/")},mH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Dw(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pH(n)}(t))throw new Error((0,b.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class nae{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sw(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!xA(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function _H(n,e,t){Sw(n,t),yH(n,i=>xA(i,e))}function Fs(n,e,t){Sw(n,t),yH(n,i=>uo(i,e)||uo(e,i))}function yH(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(iae(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function iae(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();ad&&$i("event: "+t.toString()),np(i)}}}const vH="repo_interrupt",rae=25;class sae{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nae,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=uw(),this.transactionQueueTree_=new dR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function EH(n){const t=n.infoData_.getNode(new en(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function z_(n){return zoe({timestamp:EH(n)})}function bH(n,e,t,i,r){n.dataUpdateCount++;const s=new en(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const l=(0,b.UI)(t,u=>Zn(u));o=function Boe(n,e,t,i){const r=rR(n,i);if(r){const s=sR(r),o=s.path,a=s.queryId,l=Ur(o,e),u=In.fromObject(t);return oR(n,o,new lp(zA(a),l,u))}return[]}(n.serverSyncTree_,s,l,r)}else{const l=Zn(t);o=oH(n.serverSyncTree_,s,l,r)}else if(i){const l=(0,b.UI)(t,u=>Zn(u));o=function Foe(n,e,t){const i=In.fromObject(t);return up(n,new lp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,l)}else{const l=Zn(t);o=L_(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=hp(n,s)),Fs(n.eventQueue_,a,o)}function wH(n,e){mR(n,"connected",e),!1===e&&function uae(n){dp(n,"onDisconnectEvents");const e=z_(n),t=uw();HA(n.onDisconnect_,Gt(),(r,s)=>{const o=dH(r,s,n.serverSyncTree_,e);ap(t,r,o)});let i=[];HA(t,Gt(),(r,s)=>{i=i.concat(L_(n.serverSyncTree_,r,s));const o=ER(n,r);hp(n,o)}),n.onDisconnect_=uw(),Fs(n.eventQueue_,Gt(),i)}(n)}function mR(n,e,t){const i=new en("/.info/"+e),r=Zn(t);n.infoData_.updateSnapshot(i,r);const s=L_(n.infoSyncTree_,i,r);Fs(n.eventQueue_,i,s)}function Aw(n){return n.nextWriteId_++}function _R(n,e,t,i,r){dp(n,"set",{path:e.toString(),value:t,priority:i});const s=z_(n),o=Zn(t,i),a=ww(n.serverSyncTree_,e),l=cR(o,a,s),u=Aw(n),h=nR(n.serverSyncTree_,e,l,u,!0);Sw(n.eventQueue_,h),n.server_.put(e.toString(),o.val(!0),(m,y)=>{const E="ok"===m;E||wr("set at "+e+" failed: "+m);const w=kc(n.serverSyncTree_,u,!E);Fs(n.eventQueue_,e,w),Fc(0,r,m,y)});const g=ER(n,e);hp(n,g),Fs(n.eventQueue_,g,[])}function dae(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&jA(n.onDisconnect_,e),Fc(0,t,i,r)})}function IH(n,e,t,i){const r=Zn(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{"ok"===s&&ap(n.onDisconnect_,e,r),Fc(0,i,s,o)})}function yR(n,e,t){let i;i=".info"===vt(e._path)?bw(n.infoSyncTree_,e,t):bw(n.serverSyncTree_,e,t),_H(n.eventQueue_,e._path,i)}function TH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(vH)}function dp(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),$i(t,...e)}function Fc(n,e,t,i){e&&np(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function vR(n,e,t){return ww(n.serverSyncTree_,e,t)||lt.EMPTY_NODE}function Rw(n,e=n.transactionQueueTree_){if(e||Nw(n,e),pd(e)){const t=DH(n,e);(0,b.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function _ae(n,e,t){const i=t.map(u=>u.currentWriteId),r=vR(n,e,i);let s=r;const o=r.hash();for(let u=0;u<t.length;u++){const h=t[u];(0,b.hu)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const g=Ur(e,h.path);s=s.updateChild(g,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,u=>{dp(n,"transaction put response",{path:l.toString(),status:u});let h=[];if("ok"===u){const g=[];for(let m=0;m<t.length;m++)t[m].status=2,h=h.concat(kc(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&g.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();Nw(n,Tw(n.transactionQueueTree_,e)),Rw(n,n.transactionQueueTree_),Fs(n.eventQueue_,e,h);for(let m=0;m<g.length;m++)np(g[m])}else{if("datastale"===u)for(let g=0;g<t.length;g++)t[g].status=3===t[g].status?4:0;else{wr("transaction at "+l.toString()+" failed: "+u);for(let g=0;g<t.length;g++)t[g].status=4,t[g].abortReason=u}hp(n,e)}},o)}(n,U_(e),t)}else hH(e)&&Cw(e,t=>{Rw(n,t)})}function hp(n,e){const t=CH(n,e),i=U_(t);return function yae(n,e,t){if(0===e.length)return;const i=[];let r=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Ur(t,l.path);let g,h=!1;if((0,b.hu)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,g=l.abortReason,r=r.concat(kc(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=rae)h=!0,g="maxretry",r=r.concat(kc(n.serverSyncTree_,l.currentWriteId,!0));else{const m=vR(n,l.path,o);l.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){H_("transaction failed: Data returned ",y,l.path);let E=Zn(y);"object"==typeof y&&null!=y&&(0,b.r3)(y,".priority")||(E=E.updatePriority(m.getPriority()));const I=l.currentWriteId,O=z_(n),S=cR(E,m,O);l.currentOutputSnapshotRaw=E,l.currentOutputSnapshotResolved=S,l.currentWriteId=Aw(n),o.splice(o.indexOf(I),1),r=r.concat(nR(n.serverSyncTree_,l.path,S,l.currentWriteId,l.applyLocally)),r=r.concat(kc(n.serverSyncTree_,I,!0))}else h=!0,g="nodata",r=r.concat(kc(n.serverSyncTree_,l.currentWriteId,!0))}Fs(n.eventQueue_,t,r),r=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&i.push("nodata"===g?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(g),!1,null)))}Nw(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)np(i[a]);Rw(n,n.transactionQueueTree_)}(n,DH(n,t),i),i}function CH(n,e){let t,i=n.transactionQueueTree_;for(t=vt(e);null!==t&&void 0===pd(i);)i=Tw(i,t),t=vt(e=mn(e));return i}function DH(n,e){const t=[];return SH(n,e,t),t.sort((i,r)=>i.order-r.order),t}function SH(n,e,t){const i=pd(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Cw(e,r=>{SH(n,r,t)})}function Nw(n,e){const t=pd(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,hR(e,t.length>0?t:void 0)}Cw(e,i=>{Nw(n,i)})}function ER(n,e){const t=U_(CH(n,e)),i=Tw(n.transactionQueueTree_,e);return function Zoe(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{bR(n,r)}),bR(n,i),fH(i,r=>{bR(n,r)}),t}function bR(n,e){const t=pd(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,b.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,b.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(kc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?hR(e,void 0):t.length=s+1,Fs(n.eventQueue_,U_(e),r);for(let o=0;o<i.length;o++)np(i[o])}}const wR=function(n,e){const t=bae(n),i=t.namespace;return"firebase.com"===t.domain&&Ta(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Ta("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&wr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new TA(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new en(t.pathString)}},bae=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof n){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let h=n.indexOf("/");-1===h&&(h=n.length);let g=n.indexOf("?");-1===g&&(g=n.length),e=n.substring(0,Math.min(h,g)),h<g&&(r=function vae(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(h,g)));const m=function Eae(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):wr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,g)));u=e.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const E=e.indexOf(".");i=e.substring(0,E).toLowerCase(),t=e.substring(E+1),s=i}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},AH="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wae=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=AH.charAt(t%64),t=Math.floor(t/64);(0,b.hu)(0===t,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=AH.charAt(e[r]);return(0,b.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class RH{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,b.Wl)(this.snapshot.exportVal())}}class NH{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class IR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,b.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class xH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new b.BH;return dae(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ho("OnDisconnect.remove",this._path);const e=new b.BH;return IH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ho("OnDisconnect.set",this._path),Sa("OnDisconnect.set",e,this._path,!1);const t=new b.BH;return IH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ho("OnDisconnect.setWithPriority",this._path),Sa("OnDisconnect.setWithPriority",e,this._path,!1),gR("OnDisconnect.setWithPriority",t,!1);const i=new b.BH;return function hae(n,e,t,i,r){const s=Zn(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&ap(n.onDisconnect_,e,s),Fc(0,r,o,a)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){ho("OnDisconnect.update",this._path),gH("OnDisconnect.update",e,this._path,!1);const t=new b.BH;return function fae(n,e,t,i){if((0,b.xb)(t))return $i("onDisconnect().update() called with empty data.  Don't do anything."),void Fc(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&Gi(t,(o,a)=>{const l=Zn(a);ap(n.onDisconnect_,Bn(e,o),l)}),Fc(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class _s{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Et(this._path)?null:NA(this._path)}get ref(){return new fo(this._repo,this._path)}get _queryIdentifier(){const e=kj(this._queryParams),t=wA(e);return"{}"===t?"default":t}get _queryObject(){return kj(this._queryParams)}isEqual(e){if(!((e=(0,b.m9)(e))instanceof _s))return!1;const t=this._repo===e._repo,i=xA(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function fse(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function xw(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Lc(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ca){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ac)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Sl)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===wn){if(null!=e&&!j_(e)||null!=t&&!j_(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,b.hu)(n.getIndex()instanceof FA||n.getIndex()===LA,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Pw(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class fo extends _s{constructor(e,t){super(e,t,new aw,!1)}get parent(){const e=Ij(this._path);return null===e?null:new fo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class gd{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new en(e),i=md(this.ref,e);return new gd(this._node.getChild(t),i,wn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new gd(r,md(this.ref,i),wn)))}hasChild(e){const t=new en(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function PH(n,e){return(n=(0,b.m9)(n))._checkNotDeleted("ref"),void 0!==e?md(n._root,e):n._root}function OH(n,e){(n=(0,b.m9)(n))._checkNotDeleted("refFromURL");const t=wR(e,n._repo.repoInfo_.nodeAdmin);mH("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Ta("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),PH(n,t.path.toString())}function md(n,e){return null===vt((n=(0,b.m9)(n))._path)?tae("child","path",e,!1):G_("child","path",e,!1),new fo(n._repo,Bn(n._path,e))}function TR(n,e){n=(0,b.m9)(n),ho("set",n._path),Sa("set",e,n._path,!1);const t=new b.BH;return _R(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Sae(n,e){gH("update",e,n._path,!1);const t=new b.BH;return function cae(n,e,t,i){dp(n,"update",{path:e.toString(),value:t});let r=!0;const s=z_(n),o={};if(Gi(t,(a,l)=>{r=!1,o[a]=dH(Bn(e,a),Zn(l),n.serverSyncTree_,s)}),r)$i("update() called with empty data.  Don't do anything."),Fc(0,i,"ok",void 0);else{const a=Aw(n),l=function koe(n,e,t,i){!function Jse(n,e,t,i){(0,b.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=qA(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=In.fromObject(t);return up(n,new lp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,o,a);Sw(n.eventQueue_,l),n.server_.merge(e.toString(),t,(u,h)=>{const g="ok"===u;g||wr("update at "+e+" failed: "+u);const m=kc(n.serverSyncTree_,a,!g),y=m.length>0?hp(n,e):e;Fs(n.eventQueue_,y,m),Fc(0,i,u,h)}),Gi(t,u=>{const h=ER(n,Bn(e,u));hp(n,h)}),Fs(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Aae(n){n=(0,b.m9)(n);const e=new IR(()=>{}),t=new W_(e);return function lae(n,e,t){const i=function Uoe(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(u,h)=>{const g=Ur(u,t);i=i||Oc(h,g)});let r=n.syncPointTree_.get(t);r?i=i||Oc(r,Gt()):(r=new eH,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,o=s?new xc(i,!0,!1):null;return function Ioe(n){return fw(n.viewCache_)}(tH(r,e,pw(n.pendingWriteTree_,e._path),s?o.getNode():lt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=Zn(r).withIndex(e._queryParams.getIndex());let o;if(iR(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=L_(n.serverSyncTree_,e._path,s);else{const a=V_(n.serverSyncTree_,e);o=oH(n.serverSyncTree_,e._path,s,a)}return Fs(n.eventQueue_,e._path,o),bw(n.serverSyncTree_,e,t,null,!0),s},r=>(dp(n,"get for query "+(0,b.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new gd(i,new fo(n._repo,n._path),n._queryParams.getIndex()))}class W_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new RH("value",this,new gd(e.snapshotNode,new fo(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new NH(this,e,t):null}matches(e){return e instanceof W_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ow{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new NH(this,e,t):null}createEvent(e,t){(0,b.hu)(null!=e.childName,"Child events should have a childName.");const i=md(new fo(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new RH(e.type,this,new gd(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ow&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function q_(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const l=t,u=(h,g)=>{yR(n._repo,n,a),l(h,g)};u.userCallback=t.userCallback,u.context=t.context,t=u}const o=new IR(t,s||void 0),a="value"===e?new W_(o):new Ow(e,o);return function pae(n,e,t){let i;i=".info"===vt(e._path)?iR(n.infoSyncTree_,e,t):iR(n.serverSyncTree_,e,t),_H(n.eventQueue_,e._path,i)}(n._repo,n,a),()=>yR(n._repo,n,a)}function CR(n,e,t,i){return q_(n,"value",e,t,i)}function MH(n,e,t,i){return q_(n,"child_added",e,t,i)}function kH(n,e,t,i){return q_(n,"child_changed",e,t,i)}function FH(n,e,t,i){return q_(n,"child_moved",e,t,i)}function LH(n,e,t,i){return q_(n,"child_removed",e,t,i)}function VH(n,e,t){let i=null;const r=t?new IR(t):null;"value"===e?i=new W_(r):e&&(i=new Ow(e,r)),yR(n._repo,n,i)}class Ho{}class BH extends Ho{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sa("endAt",this._value,e._path,!0);const t=UA(e._queryParams,this._value,this._key);if(Pw(t),Lc(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _s(e._repo,e._path,t,e._orderByCalled)}}class Nae extends Ho{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sa("endBefore",this._value,e._path,!1);const t=function Bse(n,e,t){let i;return i=UA(n,e,n.index_===Ca||t?t:Ac),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Pw(t),Lc(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _s(e._repo,e._path,t,e._orderByCalled)}}class UH extends Ho{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sa("startAt",this._value,e._path,!0);const t=BA(e._queryParams,this._value,this._key);if(Pw(t),Lc(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new _s(e._repo,e._path,t,e._orderByCalled)}}class Oae extends Ho{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sa("startAfter",this._value,e._path,!1);const t=function Vse(n,e,t){let i;return i=BA(n,e,n.index_===Ca||t?t:Sl),i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(Pw(t),Lc(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new _s(e._repo,e._path,t,e._orderByCalled)}}class kae extends Ho{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new _s(e._repo,e._path,function Fse(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Lae extends Ho{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new _s(e._repo,e._path,function Lse(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Bae extends Ho{constructor(e){super(),this._path=e}_apply(e){xw(e,"orderByChild");const t=new en(this._path);if(Et(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new FA(t),r=lw(e._queryParams,i);return Lc(r),new _s(e._repo,e._path,r,!0)}}class jae extends Ho{_apply(e){xw(e,"orderByKey");const t=lw(e._queryParams,Ca);return Lc(t),new _s(e._repo,e._path,t,!0)}}class $ae extends Ho{_apply(e){xw(e,"orderByPriority");const t=lw(e._queryParams,wn);return Lc(t),new _s(e._repo,e._path,t,!0)}}class zae extends Ho{_apply(e){xw(e,"orderByValue");const t=lw(e._queryParams,LA);return Lc(t),new _s(e._repo,e._path,t,!0)}}class qae extends Ho{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Sa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new BH(this._value,this._key)._apply(new UH(this._value,this._key)._apply(e))}}function $o(n,...e){let t=(0,b.m9)(n);for(const i of e)t=i._apply(t);return t}(function Soe(n){(0,b.hu)(!yw,"__referenceConstructor has already been defined"),yw=n})(fo),function Poe(n){(0,b.hu)(!Ew,"__referenceConstructor has already been defined"),Ew=n}(fo);const DR={};function SR(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Ta("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$i("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,u,o=wR(s,r),a=o.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=wR(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const h=r&&l?new C_(C_.OWNER):new Hre(n.name,n.options,e);mH("Invalid Firebase Database URL",o),Et(o.path)||Ta("Database URL must point to the root of a Firebase Database (not including a child path).");const g=function Jae(n,e,t,i){let r=DR[e.name];r||(r={},DR[e.name]=r);let s=r[n.toURLString()];return s&&Ta("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new sae(n,false,t,i),r[n.toURLString()]=s,s}(a,n,h,new jre(n.name,t));return new ele(g,n)}class ele{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function oae(n,e,t){if(n.stats_=SA(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new cw(n.repoInfo_,(i,r,s,o)=>{bH(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wH(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,b.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ud(n.repoInfo_,e,(i,r,s,o)=>{bH(n,i,r,s,o)},i=>{wH(n,i)},i=>{!function aae(n,e){Gi(e,(t,i)=>{mR(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function zre(n,e){const t=n.toString();return DA[t]||(DA[t]=e()),DA[t]}(n.repoInfo_,()=>new zse(n.stats_,n.server_)),n.infoData_=new Use,n.infoSyncTree_=new sH({startListening:(i,r,s,o)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=L_(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),mR(n,"connected",!1),n.serverSyncTree_=new sH({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{const u=o(a,l);Fs(n.eventQueue_,i._path,u)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fo(this._repo,Gt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Qae(n,e){const t=DR[e];(!t||t[n.key]!==n)&&Ta(`Database ${e}(${n.repoInfo_}) has already been deleted.`),TH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ta("Cannot call "+e+" on a deleted database.")}}function HH(){dj.IS_TRANSPORT_INITIALIZED&&wr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function tle(){HH(),Rc.forceDisallow()}function nle(){HH(),ip.forceDisallow(),Rc.forceAllow()}function sle(n,e){zU(n,e)}const ale={".sv":"timestamp"};class ule{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ud.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ud.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function ole(n){vA(ps.SDK_VERSION),(0,ps._registerComponent)(new Bo.wA("database",(e,{instanceIdentifier:t})=>SR(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(BU,"1.0.2",n),(0,ps.registerVersion)(BU,"1.0.2","esm2017")}();const ple=new ks.Yd("@firebase/database-compat"),GH=function(n){ple.warn("FIREBASE WARNING: "+n)};class _le{constructor(e){this._delegate=e}cancel(e){(0,b.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,b.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,b.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,b.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,b.Dv)("OnDisconnect.set",1,2,arguments.length),(0,b.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,b.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,b.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,b.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,GH("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,b.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class yle{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,b.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Vc{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,b.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,b.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,b.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,b.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,b.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),G_("DataSnapshot.child","path",e,!1),new Vc(this._database,this._delegate.child(e))}hasChild(e){return(0,b.Dv)("DataSnapshot.hasChild",1,1,arguments.length),G_("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,b.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,b.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,b.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Vc(this._database,t)))}hasChildren(){return(0,b.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,b.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,b.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ls(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class or{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,b.Dv)("Query.on",2,4,arguments.length),(0,b.Wj)("Query.on","callback",t,!1);const o=or.getCancelAndContextArgs_("Query.on",i,r),a=(u,h)=>{t.call(o.context,new Vc(this.database,u),h)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return CR(this._delegate,a,l),t;case"child_added":return MH(this._delegate,a,l),t;case"child_removed":return LH(this._delegate,a,l),t;case"child_changed":return kH(this._delegate,a,l),t;case"child_moved":return FH(this._delegate,a,l),t;default:throw new Error((0,b.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,b.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,b.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,b.Wj)("Query.off","callback",t,!0),(0,b.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,VH(this._delegate,e,r)}else VH(this._delegate,e)}get(){return Aae(this._delegate).then(e=>new Vc(this.database,e))}once(e,t,i,r){(0,b.Dv)("Query.once",1,4,arguments.length),(0,b.Wj)("Query.once","callback",t,!0);const s=or.getCancelAndContextArgs_("Query.once",i,r),o=new b.BH,a=(u,h)=>{const g=new Vc(this.database,u);t&&t.call(s.context,g,h),o.resolve(g)};a.userCallback=t,a.context=s.context;const l=u=>{s.cancel&&s.cancel.call(s.context,u),o.reject(u)};switch(e){case"value":CR(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":MH(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":LH(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":kH(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":FH(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,b.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,b.Dv)("Query.limitToFirst",1,1,arguments.length),new or(this.database,$o(this._delegate,function Fae(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new kae(n)}(e)))}limitToLast(e){return(0,b.Dv)("Query.limitToLast",1,1,arguments.length),new or(this.database,$o(this._delegate,function Vae(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Lae(n)}(e)))}orderByChild(e){return(0,b.Dv)("Query.orderByChild",1,1,arguments.length),new or(this.database,$o(this._delegate,function Uae(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return G_("orderByChild","path",n,!1),new Bae(n)}(e)))}orderByKey(){return(0,b.Dv)("Query.orderByKey",0,0,arguments.length),new or(this.database,$o(this._delegate,function Hae(){return new jae}()))}orderByPriority(){return(0,b.Dv)("Query.orderByPriority",0,0,arguments.length),new or(this.database,$o(this._delegate,function Gae(){return new $ae}()))}orderByValue(){return(0,b.Dv)("Query.orderByValue",0,0,arguments.length),new or(this.database,$o(this._delegate,function Wae(){return new zae}()))}startAt(e=null,t){return(0,b.Dv)("Query.startAt",0,2,arguments.length),new or(this.database,$o(this._delegate,function Pae(n=null,e){return $_("startAt","key",e,!0),new UH(n,e)}(e,t)))}startAfter(e=null,t){return(0,b.Dv)("Query.startAfter",0,2,arguments.length),new or(this.database,$o(this._delegate,function Mae(n,e){return $_("startAfter","key",e,!0),new Oae(n,e)}(e,t)))}endAt(e=null,t){return(0,b.Dv)("Query.endAt",0,2,arguments.length),new or(this.database,$o(this._delegate,function Rae(n,e){return $_("endAt","key",e,!0),new BH(n,e)}(e,t)))}endBefore(e=null,t){return(0,b.Dv)("Query.endBefore",0,2,arguments.length),new or(this.database,$o(this._delegate,function xae(n,e){return $_("endBefore","key",e,!0),new Nae(n,e)}(e,t)))}equalTo(e,t){return(0,b.Dv)("Query.equalTo",1,2,arguments.length),new or(this.database,$o(this._delegate,function Kae(n,e){return $_("equalTo","key",e,!0),new qae(n,e)}(e,t)))}toString(){return(0,b.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,b.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,b.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof or))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,b.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,b.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,b.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Ls(this.database,new fo(this._delegate._repo,this._delegate._path))}}class Ls extends or{constructor(e,t){super(e,new _s(t._repo,t._path,new aw,!1)),this.database=e,this._delegate=t}getKey(){return(0,b.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,b.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ls(this.database,md(this._delegate,e))}getParent(){(0,b.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ls(this.database,e):null}getRoot(){return(0,b.Dv)("Reference.root",0,0,arguments.length),new Ls(this.database,this._delegate.root)}set(e,t){(0,b.Dv)("Reference.set",1,2,arguments.length),(0,b.Wj)("Reference.set","onComplete",t,!0);const i=TR(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,b.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,GH("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ho("Reference.update",this._delegate._path),(0,b.Wj)("Reference.update","onComplete",t,!0);const i=Sae(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,b.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,b.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function Dae(n,e,t){if(ho("setWithPriority",n._path),Sa("setWithPriority",e,n._path,!1),gR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new b.BH;return _R(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,b.Dv)("Reference.remove",0,1,arguments.length),(0,b.Wj)("Reference.remove","onComplete",e,!0);const t=function Tae(n){return ho("remove",n._path),TR(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,b.Dv)("Reference.transaction",1,3,arguments.length),(0,b.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,b.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,b.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function dle(n,e,t){var i;if(n=(0,b.m9)(n),ho("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,s=new b.BH,a=CR(n,()=>{});return function mae(n,e,t,i,r,s){dp(n,"transaction on "+e);const o={path:e,update:t,onComplete:i,status:null,order:HU(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=vR(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{H_("transaction failed: Data returned ",l,o.path),o.status=0;const u=Tw(n.transactionQueueTree_,e),h=pd(u)||[];let g;h.push(o),hR(u,h),"object"==typeof l&&null!==l&&(0,b.r3)(l,".priority")?(g=(0,b.DV)(l,".priority"),(0,b.hu)(j_(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(ww(n.serverSyncTree_,e)||lt.EMPTY_NODE).getPriority().val();const m=z_(n),y=Zn(l,g),E=cR(y,a,m);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=E,o.currentWriteId=Aw(n);const w=nR(n.serverSyncTree_,e,E,o.currentWriteId,o.applyLocally);Fs(n.eventQueue_,e,w),Rw(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,u,h)=>{let g=null;l?s.reject(l):(g=new gd(h,new fo(n._repo,n._path),wn),s.resolve(new ule(u,g)))},a,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new yle(s.committed,new Vc(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,b.Dv)("Reference.setPriority",1,2,arguments.length),(0,b.Wj)("Reference.setPriority","onComplete",t,!0);const i=function Cae(n,e){n=(0,b.m9)(n),ho("setPriority",n._path),gR("setPriority",e,!1);const t=new b.BH;return _R(n._repo,Bn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,b.Dv)("Reference.push",0,2,arguments.length),(0,b.Wj)("Reference.push","onComplete",t,!0);const i=function Iae(n,e){n=(0,b.m9)(n),ho("push",n._path),Sa("push",e,n._path,!0);const t=EH(n._repo),i=wae(t),r=md(n,i),s=md(n,i);let o;return o=null!=e?TR(s,e).then(()=>s):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}(this._delegate,e),r=i.then(o=>new Ls(this.database,o));t&&r.then(()=>t(null),o=>t(o));const s=new Ls(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return ho("Reference.onDisconnect",this._delegate._path),new _le(new xH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class K_{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:tle,forceLongPolling:nle}}useEmulator(e,t,i={}){!function $H(n,e,t,i={}){(n=(0,b.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ta("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Ta('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new C_(C_.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:(0,b.Sg)(i.mockUserToken,n.app.options.projectId);s=new C_(o)}!function Yae(n,e,t,i){n.repoInfo_=new TA(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,b.Dv)("database.ref",0,1,arguments.length),e instanceof Ls){const t=OH(this._delegate,e.toString());return new Ls(this,t)}{const t=PH(this._delegate,e);return new Ls(this,t)}}refFromURL(e){(0,b.Dv)("database.refFromURL",1,1,arguments.length);const i=OH(this._delegate,e);return new Ls(this,i)}goOffline(){return(0,b.Dv)("database.goOffline",0,0,arguments.length),function ile(n){(n=(0,b.m9)(n))._checkNotDeleted("goOffline"),TH(n._repo)}(this._delegate)}goOnline(){return(0,b.Dv)("database.goOnline",0,0,arguments.length),function rle(n){(n=(0,b.m9)(n))._checkNotDeleted("goOnline"),function gae(n){n.persistentConnection_&&n.persistentConnection_.resume(vH)}(n._repo)}(this._delegate)}}K_.ServerValue={TIMESTAMP:function lle(){return ale}(),increment:n=>function cle(n){return{".sv":{increment:n}}}(n)};var Ele=Object.freeze({__proto__:null,initStandalone:function vle({app:n,url:e,version:t,customAuthImpl:i,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){vA(t);const a=new Bo.H0("database-standalone"),l=new Bo.zt("auth-internal",a);let u;return l.setComponent(new Bo.wA("auth-internal",()=>i,"PRIVATE")),r&&(u=new Bo.zt("app-check-internal",a),u.setComponent(new Bo.wA("app-check-internal",()=>r,"PRIVATE"))),{instance:new K_(SR(n,l,u,e,o),n),namespace:s}}});const ble=K_.ServerValue;function Z_(n,e,t="on",i=$b){return new je(r=>{let s=null;return s=n[t](e,(o,a)=>{i.schedule(()=>{r.next({snapshot:o,prevKey:a})}),"once"===t&&i.schedule(()=>r.complete())},o=>{i.schedule(()=>r.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(Ne(r=>{const{snapshot:s,prevKey:o}=r;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),qs())}function zH(n){return null==n}function WH(n){return"function"==typeof n.set}function qH(n,e){return WH(e)?e:n.ref(e)}function KH(n,e){if(function Ile(n){return"string"==typeof n}(n))return e.stringCase();if(WH(n))return e.firebaseCase();if(function Tle(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function ZH(n){return(zH(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function YH(n,e,t){return Qt(...(e=ZH(e)).map(r=>Z_(n,r,"on",t)))}function QH(n,e){return function(i,r){return KH(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function Ale(n){return function(t){return t?KH(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function JH(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function xle(n,e){const{payload:t,prevKey:i,key:r}=e,s=JH(n,r),o=function Nle(n,e){if(zH(e))return 0;{const t=JH(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const u={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,u],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==i&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==i)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===r?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function XH(n,e,t){return function Rle(n,e,t){return Z_(n,"value","once",t).pipe(Bt(i=>{const r=[Ee(i)];return e.forEach(s=>r.push(Z_(n,s,"on",t))),Qt(...r).pipe(Uf(xle,[]))}),Eo())}(n,e=ZH(e),t)}function e$(n,e){return function(){return Z_(n,"value","on",e)}}!function wle(n){n.INTERNAL.registerComponent(new Bo.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new K_(r,i)},"PUBLIC").setServiceProps({Reference:Ls,Query:or,Database:K_,DataSnapshot:Vc,enableLogging:sle,INTERNAL:Ele,ServerValue:ble}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.2")}(co.Z);const Mle=new ve("angularfire2.realtimeDatabaseURL"),kle=new ve("angularfire2.database.use-emulator");let t$=(()=>{class n{schedulers;database;constructor(t,i,r,s,o,a,l,u,h,g,m,y,E,w,I){this.schedulers=a;const O=l,S=E_(t,o,i);u&&mA(S,o,h,m,y,E,g,w),this.database=Qb(`${S.name}.database.${r}`,"AngularFireDatabase",S.name,()=>{const k=o.runOutsideAngular(()=>S.database(r||void 0));return O&&k.useEmulator(...O),k},[O])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>qH(this.database,t));let s=r;return i&&(s=i(r)),function Ple(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:QH(i,"update"),set:QH(i,"set"),push:r=>i.push(r),remove:Ale(i),snapshotChanges:r=>XH(n,r,t).pipe(hi),stateChanges:r=>YH(n,r,t).pipe(hi),auditTrail:r=>function Cle(n,e,t){return function Sle(n,e,t){return function Dle(n,e){return Z_(n,"value","on",e).pipe(Ne(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(Jb(e),Ne(([r,s])=>{const o=r.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function Dre(n){return e=>e.lift(new Sre(n))}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),Ne(r=>r.actions))}(n,YH(n,e).pipe(Uf((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(hi),valueChanges:(r,s)=>XH(n,r,t).pipe(Ne(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),hi)}}(s,this)}object(t){return function Ole(n,e){return{query:n,snapshotChanges:()=>e$(n,e.schedulers.outsideAngular)().pipe(hi),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>e$(n,e.schedulers.outsideAngular)().pipe(hi,Ne(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>qH(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||n)(W(Xf),W(ep,8),W(Mle,8),W(No),W(ot),W(Yb),W(kle,8),W(_A,8),W(uA,8),W(dA,8),W(hA,8),W(fA,8),W(pA,8),W(gA,8),W(Zb,8))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Fle=(()=>{class n{constructor(){co.Z.registerVersion("angularfire",v_.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=It({type:n});static \u0275inj=mt({providers:[t$]})}return n})(),AR=(()=>{class n{constructor(t){this.db=t,this.games=t.list("games").snapshotChanges().pipe(Ne(i=>i.map(r=>({...r.payload.val(),key:r.payload.key}))))}get games$(){return this.games.pipe(Ne(t=>t.map(i=>new aA(i))))}addGame(t){return this.db.list("games").push(t),new aA(t)}updateGame(t){console.log("updateGame"),this.db.list("games").update(t.key,t)}static#e=this.\u0275fac=function(i){return new(i||n)(W(t$))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RR=(()=>{class n{constructor(t){this.dbSvc=t,this.gameSubject=new pn(null),this.game$=this.gameSubject.asObservable(),this.dbSvc.games$.subscribe(i=>{this.game=i.find(r=>r.code===this.game?.code)??null})}get games$(){return this.dbSvc.games$}get game(){return this.gameSubject.value}set game(t){this.gameSubject.next(t)}startGame(){console.log("startGame");const t=this.game;t&&(t.startTime=new Date,t.endTime=new Date(t.startTime.getTime()+6e4*t.minutesForGame),t.players[0].myTurn=!0,t.inProgress=!0,this.updateGame(t))}createGame(){const t=new aA;t.addPlayer(),this.game=this.dbSvc.addGame(t)}updateGame(t){t&&(this.dbSvc.updateGame(t),this.game=t)}getCurrentPlayer(){return(this.game?.players??[]).find(t=>t.myTurn)}nextPlayer(){const t=this.game;if(t){const i=t.players.findIndex(s=>!!s.myTurn);let r=t.players[i+1];r||(r=t.players[0]),t.players.forEach(s=>{s.myTurn=s.number===r.number}),this.updateGame(t)}}static#e=this.\u0275fac=function(i){return new(i||n)(W(AR))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),n$=(()=>{class n{constructor(t,i){this.gameStore=t,this.dbSvc=i,this.playerSubject=new pn(null),this.player$=this.playerSubject.asObservable(),this.gameStore.game$.subscribe(r=>{if(r){const s=r.findPlayer(this.player?.number??"");JSON.stringify(s)!==JSON.stringify(this.player)&&(this.player=s??null)}})}get player(){return this.playerSubject.value}set player(t){this.playerSubject.next(t)}get isPlayer1(){return"1"===this.player?.number}updatePlayer(t){if(t){const i=this.gameStore.game;i&&(i.players.forEach(r=>{r.number===t.number&&Object.assign(r,t)}),console.log("updatePlayer"),this.dbSvc.updateGame(i)),this.player=t}}startGame(){this.player&&this.isPlayer1&&(this.player.myTurn=!0,this.updatePlayer(this.player))}createPlayer(){const t=this.gameStore.game;if(t){const i=t.addPlayer();return this.gameStore.updateGame(t),i}return null}static#e=this.\u0275fac=function(i){return new(i||n)(W(RR),W(AR))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mw(n,e){return new je(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=x(n[a]);let u=!1;t.add(l.subscribe({next:h=>{u||(u=!0,o++),r[a]=h},error:h=>t.error(h),complete:()=>{s++,(s===i||!u)&&(o===i&&t.next(e?e.reduce((h,g,m)=>(h[g]=r[m],h),{}):r),t.complete())}}))}})}let i$=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(R(us),R(Rt))};static#t=this.\u0275dir=ae({type:n})}return n})(),_d=(()=>{class n extends i${static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Nn(n)))(r||n)}}();static#t=this.\u0275dir=ae({type:n,features:[Xt]})}return n})();const Vs=new ve("NgValueAccessor"),Ble={provide:Vs,useExisting:me(()=>kw),multi:!0},jle=new ve("CompositionEventMode");let kw=(()=>{class n extends i${constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ule(){const n=bc()?bc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(R(us),R(Rt),R(jle,8))};static#t=this.\u0275dir=ae({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&$e("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[sn([Ble]),Xt]})}return n})();const ar=new ve("NgValidators"),Uc=new ve("NgAsyncValidators");function p$(n){return null!=n}function g$(n){return Um(n)?x(n):n}function m$(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function _$(n,e){return e.map(t=>t(n))}function y$(n){return n.map(e=>function $le(n){return!n.validate}(e)?e:t=>e.validate(t))}function NR(n){return null!=n?function v$(n){if(!n)return null;const e=n.filter(p$);return 0==e.length?null:function(t){return m$(_$(t,e))}}(y$(n)):null}function xR(n){return null!=n?function E$(n){if(!n)return null;const e=n.filter(p$);return 0==e.length?null:function(t){return function Lle(...n){if(1===n.length){const e=n[0];if(zt(e))return Mw(e,null);if(Fn(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Mw(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Mw(n=1===n.length&&zt(n[0])?n[0]:n,null).pipe(Ne(t=>e(...t)))}return Mw(n,null)}(_$(t,e).map(g$)).pipe(Ne(m$))}}(y$(n)):null}function b$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function PR(n){return n?Array.isArray(n)?n:[n]:[]}function Lw(n,e){return Array.isArray(n)?n.includes(e):n===e}function T$(n,e){const t=PR(e);return PR(n).forEach(r=>{Lw(t,r)||t.push(r)}),t}function C$(n,e){return PR(e).filter(t=>!Lw(n,t))}class D${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=NR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class jr extends D${get formDirective(){return null}get path(){return null}}class jc extends D${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class S${constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let A$=(()=>{class n extends S${constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(R(jc,2))};static#t=this.\u0275dir=ae({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&gt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Xt]})}return n})();const Y_="VALID",Bw="INVALID",fp="PENDING",Q_="DISABLED";function Uw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class P${constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Y_}get invalid(){return this.status===Bw}get pending(){return this.status==fp}get disabled(){return this.status===Q_}get enabled(){return this.status!==Q_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(T$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(T$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(C$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(C$(e,this._rawAsyncValidators))}hasValidator(e){return Lw(this._rawValidators,e)}hasAsyncValidator(e){return Lw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fp,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Q_,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Y_,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Y_||this.status===fp)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Q_:Y_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fp,this._hasOwnPendingAsyncValidator=!0;const t=g$(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Se,this.statusChanges=new Se}_calculateStatus(){return this._allControlsDisabled()?Q_:this.errors?Bw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fp)?fp:this._anyControlsHaveStatus(Bw)?Bw:Y_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Uw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Kle(n){return Array.isArray(n)?NR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Zle(n){return Array.isArray(n)?xR(n):n||null}(this._rawAsyncValidators)}}const pp=new ve("CallSetDisabledState",{providedIn:"root",factory:()=>jw}),jw="always";function J_(n,e,t=jw){(function VR(n,e){const t=function w$(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(b$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function I$(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(b$(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Gw(e._rawValidators,r),Gw(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Jle(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&O$(n,e)})}(n,e),function ece(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Xle(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&O$(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Qle(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Gw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function O$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function F$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function L$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const V$=class extends P${constructor(e=null,t,i){super(function kR(n){return(Uw(n)?n.validators:n)||null}(t),function FR(n,e){return(Uw(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Uw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=L$(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){F$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){F$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){L$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},lce={provide:jc,useExisting:me(()=>$R)},j$=(()=>Promise.resolve())();let $R=(()=>{class n extends jc{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new V$,this._registered=!1,this.name="",this.update=new Se,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function jR(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===kw?t=s:function ice(n){return Object.getPrototypeOf(n.constructor)===_d}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function UR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){J_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){j$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function kf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);j$.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Hw(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||n)(R(jr,9),R(ar,10),R(Uc,10),R(Vs,10),R(Os,8),R(pp,8))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sn([lce]),Xt,qt]})}return n})(),$$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),Oce=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({imports:[$$]})}return n})(),kce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:pp,useValue:t.callSetDisabledState??jw}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({imports:[Oce]})}return n})();function Fce(n,e){if(1&n&&(_a(0),Er(1,"span",2),ya()),2&n){const t=de();ne(1),ie("innerHTML",t.i.text,sk)}}function Lce(n,e){1&n&&Bm(0)}const Vce=function(n){return{$implicit:n}};var Ir=function(n){return n[n.ing=0]="ing",n[n.pause=1]="pause",n[n.stop=2]="stop",n[n.done=3]="done",n}(Ir||{});let a3=(()=>{class n{constructor(t){this.ngZone=t,this.fns=[],this.commands=[],this.nextTime=0,this.ing=!1}start(){!0!==this.ing&&(this.ing=!0,this.nextTime=+new Date,this.ngZone.runOutsideAngular(()=>{this.process()}))}process(){for(;this.commands.length;)this.commands.shift()();let t=+new Date-this.nextTime;const i=1+Math.floor(t/100);t=100-t%100,this.nextTime+=100*i;for(let r=0,s=this.fns.length;r<s;r+=2){let o=this.fns[r+1];if(0===o)this.fns[r](i);else{o+=2*i-1;const a=Math.floor(o/20);a>0&&this.fns[r](a),this.fns[r+1]=o%20+1}}this.ing&&setTimeout(()=>this.process(),t)}add(t,i){return this.commands.push(()=>{this.fns.push(t),this.fns.push(1e3===i?1:0),this.ing=!0}),this}remove(t){return this.commands.push(()=>{const i=this.fns.indexOf(t);-1!==i&&this.fns.splice(i,2),this.ing=this.fns.length>0}),this}static#e=this.\u0275fac=function(i){return new(i||n)(W(ot))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),l3=(()=>{class n{constructor(t){this.locale=t,this.demand=!1,this.leftTime=0,this.format="HH:mm:ss",this.timezone="+0000",this.formatDate=({date:i,formatStr:r,timezone:s})=>uS(new Date(i),r,this.locale,s||this.timezone||"+0000")}static#e=this.\u0275fac=function(i){return new(i||n)(W(Ps))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),c3=(()=>{class n{set config(t){null!=t.notify&&!Array.isArray(t.notify)&&t.notify>0&&(t.notify=[t.notify]),this._config=t}get config(){return this._config}constructor(t,i,r,s,o){this.locale=t,this.timer=i,this.defCog=r,this.cdr=s,this.ngZone=o,this.frequency=1e3,this._notify={},this.status=Ir.ing,this.isDestroy=!1,this.i={},this.left=0,this.event=new Se}begin(){this.status=Ir.ing,this.callEvent("start")}restart(){this.status!==Ir.stop&&this.destroy(),this.init(),this.callEvent("restart")}stop(){this.status!==Ir.stop&&(this.status=Ir.stop,this.destroy(),this.callEvent("stop"))}pause(){this.status===Ir.stop||this.status===Ir.pause||(this.status=Ir.pause,this.callEvent("pause"))}resume(){this.status===Ir.stop||this.status!==Ir.pause||(this.status=Ir.ing,this.callEvent("resume"))}callEvent(t){this.event.emit({action:t,left:this.left,status:this.status,text:this.i.text})}init(){const{locale:t,defCog:i}=this,r=this.config={...new l3(t),...i,...this.config},s=this.frequency=~r.format.indexOf("S")?100:1e3;this.status=r.demand?Ir.pause:Ir.ing,this.getLeft();const o=this.reflow;this.reflow=(a=0,l=!1)=>o.apply(this,[a,l]),Array.isArray(r.notify)&&r.notify.forEach(a=>{if(a<1)throw new Error("The notify config must be a positive integer.");a*=1e3,this._notify[a-=a%s]=!0}),this.timer.add(this.reflow,s).start(),this.reflow(0,!0)}destroy(){return this.timer.remove(this.reflow),this}reflow(t=0,i=!1){if(this.isDestroy)return;const{status:r,config:s,_notify:o}=this;if(!i&&r!==Ir.ing)return;let a=this.left=this.left-this.frequency*t;a<1&&(a=0),this.i={value:a,text:s.formatDate({date:a,formatStr:s.format,timezone:s.timezone})},"function"==typeof s.prettyText&&(this.i.text=s.prettyText(this.i.text)),this.cdr.detectChanges(),(0===s.notify||o[a])&&this.ngZone.run(()=>{this.callEvent("notify")}),0===a&&this.ngZone.run(()=>{this.status=Ir.done,this.destroy(),this.callEvent("done")})}getLeft(){const{config:t,frequency:i}=this;let r=1e3*t.leftTime;const s=t.stopTime;!r&&s&&(r=s-(new Date).getTime()),this.left=r-r%i}ngOnInit(){this.init(),this.config.demand||this.begin()}ngOnDestroy(){this.isDestroy=!0,this.destroy()}ngOnChanges(t){t.config.firstChange||this.restart()}static#e=this.\u0275fac=function(i){return new(i||n)(R(Ps),R(a3),R(l3),R(Os),R(ot))};static#t=this.\u0275cmp=Si({type:n,selectors:[["countdown"]],hostVars:2,hostBindings:function(i,r){2&i&&gt("count-down",!0)},inputs:{config:"config",render:"render"},outputs:{event:"event"},standalone:!0,features:[sn([a3]),qt,xs],decls:2,vars:5,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(i,r){1&i&&(ce(0,Fce,2,1,"ng-container",0),ce(1,Lce,1,0,"ng-container",1)),2&i&&(ie("ngIf",!r.render),ne(1),ie("ngTemplateOutlet",r.render)("ngTemplateOutletContext",Oo(3,Vce,r.i)))},dependencies:[TS,ko,Tl],encapsulation:2,changeDetection:0})}return n})(),Bce=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({imports:[c3]})}return n})();function Ii(n,e,t,i){return D(t)&&(i=t,t=void 0),i?Ii(n,e,t).pipe(Ne(r=>zt(r)?i(...r):i(r))):new je(r=>{u3(n,e,function s(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function u3(n,e,t,i,r){let s;if(function Hce(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function jce(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function Uce(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)u3(n[o],e,t,i,r)}i.add(s)}function d3(n=0,e,t){let i=-1;return cA(e)?i=Number(e)<1?1:Number(e):gr(e)&&(t=e),gr(t)||(t=Gb),new je(r=>{const s=cA(n)?n:+n-t.now();return t.schedule($ce,s,{index:0,period:i,subscriber:r})})}function $ce(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}class Gce{call(e,t){return t.subscribe(new zce(e))}}class zce extends kS{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let i=0;i<t&&!this.hasFirst;i++){const s=FS(this,e[i],void 0,i);this.subscriptions&&this.subscriptions.push(s),this.add(s)}this.observables=null}}notifyNext(e,t,i){if(!this.hasFirst){this.hasFirst=!0;for(let r=0;r<this.subscriptions.length;r++)if(r!==i){let s=this.subscriptions[r];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)}}function YR(...n){const e=n[n.length-1];return"function"==typeof e&&n.pop(),Yt(n,void 0).lift(new Wce(e))}class Wce{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new qce(e,this.resultSelector))}}class qce extends Pe{constructor(e,t,i=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;zt(e)?t.push(new Zce(e)):t.push("function"==typeof e[Qi]?new Kce(e[Qi]()):new Yce(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let i=0;i<t;i++){let r=e[i];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,i=this.destination;for(let o=0;o<t;o++){let a=e[o];if("function"==typeof a.hasValue&&!a.hasValue())return}let r=!1;const s=[];for(let o=0;o<t;o++){let a=e[o],l=a.next();if(a.hasCompleted()&&(r=!0),l.done)return void i.complete();s.push(l.value)}this.resultSelector?this._tryresultSelector(s):i.next(s),r&&i.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class Kce{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return!(!e||!e.done)}}class Zce{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[Qi](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Yce extends Q{constructor(e,t,i){super(e),this.parent=t,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Qi](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return ue(this.observable,new M(this))}}class iue{constructor(e){this.total=e}call(e,t){return t.subscribe(new rue(e,this.total))}}class rue extends Pe{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}Math,Math,Math;const xde=["*"],B3=function(n){return{$implicit:n}},ahe=["dialog"],lhe=["ngbNavOutlet",""];function che(n,e){}function uhe(n,e){if(1&n&&(fe(0,"div",2),ce(1,che,0,0,"ng-template",3),pe()),2&n){const t=de().$implicit,i=de();ie("item",t)("nav",i.nav)("role",i.paneRole),ne(1),ie("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",Oo(5,B3,t.active||i.isPanelTransitioning(t)))}}function dhe(n,e){if(1&n&&ce(0,uhe,2,7,"div",1),2&n){const t=e.$implicit,i=de();ie("ngIf",t.isPanelInDom()||i.isPanelTransitioning(t))}}function bd(n){return"string"==typeof n}function wd(n){return null!=n}function Ep(n){return(n||document.body).getBoundingClientRect()}const $3={animation:!0,transitionTimerDelayMs:5},Xhe=()=>{},{transitionTimerDelayMs:efe}=$3,ay=new Map,Es=(n,e,t,i)=>{let r=i.context||{};const s=ay.get(e);if(s)switch(i.runningTransition){case"continue":return Ic;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),ay.delete(e)}const o=t(e,i.animation,r)||Xhe;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>o()),Ee(void 0).pipe(function Qhe(n){return e=>new je(t=>e.subscribe({next:o=>n.run(()=>t.next(o)),error:o=>n.run(()=>t.error(o)),complete:()=>n.run(()=>t.complete())}))}(n));const a=new qe,l=new qe,u=a.pipe(function Qce(...n){return e=>Ib(e,Ee(...n))}(!0));ay.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const h=function Jhe(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const g=Ii(e,"transitionend").pipe(dn(u),di(({target:y})=>y===e));(function h3(...n){if(1===n.length){if(!zt(n[0]))return n[0];n=n[0]}return Yt(n,void 0).lift(new Gce)})(d3(h+efe).pipe(dn(u)),g,l).pipe(dn(u)).subscribe(()=>{ay.delete(e),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let Xw=(()=>{class n{constructor(){this.animation=$3.animation}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),J3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),X3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),n4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),i4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})();var _n=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(_n||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const u4=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function d4(n){const e=Array.from(n.querySelectorAll(u4)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let T4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),S4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})();class Sd{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}let Xfe=(()=>{class n{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Br(1)).subscribe(()=>{Es(this._zone,this._el.nativeElement,(t,i)=>{i&&Ep(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Es(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(i){return new(i||n)(R(Rt),R(ot))};static#t=this.\u0275cmp=Si({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){2&i&&(Ju("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),gt("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[xs],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();class A4{update(e){}close(e){}dismiss(e){}}const epe=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],tpe=["animation","backdropClass"];class npe{_applyWindowOptions(e,t){epe.forEach(i=>{wd(t[i])&&(e[i]=t[i])})}_applyBackdropOptions(e,t){tpe.forEach(i=>{wd(t[i])&&(e[i]=t[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(dn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(dn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new qe,this._dismissed=new qe,this._hidden=new qe,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function U3(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(i=>{!1!==i&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Ee(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),YR(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var CN=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(CN||{});let ipe=(()=>{class n{constructor(t,i,r){this._document=t,this._elRef=i,this._zone=r,this._closed$=new qe,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Se,this.shown=new qe,this.hidden=new qe}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":bd(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Br(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=YR(Es(this._zone,t,()=>t.classList.remove("show"),i),Es(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const t={animation:this.animation,runningTransition:"continue"};YR(Es(this._zone,this._elRef.nativeElement,(s,o)=>{o&&Ep(s),s.classList.add("show")},t),Es(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ii(t,"keydown").pipe(dn(this._closed$),di(r=>r.which===_n.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(CN.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ii(this._dialogEl.nativeElement,"mousedown").pipe(dn(this._closed$),wi(()=>i=!1),Bt(()=>Ii(t,"mouseup").pipe(dn(this._closed$),Br(1))),di(({target:r})=>t===r)).subscribe(()=>{i=!0}),Ii(t,"click").pipe(dn(this._closed$)).subscribe(({target:r})=>{t===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(CN.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),r=d4(t)[0];(i||r||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Es(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(i){return new(i||n)(R(Ei),R(Rt),R(ot))};static#t=this.\u0275cmp=Si({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(1&i&&hs(ahe,7),2&i){let s;Ze(s=Ye())&&(r._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){2&i&&(Ht("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Ju("modal d-block"+(r.windowClass?" "+r.windowClass:"")),gt("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[xs],ngContentSelectors:xde,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,r){1&i&&(VE(),fe(0,"div",0,1)(2,"div",2),BE(3),pe()()),2&i&&Ju("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return n})(),rpe=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:o}=r;if(t>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=o),r.overflow=s}}static#e=this.\u0275fac=function(i){return new(i||n)(W(Ei))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),spe=(()=>{class n{constructor(t,i,r,s,o,a,l){this._applicationRef=t,this._injector=i,this._environmentInjector=r,this._document=s,this._scrollBar=o,this._rendererFactory=a,this._ngZone=l,this._activeWindowCmptHasChanged=new qe,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Se,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const u=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,i=!1)=>{n.runOutsideAngular(()=>{const r=Ii(e,"focusin").pipe(dn(t),Ne(s=>s.target));Ii(e,"keydown").pipe(dn(t),di(s=>s.which===_n.Tab),Jb(r)).subscribe(([s,o])=>{const[a,l]=d4(e);(o===a||o===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&Ii(e,"click").pipe(dn(t),Jb(r),Ne(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,u.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(u.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r){const s=r.container instanceof HTMLElement?r.container:wd(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new A4,l=(t=r.injector||t).get(cs,null)||this._environmentInjector,u=this._getContentRef(t,l,i,a,r);let h=!1!==r.backdrop?this._attachBackdrop(s):void 0,g=this._attachWindowComponent(s,u.nodes),m=new npe(g,u,h,r.beforeDismiss);return this._registerModalRef(m),this._registerWindowCmpt(g),m.hidden.pipe(Br(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=y=>{m.close(y)},a.dismiss=y=>{m.dismiss(y)},a.update=y=>{m.update(y)},m.update(r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),h&&h.instance&&h.changeDetectorRef.detectChanges(),g.changeDetectorRef.detectChanges(),m}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=nS(Xfe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let r=nS(ipe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_getContentRef(t,i,r,s,o){return r?r instanceof tt?this._createFromTemplateRef(r,s):bd(r)?this._createFromString(r):this._createFromComponent(t,i,r,s,o):new Sd([])}_createFromTemplateRef(t,i){const s=t.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(s),new Sd([s.rootNodes],s)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new Sd([[i]])}_createFromComponent(t,i,r,s,o){const l=nS(r,{environmentInjector:i,elementInjector:sr.create({providers:[{provide:A4,useValue:s}],parent:t})}),u=l.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new Sd([[u]],l.hostView,l)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(i){return new(i||n)(W(Ec),W(sr),W(cs),W(Ei),W(rpe),W(GD),W(ot))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ope=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}static#e=this.\u0275fac=function(i){return new(i||n)(W(Xw))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ape=(()=>{class n{constructor(t,i,r){this._injector=t,this._modalStack=i,this._config=r}open(t,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(i){return new(i||n)(W(sr),W(spe),W(ope))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),R4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({providers:[ape]})}return n})(),lpe=(()=>{class n{constructor(t){this._ngbConfig=t,this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}static#e=this.\u0275fac=function(i){return new(i||n)(W(Xw))};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const N4=n=>wd(n)&&""!==n;let cpe=0,DN=(()=>{class n{constructor(t){this.templateRef=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["ng-template","ngbNavContent",""]],standalone:!0})}return n})(),x4=(()=>{class n{constructor(t,i){this.role=t,this.nav=i}static#e=this.\u0275fac=function(i){return new(i||n)(Rs("role"),R(me(()=>Ad)))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngbNavItem","",5,"ng-container"]],hostVars:1,hostBindings:function(i,r){2&i&&Ht("role",r.role?r.role:r.nav.roles?"presentation":void 0)},standalone:!0})}return n})(),Ip=(()=>{class n{constructor(t,i){this._nav=t,this.elementRef=i,this.disabled=!1,this.shown=new Se,this.hidden=new Se}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){wd(this.domId)||(this.domId="ngb-nav-"+cpe++)}get active(){return this._nav.activeId===this.id}get id(){return N4(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(wd(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}static#e=this.\u0275fac=function(i){return new(i||n)(R(me(()=>Ad)),R(Rt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngbNavItem",""]],contentQueries:function(i,r,s){if(1&i&&Vt(s,DN,4),2&i){let o;Ze(o=Ye())&&(r.contentTpls=o)}},hostVars:2,hostBindings:function(i,r){2&i&&gt("nav-item",!0)},inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:["ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"],standalone:!0})}return n})(),Ad=(()=>{class n{constructor(t,i,r,s){this.role=t,this._cd=r,this._document=s,this.activeIdChange=new Se,this.shown=new Se,this.hidden=new Se,this.destroy$=new qe,this.navItemChange$=new qe,this.navChange=new Se,this.animation=i.animation,this.destroyOnHide=i.destroyOnHide,this.orientation=i.orientation,this.roles=i.roles,this.keyboard=i.keyboard}click(t){t.disabled||this._updateActiveId(t.id)}onKeyDown(t){if("tablist"!==this.roles||!this.keyboard)return;const i=t.which,r=this.links.filter(a=>!a.navItem.disabled),{length:s}=r;let o=-1;if(r.forEach((a,l)=>{a.elRef.nativeElement===this._document.activeElement&&(o=l)}),s){switch(i){case _n.ArrowLeft:if("vertical"===this.orientation)return;o=(o-1+s)%s;break;case _n.ArrowRight:if("vertical"===this.orientation)return;o=(o+1)%s;break;case _n.ArrowDown:if("horizontal"===this.orientation)return;o=(o+1)%s;break;case _n.ArrowUp:if("horizontal"===this.orientation)return;o=(o-1+s)%s;break;case _n.Home:o=0;break;case _n.End:o=s-1}"changeWithArrows"===this.keyboard&&this.select(r[o].navItem.id),r[o].elRef.nativeElement.focus(),t.preventDefault()}}select(t){this._updateActiveId(t,!1)}ngAfterContentInit(){if(!wd(this.activeId)){const t=this.items.first?this.items.first.id:null;N4(t)&&(this._updateActiveId(t,!1),this._cd.detectChanges())}this.items.changes.pipe(dn(this.destroy$)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:t}){t&&!t.firstChange&&this._notifyItemChanged(t.currentValue)}ngOnDestroy(){this.destroy$.next()}_updateActiveId(t,i=!0){if(this.activeId!==t){let r=!1;i&&this.navChange.emit({activeId:this.activeId,nextId:t,preventDefault:()=>{r=!0}}),r||(this.activeId=t,this.activeIdChange.emit(t),this._notifyItemChanged(t))}}_notifyItemChanged(t){this.navItemChange$.next(this._getItemById(t))}_getItemById(t){return this.items&&this.items.find(i=>i.id===t)||null}static#e=this.\u0275fac=function(i){return new(i||n)(Rs("role"),R(lpe),R(Os),R(Ei))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngbNav",""]],contentQueries:function(i,r,s){if(1&i&&(Vt(s,Ip,4),Vt(s,dy,5)),2&i){let o;Ze(o=Ye())&&(r.items=o),Ze(o=Ye())&&(r.links=o)}},hostVars:6,hostBindings:function(i,r){1&i&&$e("keydown.arrowLeft",function(o){return r.onKeyDown(o)})("keydown.arrowRight",function(o){return r.onKeyDown(o)})("keydown.arrowDown",function(o){return r.onKeyDown(o)})("keydown.arrowUp",function(o){return r.onKeyDown(o)})("keydown.Home",function(o){return r.onKeyDown(o)})("keydown.End",function(o){return r.onKeyDown(o)}),2&i&&(Ht("aria-orientation","vertical"===r.orientation&&"tablist"===r.roles?"vertical":void 0)("role",r.role?r.role:r.roles?"tablist":void 0),gt("nav",!0)("flex-column","vertical"===r.orientation))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],standalone:!0,features:[qt]})}return n})(),dy=(()=>{class n{constructor(t,i,r,s){this.role=t,this.navItem=i,this.nav=r,this.elRef=s}hasNavItemClass(){return this.navItem.elementRef.nativeElement.nodeType===Node.COMMENT_NODE}static#e=this.\u0275fac=function(i){return new(i||n)(Rs("role"),R(Ip),R(Ad),R(Rt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngbNavLink",""]],hostVars:14,hostBindings:function(i,r){2&i&&(ro("id",r.navItem.domId),Ht("role",r.role?r.role:r.nav.roles?"tab":void 0)("tabindex",r.navItem.disabled?-1:void 0)("aria-controls",r.navItem.isPanelInDom()?r.navItem.panelDomId:null)("aria-selected",r.navItem.active)("aria-disabled",r.navItem.disabled),gt("nav-link",!0)("nav-item",r.hasNavItemClass())("active",r.navItem.active)("disabled",r.navItem.disabled))},standalone:!0})}return n})(),P4=(()=>{class n{constructor(t,i){this.navItem=t,this.nav=i}static#e=this.\u0275fac=function(i){return new(i||n)(R(Ip),R(Ad))};static#t=this.\u0275dir=ae({type:n,selectors:[["button","ngbNavLink",""]],hostAttrs:["type","button"],hostVars:1,hostBindings:function(i,r){1&i&&$e("click",function(){return r.nav.click(r.navItem)}),2&i&&ro("disabled",r.navItem.disabled)},standalone:!0,features:[Mm([dy])]})}return n})();const dpe=({classList:n})=>(n.remove("show"),()=>n.remove("active")),hpe=(n,e)=>{e&&Ep(n),n.classList.add("show")};let SN=(()=>{class n{constructor(t){this.elRef=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(Rt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(i,r){2&i&&(ro("id",r.item.panelDomId),Ht("role",r.role?r.role:r.nav.roles?"tabpanel":void 0)("aria-labelledby",r.item.domId),gt("fade",r.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0})}return n})(),O4=(()=>{class n{constructor(t,i){this._cd=t,this._ngZone=i,this._activePane=null}isPanelTransitioning(t){return this._activePane?.item===t}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(dn(this.nav.destroy$),Vf(this._activePane?.item||null),Eo(),function nue(n){return e=>e.lift(new iue(n))}(1)).subscribe(t=>{const i={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Es(this._ngZone,this._activePane.elRef.nativeElement,dpe,i).subscribe(()=>{const r=this._activePane?.item;this._activePane=this._getPaneForItem(t),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Es(this._ngZone,this._activePane.elRef.nativeElement,hpe,i).subscribe(()=>{t&&(t.shown.emit(),this.nav.shown.emit(t.id))})),r&&(r.hidden.emit(),this.nav.hidden.emit(r.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(i=>i.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}static#e=this.\u0275fac=function(i){return new(i||n)(R(Os),R(ot))};static#t=this.\u0275cmp=Si({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(i,r){if(1&i&&hs(SN,5),2&i){let s;Ze(s=Ye())&&(r._panes=s)}},hostVars:2,hostBindings:function(i,r){2&i&&gt("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[xs],attrs:lhe,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){1&i&&ce(0,dhe,1,1,"ng-template",0),2&i&&ie("ngForOf",r.nav.items)},dependencies:[SN,ba,ko,Tl],encapsulation:2,changeDetection:0})}return n})(),M4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),H4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),$4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),G4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),z4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),W4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),q4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),K4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),Z4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})();new ve("live announcer delay",{providedIn:"root",factory:function Epe(){return 100}});let Y4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})(),Q4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({})}return n})();const wpe=[J3,X3,n4,i4,T4,S4,R4,M4,Q4,H4,$4,G4,z4,W4,q4,K4,Z4,Y4];let J4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({imports:[wpe,J3,X3,n4,i4,T4,S4,R4,M4,Q4,H4,$4,G4,z4,W4,q4,K4,Z4,Y4]})}return n})();class Tpe{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new Cpe(e,this.durationSelector))}}class Cpe extends Q{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:r}=this;t=r(e)}catch(r){return this.destination.error(r)}const i=ue(t,new M(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function X4(n,e=Gb){return t=>t.lift(new Spe(n,e))}class Spe{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new Ape(e,this.dueTime,this.scheduler))}}class Ape extends Pe{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Rpe,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function Rpe(n){n.debouncedNext()}const Ppe=new class xpe extends Vo{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class Npe extends Hb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}),Ope=["content"],Mpe=["scroll"],kpe=["padding"],hy=function(n){return{searchTerm:n}};function Fpe(n,e){if(1&n&&(fe(0,"div",6),Bm(1,7),pe()),2&n){const t=de();ne(1),ie("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",Oo(2,hy,t.filterValue))}}function Lpe(n,e){if(1&n&&(fe(0,"div",8),Bm(1,7),pe()),2&n){const t=de();ne(1),ie("ngTemplateOutlet",t.footerTemplate)("ngTemplateOutletContext",Oo(2,hy,t.filterValue))}}const eG=["*"],Vpe=["searchInput"],Bpe=["clearButton"];function Upe(n,e){if(1&n){const t=vi();fe(0,"span",15),$e("click",function(){Ft(t);const r=de().$implicit;return Lt(de(2).unselect(r))}),yt(1,"\xd7"),pe(),Er(2,"span",16)}if(2&n){const t=de().$implicit,i=de(2);ne(2),ie("ngItemLabel",t.label)("escape",i.escapeHTML)}}function jpe(n,e){}const Hpe=function(n,e,t){return{item:n,clear:e,label:t}};function $pe(n,e){if(1&n&&(fe(0,"div",12),ce(1,Upe,3,2,"ng-template",null,13,ji),ce(3,jpe,0,0,"ng-template",14),pe()),2&n){const t=e.$implicit,i=yi(2),r=de(2);gt("ng-value-disabled",t.disabled),ne(3),ie("ngTemplateOutlet",r.labelTemplate||i)("ngTemplateOutletContext",ZE(4,Hpe,t.value,r.clearItem,t.label))}}function Gpe(n,e){if(1&n&&(_a(0),ce(1,$pe,4,8,"div",11),ya()),2&n){const t=de();ne(1),ie("ngForOf",t.selectedItems)("ngForTrackBy",t.trackByOption)}}function zpe(n,e){}const Wpe=function(n,e){return{items:n,clear:e}};function qpe(n,e){if(1&n&&ce(0,zpe,0,0,"ng-template",14),2&n){const t=de();ie("ngTemplateOutlet",t.multiLabelTemplate)("ngTemplateOutletContext",Pf(2,Wpe,t.selectedValues,t.clearItem))}}function Kpe(n,e){1&n&&Er(0,"div",19)}function Zpe(n,e){}function Ype(n,e){if(1&n&&(_a(0),ce(1,Kpe,1,0,"ng-template",null,17,ji),ce(3,Zpe,0,0,"ng-template",18),ya()),2&n){const t=yi(2),i=de();ne(3),ie("ngTemplateOutlet",i.loadingSpinnerTemplate||t)}}function Qpe(n,e){1&n&&(fe(0,"span",20,21)(2,"span",22),yt(3,"\xd7"),pe()()),2&n&&UE("title",de().clearAllText)}function Jpe(n,e){if(1&n&&Er(0,"span",28),2&n){const t=de().$implicit,i=de(2);ie("ngItemLabel",t.label)("escape",i.escapeHTML)}}function Xpe(n,e){}const ege=function(n,e,t,i){return{item:n,item$:e,index:t,searchTerm:i}};function tge(n,e){if(1&n){const t=vi();fe(0,"div",26),$e("click",function(){const s=Ft(t).$implicit;return Lt(de(2).toggleItem(s))})("mouseover",function(){const s=Ft(t).$implicit;return Lt(de(2).onItemHover(s))}),ce(1,Jpe,1,2,"ng-template",null,27,ji),ce(3,Xpe,0,0,"ng-template",14),pe()}if(2&n){const t=e.$implicit,i=yi(2),r=de(2);gt("ng-option-disabled",t.disabled)("ng-option-selected",t.selected)("ng-optgroup",t.children)("ng-option",!t.children)("ng-option-child",!!t.parent)("ng-option-marked",t===r.itemsList.markedItem),Ht("role",t.children?"group":"option")("aria-selected",t.selected)("id",null==t?null:t.htmlId),ne(3),ie("ngTemplateOutlet",t.children?r.optgroupTemplate||i:r.optionTemplate||i)("ngTemplateOutletContext",hL(17,ege,t.value,t,t.index,r.searchTerm))}}function nge(n,e){if(1&n&&(fe(0,"span")(1,"span",31),yt(2),pe(),yt(3),pe()),2&n){const t=de(3);ne(2),br(t.addTagText),ne(1),yc('"',t.searchTerm,'"')}}function ige(n,e){}function rge(n,e){if(1&n){const t=vi();fe(0,"div",29),$e("mouseover",function(){return Ft(t),Lt(de(2).itemsList.unmarkItem())})("click",function(){return Ft(t),Lt(de(2).selectTag())}),ce(1,nge,4,2,"ng-template",null,30,ji),ce(3,ige,0,0,"ng-template",14),pe()}if(2&n){const t=yi(2),i=de(2);gt("ng-option-marked",!i.itemsList.markedItem),ne(3),ie("ngTemplateOutlet",i.tagTemplate||t)("ngTemplateOutletContext",Oo(4,hy,i.searchTerm))}}function sge(n,e){if(1&n&&(fe(0,"div",33),yt(1),pe()),2&n){const t=de(3);ne(1),br(t.notFoundText)}}function oge(n,e){}function age(n,e){if(1&n&&(_a(0),ce(1,sge,2,1,"ng-template",null,32,ji),ce(3,oge,0,0,"ng-template",14),ya()),2&n){const t=yi(2),i=de(2);ne(3),ie("ngTemplateOutlet",i.notFoundTemplate||t)("ngTemplateOutletContext",Oo(2,hy,i.searchTerm))}}function lge(n,e){if(1&n&&(fe(0,"div",33),yt(1),pe()),2&n){const t=de(3);ne(1),br(t.typeToSearchText)}}function cge(n,e){}function uge(n,e){if(1&n&&(_a(0),ce(1,lge,2,1,"ng-template",null,34,ji),ce(3,cge,0,0,"ng-template",18),ya()),2&n){const t=yi(2),i=de(2);ne(3),ie("ngTemplateOutlet",i.typeToSearchTemplate||t)}}function dge(n,e){if(1&n&&(fe(0,"div",33),yt(1),pe()),2&n){const t=de(3);ne(1),br(t.loadingText)}}function hge(n,e){}function fge(n,e){if(1&n&&(_a(0),ce(1,dge,2,1,"ng-template",null,35,ji),ce(3,hge,0,0,"ng-template",14),ya()),2&n){const t=yi(2),i=de(2);ne(3),ie("ngTemplateOutlet",i.loadingTextTemplate||t)("ngTemplateOutletContext",Oo(2,hy,i.searchTerm))}}function pge(n,e){if(1&n){const t=vi();fe(0,"ng-dropdown-panel",23),$e("update",function(r){return Ft(t),Lt(de().viewPortItems=r)})("scroll",function(r){return Ft(t),Lt(de().scroll.emit(r))})("scrollToEnd",function(r){return Ft(t),Lt(de().scrollToEnd.emit(r))})("outsideClick",function(){return Ft(t),Lt(de().close())}),_a(1),ce(2,tge,4,22,"div",24),ce(3,rge,4,6,"div",25),ya(),ce(4,age,4,4,"ng-container",3),ce(5,uge,4,1,"ng-container",3),ce(6,fge,4,4,"ng-container",3),pe()}if(2&n){const t=de();gt("ng-select-multiple",t.multiple),ie("virtualScroll",t.virtualScroll)("bufferAmount",t.bufferAmount)("appendTo",t.appendTo)("position",t.dropdownPosition)("headerTemplate",t.headerTemplate)("footerTemplate",t.footerTemplate)("filterValue",t.searchTerm)("items",t.itemsList.filteredItems)("markedItem",t.itemsList.markedItem)("ngClass",t.appendTo?t.classes:null)("id",t.dropdownId),ne(2),ie("ngForOf",t.viewPortItems)("ngForTrackBy",t.trackByOption),ne(1),ie("ngIf",t.showAddTag),ne(1),ie("ngIf",t.showNoItemsFound()),ne(1),ie("ngIf",t.showTypeToSearch()),ne(1),ie("ngIf",t.loading&&0===t.itemsList.filteredItems.length)}}const tG=/[&<>"']/g,gge=RegExp(tG.source),mge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Yn(n){return null!=n}function fy(n){return"object"==typeof n&&Yn(n)}function dI(n){return n instanceof Function}let vge=(()=>{class n{constructor(t){this.element=t,this.escape=!0}ngOnChanges(t){this.element.nativeElement.innerHTML=this.escape?function _ge(n){return n&&gge.test(n)?n.replace(tG,e=>mge[e]):n}(this.ngItemLabel):this.ngItemLabel}static#e=this.\u0275fac=function(i){return new(i||n)(R(Rt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[qt]})}return n})(),Ege=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-option-tmp",""]]})}return n})(),bge=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-optgroup-tmp",""]]})}return n})(),wge=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-label-tmp",""]]})}return n})(),Ige=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-multi-label-tmp",""]]})}return n})(),Tge=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-header-tmp",""]]})}return n})(),Cge=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-footer-tmp",""]]})}return n})(),Dge=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-notfound-tmp",""]]})}return n})(),Sge=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-typetosearch-tmp",""]]})}return n})(),Age=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-loadingtext-tmp",""]]})}return n})(),Rge=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-tag-tmp",""]]})}return n})(),Nge=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(i){return new(i||n)(R(tt))};static#t=this.\u0275dir=ae({type:n,selectors:[["","ng-loadingspinner-tmp",""]]})}return n})();function nG(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}const xge={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"};function hI(n){return n.replace(/[^\u0000-\u007E]/g,t=>xge[t]||t)}class Pge{constructor(e,t){this._ngSelect=e,this._selectionModel=t,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let e=this.selectedItems.length-1;for(;e>=0;e--){const t=this.selectedItems[e];if(!t.disabled)return t}return null}setItems(e){this._items=e.map((t,i)=>this.mapItem(t,i)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(e){if(e.selected||this.maxItemsSelected)return;const t=this._ngSelect.multiple;t||this.clearSelected(),this._selectionModel.select(e,t,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(e)}unselect(e){e.selected&&(this._selectionModel.unselect(e,this._ngSelect.multiple),this._ngSelect.hideSelected&&Yn(e.index)&&this._ngSelect.multiple&&this._showSelected(e))}findItem(e){let t;return t=this._ngSelect.compareWith?i=>this._ngSelect.compareWith(i.value,e):this._ngSelect.bindValue?i=>!i.children&&this.resolveNested(i.value,this._ngSelect.bindValue)===e:i=>i.value===e||!i.children&&i.label&&i.label===this.resolveNested(e,this._ngSelect.bindLabel),this._items.find(i=>t(i))}addItem(e){const t=this.mapItem(e,this._items.length);return this._items.push(t),this._filteredItems.push(t),t}clearSelected(e=!1){this._selectionModel.clear(e),this._items.forEach(t=>{t.selected=e&&t.selected&&t.disabled,t.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(e){return e=hI(e).toLocaleLowerCase(),this.filteredItems.find(t=>hI(t.label).toLocaleLowerCase().substr(0,e.length)===e)}filter(e){if(!e)return void this.resetFilteredItems();this._filteredItems=[],e=this._ngSelect.searchFn?e:hI(e).toLocaleLowerCase();const t=this._ngSelect.searchFn||this._defaultSearchFn,i=this._ngSelect.hideSelected;for(const r of Array.from(this._groups.keys())){const s=[];for(const o of this._groups.get(r))i&&(o.parent&&o.parent.selected||o.selected)||t(e,this._ngSelect.searchFn?o.value:o)&&s.push(o);if(s.length>0){const[o]=s.slice(-1);if(o.parent){const a=this._items.find(l=>l===o.parent);this._filteredItems.push(a)}this._filteredItems.push(...s)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(e=>!e.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(e){this._markedIndex=this._filteredItems.indexOf(e)}markSelectedOrDefault(e){if(0===this._filteredItems.length)return;const t=this._getLastMarkedIndex();this._markedIndex=t>-1?t:e?this.filteredItems.findIndex(i=>!i.disabled):-1}resolveNested(e,t){if(!fy(e))return e;if(-1===t.indexOf("."))return e[t];{const i=t.split(".");let r=e;for(let s=0,o=i.length;s<o;++s){if(null==r)return null;r=r[i[s]]}return r}}mapItem(e,t){const i=Yn(e.$ngOptionLabel)?e.$ngOptionLabel:this.resolveNested(e,this._ngSelect.bindLabel),r=Yn(e.$ngOptionValue)?e.$ngOptionValue:e;return{index:t,label:Yn(i)?i.toString():"",value:r,disabled:e.disabled,htmlId:`${this._ngSelect.dropdownId}-${t}`}}mapSelectedItems(){const e=this._ngSelect.multiple;for(const t of this.selectedItems){const i=this._ngSelect.bindValue?this.resolveNested(t.value,this._ngSelect.bindValue):t.value,r=Yn(i)?this.findItem(i):null;this._selectionModel.unselect(t,e),this._selectionModel.select(r||t,e,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(t=>-1===this.selectedItems.indexOf(t)))}_showSelected(e){if(this._filteredItems.push(e),e.parent){const t=e.parent;this._filteredItems.find(r=>r===t)||this._filteredItems.push(t)}else if(e.children)for(const t of e.children)t.selected=!1,this._filteredItems.push(t);this._filteredItems=[...this._filteredItems.sort((t,i)=>t.index-i.index)]}_hideSelected(e){this._filteredItems=this._filteredItems.filter(t=>t!==e),e.parent?e.parent.children.every(i=>i.selected)&&(this._filteredItems=this._filteredItems.filter(i=>i!==e.parent)):e.children&&(this._filteredItems=this.filteredItems.filter(t=>t.parent!==e))}_defaultSearchFn(e,t){return hI(t.label).toLocaleLowerCase().indexOf(e)>-1}_getNextItemIndex(e){return e>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(e){0===this._filteredItems.length||this._filteredItems.every(t=>t.disabled)||(this._markedIndex=this._getNextItemIndex(e),this.markedItem.disabled&&this._stepToItem(e))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&void 0===this.markedItem)return-1;const e=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&e<0?-1:Math.max(this.markedIndex,e)}_groupBy(e,t){const i=new Map;if(0===e.length)return i;if(Array.isArray(e[0].value[t])){for(const o of e){const a=(o.value[t]||[]).map((l,u)=>this.mapItem(l,u));i.set(o,a)}return i}const r=dI(this._ngSelect.groupBy),s=o=>{const a=r?t(o.value):o.value[t];return Yn(a)?a:void 0};for(const o of e){const a=s(o),l=i.get(a);l?l.push(o):i.set(a,[o])}return i}_flatten(e){const t=dI(this._ngSelect.groupBy),i=[];for(const r of Array.from(e.keys())){let s=i.length;if(void 0===r){const g=e.get(void 0)||[];i.push(...g.map(m=>(m.index=s++,m)));continue}const o=fy(r),a={label:o?"":String(r),children:void 0,parent:null,index:s++,disabled:!this._ngSelect.selectableGroup,htmlId:nG()},l=t?this._ngSelect.bindLabel:this._ngSelect.groupBy,u=this._ngSelect.groupValue||(()=>o?r.value:{[l]:r}),h=e.get(r).map(g=>(g.parent=a,g.children=void 0,g.index=s++,g));a.children=h,a.value=u(r,h.map(g=>g.value)),i.push(a),i.push(...h)}return i}}var Na=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Esc=27]="Esc",n[n.Space=32]="Space",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowDown=40]="ArrowDown",n[n.Backspace=8]="Backspace",n}(Na||{});let iG=(()=>{class n{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(t,i,r){const s=this._dimensions,o=s.itemHeight*i,l=Math.max(0,t)/o*i;let u=Math.min(i,Math.ceil(l)+(s.itemsPerViewport+1));const g=Math.max(0,u-s.itemsPerViewport);let m=Math.min(g,Math.floor(l)),y=s.itemHeight*Math.ceil(m)-s.itemHeight*Math.min(m,r);return y=isNaN(y)?0:y,m=isNaN(m)?-1:m,u=isNaN(u)?-1:u,m-=r,m=Math.max(0,m),u+=r,u=Math.min(i,u),{topPadding:y,scrollHeight:o,start:m,end:u}}setDimensions(t,i){const r=Math.max(1,Math.floor(i/t));this._dimensions={itemHeight:t,panelHeight:i,itemsPerViewport:r}}getScrollTo(t,i,r){const{panelHeight:s}=this.dimensions,o=t+i,l=r+s;return s>=o&&r===t?null:o>l?r+o-l:t<=r?t:null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac})}return n})();const rG=["top","right","bottom","left"],Oge=typeof requestAnimationFrame<"u"?Ppe:PU;let sG=(()=>{class n{constructor(t,i,r,s,o){this._renderer=t,this._zone=i,this._panelService=r,this._document=o,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new Se,this.scroll=new Se,this.scrollToEnd=new Se,this.outsideClick=new Se,this._destroy$=new qe,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=s.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(t){t!==this._itemsLength&&(this._itemsLength=t,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:t,panelHeight:i}=this._panelService.dimensions,r=this.markedItem.index*t;return i>r?0:r}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(t){if(t.items){const i=t.items;this._onItemsChange(i.currentValue,i.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(t,i=!1){if(!t)return;const r=this.items.indexOf(t);if(r<0||r>=this.itemsLength)return;let s;if(this.virtualScroll){const o=this._panelService.dimensions.itemHeight;s=this._panelService.getScrollTo(r*o,o,this._lastScrollPosition)}else{const o=this._dropdown.querySelector(`#${t.htmlId}`);s=this._panelService.getScrollTo(o.offsetTop,o.clientHeight,i?o.offsetTop:this._lastScrollPosition)}Yn(s)&&(this._scrollablePanel.scrollTop=s)}scrollToTag(){const t=this._scrollablePanel;t.scrollTop=t.scrollHeight-t.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),rG.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(t){rG.forEach(r=>{const s=`ng-select-${r}`;this._renderer.removeClass(this._dropdown,s),this._renderer.removeClass(this._select,s)});const i=`ng-select-${t}`;this._renderer.addClass(this._dropdown,i),this._renderer.addClass(this._select,i)}_handleScroll(){this._zone.runOutsideAngular(()=>{Ii(this.scrollElementRef.nativeElement,"scroll").pipe(dn(this._destroy$),function Dpe(n,e=Gb){return function Ipe(n){return function(t){return t.lift(new Tpe(n))}}(()=>d3(n,e))}(0,Oge)).subscribe(t=>{const i=t.path||t.composedPath&&t.composedPath();this._onContentScrolled(i&&0!==i.length?i[0].scrollTop:t.target.scrollTop)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{Qt(Ii(this._document,"touchstart",{capture:!0}),Ii(this._document,"mousedown",{capture:!0})).pipe(dn(this._destroy$)).subscribe(t=>this._checkToClose(t))})}_checkToClose(t){if(this._select.contains(t.target)||this._dropdown.contains(t.target))return;const i=t.path||t.composedPath&&t.composedPath();t.target&&t.target.shadowRoot&&i&&i[0]&&this._select.contains(i[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(t,i){this.items=t||[],this._scrollToEndFired=!1,this.itemsLength=t.length,this.virtualScroll?this._updateItemsRange(i):(this._setVirtualHeight(),this._updateItems(i))}_updateItems(t){this.update.emit(this.items),!1!==t&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,t)})})}_updateItemsRange(t){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{t?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(t){this.virtualScroll&&this._renderItemsRange(t),this._lastScrollPosition=t,this._fireScrollToEnd(t)}_updateVirtualHeight(t){this._updateScrollHeight&&(this._virtualPadding.style.height=`${t}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(t=null){if(t&&this._lastScrollPosition===t)return;const i=this._panelService.calculateItems(t=t||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(i.scrollHeight),this._contentPanel.style.transform=`translateY(${i.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(i.start,i.end)),this.scroll.emit({start:i.start,end:i.end})}),Yn(t)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=t,this._lastScrollPosition=t)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[t]=this.items;return this.update.emit([t]),Promise.resolve().then(()=>{const r=this._dropdown.querySelector(`#${t.htmlId}`).clientHeight;return this._virtualPadding.style.height=r*this.itemsLength+"px",this._panelService.setDimensions(r,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(t){this._scrollToEndFired||0===t||t+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(t){if("auto"!==this.position)return this.position;const i=this._select.getBoundingClientRect(),r=document.documentElement.scrollTop||document.body.scrollTop;return i.top+window.pageYOffset+i.height+t.getBoundingClientRect().height>r+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){const t=this._select.getBoundingClientRect(),i=this._parent.getBoundingClientRect();this._dropdown.style.left=t.left-i.left+"px",this._dropdown.style.width=t.width+"px",this._dropdown.style.minWidth=t.width+"px"}_updateYPosition(){const t=this._select.getBoundingClientRect(),i=this._parent.getBoundingClientRect(),r=t.height;"top"===this._currentPosition?(this._dropdown.style.bottom=i.bottom-t.bottom+r+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=t.top-i.top+r+"px",this._dropdown.style.bottom="auto")}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{Ii(this._dropdown,"mousedown").pipe(dn(this._destroy$)).subscribe(t=>{"INPUT"!==t.target.tagName&&t.preventDefault()})})}static#e=this.\u0275fac=function(i){return new(i||n)(R(us),R(ot),R(iG),R(Rt),R(Ei,8))};static#t=this.\u0275cmp=Si({type:n,selectors:[["ng-dropdown-panel"]],viewQuery:function(i,r){if(1&i&&(hs(Ope,7,Rt),hs(Mpe,7,Rt),hs(kpe,7,Rt)),2&i){let s;Ze(s=Ye())&&(r.contentElementRef=s.first),Ze(s=Ye())&&(r.scrollElementRef=s.first),Ze(s=Ye())&&(r.paddingElementRef=s.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[qt],ngContentSelectors:eG,decls:9,vars:6,consts:[["class","ng-dropdown-header",4,"ngIf"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","ng-dropdown-footer",4,"ngIf"],[1,"ng-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-dropdown-footer"]],template:function(i,r){1&i&&(VE(),ce(0,Fpe,2,4,"div",0),fe(1,"div",1,2),Er(3,"div",null,3),fe(5,"div",null,4),BE(7),pe()(),ce(8,Lpe,2,4,"div",5)),2&i&&(ie("ngIf",r.headerTemplate),ne(3),gt("total-padding",r.virtualScroll),ne(2),gt("scrollable-content",r.virtualScroll&&r.items.length),ne(3),ie("ngIf",r.footerTemplate))},dependencies:[ko,Tl],encapsulation:2,changeDetection:0})}return n})(),oG=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=this._isDisabled(t)}constructor(t){this.elementRef=t,this.stateChange$=new qe,this._disabled=!1}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(t){t.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(t){return null!=t&&"false"!=`${t}`}static#e=this.\u0275fac=function(i){return new(i||n)(R(Rt))};static#t=this.\u0275cmp=Si({type:n,selectors:[["ng-option"]],inputs:{value:"value",disabled:"disabled"},features:[qt],ngContentSelectors:eG,decls:1,vars:0,template:function(i,r){1&i&&(VE(),BE(0))},encapsulation:2,changeDetection:0})}return n})(),Mge=(()=>{class n{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kge=(()=>{class n{warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const aG=new ve("ng-select-selection-model");let Fge=(()=>{class n{get items(){return this._items}set items(t){null===t&&(t=[]),this._itemsAreUsed=!0,this._items=t}get compareWith(){return this._compareWith}set compareWith(t){if(null!=t&&!dI(t))throw Error("`compareWith` must be a function.");this._compareWith=t}get clearSearchOnAdd(){return Yn(this._clearSearchOnAdd)?this._clearSearchOnAdd:Yn(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(t){this._clearSearchOnAdd=t}get deselectOnClick(){return Yn(this._deselectOnClick)?this._deselectOnClick:Yn(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(t){this._deselectOnClick=t}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(t,i,r,s,o,a,l){this.classes=t,this.autoFocus=i,this.config=r,this._cd=a,this._console=l,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=u=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new Se,this.focusEvent=new Se,this.changeEvent=new Se,this.openEvent=new Se,this.closeEvent=new Se,this.searchEvent=new Se,this.clearEvent=new Se,this.addEvent=new Se,this.removeEvent=new Se,this.scroll=new Se,this.scrollToEnd=new Se,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=nG(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new qe,this._keyPress$=new qe,this._onChange=u=>{},this._onTouched=()=>{},this.clearItem=u=>{const h=this.selectedItems.find(g=>g.value===u);this.unselect(h)},this.trackByOption=(u,h)=>this.trackByFn?this.trackByFn(h.value):h,this._mergeGlobalConfig(r),this.itemsList=new Pge(this,s()),this.element=o.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(t=>t.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(t){t.multiple&&this.itemsList.clearSelected(),t.items&&this._setItems(t.items.currentValue||[]),t.isOpen&&(this._manualOpen=Yn(t.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),Yn(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(t){if(Na[t.which]){if(!1===this.keyDownFn(t))return;this.handleKeyCode(t)}else t.key&&1===t.key.length&&this._keyPress$.next(t.key.toLocaleLowerCase())}handleKeyCode(t){this.clearButton&&this.clearButton.nativeElement===t.target?this.handleKeyCodeClear(t):this.handleKeyCodeInput(t)}handleKeyCodeInput(t){switch(t.which){case Na.ArrowDown:this._handleArrowDown(t);break;case Na.ArrowUp:this._handleArrowUp(t);break;case Na.Space:this._handleSpace(t);break;case Na.Enter:this._handleEnter(t);break;case Na.Tab:this._handleTab(t);break;case Na.Esc:this.close(),t.preventDefault();break;case Na.Backspace:this._handleBackspace()}}handleKeyCodeClear(t){t.which===Na.Enter&&(this.handleClearClick(),t.preventDefault())}handleMousedown(t){const i=t.target;"INPUT"!==i.tagName&&t.preventDefault(),i.classList.contains("ng-clear-wrapper")?this.handleClearClick():i.classList.contains("ng-arrow-wrapper")?this.handleArrowClick():i.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(t){this.itemsList.clearSelected(),this._handleWriteValue(t),this._cd.markForCheck()}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._disabled=t,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(t){!t||t.disabled||this.disabled||(this.deselectOnClick&&t.selected?this.unselect(t):this.select(t),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(t){t.selected||(this.itemsList.select(t),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(t.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(t){t&&(this.itemsList.unselect(t),this.focus(),this._updateNgModel(),this.removeEvent.emit(t.value))}selectTag(){let t;t=dI(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const i=r=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(r,null):this.itemsList.addItem(r);!function yge(n){return n instanceof Promise}(t)?t&&this.select(i(t)):t.then(r=>this.select(i(r))).catch(()=>{})}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}focusOnClear(){this.blur(),this.clearButton&&this.clearButton.nativeElement.focus()}get showAddTag(){if(!this._validTerm)return!1;const t=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(i=>i.label.toLowerCase()===t)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(i=>i.label.toLowerCase()===t))&&!this.loading}showNoItemsFound(){const t=0===this.itemsList.filteredItems.length;return(t&&!this._isTypeahead&&!this.loading||t&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(t){this._isComposing=!1,!this.searchWhileComposing&&this.filter(t)}filter(t){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=t,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(t),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:t,items:this.itemsList.filteredItems.map(i=>i.value)}),this.open())}onInputFocus(t){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(t),this.focused=!0)}onInputBlur(t){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(t),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(t){t.disabled||this.itemsList.markItem(t)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){const t=this.selectedItems&&this.selectedItems[0];this.searchTerm=t&&t.label||null}_setItems(t){const i=t[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=Yn(i)?!fy(i):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(t),t.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&Yn(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const t=r=>{this.items=r.map(s=>({$ngOptionValue:s.value,$ngOptionLabel:s.elementRef.nativeElement.innerHTML,disabled:s.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},i=()=>{const r=Qt(this.ngOptions.changes,this._destroy$);Qt(...this.ngOptions.map(s=>s.stateChange$)).pipe(dn(r)).subscribe(s=>{const o=this.itemsList.findItem(s.value);o.disabled=s.disabled,o.label=s.label||o.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe(Vf(this.ngOptions),dn(this._destroy$)).subscribe(r=>{this.bindLabel=this._defaultLabel,t(r),i()})}_isValidWriteValue(t){if(!Yn(t)||this.multiple&&""===t||Array.isArray(t)&&0===t.length)return!1;const i=r=>!(!Yn(this.compareWith)&&fy(r)&&this.bindValue&&(this._console.warn(`Setting object(${JSON.stringify(r)}) as your model with bindValue is not allowed unless [compareWith] is used.`),1));return this.multiple?Array.isArray(t)?t.every(r=>i(r)):(this._console.warn("Multiple select ngModel should be array."),!1):i(t)}_handleWriteValue(t){if(!this._isValidWriteValue(t))return;const i=r=>{let s=this.itemsList.findItem(r);if(s)this.itemsList.select(s);else{const o=fy(r);o||!o&&!this.bindValue?this.itemsList.select(this.itemsList.mapItem(r,null)):this.bindValue&&(s={[this.bindLabel]:null,[this.bindValue]:r},this.itemsList.select(this.itemsList.mapItem(s,null)))}};this.multiple?t.forEach(r=>i(r)):i(t)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe(dn(this._destroy$),wi(t=>this._pressedKeys.push(t)),X4(200),di(()=>this._pressedKeys.length>0),Ne(()=>this._pressedKeys.join(""))).subscribe(t=>{const i=this.itemsList.findByLabel(t);i&&(this.isOpen?(this.itemsList.markItem(i),this._scrollToMarked(),this._cd.markForCheck()):this.select(i)),this._pressedKeys=[]})}_setInputAttributes(){const t=this.searchInput.nativeElement,i={type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId,...this.inputAttrs};for(const r of Object.keys(i))t.setAttribute(r,i[r])}_updateNgModel(){const t=[];for(const r of this.selectedItems)if(this.bindValue){let s=null;s=r.children?r.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(r.value,this.bindValue),t.push(s)}else t.push(r.value);const i=this.selectedItems.map(r=>r.value);this.multiple?(this._onChange(t),this.changeEvent.emit(i)):(this._onChange(Yn(t[0])?t[0]:null),this.changeEvent.emit(i[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(t){this.searchTerm=t,this._isTypeahead&&this.typeahead.next(t)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(t){if(!1===this.isOpen)if(this.showClear())this.focusOnClear(),t.preventDefault();else if(!this.addTag)return;this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),t.preventDefault()):this.showAddTag?(this.selectTag(),t.preventDefault()):this.close():this.close()}_handleEnter(t){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}t.preventDefault()}_handleSpace(t){this.isOpen||this._manualOpen||(this.open(),t.preventDefault())}_handleArrowDown(t){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),t.preventDefault()}_handleArrowUp(t){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),t.preventDefault())}_nextItemIsTag(t){const i=this.itemsList.markedIndex+t;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(i<0||i===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const t=this.searchTerm&&this.searchTerm.trim();return t&&t.length>=this.minTermLength}_mergeGlobalConfig(t){this.placeholder=this.placeholder||t.placeholder,this.notFoundText=this.notFoundText||t.notFoundText,this.typeToSearchText=this.typeToSearchText||t.typeToSearchText,this.addTagText=this.addTagText||t.addTagText,this.loadingText=this.loadingText||t.loadingText,this.clearAllText=this.clearAllText||t.clearAllText,this.virtualScroll=Yn(this.virtualScroll)?this.virtualScroll:!!Yn(t.disableVirtualScroll)&&!t.disableVirtualScroll,this.openOnEnter=Yn(this.openOnEnter)?this.openOnEnter:t.openOnEnter,this.appendTo=this.appendTo||t.appendTo,this.bindValue=this.bindValue||t.bindValue,this.bindLabel=this.bindLabel||t.bindLabel,this.appearance=this.appearance||t.appearance}static#e=this.\u0275fac=function(i){return new(i||n)(Rs("class"),Rs("autofocus"),R(Mge),R(aG),R(Rt),R(Os),R(kge))};static#t=this.\u0275cmp=Si({type:n,selectors:[["ng-select"]],contentQueries:function(i,r,s){if(1&i&&(Vt(s,Ege,5,tt),Vt(s,bge,5,tt),Vt(s,wge,5,tt),Vt(s,Ige,5,tt),Vt(s,Tge,5,tt),Vt(s,Cge,5,tt),Vt(s,Dge,5,tt),Vt(s,Sge,5,tt),Vt(s,Age,5,tt),Vt(s,Rge,5,tt),Vt(s,Nge,5,tt),Vt(s,oG,5)),2&i){let o;Ze(o=Ye())&&(r.optionTemplate=o.first),Ze(o=Ye())&&(r.optgroupTemplate=o.first),Ze(o=Ye())&&(r.labelTemplate=o.first),Ze(o=Ye())&&(r.multiLabelTemplate=o.first),Ze(o=Ye())&&(r.headerTemplate=o.first),Ze(o=Ye())&&(r.footerTemplate=o.first),Ze(o=Ye())&&(r.notFoundTemplate=o.first),Ze(o=Ye())&&(r.typeToSearchTemplate=o.first),Ze(o=Ye())&&(r.loadingTextTemplate=o.first),Ze(o=Ye())&&(r.tagTemplate=o.first),Ze(o=Ye())&&(r.loadingSpinnerTemplate=o.first),Ze(o=Ye())&&(r.ngOptions=o)}},viewQuery:function(i,r){if(1&i&&(hs(sG,5),hs(Vpe,7),hs(Bpe,5)),2&i){let s;Ze(s=Ye())&&(r.dropdownPanel=s.first),Ze(s=Ye())&&(r.searchInput=s.first),Ze(s=Ye())&&(r.clearButton=s.first)}},hostVars:20,hostBindings:function(i,r){1&i&&$e("keydown",function(o){return r.handleKeyDown(o)}),2&i&&gt("ng-select-typeahead",r.typeahead)("ng-select-multiple",r.multiple)("ng-select-taggable",r.addTag)("ng-select-searchable",r.searchable)("ng-select-clearable",r.clearable)("ng-select-opened",r.isOpen)("ng-select",r.useDefaultClass)("ng-select-disabled",r.disabled)("ng-select-filtered",r.filtered)("ng-select-single",r.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[sn([{provide:Vs,useExisting:me(()=>n),multi:!0},iG]),qt],decls:14,vars:19,consts:[[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[4,"ngIf"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["class","ng-clear-wrapper","tabindex","0",3,"title",4,"ngIf"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["class","ng-dropdown-panel","role","listbox","aria-label","Options list",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","ng-value",3,"ng-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ng-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],["tabindex","0",1,"ng-clear-wrapper",3,"title"],["clearButton",""],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-option","role","option",3,"ng-option-marked","mouseover","click",4,"ngIf"],[1,"ng-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"ng-tag-label"],["defaultNotFoundTemplate",""],[1,"ng-option","ng-option-disabled"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(i,r){if(1&i){const s=vi();fe(0,"div",0),$e("mousedown",function(a){return r.handleMousedown(a)}),fe(1,"div",1)(2,"div",2),yt(3),pe(),ce(4,Gpe,2,2,"ng-container",3),ce(5,qpe,1,5,null,3),fe(6,"div",4)(7,"input",5,6),$e("input",function(){Ft(s);const a=yi(8);return Lt(r.filter(a.value))})("compositionstart",function(){return r.onCompositionStart()})("compositionend",function(){Ft(s);const a=yi(8);return Lt(r.onCompositionEnd(a.value))})("focus",function(a){return r.onInputFocus(a)})("blur",function(a){return r.onInputBlur(a)})("change",function(a){return a.stopPropagation()}),pe()()(),ce(9,Ype,4,1,"ng-container",3),ce(10,Qpe,4,1,"span",7),fe(11,"span",8),Er(12,"span",9),pe()(),ce(13,pge,7,19,"ng-dropdown-panel",10)}2&i&&(gt("ng-appearance-outline","outline"===r.appearance)("ng-has-value",r.hasValue),ne(3),br(r.placeholder),ne(1),ie("ngIf",(!r.multiLabelTemplate||!r.multiple)&&r.selectedItems.length>0),ne(1),ie("ngIf",r.multiple&&r.multiLabelTemplate&&r.selectedValues.length>0),ne(1),Ht("aria-expanded",r.isOpen)("aria-owns",r.isOpen?r.dropdownId:null),ne(1),ie("readOnly",!r.searchable||r.itemsList.maxItemsSelected)("disabled",r.disabled)("value",r.searchTerm?r.searchTerm:""),Ht("id",r.labelForId)("tabindex",r.tabIndex)("aria-activedescendant",r.isOpen?null==r.itemsList||null==r.itemsList.markedItem?null:r.itemsList.markedItem.htmlId:null)("aria-controls",r.isOpen?r.dropdownId:null),ne(2),ie("ngIf",r.loading),ne(1),ie("ngIf",r.showClear()),ne(3),ie("ngIf",r.isOpen))},dependencies:[vS,ba,ko,Tl,sG,vge],styles:['@charset "UTF-8";.ng-select{position:relative;display:block;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}\n'],encapsulation:2,changeDetection:0})}return n})();function Lge(){return new Vge}class Vge{constructor(){this._selected=[]}get value(){return this._selected}select(e,t,i){if(e.selected=!0,(!e.children||!t&&i)&&this._selected.push(e),t)if(e.parent){const r=e.parent.children.length,s=e.parent.children.filter(o=>o.selected).length;e.parent.selected=r===s}else e.children&&(this._setChildrenSelectedState(e.children,!0),this._removeChildren(e),this._selected=i&&this._activeChildren(e)?[...this._selected.filter(r=>r.parent!==e),e]:[...this._selected,...e.children.filter(r=>!r.disabled)])}unselect(e,t){if(this._selected=this._selected.filter(i=>i!==e),e.selected=!1,t)if(e.parent&&e.parent.selected){const i=e.parent.children;this._removeParent(e.parent),this._removeChildren(e.parent),this._selected.push(...i.filter(r=>r!==e&&!r.disabled)),e.parent.selected=!1}else e.children&&(this._setChildrenSelectedState(e.children,!1),this._removeChildren(e))}clear(e){this._selected=e?this._selected.filter(t=>t.disabled):[]}_setChildrenSelectedState(e,t){for(const i of e)i.disabled||(i.selected=t)}_removeChildren(e){this._selected=[...this._selected.filter(t=>t.parent!==e),...e.children.filter(t=>t.parent===e&&t.disabled&&t.selected)]}_removeParent(e){this._selected=this._selected.filter(t=>t!==e)}_activeChildren(e){return e.children.every(t=>!t.disabled||t.selected)}}let Bge=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n});static#n=this.\u0275inj=mt({providers:[{provide:aG,useValue:Lge}],imports:[TS]})}return n})();const Uge=["playerTurnCountdown"];function jge(n,e){if(1&n&&(fe(0,"ng-option",11),yt(1),pe()),2&n){const t=e.$implicit;ie("value",t),ne(1),yc("Game ",t.code,"")}}function Hge(n,e){if(1&n&&(fe(0,"ng-option",11),yt(1),pe()),2&n){const t=e.$implicit;let i;ie("value",t),ne(1),GE("Player ",t.number," | ",null!==(i=t.name)&&void 0!==i?i:"","")}}function $ge(n,e){if(1&n){const t=vi();fe(0,"ng-select",12),$e("ngModelChange",function(r){return Ft(t),Lt(de().player=r)})("change",function(r){return Ft(t),Lt(de().playerChanged(r))}),fe(1,"ng-option",2),yt(2,"New Player"),pe(),ce(3,Hge,2,3,"ng-option",3),pe()}if(2&n){const t=de();ie("ngModel",t.player)("searchable",!1),ne(3),ie("ngForOf",t.game.players)}}function Gge(n,e){if(1&n){const t=vi();fe(0,"div")(1,"button",21),$e("click",function(){return Ft(t),Lt(de(3).startGame())}),yt(2,"Start Game"),pe()()}}function zge(n,e){if(1&n&&(fe(0,"div"),yt(1),pe()),2&n){const t=de(3);let i;ne(1),GE(" Player ",null!==(i=null==t.currentPlayer?null:t.currentPlayer.number)&&void 0!==i?i:""," ",null!==(i=null==t.currentPlayer?null:t.currentPlayer.name)&&void 0!==i?i:""," Turn. ")}}function Wge(n,e){if(1&n){const t=vi();fe(0,"div",16),yt(1," Your Turn! "),fe(2,"div")(3,"button",17),$e("click",function(){return Ft(t),Lt(de(2).endTurn())}),fe(4,"countdown",18,19),$e("action",function(r){return Ft(t),Lt(de(2).countdownAction(r))}),pe()()()(),ce(6,Gge,3,0,"div",20),ce(7,zge,2,2,"div",20)}if(2&n){const t=de(2);let i;ie("hidden",(null==t.currentPlayer?null:t.currentPlayer.number)!==t.player.number),ne(4),ie("config",t.playerTurnCountdownConfig),ne(2),ie("ngIf",!(null!==(i=null==t.game?null:t.game.inProgress)&&void 0!==i&&i)&&t.isPlayer1),ne(1),ie("ngIf",(null==t.currentPlayer?null:t.currentPlayer.number)!==t.player.number)}}function qge(n,e){1&n&&(fe(0,"li",13)(1,"button",14),yt(2,"Turn"),pe(),ce(3,Wge,8,4,"ng-template",15),pe())}function Kge(n,e){if(1&n){const t=vi();fe(0,"div",23)(1,"span",24),yt(2,"Total Minutes of Game:"),pe(),fe(3,"input",25),$e("ngModelChange",function(r){return Ft(t),Lt(de(2).game.minutesForGame=r)}),pe()(),fe(4,"div",26)(5,"span",24),yt(6,"Seconds Per Turn:"),pe(),fe(7,"input",25),$e("ngModelChange",function(r){return Ft(t),Lt(de(2).game.secondsPerTurn=r)}),pe()(),fe(8,"div",27)(9,"button",21),$e("click",function(){Ft(t);const r=de(2);return Lt(r.saveGame(r.game))}),yt(10,"Save"),pe()(),fe(11,"div",28),yt(12," Game: "),fe(13,"code")(14,"pre"),yt(15),YE(16,"json"),pe()()()}if(2&n){const t=de(2);ne(3),ie("ngModel",t.game.minutesForGame),ne(4),ie("ngModel",t.game.secondsPerTurn),ne(8),br(QE(16,3,t.game))}}function Zge(n,e){1&n&&(fe(0,"li",22)(1,"button",14),yt(2,"Game"),pe(),ce(3,Kge,17,5,"ng-template",15),pe())}function Yge(n,e){if(1&n){const t=vi();fe(0,"div",23)(1,"span",24),yt(2,"Name:"),pe(),fe(3,"input",25),$e("ngModelChange",function(r){return Ft(t),Lt(de(2).player.name=r)}),pe()(),fe(4,"div",26)(5,"span",24),yt(6,"Color:"),pe(),fe(7,"input",25),$e("ngModelChange",function(r){return Ft(t),Lt(de(2).player.color=r)}),pe()(),fe(8,"div",27)(9,"button",21),$e("click",function(){Ft(t);const r=de(2);return Lt(r.savePlayer(r.player))}),yt(10,"Save"),pe()(),fe(11,"div",28),yt(12," Player: "),fe(13,"code")(14,"pre"),yt(15),YE(16,"json"),pe()()()}if(2&n){const t=de(2);ne(3),ie("ngModel",t.player.name),ne(4),ie("ngModel",t.player.color),ne(8),br(QE(16,3,t.player))}}function Qge(n,e){1&n&&(fe(0,"li",29)(1,"button",14),yt(2,"Player"),pe(),ce(3,Yge,17,5,"ng-template",15),pe())}let Jge=(()=>{class n{constructor(t,i){this.gameStore=t,this.playerStore=i,this.game=null,this.player=null,this.games$=this.gameStore.games$,this.playerTurnCountdownConfig={demand:!0,leftTime:60,format:"mm:ss",notify:5},this.playerStore.player$.subscribe(r=>{this.player&&(Object.assign(this.player,r),this.player.myTurn&&(this.playerTurnCountdown?.restart(),this.playerTurnCountdown?.begin()))})}get turnInProgress(){return this.player?.myTurn??!1}get isPlayer1(){return this.playerStore.isPlayer1}gameChanged(t){t?this.gameStore.game=t:this.gameStore.createGame()}playerChanged(t){t?this.playerStore.player=t:this.playerStore.createPlayer()}saveGame(t){this.gameStore.updateGame(t)}savePlayer(t){this.playerStore.updatePlayer(t)}startGame(){this.gameStore.startGame(),this.playerStore.startGame()}endTurn(){this.gameStore.nextPlayer(),this.playerTurnCountdown?.stop()}countdownAction(t){console.log(t)}get currentPlayer(){return this.gameStore.getCurrentPlayer()}static#e=this.\u0275fac=function(i){return new(i||n)(R(RR),R(n$))};static#t=this.\u0275cmp=Si({type:n,selectors:[["app-root"]],viewQuery:function(i,r){if(1&i&&hs(Uge,5),2&i){let s;Ze(s=Ye())&&(r.playerTurnCountdown=s.first)}},decls:14,vars:10,consts:[[1,"m-5"],["placeholder","Select a game",3,"ngModel","searchable","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select a player",3,"ngModel","searchable","ngModelChange","change",4,"ngIf"],["ngbNav","","activeId","turn",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","turn",4,"ngIf"],["ngbNavItem","game",4,"ngIf"],["ngbNavItem","player",4,"ngIf"],[1,"mt-2",3,"ngbNavOutlet"],[3,"value"],["placeholder","Select a player",3,"ngModel","searchable","ngModelChange","change"],["ngbNavItem","turn"],["ngbNavLink",""],["ngbNavContent",""],[3,"hidden"],["type","button",1,"btn","btn-success","btn-xl",3,"ngClass","click"],[3,"config","action"],["playerTurnCountdown",""],[4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],["ngbNavItem","game"],[1,"input-group","input-group-lg"],["id","inputGroup-sizing-lg",1,"input-group-text"],["type","text","aria-label","Sizing example input","aria-describedby","inputGroup-sizing-lg",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","input-group-lg","mt-2"],[1,"mt-2"],[1,"box","box-default"],["ngbNavItem","player"]],template:function(i,r){if(1&i&&(fe(0,"div",0)(1,"div",0)(2,"ng-select",1),$e("ngModelChange",function(o){return r.game=o})("change",function(o){return r.gameChanged(o)}),fe(3,"ng-option",2),yt(4,"New Game"),pe(),ce(5,jge,2,2,"ng-option",3),YE(6,"async"),pe(),ce(7,$ge,4,3,"ng-select",4),pe(),fe(8,"ul",5,6),ce(10,qge,4,0,"li",7),ce(11,Zge,4,0,"li",8),ce(12,Qge,4,0,"li",9),pe(),Er(13,"div",10),pe()),2&i){const s=yi(9);ne(2),ie("ngModel",r.game)("searchable",!1),ne(3),ie("ngForOf",QE(6,8,r.games$)),ne(2),ie("ngIf",r.game),ne(3),ie("ngIf",r.player),ne(1),ie("ngIf",r.game),ne(1),ie("ngIf",r.player),ne(1),ie("ngbNavOutlet",s)}},dependencies:[vS,ba,ko,kw,A$,$R,c3,DN,Ad,Ip,x4,P4,dy,O4,Fge,oG,YV,QV]})}return n})();function AN(){return n=>n.lift(new Xge)}class Xge{call(e,t){return t.subscribe(new eme(e))}}class eme extends Pe{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var De,tme=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qo={},RN=RN||{},nt=tme||self;function fI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function py(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var NN="closure_uid_"+(1e9*Math.random()>>>0),ime=0;function rme(n,e,t){return n.call.apply(n.bind,arguments)}function sme(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Tr(n,e,t){return(Tr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rme:sme).apply(null,arguments)}function pI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function zi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Gc(){this.s=this.s,this.o=this.o}Gc.prototype.s=!1,Gc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function nme(n){Object.prototype.hasOwnProperty.call(n,NN)&&n[NN]||(n[NN]=++ime)}(this)},Gc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lG=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function xN(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function cG(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(fI(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function Cr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Cr.prototype.h=function(){this.defaultPrevented=!0};var ame=function(){if(!nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};nt.addEventListener("test",t,e),nt.removeEventListener("test",t,e)}catch{}return n}();function gy(n){return/^[\s\xa0]*$/.test(n)}function gI(){var n=nt.navigator;return n&&(n=n.userAgent)?n:""}function xa(n){return-1!=gI().indexOf(n)}function PN(n){return PN[" "](n),n}PN[" "]=function(){};var MN,cme=xa("Opera"),Tp=xa("Trident")||xa("MSIE"),uG=xa("Edge"),ON=uG||Tp,dG=xa("Gecko")&&!(-1!=gI().toLowerCase().indexOf("webkit")&&!xa("Edge"))&&!(xa("Trident")||xa("MSIE"))&&!xa("Edge"),ume=-1!=gI().toLowerCase().indexOf("webkit")&&!xa("Edge");function hG(){var n=nt.document;return n?n.documentMode:void 0}e:{var kN="",FN=function(){var n=gI();return dG?/rv:([^\);]+)(\)|;)/.exec(n):uG?/Edge\/([\d\.]+)/.exec(n):Tp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ume?/WebKit\/(\S+)/.exec(n):cme?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(FN&&(kN=FN?FN[1]:""),Tp){var LN=hG();if(null!=LN&&LN>parseFloat(kN)){MN=String(LN);break e}}MN=kN}var dme=nt.document&&Tp&&(hG()||parseInt(MN,10))||void 0;function my(n,e){if(Cr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(dG){e:{try{PN(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:hme[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&my.$.h.call(this)}}zi(my,Cr);var hme={2:"touch",3:"pen",4:"mouse"};my.prototype.h=function(){my.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _y="closure_listenable_"+(1e6*Math.random()|0),fme=0;function pme(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++fme,this.fa=this.ia=!1}function mI(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function BN(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function pG(n){const e={};for(const t in n)e[t]=n[t];return e}const gG="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mG(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<gG.length;s++)t=gG[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function _I(n){this.src=n,this.g={},this.h=0}function UN(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=lG(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(mI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function jN(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}_I.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=jN(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new pme(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var HN="closure_lm_"+(1e6*Math.random()|0),$N={};function _G(n,e,t,i,r){if(i&&i.once)return vG(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)_G(n,e[s],t,i,r);return null}return t=qN(t),n&&n[_y]?n.O(e,t,py(i)?!!i.capture:!!i,r):yG(n,e,t,!1,i,r)}function yG(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=py(r)?!!r.capture:!!r,a=zN(n);if(a||(n[HN]=a=new _I(n)),(t=a.add(e,t,i,o,s)).proxy)return t;if(i=function mme(){const e=_me;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)ame||(r=o),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(bG(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function vG(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)vG(n,e[s],t,i,r);return null}return t=qN(t),n&&n[_y]?n.P(e,t,py(i)?!!i.capture:!!i,r):yG(n,e,t,!0,i,r)}function EG(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)EG(n,e[s],t,i,r);else i=py(i)?!!i.capture:!!i,t=qN(t),n&&n[_y]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=jN(s=n.g[e],t,i,r))&&(mI(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=zN(n))&&(e=n.g[e.toString()],n=-1,e&&(n=jN(e,t,i,r)),(t=-1<n?e[n]:null)&&GN(t))}function GN(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[_y])UN(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(bG(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=zN(e))?(UN(t,n),0==t.h&&(t.src=null,e[HN]=null)):mI(n)}}}function bG(n){return n in $N?$N[n]:$N[n]="on"+n}function _me(n,e){if(n.fa)n=!0;else{e=new my(e,this);var t=n.listener,i=n.la||n.src;n.ia&&GN(n),n=t.call(i,e)}return n}function zN(n){return(n=n[HN])instanceof _I?n:null}var WN="__closure_events_fn_"+(1e9*Math.random()>>>0);function qN(n){return"function"==typeof n?n:(n[WN]||(n[WN]=function(e){return n.handleEvent(e)}),n[WN])}function Wi(){Gc.call(this),this.i=new _I(this),this.S=this,this.J=null}function ur(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new Cr(e,n);else if(e instanceof Cr)e.target=e.target||n;else{var r=e;mG(e=new Cr(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=yI(o,i,!0,e)&&r}if(r=yI(o=e.g=n,i,!0,e)&&r,r=yI(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=yI(o=e.g=t[s],i,!1,e)&&r}function yI(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&UN(n.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}zi(Wi,Gc),Wi.prototype[_y]=!0,Wi.prototype.removeEventListener=function(n,e,t,i){EG(this,n,e,t,i)},Wi.prototype.N=function(){if(Wi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)mI(t[i]);delete n.g[e],n.h--}}this.J=null},Wi.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Wi.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var KN=nt.JSON.stringify;function vme(){var n=ZN;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var wG=new class yme{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new bme,n=>n.reset());class bme{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wme(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Ime(n){nt.setTimeout(()=>{throw n},0)}let yy,vy=!1,ZN=new class Eme{constructor(){this.h=this.g=null}add(e,t){const i=wG.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},IG=()=>{const n=nt.Promise.resolve(void 0);yy=()=>{n.then(Tme)}};var Tme=()=>{for(var n;n=vme();){try{n.h.call(n.g)}catch(t){Ime(t)}var e=wG;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vy=!1};function vI(n,e){Wi.call(this),this.h=n||1,this.g=e||nt,this.j=Tr(this.qb,this),this.l=Date.now()}function YN(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function QN(n,e,t){if("function"==typeof n)t&&(n=Tr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Tr(n.handleEvent,n)}return 2147483647<Number(e)?-1:nt.setTimeout(n,e||0)}function TG(n){n.g=QN(()=>{n.g=null,n.i&&(n.i=!1,TG(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}zi(vI,Wi),(De=vI.prototype).ga=!1,De.T=null,De.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ur(this,"tick"),this.ga&&(YN(this),this.start()))}},De.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},De.N=function(){vI.$.N.call(this),YN(this),delete this.g};class Cme extends Gc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:TG(this)}N(){super.N(),this.g&&(nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ey(n){Gc.call(this),this.h=n,this.g={}}zi(Ey,Gc);var CG=[];function DG(n,e,t,i){Array.isArray(t)||(t&&(CG[0]=t.toString()),t=CG);for(var r=0;r<t.length;r++){var s=_G(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function SG(n){BN(n.g,function(e,t){this.g.hasOwnProperty(t)&&GN(e)},n),n.g={}}function EI(){this.g=!0}function Cp(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Rme(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return KN(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Ey.prototype.N=function(){Ey.$.N.call(this),SG(this)},Ey.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},EI.prototype.Ea=function(){this.g=!1},EI.prototype.info=function(){};var Rd={},AG=null;function bI(){return AG=AG||new Wi}function RG(n){Cr.call(this,Rd.Ta,n)}function by(n){const e=bI();ur(e,new RG(e))}function NG(n,e){Cr.call(this,Rd.STAT_EVENT,n),this.stat=e}function Hr(n){const e=bI();ur(e,new NG(e,n))}function xG(n,e){Cr.call(this,Rd.Ua,n),this.size=e}function wy(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return nt.setTimeout(function(){n()},e)}Rd.Ta="serverreachability",zi(RG,Cr),Rd.STAT_EVENT="statevent",zi(NG,Cr),Rd.Ua="timingevent",zi(xG,Cr);var wI={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},PG={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function JN(){}function MG(){}JN.prototype.h=null;var tx,Iy={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function XN(){Cr.call(this,"d")}function ex(){Cr.call(this,"c")}function II(){}function Ty(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Ey(this),this.P=Nme,this.V=new vI(n=ON?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kG}function kG(){this.i=null,this.g="",this.h=!1}zi(XN,Cr),zi(ex,Cr),zi(II,JN),II.prototype.g=function(){return new XMLHttpRequest},II.prototype.i=function(){return{}},tx=new II;var Nme=45e3,FG={},nx={};function ix(n,e,t){n.L=1,n.A=SI(Nl(e)),n.u=t,n.S=!0,LG(n,null)}function LG(n,e){n.G=Date.now(),Cy(n),n.B=Nl(n.A);var t=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),qG(t.i,"t",i),n.o=0,t=n.l.J,n.h=new kG,n.g=_8(n.l,t?e:null,!n.u),0<n.O&&(n.M=new Cme(Tr(n.Pa,n,n.g),n.O)),DG(n.U,n.g,"readystatechange",n.nb),e=n.I?pG(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),by(),function Dme(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var h=u[0];u=u[1];var g=h.split("_");o=2<=g.length&&"type"==g[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.v,n.B,n.m,n.W,n.u)}function VG(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function BG(n,e,t){let r,i=!0;for(;!n.J&&n.o<t.length;){if(r=xme(n,t),r==nx){4==e&&(n.s=4,Hr(14),i=!1),Cp(n.j,n.m,null,"[Incomplete Response]");break}if(r==FG){n.s=4,Hr(15),Cp(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Cp(n.j,n.m,r,null),rx(n,r)}VG(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,Hr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),dx(e),e.M=!0,Hr(11))):(Cp(n.j,n.m,t,"[Invalid Chunked Response]"),Nd(n),Dy(n))}function xme(n,e){var t=n.o,i=e.indexOf("\n",t);return-1==i?nx:(t=Number(e.substring(t,i)),isNaN(t)?FG:(i+=1)+t>e.length?nx:(e=e.slice(i,i+t),n.o=i+t,e))}function Cy(n){n.Y=Date.now()+n.P,UG(n,n.P)}function UG(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=wy(Tr(n.lb,n),e)}function TI(n){n.C&&(nt.clearTimeout(n.C),n.C=null)}function Dy(n){0==n.l.H||n.J||f8(n.l,n)}function Nd(n){TI(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,YN(n.V),SG(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function rx(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||sx(t.i,n)))if(!n.K&&sx(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;OI(t),xI(t)}ux(t),Hr(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=wy(Tr(t.ib,t),6e3));if(1>=YG(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Pd(t,11)}else if((n.K||t.g==n)&&OI(t),!gy(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let u=r[e];if(t.V=u[0],u=u[1],2==t.H)if("c"==u[0]){t.K=u[1],t.pa=u[2];const h=u[3];null!=h&&(t.ra=h,t.l.info("VER="+t.ra));const g=u[4];null!=g&&(t.Ga=g,t.l.info("SVER="+t.Ga));const m=u[5];null!=m&&"number"==typeof m&&0<m&&(t.L=i=1.5*m,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const y=n.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=i.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ox(s,s.h),s.h=null))}if(i.F){const w=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(i.Da=w,Pn(i.I,i.F,w))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((i=t).wa=m8(i,i.J?i.pa:null,i.Y),o.K){QG(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(TI(a),Cy(a)),i.g=o}else d8(i);0<t.j.length&&PI(t)}else"stop"!=u[0]&&"close"!=u[0]||Pd(t,7);else 3==t.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Pd(t,7):cx(t):"noop"!=u[0]&&t.h&&t.h.Aa(u),t.A=0)}by()}catch{}}function jG(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(fI(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Ome(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(fI(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function Pme(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(fI(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(De=Ty.prototype).setTimeout=function(n){this.P=n},De.nb=function(n){n=n.target;const e=this.M;e&&3==Pa(n)?e.l():this.Pa(n)},De.Pa=function(n){try{if(n==this.g)e:{const h=Pa(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||ON||this.g&&(this.h.h||this.g.ja()||s8(this.g)))){this.J||4!=h||7==e||by(),TI(this);var t=this.g.da();this.ca=t;t:if(VG(this)){var i=s8(this.g);n="";var r=i.length,s=4==Pa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Nd(this),Dy(this);var o="";break t}this.h.i=new nt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function Sme(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gy(a)){var u=a;break t}}u=null}if(!(t=u)){this.i=!1,this.s=3,Hr(12),Nd(this),Dy(this);break e}Cp(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rx(this,t)}this.S?(BG(this,h,o),ON&&this.i&&3==h&&(DG(this.U,this.V,"tick",this.mb),this.V.start())):(Cp(this.j,this.m,o,null),rx(this,o)),4==h&&Nd(this),this.i&&!this.J&&(4==h?f8(this.l,this):(this.i=!1,Cy(this)))}else(function Qme(n){const e={};n=(n.g&&2<=Pa(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(gy(n[i]))continue;var t=wme(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}!function gme(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.s=3,Hr(12)):(this.s=0,Hr(13)),Nd(this),Dy(this)}}}catch{}},De.mb=function(){if(this.g){var n=Pa(this.g),e=this.g.ja();this.o<e.length&&(TI(this),BG(this,n,e),this.i&&4!=n&&Cy(this))}},De.cancel=function(){this.J=!0,Nd(this)},De.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function Ame(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(by(),Hr(17)),Nd(this),this.s=2,Dy(this)):UG(this,this.Y-n)};var HG=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xd(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof xd){this.h=n.h,CI(this,n.j),this.s=n.s,this.g=n.g,DI(this,n.m),this.l=n.l;var e=n.i,t=new Ry;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),$G(this,t),this.o=n.o}else n&&(e=String(n).match(HG))?(this.h=!1,CI(this,e[1]||"",!0),this.s=Sy(e[2]||""),this.g=Sy(e[3]||"",!0),DI(this,e[4]),this.l=Sy(e[5]||"",!0),$G(this,e[6]||"",!0),this.o=Sy(e[7]||"")):(this.h=!1,this.i=new Ry(null,this.h))}function Nl(n){return new xd(n)}function CI(n,e,t){n.j=t?Sy(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function DI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function $G(n,e,t){e instanceof Ry?(n.i=e,function Ume(n,e){e&&!n.j&&(zc(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(zG(this,i),qG(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ay(e,Vme)),n.i=new Ry(e,n.h))}function Pn(n,e,t){n.i.set(e,t)}function SI(n){return Pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Sy(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ay(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,kme),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kme(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}xd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ay(e,GG,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ay(e,GG,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ay(t,"/"==t.charAt(0)?Lme:Fme,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ay(t,Bme)),n.join("")};var GG=/[#\/\?@]/g,Fme=/[#\?:]/g,Lme=/[#\?]/g,Vme=/[#\?@]/g,Bme=/#/g;function Ry(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function zc(n){n.g||(n.g=new Map,n.h=0,n.i&&function Mme(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zG(n,e){zc(n),e=Dp(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function WG(n,e){return zc(n),e=Dp(n,e),n.g.has(e)}function qG(n,e,t){zG(n,e),0<t.length&&(n.i=null,n.g.set(Dp(n,e),xN(t)),n.h+=t.length)}function Dp(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function KG(n){this.l=n||Hme,n=nt.PerformanceNavigationTiming?0<(n=nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(nt.g&&nt.g.Ka&&nt.g.Ka()&&nt.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(De=Ry.prototype).add=function(n,e){zc(this),this.i=null,n=Dp(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},De.forEach=function(n,e){zc(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},De.ta=function(){zc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},De.Z=function(n){zc(this);let e=[];if("string"==typeof n)WG(this,n)&&(e=e.concat(this.g.get(Dp(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},De.set=function(n,e){return zc(this),this.i=null,WG(this,n=Dp(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},De.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},De.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};var Hme=10;function ZG(n){return!!n.h||!!n.g&&n.g.size>=n.j}function YG(n){return n.h?1:n.g?n.g.size:0}function sx(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ox(n,e){n.g?n.g.add(e):n.h=e}function QG(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function JG(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return xN(n.i)}KG.prototype.cancel=function(){if(this.i=JG(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var $me=class{stringify(n){return nt.JSON.stringify(n,void 0)}parse(n){return nt.JSON.parse(n,void 0)}};function Gme(){this.g=new $me}function zme(n,e,t){const i=t||"";try{jG(n,function(r,s){let o=r;py(r)&&(o=KN(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function AI(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Ny(n){this.l=n.ec||null,this.j=n.ob||!1}function RI(n,e){Wi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=ax,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zi(Ny,JN),Ny.prototype.g=function(){return new RI(this.l,this.j)},Ny.prototype.i=function(n){return function(){return n}}({}),zi(RI,Wi);var ax=0;function XG(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function xy(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Py(n)}function Py(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(De=RI.prototype).open=function(n,e){if(this.readyState!=ax)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Py(this)},De.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||nt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},De.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xy(this)),this.readyState=ax},De.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Py(this)),this.g&&(this.readyState=3,Py(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof nt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XG(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},De.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xy(this):Py(this),3==this.readyState&&XG(this)}},De.Za=function(n){this.g&&(this.response=this.responseText=n,xy(this))},De.Ya=function(n){this.g&&(this.response=n,xy(this))},De.ka=function(){this.g&&xy(this)},De.setRequestHeader=function(n,e){this.v.append(n,e)},De.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},De.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(RI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var qme=nt.JSON.parse;function ii(n){Wi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=e8,this.L=this.M=!1}zi(ii,Wi);var e8="",Kme=/^https?$/i,Zme=["POST","PUT"];function t8(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,n8(n),NI(n)}function n8(n){n.F||(n.F=!0,ur(n,"complete"),ur(n,"error"))}function i8(n){if(n.h&&typeof RN<"u"&&(!n.C[1]||4!=Pa(n)||2!=n.da()))if(n.v&&4==Pa(n))QN(n.La,0,n);else if(ur(n,"readystatechange"),4==Pa(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===o){var r=String(n.I).match(HG)[1]||null;!r&&nt.self&&nt.self.location&&(r=nt.self.location.protocol.slice(0,-1)),i=!Kme.test(r?r.toLowerCase():"")}t=i}if(t)ur(n,"complete"),ur(n,"success");else{n.m=6;try{var s=2<Pa(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",n8(n)}}finally{NI(n)}}}function NI(n,e){if(n.g){r8(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ur(n,"ready");try{t.onreadystatechange=i}catch{}}}function r8(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(nt.clearTimeout(n.A),n.A=null)}function Pa(n){return n.g?n.g.readyState:0}function s8(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case e8:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function o8(n){let e="";return BN(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function lx(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=o8(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pn(n,e,t))}function Oy(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function a8(n){this.Ga=0,this.j=[],this.l=new EI,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Oy("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Oy("baseRetryDelayMs",5e3,n),this.hb=Oy("retryDelaySeedMs",1e4,n),this.eb=Oy("forwardChannelMaxRetries",2,n),this.xa=Oy("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new KG(n&&n.concurrentRequestLimit),this.Ja=new Gme,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function cx(n){if(l8(n),3==n.H){var e=n.W++,t=Nl(n.I);if(Pn(t,"SID",n.K),Pn(t,"RID",e),Pn(t,"TYPE","terminate"),My(n,t),(e=new Ty(n,n.l,e)).L=2,e.A=SI(Nl(t)),t=!1,nt.navigator&&nt.navigator.sendBeacon)try{t=nt.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&nt.Image&&((new Image).src=e.A,t=!0),t||(e.g=_8(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Cy(e)}g8(n)}function xI(n){n.g&&(dx(n),n.g.cancel(),n.g=null)}function l8(n){xI(n),n.u&&(nt.clearTimeout(n.u),n.u=null),OI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&nt.clearTimeout(n.m),n.m=null)}function PI(n){if(!ZG(n.i)&&!n.m){n.m=!0;var e=n.Na;yy||IG(),vy||(yy(),vy=!0),ZN.add(e,n),n.C=0}}function c8(n,e){var t;t=e?e.m:n.W++;const i=Nl(n.I);Pn(i,"SID",n.K),Pn(i,"RID",t),Pn(i,"AID",n.V),My(n,i),n.o&&n.s&&lx(i,n.o,n.s),t=new Ty(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=u8(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),ox(n.i,t),ix(t,i,e)}function My(n,e){n.na&&BN(n.na,function(t,i){Pn(e,i,t)}),n.h&&jG({},function(t,i){Pn(e,i,t)})}function u8(n,e,t){t=Math.min(n.j.length,t);var i=n.h?Tr(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let u=r[l].g;const h=r[l].map;if(u-=s,0>u)s=Math.max(0,r[l].g-100),a=!1;else try{zme(h,o,"req"+u+"_")}catch{i&&i(h)}}if(a){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function d8(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;yy||IG(),vy||(yy(),vy=!0),ZN.add(e,n),n.A=0}}function ux(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=wy(Tr(n.Ma,n),p8(n,n.A)),n.A++,0))}function dx(n){null!=n.B&&(nt.clearTimeout(n.B),n.B=null)}function h8(n){n.g=new Ty(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Nl(n.wa);Pn(e,"RID","rpc"),Pn(e,"SID",n.K),Pn(e,"AID",n.V),Pn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Pn(e,"TO",n.qa),Pn(e,"TYPE","xmlhttp"),My(n,e),n.o&&n.s&&lx(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=SI(Nl(e)),t.u=null,t.S=!0,LG(t,n)}function OI(n){null!=n.v&&(nt.clearTimeout(n.v),n.v=null)}function f8(n,e){var t=null;if(n.g==e){OI(n),dx(n),n.g=null;var i=2}else{if(!sx(n.i,e))return;t=e.F,QG(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.u?e.u.length:0,e=Date.now()-e.G;var r=n.C;ur(i=bI(),new xG(i,t)),PI(n)}else d8(n);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function Jme(n,e){return!(YG(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=wy(Tr(n.Na,n,e),p8(n,n.C)),n.C++,0)))}(n,e)||2==i&&ux(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:Pd(n,5);break;case 4:Pd(n,10);break;case 3:Pd(n,6);break;default:Pd(n,2)}}function p8(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Pd(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=Tr(n.pb,n);t||(t=new xd("//www.google.com/images/cleardot.gif"),nt.location&&"http"==nt.location.protocol||CI(t,"https"),SI(t)),function Wme(n,e){const t=new EI;if(nt.Image){const i=new Image;i.onload=pI(AI,t,i,"TestLoadImage: loaded",!0,e),i.onerror=pI(AI,t,i,"TestLoadImage: error",!1,e),i.onabort=pI(AI,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=pI(AI,t,i,"TestLoadImage: timeout",!1,e),nt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Hr(2);n.H=0,n.h&&n.h.za(e),g8(n),l8(n)}function g8(n){if(n.H=0,n.ma=[],n.h){const e=JG(n.i);(0!=e.length||0!=n.j.length)&&(cG(n.ma,e),cG(n.ma,n.j),n.i.i.length=0,xN(n.j),n.j.length=0),n.h.ya()}}function m8(n,e,t){var i=t instanceof xd?Nl(t):new xd(t);if(""!=i.g)e&&(i.g=e+"."+i.g),DI(i,i.m);else{var r=nt.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new xd(null);i&&CI(s,i),e&&(s.g=e),r&&DI(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&Pn(i,t,e),Pn(i,"VER",n.ra),My(n,i),i}function _8(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ii(n.Ha&&!n.va?new Ny({ob:t}):n.va)).Oa(n.J),e}function y8(){}function MI(){if(Tp&&!(10<=Number(dme)))throw Error("Environmental error: no available transport.")}function Hs(n,e){Wi.call(this),this.g=new a8(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!gy(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gy(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Sp(this)}function v8(n){XN.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function E8(){ex.call(this),this.status=1}function Sp(n){this.g=n}function Ko(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function hx(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;o=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function an(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}(De=ii.prototype).Oa=function(n){this.M=n},De.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tx.g(),this.C=function OG(n){return n.h||(n.h=n.i())}(this.u?this.u:tx),this.g.onreadystatechange=Tr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void t8(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=nt.FormData&&n instanceof nt.FormData,!(0<=lG(Zme,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{r8(this),0<this.B&&((this.L=function Yme(n){return Tp&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tr(this.ua,this)):this.A=QN(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){t8(this,s)}},De.ua=function(){typeof RN<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ur(this,"timeout"),this.abort(8))},De.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ur(this,"complete"),ur(this,"abort"),NI(this))},De.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),NI(this,!0)),ii.$.N.call(this)},De.La=function(){this.s||(this.G||this.v||this.l?i8(this):this.kb())},De.kb=function(){i8(this)},De.isActive=function(){return!!this.g},De.da=function(){try{return 2<Pa(this)?this.g.status:-1}catch{return-1}},De.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},De.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),qme(e)}},De.Ia=function(){return this.m},De.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(De=a8.prototype).ra=8,De.H=1,De.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Ty(this,this.l,n);let s=this.s;if(this.U&&(s?(s=pG(s),mG(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=u8(this,r,e),Pn(t=Nl(this.I),"RID",n),Pn(t,"CVER",22),this.F&&Pn(t,"X-HTTP-Session-Id",this.F),My(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(o8(s)))+"&"+e:this.o&&lx(t,this.o,s)),ox(this.i,r),this.bb&&Pn(t,"TYPE","init"),this.P?(Pn(t,"$req",e),Pn(t,"SID","null"),r.aa=!0,ix(r,t,null)):ix(r,t,e),this.H=2}}else 3==this.H&&(n?c8(this,n):0==this.j.length||ZG(this.i)||c8(this))},De.Ma=function(){if(this.u=null,h8(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=wy(Tr(this.jb,this),n)}},De.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Hr(10),xI(this),h8(this))},De.ib=function(){null!=this.v&&(this.v=null,xI(this),ux(this),Hr(19))},De.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Hr(2)):(this.l.info("Failed to ping google.com"),Hr(1))},De.isActive=function(){return!!this.h&&this.h.isActive(this)},(De=y8.prototype).Ba=function(){},De.Aa=function(){},De.za=function(){},De.ya=function(){},De.isActive=function(){return!0},De.Va=function(){},MI.prototype.g=function(n,e){return new Hs(n,e)},zi(Hs,Wi),Hs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Hr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=m8(n,null,n.Y),PI(n)},Hs.prototype.close=function(){cx(this.g)},Hs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=KN(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&PI(e)},Hs.prototype.N=function(){this.g.h=null,delete this.j,cx(this.g),delete this.g,Hs.$.N.call(this)},zi(v8,XN),zi(E8,ex),zi(Sp,y8),Sp.prototype.Ba=function(){ur(this.g,"a")},Sp.prototype.Aa=function(n){ur(this.g,new v8(n))},Sp.prototype.za=function(n){ur(this.g,new E8)},Sp.prototype.ya=function(){ur(this.g,"b")},zi(Ko,function Xme(){this.blockSize=-1}),Ko.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ko.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)hx(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){hx(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){hx(this,i),r=0;break}}this.h=r,this.i+=e},Ko.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var e_e={};function fx(n){return-128<=n&&128>n?function lme(n,e){var t=e_e;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new an([0|e],0>e?-1:0)}):new an([0|n],0>n?-1:0)}function Oa(n){if(isNaN(n)||!isFinite(n))return Ap;if(0>n)return dr(Oa(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=px;return new an(e,0)}var px=4294967296,Ap=fx(0),gx=fx(1),w8=fx(16777216);function xl(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function go(n){return-1==n.h}function dr(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new an(t,~n.h).add(gx)}function kI(n,e){return n.add(dr(e))}function FI(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ky(n,e){this.g=n,this.h=e}function LI(n,e){if(xl(e))throw Error("division by zero");if(xl(n))return new ky(Ap,Ap);if(go(n))return e=LI(dr(n),e),new ky(dr(e.g),dr(e.h));if(go(e))return e=LI(n,dr(e)),new ky(dr(e.g),e.h);if(30<n.g.length){if(go(n)||go(e))throw Error("slowDivide_ only works with positive integers.");for(var t=gx,i=e;0>=i.X(n);)t=I8(t),i=I8(i);var r=Rp(t,1),s=Rp(i,1);for(i=Rp(i,2),t=Rp(t,2);!xl(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=Rp(i,1),t=Rp(t,1)}return e=kI(n,r.R(e)),new ky(r,e)}for(r=Ap;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Oa(t)).R(e);go(o)||0<o.X(n);)o=(s=Oa(t-=i)).R(e);xl(s)&&(s=gx),r=r.add(s),n=kI(n,o)}return new ky(r,n)}function I8(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new an(t,n.h)}function Rp(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new an(r,n.h)}(De=an.prototype).ea=function(){if(go(this))return-dr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:px+i)*e,e*=px}return n},De.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(xl(this))return"0";if(go(this))return"-"+dr(this).toString(n);for(var e=Oa(Math.pow(n,6)),t=this,i="";;){var r=LI(t,e).g,s=((0<(t=kI(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(xl(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},De.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},De.X=function(n){return go(n=kI(this,n))?-1:xl(n)?0:1},De.abs=function(){return go(this)?dr(this):this},De.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,t[r]=(o&=65535)<<16|(s&=65535)}return new an(t,-2147483648&t[t.length-1]?-1:0)},De.R=function(n){if(xl(this)||xl(n))return Ap;if(go(this))return go(n)?dr(this).R(dr(n)):dr(dr(this).R(n));if(go(n))return dr(this.R(dr(n)));if(0>this.X(w8)&&0>n.X(w8))return Oa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=n.D(r)>>>16,l=65535&n.D(r);t[2*i+2*r]+=o*l,FI(t,2*i+2*r),t[2*i+2*r+1]+=s*l,FI(t,2*i+2*r+1),t[2*i+2*r+1]+=o*a,FI(t,2*i+2*r+1),t[2*i+2*r+2]+=s*a,FI(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new an(t,0)},De.gb=function(n){return LI(this,n).h},De.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new an(t,this.h&n.h)},De.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new an(t,this.h|n.h)},De.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new an(t,this.h^n.h)},MI.prototype.createWebChannel=MI.prototype.g,Hs.prototype.send=Hs.prototype.u,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,wI.NO_ERROR=0,wI.TIMEOUT=8,wI.HTTP_ERROR=6,PG.COMPLETE="complete",MG.EventType=Iy,Iy.OPEN="a",Iy.CLOSE="b",Iy.ERROR="c",Iy.MESSAGE="d",Wi.prototype.listen=Wi.prototype.O,ii.prototype.listenOnce=ii.prototype.P,ii.prototype.getLastError=ii.prototype.Sa,ii.prototype.getLastErrorCode=ii.prototype.Ia,ii.prototype.getStatus=ii.prototype.da,ii.prototype.getResponseJson=ii.prototype.Wa,ii.prototype.getResponseText=ii.prototype.ja,ii.prototype.send=ii.prototype.ha,ii.prototype.setWithCredentials=ii.prototype.Oa,Ko.prototype.digest=Ko.prototype.l,Ko.prototype.reset=Ko.prototype.reset,Ko.prototype.update=Ko.prototype.j,an.prototype.add=an.prototype.add,an.prototype.multiply=an.prototype.R,an.prototype.modulo=an.prototype.gb,an.prototype.compare=an.prototype.X,an.prototype.toNumber=an.prototype.ea,an.prototype.toString=an.prototype.toString,an.prototype.getBits=an.prototype.D,an.fromNumber=Oa,an.fromString=function b8(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return dr(b8(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Oa(Math.pow(e,8)),i=Ap,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=Oa(Math.pow(e,s)),i=i.R(s).add(Oa(o))):i=(i=i.R(t)).add(Oa(o))}return i};var t_e=qo.createWebChannelTransport=function(){return new MI},n_e=qo.getStatEventTarget=function(){return bI()},mx=qo.ErrorCode=wI,i_e=qo.EventType=PG,r_e=qo.Event=Rd,T8=qo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},VI=(qo.FetchXmlHttpFactory=Ny,qo.WebChannel=MG),s_e=qo.XhrIo=ii,o_e=qo.Md5=Ko,Np=qo.Integer=an;const C8="@firebase/firestore";class qi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qi.UNAUTHENTICATED=new qi(null),qi.GOOGLE_CREDENTIALS=new qi("google-credentials-uid"),qi.FIRST_PARTY=new qi("first-party-uid"),qi.MOCK_USER=new qi("mock-user");let xp="10.7.0";const Wc=new ks.Yd("@firebase/firestore");function Pp(){return Wc.logLevel}function se(n,...e){if(Wc.logLevel<=ks.in.DEBUG){const t=e.map(_x);Wc.debug(`Firestore (${xp}): ${n}`,...t)}}function fi(n,...e){if(Wc.logLevel<=ks.in.ERROR){const t=e.map(_x);Wc.error(`Firestore (${xp}): ${n}`,...t)}}function bs(n,...e){if(Wc.logLevel<=ks.in.WARN){const t=e.map(_x);Wc.warn(`Firestore (${xp}): ${n}`,...t)}}function _x(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Re(n="Unexpected state"){const e=`FIRESTORE (${xp}) INTERNAL ASSERTION FAILED: `+n;throw fi(e),new Error(e)}function Oe(n,e){n||Re()}function we(n,e){return n}const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends b.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class D8{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c_e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qi.UNAUTHENTICATED))}shutdown(){}}class u_e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class d_e{constructor(e){this.t=e,this.currentUser=qi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let o=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,K.Z)(function*(){yield u.promise,yield s(i.currentUser)}))},l=u=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Oe("string"==typeof i.accessToken),new D8(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Oe(null===e||"string"==typeof e),new qi(e)}}class h_e{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=qi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class f_e{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new h_e(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(qi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class S8{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p_e{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=s=>{null!=s.error&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe("string"==typeof t.token),this.R=t.token,new S8(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function g_e(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class A8{static newId(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=g_e(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function Je(n,e){return n<e?-1:n>e?1:0}function Op(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function R8(n){return n+"\0"}class jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new te(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jn.fromMillis(Date.now())}static fromDate(e){return jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new jn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new jn(0,0))}static max(){return new Fe(new jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fy{constructor(e,t,i){void 0===t?t=0:t>e.length&&Re(),void 0===i?i=e.length-t:i>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Fy.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fy?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ut extends Fy{construct(e,t,i){return new Ut(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Ut(t)}static emptyPath(){return new Ut([])}}const m_e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends Fy{construct(e,t,i){return new On(e,t,i)}static isValidIdentifier(e){return m_e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new On(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new te(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new te(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new te(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new te(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(t)}static emptyPath(){return new On([])}}class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(Ut.fromString(e))}static fromName(e){return new Ie(Ut.fromString(e).popFirst(5))}static empty(){return new Ie(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ut.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new Ut(e.slice()))}}class Mp{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function yx(n){return n.fields.find(e=>2===e.kind)}function Od(n){return n.fields.filter(e=>2!==e.kind)}Mp.UNKNOWN_ID=-1;class Md{constructor(e,t){this.fieldPath=e,this.kind=t}}class kp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kp(0,$s.min())}}function N8(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Fe.fromTimestamp(1e9===i?new jn(t+1,0):new jn(t,i));return new $s(r,Ie.empty(),e)}function x8(n){return new $s(n.readTime,n.key,-1)}class $s{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new $s(Fe.min(),Ie.empty(),-1)}static max(){return new $s(Fe.max(),Ie.empty(),-1)}}function vx(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ie.comparator(n.documentKey,e.documentKey),0!==t?t:Je(n.largestBatchId,e.largestBatchId))}const P8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qc(n){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,K.Z)(function*(n){if(n.code!==U.FAILED_PRECONDITION||n.message!==P8)throw n;se("LocalStore","Unexpectedly lost primary lease")}),Ex.apply(this,arguments)}class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):F.reject(t)}static resolve(e){return new F((t,i)=>{t(e)})}static reject(e){return new F((t,i)=>{i(e)})}static waitFor(e){return new F((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=F.resolve(!1);for(const i of e)t=t.next(r=>r?F.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new F((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(h=>{o[u]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,t){return new F((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class BI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Mi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ly(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=bx(i.target.error);this.V.reject(new Ly(e,r))}}static open(e,t,i,r){try{return new BI(t,e.transaction(r,i))}catch(s){throw new Ly(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new E_e(t)}}class Zo{constructor(e,t,i){this.name=e,this.version=t,this.p=i,12.2===Zo.S((0,b.z$)())&&fi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return se("SimpleDb","Removing database:",e),kd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,b.hl)())return!1;if(Zo.C())return!0;const e=(0,b.z$)(),t=Zo.S(e),i=0<t&&t<10,r=Zo.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){var t=this;return(0,K.Z)(function*(){return t.db||(se("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new Ly(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;r("VersionError"===a.name?new te(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new te(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Ly(e,a))},s.onupgradeneeded=o=>{se("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.N(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{se("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,K.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.O(e);const l=BI.open(s.db,e,o?"readonly":"readwrite",i),u=r(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),F.reject(h))).toPromise();return u.catch(()=>{}),yield l.m,u}catch(l){const u=l,h="FirebaseError"!==u.name&&a<3;if(se("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),s.close(),!h)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class v_e{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return kd(this.k.delete())}}class Ly extends te{constructor(e,t){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Kc(n){return"IndexedDbTransactionError"===n.name}class E_e{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(se("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(se("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),kd(i)}add(e){return se("SimpleDb","ADD",this.store.name,e,e),kd(this.store.add(e))}get(e){return kd(this.store.get(e)).next(t=>(void 0===t&&(t=null),se("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return se("SimpleDb","DELETE",this.store.name,e),kd(this.store.delete(e))}count(){return se("SimpleDb","COUNT",this.store.name),kd(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.G(r,(o,a)=>{s.push(a)}).next(()=>s)}{const r=this.store.getAll(i.range);return new F((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}j(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new F((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,t){se("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.J=!1;const r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.G(r,t)}Z(e){const t=this.cursor({});return new F((i,r)=>{t.onerror=s=>{const o=bx(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,t){const i=[];return new F((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new v_e(a),u=t(a.primaryKey,a.value,l);if(u instanceof F){const h=u.catch(g=>(l.done(),F.reject(g)));i.push(h)}l.isDone?r():null===l.$?a.continue():a.continue(l.$)}}).next(()=>F.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function kd(n){return new F((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=bx(i.target.error);t(r)}})}let M8=!1;function bx(n){const e=Zo.S((0,b.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return M8||(M8=!0,setTimeout(()=>{throw i},0)),i}}return n}class b_e{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;se("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,K.Z)(function*(){t.task=null;try{se("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(i){Kc(i)?se("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield qc(i)}yield t.ee(6e4)}))}}class w_e{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,K.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.ne(i,e))})()}ne(e,t){const i=new Set;let r=t,s=!0;return F.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!i.has(o))return se("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}re(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(r,s)).next(a=>(se("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let i=e;return t.changes.forEach((r,s)=>{const o=x8(s);vx(o,i)>0&&(i=o)}),new $s(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Gs=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function Vy(n){return null==n}function By(n){return 0===n&&1/n==-1/0}function k8(n){return"number"==typeof n&&Number.isInteger(n)&&!By(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Dr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=F8(e)),e=I_e(n.get(t),e);return F8(e)}function I_e(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function F8(n){return n+"\x01\x01"}function Ma(n){const e=n.length;if(Oe(e>=2),2===e)return Oe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ut.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Re(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:Re()}s=o+2}return new Ut(i)}const L8=["userId","batchId"];function UI(n,e){return[n,Dr(e)]}function V8(n,e,t){return[n,Dr(e),t]}const T_e={},C_e=["prefixPath","collectionGroup","readTime","documentId"],D_e=["prefixPath","collectionGroup","documentId"],S_e=["collectionGroup","readTime","prefixPath","documentId"],A_e=["canonicalId","targetId"],R_e=["targetId","path"],N_e=["path","targetId"],x_e=["collectionId","parent"],P_e=["indexId","uid"],O_e=["uid","sequenceNumber"],M_e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],k_e=["indexId","uid","orderedDocumentKey"],F_e=["userId","collectionPath","documentId"],L_e=["userId","collectionPath","largestBatchId"],V_e=["userId","collectionGroup","largestBatchId"],B8=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],B_e=[...B8,"documentOverlays"],U8=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],j8=U8,U_e=[...j8,"indexConfiguration","indexState","indexEntries"];class wx extends O8{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Ki(n,e){const t=we(n);return Zo.M(t.ae,e)}function H8(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $8(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Tn{constructor(e,t){this.comparator=e,this.root=t||hr.EMPTY}insert(e,t){return new Tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(e){return new Tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jI(this.root,e,this.comparator,!1)}getReverseIterator(){return new jI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jI(this.root,e,this.comparator,!0)}}class jI{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hr{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??hr.RED,this.left=r??hr.EMPTY,this.right=s??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new hr(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return hr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1,hr.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,i,r,s){return this}insert(e,t,i){return new hr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hn{constructor(e){this.comparator=e,this.data=new Tn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new G8(this.data.getIterator())}getIteratorFrom(e){return new G8(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class G8{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fp(n){return n.hasNext()?n.getNext():void 0}class ws{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new ws([])}unionWith(e){let t=new hn(On.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ws(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Op(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class z8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ki{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new z8("Invalid base64 string: "+s):s}}(e);return new ki(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new ki(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ki.EMPTY_BYTE_STRING=new ki("");const H_e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yc(n){if(Oe(!!n),"string"==typeof n){let e=0;const t=H_e.exec(n);if(Oe(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ri(n.seconds),nanos:ri(n.nanos)}}function ri(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pl(n){return"string"==typeof n?ki.fromBase64String(n):ki.fromUint8Array(n)}function HI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $I(n){const e=n.mapValue.fields.__previous_value__;return HI(e)?$I(e):e}function Uy(n){const e=Yc(n.mapValue.fields.__local_write_time__.timestampValue);return new jn(e.seconds,e.nanos)}class $_e{constructor(e,t,i,r,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Qc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Qc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Qc&&e.projectId===this.projectId&&e.database===this.database}}const Jc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},GI={nullValue:"NULL_VALUE"};function Xc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?HI(n)?4:Z8(n)?9007199254740991:10:Re()}function ka(n,e){if(n===e)return!0;const t=Xc(n);if(t!==Xc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uy(n).isEqual(Uy(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Yc(r.timestampValue),a=Yc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Pl(n.bytesValue).isEqual(Pl(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ri(r.geoPointValue.latitude)===ri(s.geoPointValue.latitude)&&ri(r.geoPointValue.longitude)===ri(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ri(r.integerValue)===ri(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=ri(r.doubleValue),a=ri(s.doubleValue);return o===a?By(o)===By(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Op(n.arrayValue.values||[],e.arrayValue.values||[],ka);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(H8(o)!==H8(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!ka(o[l],a[l])))return!1;return!0}(n,e);default:return Re()}var s}function jy(n,e){return void 0!==(n.values||[]).find(t=>ka(t,e))}function eu(n,e){if(n===e)return 0;const t=Xc(n),i=Xc(e);if(t!==i)return Je(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ri(s.integerValue||s.doubleValue),l=ri(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return W8(n.timestampValue,e.timestampValue);case 4:return W8(Uy(n),Uy(e));case 5:return Je(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Pl(s),l=Pl(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Je(a[u],l[u]);if(0!==h)return h}return Je(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Je(ri(s.latitude),ri(o.latitude));return 0!==a?a:Je(ri(s.longitude),ri(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const h=eu(a[u],l[u]);if(h)return h}return Je(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Jc.mapValue&&o===Jc.mapValue)return 0;if(s===Jc.mapValue)return 1;if(o===Jc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let g=0;g<l.length&&g<h.length;++g){const m=Je(l[g],h[g]);if(0!==m)return m;const y=eu(a[l[g]],u[h[g]]);if(0!==y)return y}return Je(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Re()}}function W8(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Je(n,e);const t=Yc(n),i=Yc(e),r=Je(t.seconds,i.seconds);return 0!==r?r:Je(t.nanos,i.nanos)}function Lp(n){return Ix(n)}function Ix(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Yc(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pl(n.bytesValue).toBase64():"referenceValue"in n?Ie.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=Ix(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Ix(t.fields[o])}`;return r+"}"}(n.mapValue):Re()}function Fd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Tx(n){return!!n&&"integerValue"in n}function Hy(n){return!!n&&"arrayValue"in n}function q8(n){return!!n&&"nullValue"in n}function K8(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function WI(n){return!!n&&"mapValue"in n}function $y(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=$y(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$y(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Z8(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function G_e(n){return"nullValue"in n?GI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fd(Qc.empty(),Ie.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Re()}function z_e(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fd(Qc.empty(),Ie.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Jc:Re()}function Y8(n,e){const t=eu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Q8(n,e){const t=eu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class fr{constructor(e){this.value=e}static empty(){return new fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!WI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$y(t)}setAll(e){let t=On.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=$y(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());WI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ka(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];WI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Zc(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new fr($y(this.value))}}function J8(n){const e=[];return Zc(n.fields,(t,i)=>{const r=new On([t]);if(WI(i)){const s=J8(i.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new ws(e)}class Mn{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Mn(e,0,Fe.min(),Fe.min(),Fe.min(),fr.empty(),0)}static newFoundDocument(e,t,i,r){return new Mn(e,1,t,Fe.min(),i,r,0)}static newNoDocument(e,t){return new Mn(e,2,t,Fe.min(),Fe.min(),fr.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,Fe.min(),Fe.min(),fr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tu{constructor(e,t){this.position=e,this.inclusive=t}}function X8(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(i=s.field.isKeyField()?Ie.comparator(Ie.fromName(o.referenceValue),t.key):eu(o,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function ez(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ka(n.position[t],e.position[t]))return!1;return!0}class Gy{constructor(e,t="asc"){this.field=e,this.dir=t}}function W_e(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class tz{}class Mt extends tz{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new q_e(e,t,i):"array-contains"===t?new Y_e(e,i):"in"===t?new az(e,i):"not-in"===t?new Q_e(e,i):"array-contains-any"===t?new J_e(e,i):new Mt(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new K_e(e,i):new Z_e(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(eu(t,this.value)):null!==t&&Xc(this.value)===Xc(t)&&this.matchesComparison(eu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends tz{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ln(e,t)}matches(e){return Vp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Vp(n){return"and"===n.op}function Cx(n){return"or"===n.op}function Dx(n){return nz(n)&&Vp(n)}function nz(n){for(const e of n.filters)if(e instanceof ln)return!1;return!0}function Sx(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+Lp(n.value);if(Dx(n))return n.filters.map(e=>Sx(e)).join(",");{const e=n.filters.map(t=>Sx(t)).join(",");return`${n.op}(${e})`}}function iz(n,e){return n instanceof Mt?(i=n,(r=e)instanceof Mt&&i.op===r.op&&i.field.isEqual(r.field)&&ka(i.value,r.value)):n instanceof ln?function(i,r){return r instanceof ln&&i.op===r.op&&i.filters.length===r.filters.length&&i.filters.reduce((s,o,a)=>s&&iz(o,r.filters[a]),!0)}(n,e):void Re();var i,r}function rz(n,e){const t=n.filters.concat(e);return ln.create(t,n.op)}function sz(n){return n instanceof Mt?`${(t=n).field.canonicalString()} ${t.op} ${Lp(t.value)}`:n instanceof ln?function(t){return t.op.toString()+" {"+t.getFilters().map(sz).join(" ,")+"}"}(n):"Filter";var t}class q_e extends Mt{constructor(e,t,i){super(e,t,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class K_e extends Mt{constructor(e,t){super(e,"in",t),this.keys=oz(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Z_e extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=oz(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oz(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Ie.fromName(i.referenceValue))}class Y_e extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hy(t)&&jy(t.arrayValue,this.value)}}class az extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jy(this.value.arrayValue,t)}}class Q_e extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jy(this.value.arrayValue,t)}}class J_e extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>jy(this.value.arrayValue,i))}}class X_e{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function Ax(n,e=null,t=[],i=[],r=null,s=null,o=null){return new X_e(n,e,t,i,r,s,o)}function Ld(n){const e=we(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Sx(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(s=i).field.canonicalString()+s.dir;var s}).join(","),Vy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Lp(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Lp(i)).join(",")),e.ce=t}return e.ce}function zy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!W_e(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iz(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ez(n.startAt,e.startAt)&&ez(n.endAt,e.endAt)}function qI(n){return Ie.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function KI(n,e){return n.filters.filter(t=>t instanceof Mt&&t.field.isEqual(e))}function lz(n,e,t){let i=GI,r=!0;for(const s of KI(n,e)){let o=GI,a=!0;switch(s.op){case"<":case"<=":o=G_e(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=GI}Y8({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Y8({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}function cz(n,e,t){let i=Jc,r=!0;for(const s of KI(n,e)){let o=Jc,a=!0;switch(s.op){case">=":case">":o=z_e(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Jc}Q8({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Q8({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}class Ol{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function uz(n,e,t,i,r,s,o,a){return new Ol(n,e,t,i,r,s,o,a)}function Bp(n){return new Ol(n)}function dz(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Rx(n){return null!==n.collectionGroup}function Up(n){const e=we(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new hn(On.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new Gy(s,i))}),t.has(On.keyField().canonicalString())||e.le.push(new Gy(On.keyField(),i))}return e.le}function $r(n){const e=we(n);return e.he||(e.he=function hz(n,e){if("F"===n.limitType)return Ax(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>new Gy(r.field,"desc"===r.dir?"asc":"desc"));const t=n.endAt?new tu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new tu(n.startAt.position,n.startAt.inclusive):null;return Ax(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}(e,Up(n))),e.he}function Nx(n,e){const t=n.filters.concat([e]);return new Ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ZI(n,e,t){return new Ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wy(n,e){return zy($r(n),$r(e))&&n.limitType===e.limitType}function fz(n){return`${Ld($r(n))}|lt:${n.limitType}`}function jp(n){return`Query(target=${function(t){let i=t.path.canonicalString();return null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>sz(r)).join(", ")}]`),Vy(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Lp(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Lp(r)).join(",")),`Target(${i})`}($r(n))}; limitType=${n.limitType})`}function qy(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return null!==i.collectionGroup?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Ie.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of Up(i))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((i=n).startAt&&!function(o,a,l){const u=X8(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,Up(i),r)||i.endAt&&!function(o,a,l){const u=X8(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,Up(i),r)));var i,r}function pz(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gz(n){return(e,t)=>{let i=!1;for(const r of Up(n)){const s=eye(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function eye(n,e,t){const i=n.field.isKeyField()?Ie.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return null!==l&&null!==u?eu(l,u):Re()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}class Ml{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Zc(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return $8(this.inner)}size(){return this.innerSize}}const tye=new Tn(Ie.comparator);function Is(){return tye}const mz=new Tn(Ie.comparator);function Ky(...n){let e=mz;for(const t of n)e=e.insert(t.key,t);return e}function _z(n){let e=mz;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Fa(){return Zy()}function yz(){return Zy()}function Zy(){return new Ml(n=>n.toString(),(n,e)=>n.isEqual(e))}const nye=new Tn(Ie.comparator),iye=new hn(Ie.comparator);function ht(...n){let e=iye;for(const t of n)e=e.add(t);return e}const rye=new hn(Je);function xx(){return rye}function vz(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:By(e)?"-0":e}}function Ez(n){return{integerValue:""+n}}function bz(n,e){return k8(e)?Ez(e):vz(n,e)}class YI{constructor(){this._=void 0}}function sye(n,e,t){return n instanceof Hp?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&HI(s)&&(s=$I(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Vd?Iz(n,e):n instanceof Bd?Tz(n,e):function(r,s){const o=wz(r,s),a=Cz(o)+Cz(r.Ie);return Tx(o)&&Tx(r.Ie)?Ez(a):vz(r.serializer,a)}(n,e)}function oye(n,e,t){return n instanceof Vd?Iz(n,e):n instanceof Bd?Tz(n,e):t}function wz(n,e){return n instanceof $p?Tx(i=e)||(s=i)&&"doubleValue"in s?e:{integerValue:0}:null;var i,s}class Hp extends YI{}class Vd extends YI{constructor(e){super(),this.elements=e}}function Iz(n,e){const t=Dz(e);for(const i of n.elements)t.some(r=>ka(r,i))||t.push(i);return{arrayValue:{values:t}}}class Bd extends YI{constructor(e){super(),this.elements=e}}function Tz(n,e){let t=Dz(e);for(const i of n.elements)t=t.filter(r=>!ka(r,i));return{arrayValue:{values:t}}}class $p extends YI{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Cz(n){return ri(n.integerValue||n.doubleValue)}function Dz(n){return Hy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Yy{constructor(e,t){this.field=e,this.transform=t}}class lye{constructor(e,t){this.version=e,this.transformResults=t}}class Hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function QI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class JI{}function Sz(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new zp(n.key,Hn.none()):new Gp(n.key,n.data,Hn.none());{const t=n.data,i=fr.empty();let r=new hn(On.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new kl(n.key,i,new ws(r.toArray()),Hn.none())}}function cye(n,e,t){n instanceof Gp?function(r,s,o){const a=r.value.clone(),l=Nz(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof kl?function(r,s,o){if(!QI(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Nz(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Rz(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Qy(n,e,t,i){return n instanceof Gp?function(s,o,a,l){if(!QI(s.precondition,o))return a;const u=s.value.clone(),h=xz(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,i):n instanceof kl?function(s,o,a,l){if(!QI(s.precondition,o))return a;const u=xz(s.fieldTransforms,l,o),h=o.data;return h.setAll(Rz(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,i):(a=t,QI(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function uye(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=wz(i.transform,r||null);null!=s&&(null===t&&(t=fr.empty()),t.set(i.field,s))}return t||null}function Az(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===r||i&&r&&Op(i,r,(s,o)=>function aye(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(i=n.transform)instanceof Vd&&r instanceof Vd||i instanceof Bd&&r instanceof Bd?Op(i.elements,r.elements,ka):i instanceof $p&&r instanceof $p?ka(i.Ie,r.Ie):i instanceof Hp&&r instanceof Hp);var i,r}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var i,r}class Gp extends JI{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class kl extends JI{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Rz(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Nz(n,e,t){const i=new Map;Oe(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,oye(o,a,t[r]))}return i}function xz(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,sye(s,o,e))}return i}class zp extends JI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Px extends JI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ox{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&cye(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Qy(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Qy(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=yz();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=Sz(o,a);null!==l&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Fe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ht())}isEqual(e){return this.batchId===e.batchId&&Op(this.mutations,e.mutations,(t,i)=>Az(t,i))&&Op(this.baseMutations,e.baseMutations,(t,i)=>Az(t,i))}}class Mx{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Oe(e.mutations.length===i.length);let r=nye;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Mx(e,t,i,r)}}class kx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hye{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ti,jt;function Pz(n){switch(n){default:return Re();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function Oz(n){if(void 0===n)return fi("GRPC error has no .code"),U.UNKNOWN;switch(n){case Ti.OK:return U.OK;case Ti.CANCELLED:return U.CANCELLED;case Ti.UNKNOWN:return U.UNKNOWN;case Ti.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ti.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ti.INTERNAL:return U.INTERNAL;case Ti.UNAVAILABLE:return U.UNAVAILABLE;case Ti.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ti.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ti.NOT_FOUND:return U.NOT_FOUND;case Ti.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ti.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ti.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ti.ABORTED:return U.ABORTED;case Ti.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ti.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ti.DATA_LOSS:return U.DATA_LOSS;default:return Re()}}(jt=Ti||(Ti={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";function Mz(){return new TextEncoder}const fye=new Np([4294967295,4294967295],0);function kz(n){const e=Mz().encode(n),t=new o_e;return t.update(e),new Uint8Array(t.digest())}function Fz(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Np([t,i],0),new Np([r,s],0)]}class Fx{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Jy(`Invalid padding: ${t}`);if(i<0)throw new Jy(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new Jy(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new Jy(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Np.fromNumber(this.Te)}de(e,t,i){let r=e.add(t.multiply(Np.fromNumber(i)));return 1===r.compare(fye)&&(r=new Np([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=kz(e),[i,r]=Fz(t);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Fx(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=kz(e),[i,r]=Fz(t);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);this.Re(o)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Jy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xy{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,ev.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Xy(Fe.min(),r,new Tn(Je),Is(),ht())}}class ev{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ev(i,t,ht(),ht(),ht())}}class eT{constructor(e,t,i,r){this.Ve=e,this.removedTargetIds=t,this.key=i,this.me=r}}class Lz{constructor(e,t){this.targetId=e,this.fe=t}}class Vz{constructor(e,t,i=ki.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Bz{constructor(){this.ge=0,this.pe=jz(),this.ye=ki.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ht(),t=ht(),i=ht();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Re()}}),new ev(this.ye,this.we,e,t,i)}Fe(){this.Se=!1,this.pe=jz()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Oe(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class pye{constructor(e){this.Le=e,this.ke=new Map,this.qe=Is(),this.Qe=Uz(),this.Ke=new Tn(Je)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(t);break;case 3:this.je(t)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.Ce(e.resumeToken));break;default:Re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((i,r)=>{this.je(r)&&t(r)})}Je(e){const t=e.targetId,i=e.fe.count,r=this.Ye(t);if(r){const s=r.target;if(qI(s))if(0===i){const o=new Ie(s.path);this.We(t,o,Mn.newNoDocument(o,Fe.min()))}else Oe(1===i);else{const o=this.Ze(t);if(o!==i){const a=this.Xe(e),l=a?this.et(a,e,o):1;0!==l&&(this.He(t),this.Ke=this.Ke.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=Pl(i).toUint8Array()}catch(l){if(l instanceof z8)return bs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Fx(o,r,s)}catch(l){return bs(l instanceof Jy?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,t,i){return t.fe.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),r++)}),r}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&qI(a.target)){const l=new Ie(a.target.path);null!==this.qe.get(l)||this.st(o,l)||this.We(o,l,Mn.newNoDocument(l,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let i=ht();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const r=new Xy(e,t,this.Ke,this.qe,i);return this.qe=Is(),this.Qe=Uz(),this.Ke=new Tn(Je),r}Ue(e,t){if(!this.je(e))return;const i=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,i),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),i&&(this.qe=this.qe.insert(t,i))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Bz,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new hn(Je),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||se("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Bz),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Uz(){return new Tn(Ie.comparator)}function jz(){return new Tn(Ie.comparator)}const gye={asc:"ASCENDING",desc:"DESCENDING"},mye={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_ye={and:"AND",or:"OR"};class yye{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Lx(n,e){return n.useProto3Json||Vy(e)?e:{value:e}}function Wp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hz(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vye(n,e){return Wp(n,e.toTimestamp())}function pi(n){return Oe(!!n),Fe.fromTimestamp(function(t){const i=Yc(t);return new jn(i.seconds,i.nanos)}(n))}function Vx(n,e){return(i=n,new Ut(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function $z(n){const e=Ut.fromString(n);return Oe(Jz(e)),e}function tv(n,e){return Vx(n.databaseId,e.path)}function La(n,e){const t=$z(e);if(t.get(1)!==n.databaseId.projectId)throw new te(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(zz(t))}function Bx(n,e){return Vx(n.databaseId,e)}function Gz(n){const e=$z(n);return 4===e.length?Ut.emptyPath():zz(e)}function nv(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zz(n){return Oe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Wz(n,e,t){return{name:tv(n,e),fields:t.value.mapValue.fields}}function qz(n,e,t){const i=La(n,e.name),r=pi(e.updateTime),s=e.createTime?pi(e.createTime):Fe.min(),o=new fr({mapValue:{fields:e.fields}}),a=Mn.newFoundDocument(i,r,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function iv(n,e){let t;if(e instanceof Gp)t={update:Wz(n,e.key,e.value)};else if(e instanceof zp)t={delete:tv(n,e.key)};else if(e instanceof kl)t={update:Wz(n,e.key,e.data),updateMask:Sye(e.fieldMask)};else{if(!(e instanceof Px))return Re();t={verify:tv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Hp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $p)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Re()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:vye(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Re()),t;var s}function Ux(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Hn.updateTime(pi(s.updateTime)):void 0!==s.exists?Hn.exists(s.exists):Hn.none():Hn.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let l=null;"setToServerValue"in a?(Oe("REQUEST_TIME"===a.setToServerValue),l=new Hp):"appendMissingElements"in a?l=new Vd(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Bd(a.removeAllFromArray.values||[]):"increment"in a?l=new $p(o,a.increment):Re();const u=On.fromServerFormat(a.fieldPath);return new Yy(u,l)}(n,r)):[];var s;if(e.update){const r=La(n,e.update.name),s=new fr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ws((e.updateMask.fieldPaths||[]).map(h=>On.fromServerFormat(h)));return new kl(r,s,o,t,i)}return new Gp(r,s,t,i)}if(e.delete){const r=La(n,e.delete);return new zp(r,t)}if(e.verify){const r=La(n,e.verify);return new Px(r,t)}return Re()}function Kz(n,e){return{documents:[Bx(n,e.path)]}}function jx(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Bx(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Bx(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(0!==l.length)return Qz(ln.create(l,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(l){if(0!==l.length)return l.map(u=>{return{field:nu((g=u).field),direction:Tye(g.dir)};var g})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=Lx(n,e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),t;var l}function Zz(n){let e=Gz(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Oe(1===i);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){const m=Yz(g);return m instanceof ln&&Dx(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(m=>{return new Gy(qp((E=m).field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;t.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,Vy(m)?null:m}(t.limit));let l=null;var g;t.startAt&&(l=new tu((g=t.startAt).values||[],!!g.before));let u=null;return t.endAt&&(u=function(g){return new tu(g.values||[],!g.before)}(t.endAt)),uz(e,r,o,s,a,"F",l,u)}function Yz(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=qp(t.unaryFilter.field);return Mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=qp(t.unaryFilter.field);return Mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qp(t.unaryFilter.field);return Mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qp(t.unaryFilter.field);return Mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(n):void 0!==n.fieldFilter?Mt.create(qp((t=n).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return ln.create(t.compositeFilter.filters.map(i=>Yz(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Re()}}(t.compositeFilter.op))}(n):Re();var t}function Tye(n){return gye[n]}function Cye(n){return mye[n]}function Dye(n){return _ye[n]}function nu(n){return{fieldPath:n.canonicalString()}}function qp(n){return On.fromServerFormat(n.fieldPath)}function Qz(n){return n instanceof Mt?function(t){if("=="===t.op){if(K8(t.value))return{unaryFilter:{field:nu(t.field),op:"IS_NAN"}};if(q8(t.value))return{unaryFilter:{field:nu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(K8(t.value))return{unaryFilter:{field:nu(t.field),op:"IS_NOT_NAN"}};if(q8(t.value))return{unaryFilter:{field:nu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nu(t.field),op:Cye(t.op),value:t.value}}}(n):n instanceof ln?function(t){const i=t.getFilters().map(r=>Qz(r));return 1===i.length?i[0]:{compositeFilter:{op:Dye(t.op),filters:i}}}(n):Re()}function Sye(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Jz(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Fl{constructor(e,t,i,r,s=Fe.min(),o=Fe.min(),a=ki.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Xz{constructor(e){this.ut=e}}function e5(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:tv(s=n.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Wp(s,o.version.toTimestamp()),createTime:Wp(s,o.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Ud(e.version)};else{if(!e.isUnknownDocument())return Re();i.unknownDocument={path:t.path.toArray(),version:Ud(e.version)}}var s,o;return i}function tT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ud(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jd(n){const e=new jn(n.seconds,n.nanoseconds);return Fe.fromTimestamp(e)}function Hd(n,e){const t=(e.baseMutations||[]).map(s=>Ux(n.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const i=e.mutations.map(s=>Ux(n.ut,s)),r=jn.fromMillis(e.localWriteTimeMs);return new Ox(e.batchId,r,t,i)}function rv(n){const e=jd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jd(n.lastLimboFreeSnapshotVersion):Fe.min();let i;return i=void 0!==n.query.documents?(Oe(1===(s=n.query).documents.length),$r(Bp(Gz(s.documents[0])))):function(s){return $r(Zz(s))}(n.query),new Fl(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ki.fromBase64String(n.resumeToken));var s}function t5(n,e){const t=Ud(e.snapshotVersion),i=Ud(e.lastLimboFreeSnapshotVersion);let r;r=qI(e.target)?Kz(n.ut,e.target):jx(n.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ld(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Hx(n){const e=Zz({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ZI(e,e.limit,"L"):e}function $x(n,e){return new kx(e.largestBatchId,Ux(n.ut,e.overlayMutation))}function n5(n,e){const t=e.path.lastSegment();return[n,Dr(e.path.popLast()),t]}function i5(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ud(i.readTime),documentKey:Dr(i.documentKey.path),largestBatchId:i.largestBatchId}}class Rye{getBundleMetadata(e,t){return r5(e).get(t).next(i=>{if(i)return{id:(s=i).bundleId,createTime:jd(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return r5(e).put({bundleId:(r=t).id,createTime:Ud(pi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return s5(e).get(t).next(i=>{if(i)return{name:(s=i).name,query:Hx(s.bundledQuery),readTime:jd(s.readTime)};var s})}saveNamedQuery(e,t){return s5(e).put({name:(r=t).name,readTime:Ud(pi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function r5(n){return Ki(n,"bundles")}function s5(n){return Ki(n,"namedQueries")}class nT{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new nT(e,t.uid||"")}getOverlay(e,t){return sv(e).get(n5(this.userId,t)).next(i=>i?$x(this.serializer,i):null)}getOverlays(e,t){const i=Fa();return F.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,o)=>{const a=new kx(t,o);r.push(this.lt(e,a))}),F.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(o=>r.add(Dr(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(sv(e).H("collectionPathOverlayIndex",a))}),F.waitFor(s)}getOverlaysForCollection(e,t,i){const r=Fa(),s=Dr(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return sv(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=$x(this.serializer,l);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=Fa();let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sv(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,u,h)=>{const g=$x(this.serializer,u);s.size()<r||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}lt(e,t){return sv(e).put(function(r,s,o){const[a,l,u]=n5(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:iv(r.ut,o.mutation)}}(this.serializer,this.userId,t))}}function sv(n){return Ki(n,"documentOverlays")}class $d{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(ri(e.integerValue));else if("doubleValue"in e){const i=ri(e.doubleValue);isNaN(i)?this.Tt(t,13):(this.Tt(t,15),By(i)?t.Et(0):t.Et(i))}else if("timestampValue"in e){const i=e.timestampValue;this.Tt(t,20),"string"==typeof i?t.dt(i):(t.dt(`${i.seconds||""}`),t.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Pl(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Tt(t,45),t.Et(i.latitude||0),t.Et(i.longitude||0)}else"mapValue"in e?Z8(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Re()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const i=e.fields||{};this.Tt(t,55);for(const r of Object.keys(i))this.At(r,t),this.Pt(i[r],t)}yt(e,t){const i=e.values||[];this.Tt(t,50);for(const r of i)this.Pt(r,t)}ft(e,t){this.Tt(t,37),Ie.fromName(e).path.forEach(i=>{this.Tt(t,60),this.wt(i,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function Nye(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function o5(n){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const o=Nye(255&i[s]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}$d.St=new $d;class xye{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Dt(i.value),i=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{const r=t.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){const t=this.Bt(e),i=o5(t);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),i=o5(t);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Pye{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Oye{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class ov{constructor(){this.Wt=new xye,this.Gt=new Pye(this.Wt),this.zt=new Oye(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Gd{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Gd(this.indexId,this.documentKey,this.arrayValue,i)}}function iu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=a5(n.arrayValue,e.arrayValue),0!==t?t:(t=a5(n.directionalValue,e.directionalValue),0!==t?t:Ie.comparator(n.documentKey,e.documentKey)))}function a5(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class l5{constructor(e){this.Jt=new hn((t,i)=>On.comparator(t.field,i.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const i=t;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(Oe(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=yx(e);if(void 0!==t&&!this.tn(t))return!1;const i=Od(e);let r=new Set,s=0,o=0;for(;s<i.length&&this.tn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[s];if(!this.nn(a,l)||!this.rn(this.Yt[o++],l))return!1}++s}for(;s<i.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],i[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new hn(On.comparator);const t=[];for(const i of this.Zt)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)t.push(new Md(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Md(i.field,0))}for(const i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Md(i.field,"asc"===i.dir?0:1)));return new Mp(Mp.UNKNOWN_ID,this.collectionId,t,kp.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function c5(n){var e,t;if(Oe(n instanceof Mt||n instanceof ln),n instanceof Mt){if(n instanceof az){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Mt.create(n.field,"==",s)))||[];return ln.create(r,"or")}return n}const i=n.filters.map(r=>c5(r));return ln.create(i,n.op)}function Mye(n){if(0===n.getFilters().length)return[];const e=Wx(c5(n));return Oe(u5(e)),Gx(e)||zx(e)?[e]:e.getFilters()}function Gx(n){return n instanceof Mt}function zx(n){return n instanceof ln&&Dx(n)}function u5(n){return Gx(n)||zx(n)||function(t){if(t instanceof ln&&Cx(t)){for(const i of t.getFilters())if(!Gx(i)&&!zx(i))return!1;return!0}return!1}(n)}function Wx(n){if(Oe(n instanceof Mt||n instanceof ln),n instanceof Mt)return n;if(1===n.filters.length)return Wx(n.filters[0]);const e=n.filters.map(i=>Wx(i));let t=ln.create(e,n.op);return t=iT(t),u5(t)?t:(Oe(t instanceof ln),Oe(Vp(t)),Oe(t.filters.length>1),t.filters.reduce((i,r)=>qx(i,r)))}function qx(n,e){let t;return Oe(n instanceof Mt||n instanceof ln),Oe(e instanceof Mt||e instanceof ln),t=n instanceof Mt?e instanceof Mt?ln.create([n,e],"and"):d5(n,e):e instanceof Mt?d5(e,n):function(r,s){if(Oe(r.filters.length>0&&s.filters.length>0),Vp(r)&&Vp(s))return rz(r,s.getFilters());const o=Cx(r)?r:s,a=Cx(r)?s:r,l=o.filters.map(u=>qx(u,a));return ln.create(l,"or")}(n,e),iT(t)}function d5(n,e){if(Vp(e))return rz(e,n.getFilters());{const t=e.filters.map(i=>qx(n,i));return ln.create(t,"or")}}function iT(n){if(Oe(n instanceof Mt||n instanceof ln),n instanceof Mt)return n;const e=n.getFilters();if(1===e.length)return iT(e[0]);if(nz(n))return n;const t=e.map(r=>iT(r)),i=[];return t.forEach(r=>{r instanceof Mt?i.push(r):r instanceof ln&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:ln.create(i,n.op)}class kye{constructor(){this.on=new Kx}addToCollectionParentIndex(e,t){return this.on.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve($s.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve($s.min())}updateCollectionGroup(e,t,i){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class Kx{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new hn(Ut.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new hn(Ut.comparator)).toArray()}}const rT=new Uint8Array(0);class Fye{constructor(e,t){this.user=e,this.databaseId=t,this._n=new Kx,this.an=new Ml(i=>Ld(i),(i,r)=>zy(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const s={collectionId:i,parent:Dr(r)};return h5(e).put(s)}return F.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[R8(t),""],!1,!0);return h5(e).W(r).next(s=>{for(const o of s){if(o.collectionId!==t)break;i.push(Ma(o.parent))}return i})}addFieldIndex(e,t){const i=av(e),r={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete r.indexId;const s=i.add(r);if(t.indexState){const o=Zp(e);return s.next(a=>{o.put(i5(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=av(e),r=Zp(e),s=Kp(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=av(e),i=Kp(e),r=Zp(e);return t.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,t){return F.forEach(this.un(t),i=>this.getIndexType(e,i).next(r=>{if(0===r||1===r){const s=new l5(i).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const i=Kp(e);let r=!0;const s=new Map;return F.forEach(this.un(t),o=>this.cn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=ht();const a=[];return F.forEach(s,(l,u)=>{var k;se("IndexedDbIndexManager",`Using index ${k=l,`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(L=>`${L.fieldPath}:${L.kind}`).join(",")}`} to execute ${Ld(t)}`);const h=function(k,L){const Y=yx(L);if(void 0===Y)return null;for(const ye of KI(k,Y.fieldPath))switch(ye.op){case"array-contains-any":return ye.value.arrayValue.values||[];case"array-contains":return[ye.value]}return null}(u,l),g=function(k,L){const Y=new Map;for(const ye of Od(L))for(const Me of KI(k,ye.fieldPath))switch(Me.op){case"==":case"in":Y.set(ye.fieldPath.canonicalString(),Me.value);break;case"not-in":case"!=":return Y.set(ye.fieldPath.canonicalString(),Me.value),Array.from(Y.values())}return null}(u,l),m=function(k,L){const Y=[];let ye=!0;for(const Me of Od(L)){const Ge=0===Me.kind?lz(k,Me.fieldPath,k.startAt):cz(k,Me.fieldPath,k.startAt);Y.push(Ge.value),ye&&(ye=Ge.inclusive)}return new tu(Y,ye)}(u,l),y=function(k,L){const Y=[];let ye=!0;for(const Me of Od(L)){const Ge=0===Me.kind?cz(k,Me.fieldPath,k.endAt):lz(k,Me.fieldPath,k.endAt);Y.push(Ge.value),ye&&(ye=Ge.inclusive)}return new tu(Y,ye)}(u,l),E=this.ln(l,u,m),w=this.ln(l,u,y),I=this.hn(l,u,g),O=this.Pn(l.indexId,h,E,m.inclusive,w,y.inclusive,I);return F.forEach(O,S=>i.j(S,t.limit).next(k=>{k.forEach(L=>{const Y=Ie.fromSegments(L.documentKey);o.has(Y)||(o=o.add(Y),a.push(Y))})}))}).next(()=>a)}return F.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Mye(ln.create(e.filters,"and")).map(i=>Ax(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,i,r,s,o,a){const l=(null!=t?t.length:1)*Math.max(i.length,s.length),u=l/(null!=t?t.length:1),h=[];for(let g=0;g<l;++g){const m=t?this.In(t[g/u]):rT,y=this.Tn(e,m,i[g%u],r),E=this.En(e,m,s[g%u],o),w=a.map(I=>this.Tn(e,m,I,!0));h.push(...this.createRange(y,E,w))}return h}Tn(e,t,i,r){const s=new Gd(e,Ie.empty(),t,i);return r?s:s.Ht()}En(e,t,i,r){const s=new Gd(e,Ie.empty(),t,i);return r?s.Ht():s}cn(e,t){const i=new l5(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2;const r=this.un(t);return F.forEach(r,s=>this.cn(e,s).next(o=>{o?0!==i&&o.fields.length<function(l){let u=new hn(On.comparator),h=!1;for(const g of l.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:u=u.add(m.field));for(const g of l.orderBy)g.field.isKeyField()||(u=u.add(g.field));return u.size+(h?1:0)}(s)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}dn(e,t){const i=new ov;for(const r of Od(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const o=i.jt(r.kind);$d.St.ht(s,o)}return i.Ut()}In(e){const t=new ov;return $d.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const i=new ov;return $d.St.ht(Fd(this.databaseId,t),i.jt(function(s){const o=Od(s);return 0===o.length?0:o[o.length-1].kind}(e))),i.Ut()}hn(e,t,i){if(null===i)return[];let r=[];r.push(new ov);let s=0;for(const o of Od(e)){const a=i[s++];for(const l of r)if(this.Rn(t,o.fieldPath)&&Hy(a))r=this.Vn(r,o,a);else{const u=l.jt(o.kind);$d.St.ht(a,u)}}return this.mn(r)}ln(e,t,i){return this.hn(e,t,i.position)}mn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Ut();return t}Vn(e,t,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new ov;l.seed(a.Ut()),$d.St.ht(o,l.jt(t.kind)),s.push(l)}return s}Rn(e,t){return!!e.filters.find(i=>i instanceof Mt&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=av(e),r=Zp(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(s=>{const o=[];return F.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(h,g){const m=g?new kp(g.sequenceNumber,new $s(jd(g.readTime),new Ie(Ma(g.documentKey)),g.largestBatchId)):kp.empty(),y=h.fields.map(([E,w])=>new Md(On.fromServerFormat(E),w));return new Mp(h.indexId,h.collectionGroup,y,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Je(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=av(e),s=Zp(e);return this.fn(e).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>F.forEach(a,l=>s.put(i5(l.indexId,this.user,o,i)))))}updateIndexEntries(e,t){const i=new Map;return F.forEach(t,(r,s)=>{const o=i.get(r.collectionGroup);return(o?F.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),F.forEach(a,l=>this.gn(e,r,l).next(u=>{const h=this.pn(s,l);return u.isEqual(h)?F.resolve():this.yn(e,s,l,u,h)}))))})}wn(e,t,i,r){return Kp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,i,r){return Kp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,t.key),t.key.path.toArray()])}gn(e,t,i){const r=Kp(e);let s=new hn(iu);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,t)])},(o,a)=>{s=s.add(new Gd(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,t){let i=new hn(iu);const r=this.dn(t,e);if(null==r)return i;const s=yx(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Hy(o))for(const a of o.arrayValue.values||[])i=i.add(new Gd(t.indexId,e.key,this.In(a),r))}else i=i.add(new Gd(t.indexId,e.key,rT,r));return i}yn(e,t,i,r,s){se("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,u,h,g,m){const y=l.getIterator(),E=u.getIterator();let w=Fp(y),I=Fp(E);for(;w||I;){let O=!1,S=!1;if(w&&I){const k=h(w,I);k<0?S=!0:k>0&&(O=!0)}else null!=w?S=!0:O=!0;O?(g(I),I=Fp(E)):S?(m(w),w=Fp(y)):(w=Fp(y),I=Fp(E))}}(r,s,iu,a=>{o.push(this.wn(e,t,i,a))},a=>{o.push(this.Sn(e,t,i,a))}),F.waitFor(o)}fn(e){let t=1;return Zp(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>iu(o,a)).filter((o,a,l)=>!a||0!==iu(o,l[a-1]));const r=[];r.push(e);for(const o of i){const a=iu(o,e),l=iu(o,t);if(0===a)r[0]=e.Ht();else if(a>0&&l<0)r.push(o),r.push(o.Ht());else if(l>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,rT,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,rT,[]]))}return s}bn(e,t){return iu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(f5)}getMinOffset(e,t){return F.mapArray(this.un(t),i=>this.cn(e,i).next(r=>r||Re())).next(f5)}}function h5(n){return Ki(n,"collectionParents")}function Kp(n){return Ki(n,"indexEntries")}function av(n){return Ki(n,"indexConfiguration")}function Zp(n){return Ki(n,"indexState")}function f5(n){Oe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;vx(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new $s(e.readTime,e.documentKey,t)}const p5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Sr{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Sr(e,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function g5(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=i.Y({range:o},(h,g,m)=>(a++,m.delete()));s.push(l.next(()=>{Oe(1===a)}));const u=[];for(const h of t.mutations){const g=V8(e,h.key.path,t.batchId);s.push(r.delete(g)),u.push(h.key)}return F.waitFor(s).next(()=>u)}function sT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Re();e=n.noDocument}return JSON.stringify(e).length}Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(41943040,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);class oT{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,t,i,r){Oe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new oT(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ru(e).Y({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=Yp(e),o=ru(e);return o.add({}).next(a=>{Oe("number"==typeof a);const l=new Ox(a,t,i,r),u=function(y,E,w){const I=w.baseMutations.map(S=>iv(y.ut,S)),O=w.mutations.map(S=>iv(y.ut,S));return{userId:E,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:I,mutations:O}}(this.serializer,this.userId,l),h=[];let g=new hn((m,y)=>Je(m.canonicalString(),y.canonicalString()));for(const m of r){const y=V8(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(o.put(u)),h.push(s.put(y,T_e))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),F.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return ru(e).get(t).next(i=>i?(Oe(i.userId===this.userId),Hd(this.serializer,i)):null)}Cn(e,t){return this.Dn[t]?F.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Dn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ru(e).Y({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(Oe(a.batchId>=i),s=Hd(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ru(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ru(e).W("userMutationsIndex",t).next(i=>i.map(r=>Hd(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=UI(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return Yp(e).Y({range:r},(o,a,l)=>{const[u,h,g]=o,m=Ma(h);if(u===this.userId&&t.path.isEqual(m))return ru(e).get(g).next(y=>{if(!y)throw Re();Oe(y.userId===this.userId),s.push(Hd(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new hn(Je);const r=[];return t.forEach(s=>{const o=UI(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Yp(e).Y({range:a},(u,h,g)=>{const[m,y,E]=u,w=Ma(y);m===this.userId&&s.path.isEqual(w)?i=i.add(E):g.done()});r.push(l)}),F.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=UI(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new hn(Je);return Yp(e).Y({range:o},(l,u,h)=>{const[g,m,y]=l,E=Ma(m);g===this.userId&&i.isPrefixOf(E)?E.length===r&&(a=a.add(y)):h.done()}).next(()=>this.vn(e,a))}vn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(ru(e).get(s).next(o=>{if(null===o)throw Re();Oe(o.userId===this.userId),i.push(Hd(this.serializer,o))}))}),F.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return g5(e.ae,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),F.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return F.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Yp(e).Y({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=Ma(s[1]);r.push(l)}else a.done()}).next(()=>{Oe(0===r.length)})})}containsKey(e,t){return m5(e,this.userId,t)}Mn(e){return _5(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function m5(n,e,t){const i=UI(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return Yp(n).Y({range:s,J:!0},(a,l,u)=>{const[h,g,m]=a;h===e&&g===r&&(o=!0),u.done()}).next(()=>o)}function ru(n){return Ki(n,"mutations")}function Yp(n){return Ki(n,"documentMutations")}function _5(n){return Ki(n,"mutationQueues")}class zd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new zd(0)}static Nn(){return new zd(-1)}}class Lye{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const i=new zd(t.highestTargetId);return t.highestTargetId=i.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Fe.fromTimestamp(new jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(t,i),this.Ln(e,i))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Qp(e).delete(t.targetId)).next(()=>this.Bn(e)).next(i=>(Oe(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return Qp(e).Y((o,a)=>{const l=rv(a);l.sequenceNumber<=t&&null===i.get(l.targetId)&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>F.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Qp(e).Y((i,r)=>{const s=rv(r);t(s)})}Bn(e){return y5(e).get("targetGlobalKey").next(t=>(Oe(null!==t),t))}Ln(e,t){return y5(e).put("targetGlobalKey",t)}kn(e,t){return Qp(e).put(t5(this.serializer,t))}qn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Ld(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Qp(e).Y({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const u=rv(a);zy(t,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=su(e);return t.forEach(o=>{const a=Dr(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),F.waitFor(r)}removeMatchingKeys(e,t,i){const r=su(e);return F.forEach(t,s=>{const o=Dr(s.path);return F.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=su(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=su(e);let s=ht();return r.Y({range:i,J:!0},(o,a,l)=>{const u=Ma(o[1]),h=new Ie(u);s=s.add(h)}).next(()=>s)}containsKey(e,t){const i=Dr(t.path),r=IDBKeyRange.bound([i],[R8(i)],!1,!0);let s=0;return su(e).Y({index:"documentTargetsIndex",J:!0,range:r},([o,a],l,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}_t(e,t){return Qp(e).get(t).next(i=>i?rv(i):null)}}function Qp(n){return Ki(n,"targets")}function y5(n){return Ki(n,"targetGlobal")}function su(n){return Ki(n,"targetDocuments")}function v5([n,e],[t,i]){const r=Je(n,t);return 0===r?Je(e,i):r}class Vye{constructor(e){this.Qn=e,this.buffer=new hn(v5),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();v5(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class E5{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,K.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Kc(i)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield qc(i)}yield t.Gn(3e5)}))}}class Bye{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return F.resolve(Gs._e);const i=new Vye(t);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(p5)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p5):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let i,r,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,o=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,a=Date.now(),this.removeTargets(e,i,t))).next(g=>(s=g,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(u=Date.now(),Pp()<=ks.in.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${r} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${g} documents in `+(u-l)+`ms\nTotal Duration: ${u-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}class Uye{constructor(e,t){this.db=e,this.garbageCollector=function b5(n,e){return new Bye(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Yn(e){let t=0;return this.Hn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(i,r)=>t(r))}addReference(e,t,i){return aT(e,i)}removeReference(e,t,i){return aT(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return aT(e,t)}Xn(e,t){return function(r,s){let o=!1;return _5(r).Z(a=>m5(r,a,s).next(l=>(l&&(o=!0),F.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=t){const l=this.Xn(e,o).next(u=>{if(!u)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,Fe.min()),su(e).delete([0,Dr(o.path)])))});r.push(l)}}).next(()=>F.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return aT(e,t)}Zn(e,t){const i=su(e);let r,s=Gs._e;return i.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{0===o?(s!==Gs._e&&t(new Ie(Ma(r)),s),s=u,r=l):s=Gs._e}).next(()=>{s!==Gs._e&&t(new Ie(Ma(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aT(n,e){return su(n).put((r=n.currentSequenceNumber,{targetId:0,path:Dr(e.path),sequenceNumber:r}));var r}class w5{constructor(){this.changes=new Ml(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?F.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jye{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Wd(e).put(i)}removeEntry(e,t,i){return Wd(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],tT(o),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.er(e,i)))}getEntry(e,t){let i=Mn.newInvalidDocument(t);return Wd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(lv(t))},(r,s)=>{i=this.tr(t,s)}).next(()=>i)}nr(e,t){let i={size:0,document:Mn.newInvalidDocument(t)};return Wd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(lv(t))},(r,s)=>{i={document:this.tr(t,s),size:sT(s)}}).next(()=>i)}getEntries(e,t){let i=Is();return this.rr(e,t,(r,s)=>{const o=this.tr(r,s);i=i.insert(r,o)}).next(()=>i)}ir(e,t){let i=Is(),r=new Tn(Ie.comparator);return this.rr(e,t,(s,o)=>{const a=this.tr(s,o);i=i.insert(s,a),r=r.insert(s,sT(o))}).next(()=>({documents:i,sr:r}))}rr(e,t,i){if(t.isEmpty())return F.resolve();let r=new hn(D5);t.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(lv(r.first()),lv(r.last())),o=r.getIterator();let a=o.getNext();return Wd(e).Y({index:"documentKeyIndex",range:s},(l,u,h)=>{const g=Ie.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&D5(a,g)<0;)i(a,null),a=o.getNext();a&&a.isEqual(g)&&(i(a,u),a=o.hasNext()?o.getNext():null),a?h.U(lv(a)):h.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),tT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wd(e).W(IDBKeyRange.bound(a,l,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let h=Is();for(const g of u){const m=this.tr(Ie.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(qy(t,m)||r.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,i,r){let s=Is();const o=C5(t,i),a=C5(t,$s.max());return Wd(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const g=this.tr(Ie.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(g.key,g),s.size===r&&h.done()}).next(()=>s)}newChangeBuffer(e){return new Hye(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return T5(e).get("remoteDocumentGlobalKey").next(t=>(Oe(!!t),t))}er(e,t){return T5(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const i=function Aye(n,e){let t;if(e.document)t=qz(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Ie.fromSegments(e.noDocument.path),r=jd(e.noDocument.readTime);t=Mn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Re();{const i=Ie.fromSegments(e.unknownDocument.path),r=jd(e.unknownDocument.version);t=Mn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){const s=new jn(r[0],r[1]);return Fe.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(Fe.min()))return i}return Mn.newInvalidDocument(e)}}function I5(n){return new jye(n)}class Hye extends w5{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Ml(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new hn((s,o)=>Je(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(t.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=e5(this._r.serializer,o);r=r.add(s.path.popLast());const u=sT(l);i+=u-a.size,t.push(this._r.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){const l=e5(this._r.serializer,o.convertToNoDocument(Fe.min()));t.push(this._r.addEntry(e,s,l))}}),r.forEach(s=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),t.push(this._r.updateMetadata(e,i)),F.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(i=>(this.ar.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:i,sr:r})=>(r.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function T5(n){return Ki(n,"remoteDocumentGlobal")}function Wd(n){return Ki(n,"remoteDocumentsV14")}function lv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function C5(n,e){const t=e.documentKey.path.toArray();return[n,tT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function D5(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=Je(t[s],i[s]),r)return r;return r=Je(t.length,i.length),r||(r=Je(t[t.length-2],i[i.length-2]),r||Je(t[t.length-1],i[i.length-1]))}class $ye{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class S5{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&Qy(i.mutation,r,ws.empty(),jn.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ht()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ht()){const r=Fa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Ky();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Fa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ht()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Is();const o=Zy(),a=Zy();return t.forEach((l,u)=>{const h=i.get(u.key);r.has(u.key)&&(void 0===h||h.mutation instanceof kl)?s=s.insert(u.key,u):void 0!==h?(o.set(u.key,h.mutation.getFieldMask()),Qy(h.mutation,u,h.mutation.getFieldMask(),jn.now())):o.set(u.key,ws.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var g;return a.set(u,new $ye(h,null!==(g=o.get(u))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const i=Zy();let r=new Tn((o,a)=>o-a),s=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(null===u)return;let h=i.get(l)||ws.empty();h=a.applyToLocalView(u,h),i.set(l,h);const g=(r.get(a.batchId)||ht()).add(l);r=r.insert(a.batchId,g)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,g=yz();h.forEach(m=>{if(!s.has(m)){const y=Sz(t.get(m),i.get(m));null!==y&&g.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,g))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return Ie.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Rx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r);var o}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):F.resolve(Fa());let a=-1,l=s;return o.next(u=>F.forEach(u,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ht())).next(h=>({batchId:a,changes:_z(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next(i=>{let r=Ky();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=Ky();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const u=(g=t,m=l.child(s),new Ol(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();null===o.get(h)&&(o=o.insert(h,Mn.newInvalidDocument(h)))});let a=Ky();return o.forEach((l,u)=>{const h=s.get(l);void 0!==h&&Qy(h.mutation,u,ws.empty(),jn.now()),qy(t,u)&&(a=a.insert(l,u))}),a})}}class Gye{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return F.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(r=t).id,version:r.version,createTime:pi(r.createTime)}),F.resolve();var r}getNamedQuery(e,t){return F.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(r=t).name,query:Hx(r.bundledQuery),readTime:pi(r.readTime)}),F.resolve();var r}}class zye{constructor(){this.overlays=new Tn(Ie.comparator),this.lr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Fa();return F.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.lt(e,t,s)}),F.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.lr.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),F.resolve()}getOverlaysForCollection(e,t,i){const r=Fa(),s=t.length+1,o=new Ie(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return F.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Tn((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>i){let h=s.get(u.largestBatchId);null===h&&(h=Fa(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Fa(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return F.resolve(a)}lt(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new kx(t,i));let s=this.lr.get(t);void 0===s&&(s=ht(),this.lr.set(t,s)),this.lr.set(t,s.add(i.key))}}class Zx{constructor(){this.hr=new hn(Zi.Pr),this.Ir=new hn(Zi.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const i=new Zi(e,t);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.dr(new Zi(e,t))}Ar(e,t){e.forEach(i=>this.removeReference(i,t))}Rr(e){const t=new Ie(new Ut([])),i=new Zi(t,e),r=new Zi(t,e+1),s=[];return this.Ir.forEachInRange([i,r],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Ie(new Ut([])),i=new Zi(t,e),r=new Zi(t,e+1);let s=ht();return this.Ir.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Zi(e,0),i=this.hr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Zi{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Ie.comparator(e.key,t.key)||Je(e.gr,t.gr)}static Tr(e,t){return Je(e.gr,t.gr)||Ie.comparator(e.key,t.key)}}class Wye{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new hn(Zi.Pr)}checkEmpty(e){return F.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.pr;this.pr++;const o=new Ox(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.yr=this.yr.add(new Zi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,t){return F.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.Sr(t+1),s=r<0?0:r;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Zi(t,0),r=new Zi(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],o=>{const a=this.wr(o.gr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new hn(Je);return t.forEach(r=>{const s=new Zi(r,0),o=new Zi(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{i=i.add(a.gr)})}),F.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Ie.isDocumentKey(s)||(s=s.child(""));const o=new Zi(new Ie(s),0);let a=new hn(Je);return this.yr.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.gr)),!0)},o),F.resolve(this.br(a))}br(e){const t=[];return e.forEach(i=>{const r=this.wr(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Oe(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let i=this.yr;return F.forEach(t.mutations,r=>{const s=new Zi(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,t){const i=new Zi(t,0),r=this.yr.firstAfterOrEqual(i);return F.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return F.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class qye{constructor(e){this.Cr=e,this.docs=new Tn(Ie.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return F.resolve(i?i.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let i=Is();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Mn.newInvalidDocument(r))}),F.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Is();const o=t.path,a=new Ie(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vx(x8(h),i)<=0||(r.has(h.key)||qy(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Re()}vr(e,t){return F.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Kye(this)}getSize(e){return F.resolve(this.size)}}class Kye extends w5{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),F.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Zye{constructor(e){this.persistence=e,this.Fr=new Ml(t=>Ld(t),zy),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Zx,this.targetCount=0,this.Nr=zd.On()}forEachTarget(e,t){return this.Fr.forEach((i,r)=>t(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Mr&&(this.Mr=t),F.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new zd(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.kn(t),F.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),F.waitFor(s).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const i=this.Fr.get(t)||null;return F.resolve(i)}addMatchingKeys(e,t,i){return this.Or.Er(t,i),F.resolve()}removeMatchingKeys(e,t,i){this.Or.Ar(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Or.mr(t);return F.resolve(i)}containsKey(e,t){return F.resolve(this.Or.containsKey(t))}}class Yx{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Gs(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Zye(this),this.indexManager=new kye,this.remoteDocumentCache=new qye(i=>this.referenceDelegate.Qr(i)),this.serializer=new Xz(t),this.Kr=new Gye(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zye,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new Wye(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,i){se("MemoryPersistence","Starting transaction:",e);const r=new Yye(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,t){return F.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}}class Yye extends O8{constructor(e){super(),this.currentSequenceNumber=e}}class lT{constructor(e){this.persistence=e,this.Gr=new Zx,this.zr=null}static jr(e){return new lT(e)}get Hr(){if(this.zr)return this.zr;throw Re()}addReference(e,t,i){return this.Gr.addReference(i,t),this.Hr.delete(i.toString()),F.resolve()}removeReference(e,t,i){return this.Gr.removeReference(i,t),this.Hr.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),F.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Hr,i=>{const r=Ie.fromPath(i);return this.Jr(e,r).next(s=>{s||t.removeEntry(r,Fe.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(i=>{i?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return F.or([()=>F.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Qye{constructor(e){this.serializer=e}N(e,t,i,r){const s=new BI("createOrUpgrade",t);var l;i<1&&r>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",L8,{unique:!0}),l.createObjectStore("documentMutations"),A5(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=F.resolve();return i<3&&r>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),A5(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fe.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(l,u){return u.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",L8,{unique:!0});const g=u.store("mutations"),m=h.map(y=>g.put(y));return F.waitFor(m)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(o=o.next(()=>this.Zr(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),i<7&&r>=7&&(o=o.next(()=>this.ei(s))),i<8&&r>=8&&(o=o.next(()=>this.ti(e,s))),i<9&&r>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(o=o.next(()=>this.ni(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{!function(l){const u=l.createObjectStore("documentOverlays",{keyPath:F_e});u.createIndex("collectionPathOverlayIndex",L_e,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",V_e,{unique:!1})}(e)})),i<13&&r>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:C_e});u.createIndex("documentKeyIndex",D_e),u.createIndex("collectionGroupIndex",S_e)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ii(e,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:P_e}).createIndex("sequenceNumberIndex",O_e,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:M_e}).createIndex("documentKeyIndex",k_e,{unique:!1})}(e))),o}Xr(e){let t=0;return e.store("remoteDocuments").Y((i,r)=>{t+=sT(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>F.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>F.forEach(a,l=>{Oe(l.userId===s.userId);const u=Hd(this.serializer,l);return g5(e,s.userId,u).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Y((o,a)=>{const l=new Ut(o),u=[0,Dr(l)];s.push(t.get(u).next(h=>h?F.resolve():t.put({targetId:0,path:Dr(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>F.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:x_e});const i=t.store("collectionParents"),r=new Kx,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:Dr(l)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new Ut(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,l],u)=>{const h=Ma(a);return s(h.popLast())}))}ni(e){const t=e.store("targets");return t.Y((i,r)=>{const s=rv(r),o=t5(this.serializer,s);return t.put(o)})}ri(e,t){const i=t.store("remoteDocuments"),r=[];return i.Y((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(g=o,g.document?new Ie(Ut.fromString(g.document.name).popFirst(5)):g.noDocument?Ie.fromSegments(g.noDocument.path):g.unknownDocument?Ie.fromSegments(g.unknownDocument.path):Re()).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;r.push(a.put(u))}).next(()=>F.waitFor(r))}ii(e,t){const i=t.store("mutations"),r=I5(this.serializer),s=new Yx(lT.jr,this.serializer.ut);return i.W().next(o=>{const a=new Map;return o.forEach(l=>{var u;let h=null!==(u=a.get(l.userId))&&void 0!==u?u:ht();Hd(this.serializer,l).keys().forEach(g=>h=h.add(g)),a.set(l.userId,h)}),F.forEach(a,(l,u)=>{const h=new qi(u),g=nT.ct(this.serializer,h),m=s.getIndexManager(h),y=oT.ct(h,this.serializer,m,s.referenceDelegate);return new S5(r,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new wx(t,Gs._e),l).next()})})}}function A5(n){n.createObjectStore("targetDocuments",{keyPath:R_e}).createIndex("documentTargetsIndex",N_e,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",A_e,{unique:!0}),n.createObjectStore("targetGlobal")}const Qx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Jx{constructor(e,t,i,r,s,o,a,l,u,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.si=s,this.window=o,this.document=a,this.oi=u,this._i=h,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!Jx.D())throw new te(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uye(this,r),this.Ii=t+"main",this.serializer=new Xz(l),this.Ti=new Zo(this.Ii,this.ai,new Qye(this.serializer)),this.qr=new Lye(this.referenceDelegate,this.serializer),this.remoteDocumentCache=I5(this.serializer),this.Kr=new Rye,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&fi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(U.FAILED_PRECONDITION,Qx);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Gs(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var i=(0,K.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,K.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,K.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(Kc(e))return se("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return cv(e).get("owner").next(t=>F.resolve(this.wi(t)))}Si(e){return uT(e).delete(this.clientId)}bi(){var e=this;return(0,K.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Ki(i,"clientMetadata");return r.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return F.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const i of t)e.Ei.removeItem(e.vi(i.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?F.resolve(!0):cv(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new te(U.FAILED_PRECONDITION,Qx);return!1}}return!(!this.networkEnabled||!this.inForeground)||uT(e).W().next(i=>void 0===this.Ci(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&se("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,K.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new wx(t,Gs._e);return e.pi(i).next(()=>e.Si(i))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(i=>this.Di(i.updateTimeMs,t)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>uT(e).W().next(t=>this.Ci(t,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return oT.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Fye(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return nT.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,i){se("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(l=this.ai)?U_e:14===l?j8:13===l?U8:12===l?B_e:11===l?B8:void Re();var l;let o;return this.Ti.runTransaction(e,r,s,a=>(o=new wx(a,this.Lr?this.Lr.next():Gs._e),"readwrite-primary"===t?this.fi(o).next(l=>!!l||this.gi(o)).next(l=>{if(!l)throw fi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new te(U.FAILED_PRECONDITION,P8);return i(o)}).next(l=>this.yi(o).next(()=>l)):this.Li(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return cv(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new te(U.FAILED_PRECONDITION,Qx)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cv(e).put("owner",t)}static D(){return Zo.D()}pi(e){const t=cv(e);return t.get("owner").next(i=>this.wi(i)?(se("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):F.resolve())}Di(e,t){const i=Date.now();return!(e<i-t||e>i&&(fi(`Detected an update time that is in the future: ${e} > ${i}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,b.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const i=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return se("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return fi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){fi("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cv(n){return Ki(n,"owner")}function uT(n){return Ki(n,"clientMetadata")}function Xx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class eP{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ki=i,this.qi=r}static Qi(e,t){let i=ht(),r=ht();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new eP(e,t.fromCache,i,r)}}class Jye{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class R5{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.zi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Jye;return this.Hi(e,t,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,t,o,a.size)})}).next(()=>s.result)}Ji(e,t,i,r){return i.documentReadCount<this.Ui?(Pp()<=ks.in.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",jp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),F.resolve()):(Pp()<=ks.in.DEBUG&&se("QueryEngine","Query:",jp(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(Pp()<=ks.in.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",jp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(t))):F.resolve())}zi(e,t){if(dz(t))return F.resolve(null);let i=$r(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ZI(t,null,"F"),i=$r(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ht(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.Yi(t,a);return this.Zi(t,u,o,l.readTime)?this.zi(e,ZI(t,null,"F")):this.Xi(e,u,t,l)}))})))}ji(e,t,i,r){return dz(t)||r.isEqual(Fe.min())?F.resolve(null):this.Gi.getDocuments(e,i).next(s=>{const o=this.Yi(t,s);return this.Zi(t,o,i,r)?F.resolve(null):(Pp()<=ks.in.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jp(t)),this.Xi(e,o,t,N8(r,-1)).next(a=>a))})}Yi(e,t){let i=new hn(gz(e));return t.forEach((r,s)=>{qy(e,s)&&(i=i.add(s))}),i}Zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,t,i){return Pp()<=ks.in.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",jp(t)),this.Gi.getDocumentsMatchingQuery(e,t,$s.min(),i)}Xi(e,t,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Xye{constructor(e,t,i,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Tn(Je),this.ns=new Ml(s=>Ld(s),zy),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new S5(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function N5(n,e,t,i){return new Xye(n,e,t,i)}function x5(n,e){return tP.apply(this,arguments)}function tP(){return tP=(0,K.Z)(function*(n,e){const t=we(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.os(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ht();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(i,l).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})}),tP.apply(this,arguments)}function P5(n){const e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function O5(n,e,t){let i=ht(),r=ht();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Is();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Fe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||0===l.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{us:o,cs:r}})}function nve(n,e){const t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Jp(n,e){const t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.qr.getTargetData(i,e).next(s=>s?(r=s,F.resolve(r)):t.qr.allocateTargetId(i).next(o=>(r=new Fl(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ts.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ts=t.ts.insert(i.targetId,i),t.ns.set(e,i.targetId)),i})}function Xp(n,e,t){return nP.apply(this,arguments)}function nP(){return nP=(0,K.Z)(function*(n,e,t){const i=we(n),r=i.ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Kc(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)}),nP.apply(this,arguments)}function dT(n,e,t){const i=we(n);let r=Fe.min(),s=ht();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const g=we(l),m=g.ns.get(h);return void 0!==m?F.resolve(g.ts.get(m)):g.qr.getTargetData(u,h)}(i,o,$r(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.es.getDocumentsMatchingQuery(o,e,t?r:Fe.min(),t?s:ht())).next(a=>(F5(i,pz(e),a),{documents:a,ls:s})))}function M5(n,e){const t=we(n),i=we(t.qr),r=t.ts.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(o=>o?o.target:null))}function k5(n,e){const t=we(n),i=t.rs.get(e)||Fe.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.ss.getAllFromCollectionGroup(r,e,N8(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(F5(t,e,r),r))}function F5(n,e,t){let i=n.rs.get(e)||Fe.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.rs.set(e,i)}function iP(){return iP=(0,K.Z)(function*(n,e,t,i){const r=we(n);let s=ht(),o=Is();for(const u of t){const h=e.hs(u.metadata.name);u.document&&(s=s.add(h));const g=e.Ps(u);g.setReadTime(e.Is(u.metadata.readTime)),o=o.insert(h,g)}const a=r.ss.newChangeBuffer({trackRemovals:!0}),l=yield Jp(r,(h=i,$r(Bp(Ut.fromString(`__bundle__/docs/${h}`)))));var h;return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>O5(u,a,o).next(h=>(a.apply(u),h)).next(h=>r.qr.removeMatchingKeysForTargetId(u,l.targetId).next(()=>r.qr.addMatchingKeys(u,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,h.us,h.cs)).next(()=>h.us)))}),iP.apply(this,arguments)}function rve(n,e){return rP.apply(this,arguments)}function rP(){return rP=(0,K.Z)(function*(n,e,t=ht()){const i=yield Jp(n,$r(Hx(e.bundledQuery))),r=we(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=pi(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Kr.saveNamedQuery(s,e);const a=i.withResumeToken(ki.EMPTY_BYTE_STRING,o);return r.ts=r.ts.insert(a.targetId,a),r.qr.updateTargetData(s,a).next(()=>r.qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.qr.addMatchingKeys(s,t,i.targetId)).next(()=>r.Kr.saveNamedQuery(s,e))})}),rP.apply(this,arguments)}function L5(n,e){return`firestore_clients_${n}_${e}`}function V5(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function sP(n,e){return`firestore_targets_${n}_${e}`}class hT{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ts(e,t,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new te(r.error.code,r.error.message))),o?new hT(e,t,r.state,s):(fi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uv{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ts(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new te(i.error.code,i.error.message))),s?new uv(e,i.state,r):(fi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=xx();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=k8(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new fT(e,s):(fi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class oP{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new oP(t.clientId,t.onlineState):(fi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class aP{constructor(){this.activeTargetIds=xx()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lP{constructor(e,t,i,r,s){this.window=e,this.si=t,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Tn(Je),this.started=!1,this.ps=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=L5(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new aP),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,K.Z)(function*(){const t=yield e.syncEngine.Bi();for(const r of t){if(r===e.Rs)continue;const s=e.getItem(L5(e.persistenceKey,r));if(s){const o=fT.Ts(r,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const i=e.storage.getItem(e.Cs);if(i){const r=e.Ms(i);r&&e.xs(r)}for(const r of e.ps)e.fs(r);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,i){this.Ns(e,t,i),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(sP(this.persistenceKey,e));if(i){const r=uv.Ts(e,i);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sP(this.persistenceKey,e))}updateQueryState(e,t,i){this.ks(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se("SharedClientState","READ",e,t),t}setItem(e,t){se("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){se("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const i=e;if(i.storageArea===this.storage){if(se("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ys)return void fi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,K.Z)(function*(){if(t.started){if(null!==i.key)if(t.Ss.test(i.key)){if(null==i.newValue){const r=t.Ks(i.key);return t.$s(r,null)}{const r=t.Us(i.key,i.newValue);if(r)return t.$s(r.clientId,r)}}else if(t.bs.test(i.key)){if(null!==i.newValue){const r=t.Ws(i.key,i.newValue);if(r)return t.Gs(r)}}else if(t.Ds.test(i.key)){if(null!==i.newValue){const r=t.zs(i.key,i.newValue);if(r)return t.js(r)}}else if(i.key===t.Cs){if(null!==i.newValue){const r=t.Ms(i.newValue);if(r)return t.xs(r)}}else if(i.key===t.ws){const r=function(o){let a=Gs._e;if(null!=o)try{const l=JSON.parse(o);Oe("number"==typeof l),a=l}catch(l){fi("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);r!==Gs._e&&t.sequenceNumberHandler(r)}else if(i.key===t.vs){const r=t.Hs(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Js(s)))}}else t.ps.push(i)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,i){const r=new hT(this.currentUser,e,t,i),s=V5(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Es())}Bs(e){const t=V5(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,i){const r=sP(this.persistenceKey,e),s=new uv(e,t,i);this.setItem(r,s.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const i=this.Ks(e);return fT.Ts(i,t)}Ws(e,t){const i=this.bs.exec(e),r=Number(i[1]);return hT.Ts(new qi(void 0!==i[2]?i[2]:null),r,t)}zs(e,t){const i=this.Ds.exec(e),r=Number(i[1]);return uv.Ts(r,t)}Ms(e){return oP.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,K.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);se("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const i=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),s=this.Os(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=xx();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class B5{constructor(){this.eo=new aP,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,i){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new aP,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sve{ro(e){}shutdown(){}}class U5{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pT=null;function cP(){return null===pT?pT=268435456+Math.round(2147483648*Math.random()):pT++,"0x"+pT.toString(16)}const ove={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ave{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Ar="WebChannelConnection";class lve extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+t.host,this.fo=`projects/${r}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get yo(){return!1}wo(t,i,r,s,o){const a=cP(),l=this.So(t,i);se("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(t,l,u,r).then(h=>(se("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw bs("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Co(t,i,r,s,o,a){return this.wo(t,i,r,s,o)}bo(t,i,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+xp,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}So(t,i){return`${this.mo}/v1/${i}:${ove[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,i,r){const s=cP();return new Promise((o,a)=>{const l=new s_e;l.setWithCredentials(!0),l.listenOnce(i_e.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case mx.NO_ERROR:const h=l.getResponseJson();se(Ar,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case mx.TIMEOUT:se(Ar,`RPC '${e}' ${s} timed out`),a(new te(U.DEADLINE_EXCEEDED,"Request time out"));break;case mx.HTTP_ERROR:const g=l.getStatus();if(se(Ar,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const E=function(I){const O=I.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(O)>=0?O:U.UNKNOWN}(y.status);a(new te(E,y.message))}else a(new te(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new te(U.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{se(Ar,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);se(Ar,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",u,i,15)})}vo(e,t,i){const r=cP(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=t_e(),a=n_e(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const h=s.join("");se(Ar,`Creating RPC '${e}' stream ${r}: ${h}`,l);const g=o.createWebChannel(h,l);let m=!1,y=!1;const E=new ave({co:I=>{y?se(Ar,`Not sending because RPC '${e}' stream ${r} is closed:`,I):(m||(se(Ar,`Opening RPC '${e}' stream ${r} transport.`),g.open(),m=!0),se(Ar,`RPC '${e}' stream ${r} sending:`,I),g.send(I))},lo:()=>g.close()}),w=(I,O,S)=>{I.listen(O,k=>{try{S(k)}catch(L){setTimeout(()=>{throw L},0)}})};return w(g,VI.EventType.OPEN,()=>{y||se(Ar,`RPC '${e}' stream ${r} transport opened.`)}),w(g,VI.EventType.CLOSE,()=>{y||(y=!0,se(Ar,`RPC '${e}' stream ${r} transport closed`),E.Ro())}),w(g,VI.EventType.ERROR,I=>{y||(y=!0,bs(Ar,`RPC '${e}' stream ${r} transport errored:`,I),E.Ro(new te(U.UNAVAILABLE,"The operation could not be completed")))}),w(g,VI.EventType.MESSAGE,I=>{var O;if(!y){const S=I.data[0];Oe(!!S);const L=S.error||(null===(O=S[0])||void 0===O?void 0:O.error);if(L){se(Ar,`RPC '${e}' stream ${r} received error:`,L);const Y=L.status;let ye=function(fn){const Gn=Ti[fn];if(void 0!==Gn)return Oz(Gn)}(Y),Me=L.message;void 0===ye&&(ye=U.INTERNAL,Me="Unknown error status: "+Y+" with message "+L.message),y=!0,E.Ro(new te(ye,Me)),g.close()}else se(Ar,`RPC '${e}' stream ${r} received:`,S),E.Vo(S)}}),w(a,r_e.STAT_EVENT,I=>{I.stat===T8.PROXY?se(Ar,`RPC '${e}' stream ${r} detected buffering proxy`):I.stat===T8.NOPROXY&&se(Ar,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function j5(){return typeof window<"u"?window:null}function gT(){return typeof document<"u"?document:null}function dv(n){return new yye(n,!0)}class uP{constructor(e,t,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=t,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-i);r>0&&se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class H5{constructor(e,t,i,r,s,o,a,l){this.si=e,this.Ko=i,this.$o=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new uP(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,K.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,K.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var i=this;return(0,K.Z)(function*(){i.t_(),i.n_(),i.zo.cancel(),i.Uo++,4!==e?i.zo.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(fi(t.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),i.zo.Lo()):t&&t.code===U.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.r_(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===t&&this.s_(i,r)},i=>{e(()=>{const r=new te(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,t){const i=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){var e=this;this.state=5,this.zo.ko((0,K.Z)(function*(){e.state=0,e.start()}))}o_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cve extends H5{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function bye(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Re(),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Oe(void 0===h||"string"==typeof h),ki.fromBase64String(h||"")):(Oe(void 0===h||h instanceof Uint8Array),ki.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=void 0===u.code?U.UNKNOWN:Oz(u.code);return new te(h,u.message||"")}(o);t=new Vz(i,r,s,a||null)}else if("documentChange"in e){const i=e.documentChange,r=La(n,i.document.name),s=pi(i.document.updateTime),o=i.document.createTime?pi(i.document.createTime):Fe.min(),a=new fr({mapValue:{fields:i.document.fields}}),l=Mn.newFoundDocument(r,s,o,a);t=new eT(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const i=e.documentDelete,r=La(n,i.document),s=i.readTime?pi(i.readTime):Fe.min(),o=Mn.newNoDocument(r,s);t=new eT([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=La(n,i.document);t=new eT([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return Re();{const i=e.filter,{count:r=0,unchangedNames:s}=i,o=new hye(r,s);t=new Lz(i.targetId,o)}}var u;return t}(this.serializer,e),i=function(s){if(!("targetChange"in s))return Fe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Fe.min():o.readTime?pi(o.readTime):Fe.min()}(e);return this.listener.a_(t,i)}u_(e){const t={};t.database=nv(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=qI(l)?{documents:Kz(s,l)}:{query:jx(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Hz(s,o.resumeToken);const u=Lx(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Fe.min())>0){a.readTime=Wp(s,o.snapshotVersion.toTimestamp());const u=Lx(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const i=function Iye(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.e_(t)}c_(e){const t={};t.database=nv(this.serializer),t.removeTarget=e,this.e_(t)}}class uve extends H5{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function wye(n,e){return n&&n.length>0?(Oe(void 0!==e),n.map(t=>function(r,s){let o=pi(r.updateTime?r.updateTime:s);return o.isEqual(Fe.min())&&(o=pi(s)),new lye(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=pi(e.commitTime);return this.listener.I_(i,t)}return Oe(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=nv(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>iv(this.serializer,i))};this.e_(t)}}class dve extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new te(U.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.wo(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new te(U.UNKNOWN,r.toString())})}Co(e,t,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,t,i,s,o,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(U.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class fve{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(fi(t),this.f_=!1):se("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class pve{constructor(e,t,i,r,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{i.enqueueAndForget((0,K.Z)(function*(){var l;ou(o)&&(se("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,K.Z)(function*(h){const g=we(h);g.C_.add(4),yield eg(g),g.M_.set("Unknown"),g.C_.delete(4),yield hv(g)}),function u(h){return l.apply(this,arguments)})(o))}))}),this.M_=new fve(i,r)}}function hv(n){return hP.apply(this,arguments)}function hP(){return hP=(0,K.Z)(function*(n){if(ou(n))for(const e of n.v_)yield e(!0)}),hP.apply(this,arguments)}function eg(n){return fP.apply(this,arguments)}function fP(){return fP=(0,K.Z)(function*(n){for(const e of n.v_)yield e(!1)}),fP.apply(this,arguments)}function mT(n,e){const t=we(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),mP(t)?gP(t):ng(t).Ho()&&pP(t,e))}function fv(n,e){const t=we(n),i=ng(t);t.D_.delete(e),i.Ho()&&$5(t,e),0===t.D_.size&&(i.Ho()?i.Zo():ou(t)&&t.M_.set("Unknown"))}function pP(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ng(n).u_(e)}function $5(n,e){n.x_.Oe(e),ng(n).c_(e)}function gP(n){n.x_=new pye({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),ng(n).start(),n.M_.g_()}function mP(n){return ou(n)&&!ng(n).jo()&&n.D_.size>0}function ou(n){return 0===we(n).C_.size}function G5(n){n.x_=void 0}function gve(n){return _P.apply(this,arguments)}function _P(){return _P=(0,K.Z)(function*(n){n.D_.forEach((e,t)=>{pP(n,e)})}),_P.apply(this,arguments)}function mve(n,e){return yP.apply(this,arguments)}function yP(){return yP=(0,K.Z)(function*(n,e){G5(n),mP(n)?(n.M_.w_(e),gP(n)):n.M_.set("Unknown")}),yP.apply(this,arguments)}function _ve(n,e,t){return vP.apply(this,arguments)}function vP(){return vP=(0,K.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof Vz&&2===e.state&&e.cause)try{yield(i=(0,K.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.D_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.D_.delete(l),s.x_.removeTarget(l))}),function r(s,o){return i.apply(this,arguments)})(n,e)}catch(i){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield _T(n,i)}else if(e instanceof eT?n.x_.$e(e):e instanceof Lz?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(Fe.min()))try{const i=yield P5(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.D_.get(u);h&&s.D_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.D_.get(l);if(!h)return;s.D_.set(l,h.withResumeToken(ki.EMPTY_BYTE_STRING,h.snapshotVersion)),$5(s,l);const g=new Fl(h.target,l,u,h.sequenceNumber);pP(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){se("RemoteStore","Failed to raise snapshot:",i),yield _T(n,i)}var i}),vP.apply(this,arguments)}function _T(n,e,t){return EP.apply(this,arguments)}function EP(){return EP=(0,K.Z)(function*(n,e,t){if(!Kc(e))throw e;n.C_.add(1),yield eg(n),n.M_.set("Offline"),t||(t=()=>P5(n.localStore)),n.asyncQueue.enqueueRetryable((0,K.Z)(function*(){se("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield hv(n)}))}),EP.apply(this,arguments)}function z5(n,e){return e().catch(t=>_T(n,t,e))}function tg(n){return bP.apply(this,arguments)}function bP(){return bP=(0,K.Z)(function*(n){const e=we(n),t=au(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;yve(e);)try{const r=yield nve(e.localStore,i);if(null===r){0===e.b_.length&&t.Zo();break}i=r.batchId,vve(e,r)}catch(r){yield _T(e,r)}W5(e)&&q5(e)}),bP.apply(this,arguments)}function yve(n){return ou(n)&&n.b_.length<10}function vve(n,e){n.b_.push(e);const t=au(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function W5(n){return ou(n)&&!au(n).jo()&&n.b_.length>0}function q5(n){au(n).start()}function Eve(n){return wP.apply(this,arguments)}function wP(){return wP=(0,K.Z)(function*(n){au(n).E_()}),wP.apply(this,arguments)}function bve(n){return IP.apply(this,arguments)}function IP(){return IP=(0,K.Z)(function*(n){const e=au(n);for(const t of n.b_)e.P_(t.mutations)}),IP.apply(this,arguments)}function wve(n,e,t){return TP.apply(this,arguments)}function TP(){return TP=(0,K.Z)(function*(n,e,t){const i=n.b_.shift(),r=Mx.from(i,e,t);yield z5(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield tg(n)}),TP.apply(this,arguments)}function Ive(n,e){return CP.apply(this,arguments)}function CP(){return CP=(0,K.Z)(function*(n,e){var t;e&&au(n).h_&&(yield(t=(0,K.Z)(function*(r,s){if(Pz(a=s.code)&&a!==U.ABORTED){const o=r.b_.shift();au(r).Yo(),yield z5(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield tg(r)}var a}),function i(r,s){return t.apply(this,arguments)})(n,e)),W5(n)&&q5(n)}),CP.apply(this,arguments)}function K5(n,e){return DP.apply(this,arguments)}function DP(){return DP=(0,K.Z)(function*(n,e){const t=we(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const i=ou(t);t.C_.add(3),yield eg(t),i&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield hv(t)}),DP.apply(this,arguments)}function SP(n,e){return AP.apply(this,arguments)}function AP(){return AP=(0,K.Z)(function*(n,e){const t=we(n);e?(t.C_.delete(2),yield hv(t)):e||(t.C_.add(2),yield eg(t),t.M_.set("Unknown"))}),AP.apply(this,arguments)}function ng(n){return n.O_||(n.O_=function(t,i,r){const s=we(t);return s.A_(),new cve(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:gve.bind(null,n),Io:mve.bind(null,n),a_:_ve.bind(null,n)}),n.v_.push(function(){var e=(0,K.Z)(function*(t){t?(n.O_.Yo(),mP(n)?gP(n):n.M_.set("Unknown")):(yield n.O_.stop(),G5(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function au(n){return n.N_||(n.N_=function(t,i,r){const s=we(t);return s.A_(),new uve(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:Eve.bind(null,n),Io:Ive.bind(null,n),T_:bve.bind(null,n),I_:wve.bind(null,n)}),n.v_.push(function(){var e=(0,K.Z)(function*(t){t?(n.N_.Yo(),yield tg(n)):(yield n.N_.stop(),n.b_.length>0&&(se("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class RP{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new RP(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new te(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ig(n,e){if(fi("AsyncQueue",`${e}: ${n}`),Kc(n))return new te(U.UNAVAILABLE,`${e}: ${n}`);throw n}class rg{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ie.comparator(t.key,i.key):(t,i)=>Ie.comparator(t.key,i.key),this.keyedMap=Ky(),this.sortedSet=new Tn(this.comparator)}static emptySet(e){return new rg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new rg;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Z5{constructor(){this.B_=new Tn(Ie.comparator)}track(e){const t=e.doc.key,i=this.B_.get(t);i?0!==e.type&&3===i.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==i.type?this.B_=this.B_.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.B_=this.B_.remove(t):1===e.type&&2===i.type?this.B_=this.B_.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Re():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,i)=>{e.push(i)}),e}}class sg{constructor(e,t,i,r,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new sg(e,t,rg.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class Tve{constructor(){this.k_=void 0,this.listeners=[]}}class Cve{constructor(){this.queries=new Ml(e=>fz(e),Wy),this.onlineState="Unknown",this.q_=new Set}}function NP(n,e){return xP.apply(this,arguments)}function xP(){return xP=(0,K.Z)(function*(n,e){const t=we(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new Tve),r)try{s.k_=yield t.onListen(i)}catch(o){const a=ig(o,`Initialization of query '${jp(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.Q_(t.onlineState),s.k_&&e.K_(s.k_)&&MP(t)}),xP.apply(this,arguments)}function PP(n,e){return OP.apply(this,arguments)}function OP(){return OP=(0,K.Z)(function*(n,e){const t=we(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),OP.apply(this,arguments)}function Dve(n,e){const t=we(n);let i=!1;for(const r of e){const o=t.queries.get(r.query);if(o){for(const a of o.listeners)a.K_(r)&&(i=!0);o.k_=r}}i&&MP(t)}function Sve(n,e,t){const i=we(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function MP(n){n.q_.forEach(e=>{e.next()})}class kP{constructor(e,t,i){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new sg(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=sg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class Ave{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class Y5{constructor(e){this.serializer=e}hs(e){return La(this.serializer,e)}Ps(e){return e.metadata.exists?qz(this.serializer,e.document,!1):Mn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return pi(e)}}class Rve{constructor(e,t,i){this.X_=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Q5(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const i=Ut.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,i=new Y5(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.hs(r.metadata.name);for(const o of r.metadata.queries){const a=(t.get(o)||ht()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,K.Z)(function*(){const t=yield function ive(n,e,t,i){return iP.apply(this,arguments)}(e.localStore,new Y5(e.serializer),e.documents,e.X_.id),i=e.ta(e.documents);for(const r of e.queries)yield rve(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function Q5(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class J5{constructor(e){this.key=e}}class X5{constructor(e){this.key=e}}class eW{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ht(),this.mutatedKeys=ht(),this._a=gz(e),this.aa=new rg(this._a)}get ua(){return this.ia}ca(e,t){const i=t?t.la:new Z5,r=t?t.aa:this.aa;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,g)=>{const m=r.get(h),y=qy(this.query,g)?g:null,E=!!m&&this.mutatedKeys.has(m.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;m&&y?m.data.isEqual(y.data)?E!==w&&(i.track({type:3,doc:y}),I=!0):this.ha(m,y)||(i.track({type:2,doc:y}),I=!0,(l&&this._a(y,l)>0||u&&this._a(y,u)<0)&&(a=!0)):!m&&y?(i.track({type:0,doc:y}),I=!0):m&&!y&&(i.track({type:1,doc:m}),I=!0,(l||u)&&(a=!0)),I&&(y?(o=o.add(y),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{aa:o,la:i,Zi:a,mutatedKeys:s}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((h,g)=>function(y,E){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return w(y)-w(E)}(h.type,g.type)||this._a(h.doc,g.doc)),this.Pa(i),r=null!=r&&r;const a=t&&!r?this.Ia():[],l=0===this.oa.size&&this.current&&!r?1:0,u=l!==this.sa;return this.sa=l,0!==o.length||u?{snapshot:new sg(this.query,e.aa,s,o,e.mutatedKeys,0===l,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new Z5,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=ht(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});const t=[];return e.forEach(i=>{this.oa.has(i)||t.push(new X5(i))}),this.oa.forEach(i=>{e.has(i)||t.push(new J5(i))}),t}da(e){this.ia=e.ls,this.oa=ht();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return sg.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Nve{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class xve{constructor(e){this.key=e,this.Ra=!1}}class Pve{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Ml(a=>fz(a),Wy),this.fa=new Map,this.ga=new Set,this.pa=new Tn(Ie.comparator),this.ya=new Map,this.wa=new Zx,this.Sa={},this.ba=new Map,this.Da=zd.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function Ove(n,e){return FP.apply(this,arguments)}function FP(){return FP=(0,K.Z)(function*(n,e){const t=sO(n);let i,r;const s=t.ma.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Aa();else{const o=yield Jp(t.localStore,$r(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield LP(t,e,i,"current"===a,o.resumeToken),t.isPrimaryClient&&mT(t.remoteStore,o)}return r}),FP.apply(this,arguments)}function LP(n,e,t,i,r){return VP.apply(this,arguments)}function VP(){return VP=(0,K.Z)(function*(n,e,t,i,r){n.va=(g,m,y)=>{return(E=(0,K.Z)(function*(I,O,S,k){let L=O.view.ca(S);L.Zi&&(L=yield dT(I.localStore,O.query,!1).then(({documents:Ge})=>O.view.ca(Ge,L)));const Y=k&&k.targetChanges.get(O.targetId),ye=k&&null!=k.targetMismatches.get(O.targetId),Me=O.view.applyChanges(L,I.isPrimaryClient,Y,ye);return KP(I,O.targetId,Me.Ta),Me.snapshot}),function w(I,O,S,k){return E.apply(this,arguments)})(n,g,m,y);var E};const s=yield dT(n.localStore,e,!0),o=new eW(e,s.ls),a=o.ca(s.documents),l=ev.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),u=o.applyChanges(a,n.isPrimaryClient,l);KP(n,t,u.Ta);const h=new Nve(e,t,o);return n.ma.set(e,h),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),u.snapshot}),VP.apply(this,arguments)}function Mve(n,e){return BP.apply(this,arguments)}function BP(){return BP=(0,K.Z)(function*(n,e){const t=we(n),i=t.ma.get(e),r=t.fa.get(i.targetId);if(r.length>1)return t.fa.set(i.targetId,r.filter(s=>!Wy(s,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Xp(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),fv(t.remoteStore,i.targetId),og(t,i.targetId)}).catch(qc))):(og(t,i.targetId),yield Xp(t.localStore,i.targetId,!0))}),BP.apply(this,arguments)}function UP(){return UP=(0,K.Z)(function*(n,e,t){const i=oO(n);try{const r=yield function(o,a){const l=we(o),u=jn.now(),h=a.reduce((y,E)=>y.add(E.key),ht());let g,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Is(),w=ht();return l.ss.getEntries(y,h).next(I=>{E=I,E.forEach((O,S)=>{S.isValidDocument()||(w=w.add(O))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,E)).next(I=>{g=I;const O=[];for(const S of a){const k=uye(S,g.get(S.key).overlayedDocument);null!=k&&O.push(new kl(S.key,k,J8(k.value.mapValue),Hn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,O,a)}).next(I=>{m=I;const O=I.applyToLocalDocumentSet(g,w);return l.documentOverlayCache.saveOverlays(y,I.batchId,O)})}).then(()=>({batchId:m.batchId,changes:_z(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Sa[o.currentUser.toKey()];u||(u=new Tn(Je)),u=u.insert(a,l),o.Sa[o.currentUser.toKey()]=u}(i,r.batchId,t),yield Ll(i,r.changes),yield tg(i.remoteStore)}catch(r){const s=ig(r,"Failed to persist write");t.reject(s)}}),UP.apply(this,arguments)}function tW(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,K.Z)(function*(n,e){const t=we(n);try{const i=yield function tve(n,e){const t=we(n),i=e.snapshotVersion;let r=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ss.newChangeBuffer({trackRemovals:!0});r=t.ts;const a=[];e.targetChanges.forEach((h,g)=>{const m=r.get(g);if(!m)return;a.push(t.qr.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.qr.addMatchingKeys(s,h.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);var w,I,O;null!==e.targetMismatches.get(g)?y=y.withResumeToken(ki.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,i)),r=r.insert(g,y),I=y,O=h,(0===(w=m).resumeToken.approximateByteSize()||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8||O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0)&&a.push(t.qr.updateTargetData(s,y))});let l=Is(),u=ht();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(O5(s,o,e.documentUpdates).next(h=>{l=h.us,u=h.cs})),!i.isEqual(Fe.min())){const h=t.qr.getLastRemoteSnapshotVersion(s).next(g=>t.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.ts=r,s))}(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.ya.get(s);o&&(Oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ra=!0:r.modifiedDocuments.size>0?Oe(o.Ra):r.removedDocuments.size>0&&(Oe(o.Ra),o.Ra=!1))}),yield Ll(t,i,e)}catch(i){yield qc(i)}}),jP.apply(this,arguments)}function nW(n,e,t){const i=we(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=we(o);l.onlineState=a;let u=!1;l.queries.forEach((h,g)=>{for(const m of g.listeners)m.Q_(a)&&(u=!0)}),u&&MP(l)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Fve(n,e,t){return HP.apply(this,arguments)}function HP(){return HP=(0,K.Z)(function*(n,e,t){const i=we(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ya.get(e),s=r&&r.key;if(s){let o=new Tn(Ie.comparator);o=o.insert(s,Mn.newNoDocument(s,Fe.min()));const a=ht().add(s),l=new Xy(Fe.min(),new Map,new Tn(Je),o,a);yield tW(i,l),i.pa=i.pa.remove(s),i.ya.delete(e),ZP(i)}else yield Xp(i.localStore,e,!1).then(()=>og(i,e,t)).catch(qc)}),HP.apply(this,arguments)}function Lve(n,e){return $P.apply(this,arguments)}function $P(){return $P=(0,K.Z)(function*(n,e){const t=we(n),i=e.batch.batchId;try{const r=yield function eve(n,e){const t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const g=u.batch,m=g.keys();let y=F.resolve();return m.forEach(E=>{y=y.next(()=>h.getEntry(l,E)).next(w=>{const I=u.docVersions.get(E);Oe(null!==I),w.version.compareTo(I)<0&&(g.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ht();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);qP(t,i,null),WP(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Ll(t,r)}catch(r){yield qc(r)}}),$P.apply(this,arguments)}function Vve(n,e,t){return GP.apply(this,arguments)}function GP(){return GP=(0,K.Z)(function*(n,e,t){const i=we(n);try{const r=yield function(o,a){const l=we(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(g=>(Oe(null!==g),h=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);qP(i,e,t),WP(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Ll(i,r)}catch(r){yield qc(r)}}),GP.apply(this,arguments)}function zP(){return zP=(0,K.Z)(function*(n,e){const t=we(n);ou(t.remoteStore)||se("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const a=we(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===i)return void e.resolve();const r=t.ba.get(i)||[];r.push(e),t.ba.set(i,r)}catch(i){const r=ig(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),zP.apply(this,arguments)}function WP(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function qP(n,e,t){const i=we(n);let r=i.Sa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function og(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.fa.get(e))n.ma.delete(i),t&&n.Va.Fa(i,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(i=>{n.wa.containsKey(i)||iW(n,i)})}function iW(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(fv(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),ZP(n))}function KP(n,e,t){for(const i of t)i instanceof J5?(n.wa.addReference(i.key,e),Uve(n,i)):i instanceof X5?(se("SyncEngine","Document no longer in limbo: "+i.key),n.wa.removeReference(i.key,e),n.wa.containsKey(i.key)||iW(n,i.key)):Re()}function Uve(n,e){const t=e.key,i=t.path.canonicalString();n.pa.get(t)||n.ga.has(i)||(se("SyncEngine","New document in limbo: "+t),n.ga.add(i),ZP(n))}function ZP(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new Ie(Ut.fromString(e)),i=n.Da.next();n.ya.set(i,new xve(t)),n.pa=n.pa.insert(t,i),mT(n.remoteStore,new Fl($r(Bp(t.path)),i,"TargetPurposeLimboResolution",Gs._e))}}function Ll(n,e,t){return YP.apply(this,arguments)}function YP(){return YP=(0,K.Z)(function*(n,e,t){const i=we(n),r=[],s=[],o=[];var a;i.ma.isEmpty()||(i.ma.forEach((a,l)=>{o.push(i.va(l,e,t).then(u=>{if((u||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,u?.fromCache?"not-current":"current"),u){r.push(u);const h=eP.Qi(l.targetId,u);s.push(h)}}))}),yield Promise.all(o),i.Va.a_(r),yield(a=(0,K.Z)(function*(u,h){const g=we(u);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(h,y=>F.forEach(y.ki,E=>g.persistence.referenceDelegate.addReference(m,y.targetId,E)).next(()=>F.forEach(y.qi,E=>g.persistence.referenceDelegate.removeReference(m,y.targetId,E)))))}catch(m){if(!Kc(m))throw m;se("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const E=g.ts.get(y),I=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ts=g.ts.insert(y,I)}}}),function l(u,h){return a.apply(this,arguments)})(i.localStore,s))}),YP.apply(this,arguments)}function jve(n,e){return QP.apply(this,arguments)}function QP(){return QP=(0,K.Z)(function*(n,e){const t=we(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const i=yield x5(t.localStore,e);t.currentUser=e,(s=t).ba.forEach(a=>{a.forEach(l=>{l.reject(new te(U.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Ll(t,i._s)}var s}),QP.apply(this,arguments)}function Hve(n,e){const t=we(n),i=t.ya.get(e);if(i&&i.Ra)return ht().add(i.key);{let r=ht();const s=t.fa.get(e);if(!s)return r;for(const o of s){const a=t.ma.get(o);r=r.unionWith(a.view.ua)}return r}}function $ve(n,e){return JP.apply(this,arguments)}function JP(){return JP=(0,K.Z)(function*(n,e){const t=we(n),i=yield dT(t.localStore,e.query,!0),r=e.view.da(i);return t.isPrimaryClient&&KP(t,e.targetId,r.Ta),r}),JP.apply(this,arguments)}function Gve(n,e){return XP.apply(this,arguments)}function XP(){return XP=(0,K.Z)(function*(n,e){const t=we(n);return k5(t.localStore,e).then(i=>Ll(t,i))}),XP.apply(this,arguments)}function zve(n,e,t,i){return eO.apply(this,arguments)}function eO(){return eO=(0,K.Z)(function*(n,e,t,i){const r=we(n),s=yield function(a,l){const u=we(a),h=we(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Cn(g,l).next(m=>m?u.localDocuments.getDocuments(g,m):F.resolve(null)))}(r.localStore,e);var l;null!==s?("pending"===t?yield tg(r.remoteStore):"acknowledged"===t||"rejected"===t?(qP(r,e,i||null),WP(r,e),l=e,we(we(r.localStore).mutationQueue).Fn(l)):Re(),yield Ll(r,s)):se("SyncEngine","Cannot apply mutation batch with id: "+e)}),eO.apply(this,arguments)}function tO(){return tO=(0,K.Z)(function*(n,e){const t=we(n);if(sO(t),oO(t),!0===e&&!0!==t.Ca){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield rW(t,i.toArray());t.Ca=!0,yield SP(t.remoteStore,!0);for(const s of r)mT(t.remoteStore,s)}else if(!1===e&&!1!==t.Ca){const i=[];let r=Promise.resolve();t.fa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(og(t,o),Xp(t.localStore,o,!0))),fv(t.remoteStore,o)}),yield r,yield rW(t,i),function(o){const a=we(o);a.ya.forEach((l,u)=>{fv(a.remoteStore,u)}),a.wa.Vr(),a.ya=new Map,a.pa=new Tn(Ie.comparator)}(t),t.Ca=!1,yield SP(t.remoteStore,!1)}}),tO.apply(this,arguments)}function rW(n,e,t){return nO.apply(this,arguments)}function nO(){return nO=(0,K.Z)(function*(n,e,t){const i=we(n),r=[],s=[];for(const o of e){let a;const l=i.fa.get(o);if(l&&0!==l.length){a=yield Jp(i.localStore,$r(l[0]));for(const u of l){const h=i.ma.get(u),g=yield $ve(i,h);g.snapshot&&s.push(g.snapshot)}}else{const u=yield M5(i.localStore,o);a=yield Jp(i.localStore,u),yield LP(i,sW(u),o,!1,a.resumeToken)}r.push(a)}return i.Va.a_(s),r}),nO.apply(this,arguments)}function sW(n){return uz(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qve(n){return t=we(n).localStore,we(we(t).persistence).Bi();var t}function Kve(n,e,t,i){return iO.apply(this,arguments)}function iO(){return iO=(0,K.Z)(function*(n,e,t,i){const r=we(n);if(r.Ca)return void se("SyncEngine","Ignoring unexpected query state notification.");const s=r.fa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield k5(r.localStore,pz(s[0])),a=Xy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ki.EMPTY_BYTE_STRING);yield Ll(r,o,a);break}case"rejected":yield Xp(r.localStore,e,!0),og(r,e,i);break;default:Re()}}),iO.apply(this,arguments)}function Zve(n,e,t){return rO.apply(this,arguments)}function rO(){return rO=(0,K.Z)(function*(n,e,t){const i=sO(n);if(i.Ca){for(const r of e){if(i.fa.has(r)){se("SyncEngine","Adding an already active target "+r);continue}const s=yield M5(i.localStore,r),o=yield Jp(i.localStore,s);yield LP(i,sW(s),o.targetId,!1,o.resumeToken),mT(i.remoteStore,o)}for(const r of t)i.fa.has(r)&&(yield Xp(i.localStore,r,!1).then(()=>{fv(i.remoteStore,r),og(i,r)}).catch(qc))}}),rO.apply(this,arguments)}function sO(n){const e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hve.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fve.bind(null,e),e.Va.a_=Dve.bind(null,e.eventManager),e.Va.Fa=Sve.bind(null,e.eventManager),e}function oO(n){const e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lve.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vve.bind(null,e),e}class pv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,K.Z)(function*(){t.serializer=dv(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return N5(this.persistence,new R5,e.initialUser,this.serializer)}createPersistence(e){return new Yx(lT.jr,this.serializer)}createSharedClientState(e){return new B5}terminate(){var e=this;return(0,K.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class aO extends pv{constructor(e,t,i){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,K.Z)(function*(){yield t().call(i,e),yield i.xa.initialize(i,e),yield oO(i.xa.syncEngine),yield tg(i.xa.remoteStore),yield i.persistence.mi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return N5(this.persistence,new R5,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new E5(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new w_e(t,this.persistence);return new b_e(e.asyncQueue,i)}createPersistence(e){const t=Xx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new Jx(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,j5(),gT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new B5}}class oW extends aO{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,K.Z)(function*(){yield t().call(i,e);const r=i.xa.syncEngine;i.sharedClientState instanceof lP&&(i.sharedClientState.syncEngine={Ys:zve.bind(null,r),Zs:Kve.bind(null,r),Xs:Zve.bind(null,r),Bi:qve.bind(null,r),Js:Gve.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.mi(function(){var s=(0,K.Z)(function*(o){yield function Wve(n,e){return tO.apply(this,arguments)}(i.xa.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=j5();if(!lP.D(t))throw new te(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Xx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lP(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class ag{initialize(e,t){var i=this;return(0,K.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>nW(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=jve.bind(null,i.syncEngine),yield SP(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Cve}createDatastore(e){const t=dv(e.databaseInfo.databaseId),i=new lve(e.databaseInfo);return new dve(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return i=this.localStore,r=this.datastore,s=e.asyncQueue,o=t=>nW(this.syncEngine,t,0),a=U5.D()?new U5:new sve,new pve(i,r,s,o,a);var i,r,s,o,a}createSyncEngine(e,t){return function(r,s,o,a,l,u,h){const g=new Pve(r,s,o,a,l,u);return h&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,K.Z)(function*(i){const r=we(i);se("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield eg(r),r.F_.shutdown(),r.M_.set("Unknown")}),function t(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function aW(n,e=10240){let t=0;return{read:()=>(0,K.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,K.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class yT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Jve{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Mi,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,K.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,K.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,K.Z)(function*(){const t=yield e.qa();if(null===t)return null;const i=e.La.decode(t),r=Number(i);isNaN(r)&&e.Qa(`length string (${i}) is not valid number`);const s=yield e.Ka(r);return new Ave(JSON.parse(s),t.length+r)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,K.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Ka(e){var t=this;return(0,K.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const i=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,K.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class Xve{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,K.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new te(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,K.Z)(function*(o,a){const l=we(o),u=nv(l.serializer)+"/documents",h={documents:a.map(E=>tv(l.serializer,E))},g=yield l.Co("BatchGetDocuments",u,h,a.length),m=new Map;g.forEach(E=>{const w=function Eye(n,e){return"found"in e?function(i,r){Oe(!!r.found);const s=La(i,r.found.name),o=pi(r.found.updateTime),a=r.found.createTime?pi(r.found.createTime):Fe.min(),l=new fr({mapValue:{fields:r.found.fields}});return Mn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(i,r){Oe(!!r.missing),Oe(!!r.readTime);const s=La(i,r.missing),o=pi(r.readTime);return Mn.newNoDocument(s,o)}(n,e):Re()}(l.serializer,E);m.set(w.key.toString(),w)});const y=[];return a.forEach(E=>{const w=m.get(E.toString());Oe(!!w),y.push(w)}),y}),function s(o,a){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new zp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,K.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=Ie.fromPath(r);e.mutations.push(new Px(s,e.precondition(s)))}),yield(i=(0,K.Z)(function*(s,o){const a=we(s),l=nv(a.serializer)+"/documents",u={writes:o.map(h=>iv(a.serializer,h))};yield a.wo("Commit",l,u)}),function r(s,o){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Re();t=Fe.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new te(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Fe.min())?Hn.exists(!1):Hn.updateTime(t):Hn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fe.min()))throw new te(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hn.updateTime(t)}return Hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class e0e{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Wa=i.maxAttempts,this.zo=new uP(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,K.Z)(function*(){const t=new Xve(e.datastore),i=e.za(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.ja(s)}))}).catch(r=>{e.ja(r)})}))}za(e){try{const t=this.updateFunction(e);return!Vy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Pz(t)}return!1}}class t0e{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=qi.UNAUTHENTICATED,this.clientId=A8.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,K.Z)(function*(a){se("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,K.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new te(U.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,K.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=ig(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function vT(n,e){return lO.apply(this,arguments)}function lO(){return lO=(0,K.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,K.Z)(function*(s){i.isEqual(s)||(yield x5(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),lO.apply(this,arguments)}function cO(n,e){return uO.apply(this,arguments)}function uO(){return uO=(0,K.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield dO(n);se("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>K5(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>K5(e.remoteStore,s)),n._onlineComponents=e}),uO.apply(this,arguments)}function lW(n){return"FirebaseError"===n.name?n.code===U.FAILED_PRECONDITION||n.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function dO(n){return hO.apply(this,arguments)}function hO(){return hO=(0,K.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{yield vT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!lW(t))throw t;bs("Error using user provided cache. Falling back to memory cache: "+t),yield vT(n,new pv)}}else se("FirestoreClient","Using default OfflineComponentProvider"),yield vT(n,new pv);return n._offlineComponents}),hO.apply(this,arguments)}function ET(n){return fO.apply(this,arguments)}function fO(){return fO=(0,K.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),yield cO(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),yield cO(n,new ag))),n._onlineComponents}),fO.apply(this,arguments)}function cW(n){return dO(n).then(e=>e.persistence)}function lg(n){return dO(n).then(e=>e.localStore)}function uW(n){return ET(n).then(e=>e.remoteStore)}function pO(n){return ET(n).then(e=>e.syncEngine)}function cg(n){return gO.apply(this,arguments)}function gO(){return gO=(0,K.Z)(function*(n){const e=yield ET(n),t=e.eventManager;return t.onListen=Ove.bind(null,e.syncEngine),t.onUnlisten=Mve.bind(null,e.syncEngine),t}),gO.apply(this,arguments)}function hW(n,e,t={}){const i=new Mi;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function(s,o,a,l,u){const h=new yT({next:m=>{o.enqueueAndForget(()=>PP(s,g));const y=m.docs.has(a);!y&&m.fromCache?u.reject(new te(U.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&"server"===l.source?u.reject(new te(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),g=new kP(Bp(a.path),h,{includeMetadataChanges:!0,J_:!0});return NP(s,g)}(yield cg(n),n.asyncQueue,e,t,i)})),i.promise}function fW(n,e,t={}){const i=new Mi;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function(s,o,a,l,u){const h=new yT({next:m=>{o.enqueueAndForget(()=>PP(s,g)),m.fromCache&&"server"===l.source?u.reject(new te(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),g=new kP(a,h,{includeMetadataChanges:!0,J_:!0});return NP(s,g)}(yield cg(n),n.asyncQueue,e,t,i)})),i.promise}function pW(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const gW=new Map;function mO(n,e,t){if(!t)throw new te(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mW(n,e,t,i){if(!0===e&&!0===i)throw new te(U.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _W(n){if(!Ie.isDocumentKey(n))throw new te(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yW(n){if(Ie.isDocumentKey(n))throw new te(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(i=n).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof n?"a function":Re()}function Nt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bT(n);throw new te(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vW(n,e){if(e<=0)throw new te(U.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class EW{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new te(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new te(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=pW(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gv{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EW({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new te(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new te(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EW(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new c_e;switch(i.type){case"firstParty":return new f_e(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=gW.get(t);i&&(se("ComponentProvider","Removing Datastore"),gW.delete(t),i.terminate())}(this),Promise.resolve()}}class pr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new pr(this.firestore,e,this._query)}}class kn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class Va extends pr{constructor(e,t,i){super(e,t,Bp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new Ie(e))}withConverter(e){return new Va(this.firestore,e,this._path)}}function wW(n,e,...t){if(n=(0,b.m9)(n),mO("collection","path",e),n instanceof gv){const i=Ut.fromString(e,...t);return yW(i),new Va(n,null,i)}{if(!(n instanceof kn||n instanceof Va))throw new te(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ut.fromString(e,...t));return yW(i),new Va(n.firestore,null,i)}}function wT(n,e,...t){if(n=(0,b.m9)(n),1===arguments.length&&(e=A8.newId()),mO("doc","path",e),n instanceof gv){const i=Ut.fromString(e,...t);return _W(i),new kn(n,null,new Ie(i))}{if(!(n instanceof kn||n instanceof Va))throw new te(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ut.fromString(e,...t));return _W(i),new kn(n.firestore,n instanceof Va?n.converter:null,new Ie(i))}}function IW(n,e){return n=(0,b.m9)(n),e=(0,b.m9)(e),(n instanceof kn||n instanceof Va)&&(e instanceof kn||e instanceof Va)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _O(n,e){return n=(0,b.m9)(n),e=(0,b.m9)(e),n instanceof pr&&e instanceof pr&&n.firestore===e.firestore&&Wy(n._query,e._query)&&n.converter===e.converter}class f0e{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new uP(this,"async_queue_retry"),this.iu=()=>{const t=gT();t&&se("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=gT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=gT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new Mi;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,K.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!Kc(t))throw t;se("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{throw this.eu=i,this.tu=!1,fi("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(i)),i}).then(i=>(this.tu=!1,i))));return this.Ja=t,t}enqueueAfterDelay(e,t,i){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=RP.createAndSchedule(this,e,t,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&Re()}verifyOperationInProgress(){}uu(){var e=this;return(0,K.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function yO(n){return function(t,i){if("object"!=typeof t||null===t)return!1;const r=t;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class p0e{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Cn extends gv{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new f0e,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||TW(this),this._firestoreClient.terminate()}}function si(n){return n._firestoreClient||TW(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function TW(n){var e,t,i;const r=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $_e(n._databaseId,l,n._persistenceKey,(h=r).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,pW(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;n._firestoreClient=new t0e(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=r.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.localCache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function CW(n,e,t){const i=new Mi;return n.asyncQueue.enqueue((0,K.Z)(function*(){try{yield vT(n,t),yield cO(n,e),i.resolve()}catch(r){const s=r;if(!lW(s))throw s;bs("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function DW(n){if(n._initialized||n._terminated)throw new te(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ba(ki.fromBase64String(e))}catch(t){throw new te(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ba(ki.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new te(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qd{constructor(e){this._methodName=e}}class IT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}}const C0e=/^__.*__$/;class D0e{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new kl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gp(e,this.data,t,this.fieldTransforms)}}class SW{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new kl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AW(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class TT{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new TT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return ST(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(AW(this.Iu)&&C0e.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class S0e{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||dv(e)}pu(e,t,i,r=!1){return new TT({Iu:e,methodName:t,gu:i,path:On.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kd(n){const e=n._freezeSettings(),t=dv(n._databaseId);return new S0e(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CT(n,e,t,i,r,s={}){const o=n.pu(s.merge||s.mergeFields?2:0,e,t,r);wO("Data must be an object, but it was:",o,i);const a=xW(i,o);let l,u;if(s.merge)l=new ws(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const m=yv(e,g,t);if(!o.contains(m))throw new te(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);OW(h,m)||h.push(m)}l=new ws(h),u=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=o.fieldTransforms;return new D0e(new fr(a),l,u)}class _v extends qd{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _v}}function RW(n,e,t){return new TT({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vO extends qd{_toFieldTransform(e){return new Yy(e.path,new Hp)}isEqual(e){return e instanceof vO}}class A0e extends qd{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=RW(this,e,!0),i=this.yu.map(s=>Zd(s,t)),r=new Vd(i);return new Yy(e.path,r)}isEqual(e){return this===e}}class R0e extends qd{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=RW(this,e,!0),i=this.yu.map(s=>Zd(s,t)),r=new Bd(i);return new Yy(e.path,r)}isEqual(e){return this===e}}class N0e extends qd{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new $p(e.serializer,bz(e.serializer,this.wu));return new Yy(e.path,t)}isEqual(e){return this===e}}function EO(n,e,t,i){const r=n.pu(1,e,t);wO("Data must be an object, but it was:",r,i);const s=[],o=fr.empty();Zc(i,(l,u)=>{const h=DT(e,l,t);u=(0,b.m9)(u);const g=r.Ru(h);if(u instanceof _v)s.push(h);else{const m=Zd(u,g);null!=m&&(s.push(h),o.set(h,m))}});const a=new ws(s);return new SW(o,a,r.fieldTransforms)}function bO(n,e,t,i,r,s){const o=n.pu(1,e,t),a=[yv(e,i,t)],l=[r];if(s.length%2!=0)throw new te(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(yv(e,s[m])),l.push(s[m+1]);const u=[],h=fr.empty();for(let m=a.length-1;m>=0;--m)if(!OW(u,a[m])){const y=a[m];let E=l[m];E=(0,b.m9)(E);const w=o.Ru(y);if(E instanceof _v)u.push(y);else{const I=Zd(E,w);null!=I&&(u.push(y),h.set(y,I))}}const g=new ws(u);return new SW(h,g,o.fieldTransforms)}function NW(n,e,t,i=!1){return Zd(t,n.pu(i?4:3,e))}function Zd(n,e){if(PW(n=(0,b.m9)(n)))return wO("Unsupported field value:",e,n),xW(n,e);if(n instanceof qd)return function(i,r){if(!AW(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Zd(a,r.Vu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if(null===(i=(0,b.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return bz(r.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const s=jn.fromDate(i);return{timestampValue:Wp(r.serializer,s)}}if(i instanceof jn){const s=new jn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Wp(r.serializer,s)}}if(i instanceof IT)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ba)return{bytesValue:Hz(r.serializer,i._byteString)};if(i instanceof kn){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Vx(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${bT(i)}`)}(n,e)}function xW(n,e){const t={};return $8(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zc(n,(i,r)=>{const s=Zd(r,e.Eu(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function PW(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof jn||n instanceof IT||n instanceof Ba||n instanceof kn||n instanceof qd)}function wO(n,e,t){if(!PW(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const i=bT(t);throw e.mu("an object"===i?n+" a custom object":n+" "+i)}var r}function yv(n,e,t){if((e=(0,b.m9)(e))instanceof Vl)return e._internalPath;if("string"==typeof e)return DT(n,e);throw ST("Field path arguments must be of type string or ",n,!1,void 0,t)}const x0e=new RegExp("[~\\*/\\[\\]]");function DT(n,e,t){if(e.search(x0e)>=0)throw ST(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vl(...e.split("."))._internalPath}catch{throw ST(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ST(n,e,t,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new te(U.INVALID_ARGUMENT,a+n+l)}function OW(n,e){return n.some(t=>t.isEqual(e))}class vv{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new P0e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(AT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class P0e extends vv{data(){return super.data()}}function AT(n,e){return"string"==typeof e?DT(n,e):e instanceof Vl?e._internalPath:e._delegate._internalPath}function MW(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new te(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class IO{}class Ev extends IO{}function lu(n,e,...t){let i=[];e instanceof IO&&i.push(e),i=i.concat(t),function(s){const o=s.filter(l=>l instanceof ug).length,a=s.filter(l=>l instanceof bv).length;if(o>1||o>0&&a>0)throw new te(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class bv extends Ev{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new bv(e,t,i)}_apply(e){const t=this._parse(e);return VW(e._query,t),new pr(e.firestore,e.converter,Nx(e._query,t))}_parse(e){const t=Kd(e.firestore);return function(s,o,a,l,u,h,g){let m;if(u.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new te(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){LW(g,h);const y=[];for(const E of g)y.push(FW(l,s,E));m={arrayValue:{values:y}}}else m=FW(l,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||LW(g,h),m=NW(a,"where",g,"in"===h||"not-in"===h);return Mt.create(u,h,m)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ug extends IO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ug(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)VW(o,l),o=Nx(o,l)}(e._query,t),new pr(e.firestore,e.converter,Nx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class TO extends Ev{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new TO(e,t)}_apply(e){const t=function(r,s,o){if(null!==r.startAt)throw new te(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new te(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gy(s,o)}(e._query,this._field,this._direction);return new pr(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Ol(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class RT extends Ev{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new RT(e,t,i)}_apply(e){return new pr(e.firestore,e.converter,ZI(e._query,this._limit,this._limitType))}}class NT extends Ev{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new NT(e,t,i)}_apply(e){const t=kW(e,this.type,this._docOrFields,this._inclusive);return new pr(e.firestore,e.converter,(s=t,new Ol((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class xT extends Ev{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new xT(e,t,i)}_apply(e){const t=kW(e,this.type,this._docOrFields,this._inclusive);return new pr(e.firestore,e.converter,(s=t,new Ol((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function kW(n,e,t,i){if(t[0]=(0,b.m9)(t[0]),t[0]instanceof vv)return function(s,o,a,l,u){if(!l)throw new te(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Up(s))if(g.field.isKeyField())h.push(Fd(o,l.key));else{const m=l.data.field(g.field);if(HI(m))throw new te(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=g.field.canonicalString();throw new te(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new tu(h,u)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Kd(n.firestore);return function(o,a,l,u,h,g){const m=o.explicitOrderBy;if(h.length>m.length)throw new te(U.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<h.length;E++){const w=h[E];if(m[E].field.isKeyField()){if("string"!=typeof w)throw new te(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof w}`);if(!Rx(o)&&-1!==w.indexOf("/"))throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${w}' contains a slash.`);const I=o.path.child(Ut.fromString(w));if(!Ie.isDocumentKey(I))throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const O=new Ie(I);y.push(Fd(a,O))}else{const I=NW(l,u,w);y.push(I)}}return new tu(y,g)}(n._query,n.firestore._databaseId,r,e,t,i)}}function FW(n,e,t){if("string"==typeof(t=(0,b.m9)(t))){if(""===t)throw new te(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rx(e)&&-1!==t.indexOf("/"))throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ut.fromString(t));if(!Ie.isDocumentKey(i))throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Fd(n,new Ie(i))}if(t instanceof kn)return Fd(n,t._key);throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bT(t)}.`)}function LW(n,e){if(!Array.isArray(n)||0===n.length)throw new te(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VW(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new te(U.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CO{convertValue(e,t="none"){switch(Xc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Zc(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new IT(ri(e.latitude),ri(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=$I(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Uy(e));default:return null}}convertTimestamp(e){const t=Yc(e);return new jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ut.fromString(e);Oe(Jz(i));const r=new Qc(i.get(1),i.get(3)),s=new Ie(i.popFirst(5));return r.isEqual(t)||fi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function PT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class j0e extends CO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}class Yd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bl extends vv{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(AT("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class wv extends Bl{data(e={}){return super.data(e)}}class cu{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Yd(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new wv(this._firestore,this._userDataWriter,i.key,i,new Yd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new wv(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Yd(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new wv(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Yd(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:$0e(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $0e(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}function UW(n,e){return n instanceof Bl&&e instanceof Bl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof cu&&e instanceof cu&&n._firestore===e._firestore&&_O(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class uu extends CO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function jW(n,e,t){n=Nt(n,kn);const i=Nt(n.firestore,Cn),r=PT(n.converter,e,t);return dg(i,[CT(Kd(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Hn.none())])}function HW(n,e,t,...i){n=Nt(n,kn);const r=Nt(n.firestore,Cn),s=Kd(r);let o;return o="string"==typeof(e=(0,b.m9)(e))||e instanceof Vl?bO(s,"updateDoc",n._key,e,t,i):EO(s,"updateDoc",n._key,e),dg(r,[o.toMutation(n._key,Hn.exists(!0))])}function $W(n,...e){var t,i,r;n=(0,b.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||yO(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(yO(e[o])){const g=e[o];e[o]=null===(t=g.next)||void 0===t?void 0:t.bind(g),e[o+1]=null===(i=g.error)||void 0===i?void 0:i.bind(g),e[o+2]=null===(r=g.complete)||void 0===r?void 0:r.bind(g)}let l,u,h;if(n instanceof kn)u=Nt(n.firestore,Cn),h=Bp(n._key.path),l={next:g=>{e[o]&&e[o](DO(u,n,g))},error:e[o+1],complete:e[o+2]};else{const g=Nt(n,pr);u=Nt(g.firestore,Cn),h=g._query;const m=new uu(u);l={next:y=>{e[o]&&e[o](new cu(u,m,g,y))},error:e[o+1],complete:e[o+2]},MW(n._query)}return function(m,y,E,w){const I=new yT(w),O=new kP(y,I,E);return m.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return NP(yield cg(m),O)})),()=>{I.Na(),m.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return PP(yield cg(m),O)}))}}(si(u),h,a,l)}function dg(n,e){return function(i,r){const s=new Mi;return i.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function kve(n,e,t){return UP.apply(this,arguments)}(yield pO(i),r,s)})),s.promise}(si(n),e)}function DO(n,e,t){const i=t.docs.get(e._key),r=new uu(n);return new Bl(n,r,e._key,i,new Yd(t.hasPendingWrites,t.fromCache),e.converter)}const aEe={maxAttempts:5};class GW{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kd(e)}set(e,t,i){this._verifyNotCommitted();const r=du(e,this._firestore),s=PT(r.converter,t,i),o=CT(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,Hn.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=du(e,this._firestore);let o;return o="string"==typeof(t=(0,b.m9)(t))||t instanceof Vl?bO(this._dataReader,"WriteBatch.update",s._key,t,i,r):EO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=du(e,this._firestore);return this._mutations=this._mutations.concat(new zp(t._key,Hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function du(n,e){if((n=(0,b.m9)(n)).firestore!==e)throw new te(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class lEe extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=Kd(t)}get(t){const i=du(t,this._firestore),r=new j0e(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||1!==s.length)return Re();const o=s[0];if(o.isFoundDocument())return new vv(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new vv(this._firestore,r,i._key,null,i.converter);throw Re()})}set(t,i,r){const s=du(t,this._firestore),o=PT(s.converter,i,r),a=CT(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,r);return this._transaction.set(s._key,a),this}update(t,i,r,...s){const o=du(t,this._firestore);let a;return a="string"==typeof(i=(0,b.m9)(i))||i instanceof Vl?bO(this._dataReader,"Transaction.update",o._key,i,r,s):EO(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(t){const i=du(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=du(e,this._firestore),i=new uu(this._firestore);return super.get(e).then(r=>new Bl(this._firestore,i,t._key,r._document,new Yd(!1,!1),t.converter))}}function AO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KW(){if(typeof Uint8Array>"u")throw new te("unimplemented","Uint8Arrays are not available in this environment.")}function ZW(){if(!function j_e(){return typeof atob<"u"}())throw new te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){xp=ps.SDK_VERSION,(0,ps._registerComponent)(new Bo.wA("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Cn(new d_e(i.getProvider("auth-internal")),new p_e(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new te(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qc(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(C8,"4.4.0",e),(0,ps.registerVersion)(C8,"4.4.0","esm2017")}();class Iv{constructor(e){this._delegate=e}static fromBase64String(e){return ZW(),new Iv(Ba.fromBase64String(e))}static fromUint8Array(e){return KW(),new Iv(Ba.fromUint8Array(e))}toBase64(){return ZW(),this._delegate.toBase64()}toUint8Array(){return KW(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function RO(n){return function yEe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class vEe{enableIndexedDbPersistence(e,t){return function m0e(n,e){DW(n=Nt(n,Cn));const t=si(n);if(t._uninitializedComponentsProvider)throw new te(U.FAILED_PRECONDITION,"SDK cache is already specified.");bs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new ag;return CW(t,r,new aO(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _0e(n){DW(n=Nt(n,Cn));const e=si(n);if(e._uninitializedComponentsProvider)throw new te(U.FAILED_PRECONDITION,"SDK cache is already specified.");bs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new ag;return CW(e,i,new oW(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function y0e(n){if(n._initialized&&!n._terminated)throw new te(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,K.Z)(function*(){try{yield(t=(0,K.Z)(function*(r){if(!Zo.D())return Promise.resolve();const s=r+"main";yield Zo.delete(s)}),function i(r){return t.apply(this,arguments)})(Xx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class YW{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function bW(n,e,t,i={}){var r;const s=(n=Nt(n,gv))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=qi.MOCK_USER;else{a=(0,b.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new te(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new qi(u)}n._authCredentials=new u_e(new D8(a,l))}}(this._delegate,e,t,i)}enableNetwork(){return function E0e(n){return function n0e(n){return n.asyncQueue.enqueue((0,K.Z)(function*(){const e=yield cW(n),t=yield uW(n);return e.setNetworkEnabled(!0),function(r){const s=we(r);return s.C_.delete(0),hv(s)}(t)}))}(si(n=Nt(n,Cn)))}(this._delegate)}disableNetwork(){return function b0e(n){return function i0e(n){return n.asyncQueue.enqueue((0,K.Z)(function*(){const e=yield cW(n),t=yield uW(n);return e.setNetworkEnabled(!1),(i=(0,K.Z)(function*(s){const o=we(s);o.C_.add(0),yield eg(o),o.M_.set("Offline")}),function r(s){return i.apply(this,arguments)})(t);var i}))}(si(n=Nt(n,Cn)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,mW("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function v0e(n){return function(t){const i=new Mi;return t.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function Bve(n,e){return zP.apply(this,arguments)}(yield pO(t),i)})),i.promise}(si(n=Nt(n,Cn)))}(this._delegate)}onSnapshotsInSync(e){return function J0e(n,e){return function o0e(n,e){const t=new yT(e);return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return r=yield cg(n),s=t,we(r).q_.add(s),void s.next();var r,s})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return r=yield cg(n),s=t,void we(r).q_.delete(s);var r,s}))}}(si(n=Nt(n,Cn)),yO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hg(this,wW(this._delegate,e))}catch(t){throw Gr(t,"collection()","Firestore.collection()")}}doc(e){try{return new mo(this,wT(this._delegate,e))}catch(t){throw Gr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zr(this,function h0e(n,e){if(n=Nt(n,gv),mO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new te(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new pr(n,null,(i=e,new Ol(Ut.emptyPath(),i)));var i}(this._delegate,e))}catch(t){throw Gr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cEe(n,e,t){n=Nt(n,Cn);const i=Object.assign(Object.assign({},aEe),t);return function(s){if(s.maxAttempts<1)throw new te(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new Mi;return s.asyncQueue.enqueueAndForget((0,K.Z)(function*(){const u=yield function dW(n){return ET(n).then(e=>e.datastore)}(s);new e0e(s.asyncQueue,u,a,o,l).run()})),l.promise}(si(n),r=>e(new lEe(n,r)),i)}(this._delegate,t=>e(new QW(this,t)))}batch(){return si(this._delegate),new JW(new GW(this._delegate,e=>dg(this._delegate,e)))}loadBundle(e){return function w0e(n,e){const t=si(n=Nt(n,Cn)),i=new p0e;return function a0e(n,e,t,i){const r=function(o,a){let l;return l="string"==typeof o?Mz().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return aW(h,g);if(h instanceof ArrayBuffer)return aW(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new Jve(h,a);var h}(t,dv(e));n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){!function Yve(n,e,t){const i=we(n);var r;(r=(0,K.Z)(function*(o,a,l){try{const u=yield a.getMetadata();if(yield function(E,w){const I=we(E),O=pi(w.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",S=>I.Kr.getBundleMetadata(S,w.id)).then(S=>!!S&&S.createTime.compareTo(O)>=0)}(o.localStore,u))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(E=u).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);l._updateProgress(Q5(u));const h=new Rve(u,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield h.ea(g);y&&l._updateProgress(y),g=yield a.Ma()}const m=yield h.complete();return yield Ll(o,m.ra,void 0),yield function(E,w){const I=we(E);return I.persistence.runTransaction("Save bundle","readwrite",O=>I.Kr.saveBundleMetadata(O,w))}(o.localStore,u),l._completeWith(m.progress),Promise.resolve(m.na)}catch(u){return bs("SyncEngine",`Loading bundle failed with ${u}`),l._failWith(u),Promise.resolve(new Set)}var E}),function s(o,a,l){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield pO(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function I0e(n,e){return function l0e(n,e){return n.asyncQueue.enqueue((0,K.Z)(function*(){return function(i,r){const s=we(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,r))}(yield lg(n),e)}))}(si(n=Nt(n,Cn)),e).then(t=>t?new pr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new zr(this,t):null)}}class MT extends CO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iv(new Ba(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return mo.forKey(t,this.firestore,null)}}class QW{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new MT(e)}get(e){const t=Jd(e);return this._delegate.get(t).then(i=>new Tv(this._firestore,new Bl(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Jd(e);return i?(AO("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Jd(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Jd(e);return this._delegate.delete(t),this}}class JW{constructor(e){this._delegate=e}set(e,t,i){const r=Jd(e);return i?(AO("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Jd(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Jd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qd{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new wv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cv(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Qd.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Qd(e,new MT(e),t),r.set(t,s)),s}}Qd.INSTANCES=new WeakMap;class mo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MT(e)}static forPath(e,t,i){if(e.length%2!=0)throw new te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new mo(t,new kn(t._delegate,i,new Ie(e)))}static forKey(e,t,i){return new mo(t,new kn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new hg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hg(this.firestore,wW(this._delegate,e))}catch(t){throw Gr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,b.m9)(e))instanceof kn&&IW(this._delegate,e)}set(e,t){t=AO("DocumentReference.set",t);try{return t?jW(this._delegate,e,t):jW(this._delegate,e)}catch(i){throw Gr(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?HW(this._delegate,e):HW(this._delegate,e,t,...i)}catch(r){throw Gr(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Y0e(n){return dg(Nt(n.firestore,Cn),[new zp(n._key,Hn.none())])}(this._delegate)}onSnapshot(...e){const t=XW(e),i=e6(e,r=>new Tv(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return $W(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function z0e(n){n=Nt(n,kn);const e=Nt(n.firestore,Cn),t=si(e),i=new uu(e);return function r0e(n,e){const t=new Mi;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return(i=(0,K.Z)(function*(s,o,a){try{const l=yield function(h,g){const m=we(h);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,g))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new te(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const u=ig(l,`Failed to get document '${o} from cache`);a.reject(u)}}),function r(s,o,a){return i.apply(this,arguments)})(yield lg(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Bl(e,i,n._key,r,new Yd(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function W0e(n){n=Nt(n,kn);const e=Nt(n.firestore,Cn);return hW(si(e),n._key,{source:"server"}).then(t=>DO(e,n,t))}(this._delegate):function G0e(n){n=Nt(n,kn);const e=Nt(n.firestore,Cn);return hW(si(e),n._key).then(t=>DO(e,n,t))}(this._delegate),t.then(i=>new Tv(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new mo(this.firestore,this._delegate.withConverter(e?Qd.getInstance(this.firestore,e):null))}}function Gr(n,e,t){return n.message=n.message.replace(e,t),n}function XW(n){for(const e of n)if("object"==typeof e&&!RO(e))return e;return{}}function e6(n,e){var t,i;let r;return r=RO(n[0])?n[0]:RO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Tv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new mo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return UW(this._delegate,e._delegate)}}class Cv extends Tv{data(e){const t=this._delegate.data(e);return this._delegate._converter||function l_e(n,e){n||Re()}(void 0!==t),t}}class zr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MT(e)}where(e,t,i){try{return new zr(this.firestore,lu(this._delegate,function O0e(n,e,t){const i=e,r=AT("where",n);return bv._create(r,i,t)}(e,t,i)))}catch(r){throw Gr(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zr(this.firestore,lu(this._delegate,function M0e(n,e="asc"){const t=e,i=AT("orderBy",n);return TO._create(i,t)}(e,t)))}catch(i){throw Gr(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zr(this.firestore,lu(this._delegate,function k0e(n){return vW("limit",n),RT._create("limit",n,"F")}(e)))}catch(t){throw Gr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new zr(this.firestore,lu(this._delegate,function F0e(n){return vW("limitToLast",n),RT._create("limitToLast",n,"L")}(e)))}catch(t){throw Gr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zr(this.firestore,lu(this._delegate,function L0e(...n){return NT._create("startAt",n,!0)}(...e)))}catch(t){throw Gr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zr(this.firestore,lu(this._delegate,function V0e(...n){return NT._create("startAfter",n,!1)}(...e)))}catch(t){throw Gr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zr(this.firestore,lu(this._delegate,function B0e(...n){return xT._create("endBefore",n,!1)}(...e)))}catch(t){throw Gr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zr(this.firestore,lu(this._delegate,function U0e(...n){return xT._create("endAt",n,!0)}(...e)))}catch(t){throw Gr(t,"endAt()","Query.endAt()")}}isEqual(e){return _O(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function K0e(n){n=Nt(n,pr);const e=Nt(n.firestore,Cn),t=si(e),i=new uu(e);return function s0e(n,e){const t=new Mi;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return(i=(0,K.Z)(function*(s,o,a){try{const l=yield dT(s,o,!0),u=new eW(o,l.ls),h=u.ca(l.documents),g=u.applyChanges(h,!1);a.resolve(g.snapshot)}catch(l){const u=ig(l,`Failed to execute query '${o} against cache`);a.reject(u)}}),function r(s,o,a){return i.apply(this,arguments)})(yield lg(n),e,t);var i})),t.promise}(t,n._query).then(r=>new cu(e,i,n,r))}(this._delegate):"server"===e?.source?function Z0e(n){n=Nt(n,pr);const e=Nt(n.firestore,Cn),t=si(e),i=new uu(e);return fW(t,n._query,{source:"server"}).then(r=>new cu(e,i,n,r))}(this._delegate):function q0e(n){n=Nt(n,pr);const e=Nt(n.firestore,Cn),t=si(e),i=new uu(e);return MW(n._query),fW(t,n._query).then(r=>new cu(e,i,n,r))}(this._delegate),t.then(i=>new NO(this.firestore,new cu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=XW(e),i=e6(e,r=>new NO(this.firestore,new cu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return $W(this._delegate,t,i)}withConverter(e){return new zr(this.firestore,this._delegate.withConverter(e?Qd.getInstance(this.firestore,e):null))}}class bEe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Cv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class NO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bEe(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Cv(this._firestore,i))})}isEqual(e){return UW(this._delegate,e._delegate)}}class hg extends zr{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new mo(this.firestore,e):null}doc(e){try{return new mo(this.firestore,void 0===e?wT(this._delegate):wT(this._delegate,e))}catch(t){throw Gr(t,"doc()","CollectionReference.doc()")}}add(e){return function Q0e(n,e){const t=Nt(n.firestore,Cn),i=wT(n),r=PT(n.converter,e);return dg(t,[CT(Kd(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Hn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new mo(this.firestore,t))}isEqual(e){return IW(this._delegate,e._delegate)}withConverter(e){return new hg(this.firestore,this._delegate.withConverter(e?Qd.getInstance(this.firestore,e):null))}}function Jd(n){return Nt(n,kn)}class xO{constructor(...e){this._delegate=new Vl(...e)}static documentId(){return new xO(On.keyField().canonicalString())}isEqual(e){return(e=(0,b.m9)(e))instanceof Vl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dEe(){return new vO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xd(e)}static delete(){const e=function uEe(){return new _v("deleteField")}();return e._methodName="FieldValue.delete",new Xd(e)}static arrayUnion(...e){const t=function hEe(...n){return new A0e("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xd(t)}static arrayRemove(...e){const t=function fEe(...n){return new R0e("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xd(t)}static increment(e){const t=function pEe(n){return new N0e("increment",n)}(e);return t._methodName="FieldValue.increment",new Xd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wEe={Firestore:YW,GeoPoint:IT,Timestamp:jn,Blob:Iv,Transaction:QW,WriteBatch:JW,DocumentReference:mo,DocumentSnapshot:Tv,Query:zr,QueryDocumentSnapshot:Cv,QuerySnapshot:NO,CollectionReference:hg,FieldPath:xO,FieldValue:Xd,setLogLevel:function EEe(n){!function a_e(n){Wc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function t6(n,e){return function CEe(n,e=$b){return new je(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function PO(n,e){return t6(n,e).pipe(Ne(t=>({payload:t,type:"query"})))}!function TEe(n){(function IEe(n,e){n.INTERNAL.registerComponent(new Bo.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},wEe)))})(n,(e,t)=>new YW(e,t,new vEe)),n.registerVersion("@firebase/firestore-compat","0.3.23")}(co.Z);class n6{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=l6(i,t);return new s6(r,s,this.afs)}snapshotChanges(){return function DEe(n,e){return t6(n,e).pipe(Vf(void 0),AN(),Ne(t=>{const[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hi)}valueChanges(e={}){return this.snapshotChanges().pipe(Ne(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return x(this.ref.get(e)).pipe(hi)}}function kT(n,e){return PO(n,e).pipe(Vf(void 0),AN(),Ne(t=>{const[i,r]=t,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{const u=s.find(g=>g.doc.ref.isEqual(a.ref)),h=i?.payload.docs.find(g=>g.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function i6(n,e,t){return kT(n,t).pipe(Uf((i,r)=>function SEe(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function AEe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return OO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return OO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return OO(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Eo(),Ne(i=>i.map(r=>({type:r.type,payload:r}))))}function OO(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function r6(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class s6{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=kT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ne(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Vf(void 0),AN(),di(([i,r])=>r.length>0||!i),Ne(([,i])=>i),hi)}auditTrail(e){return this.stateChanges(e).pipe(Uf((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=r6(e);return i6(this.query,t,this.afs.schedulers.outsideAngular).pipe(hi)}valueChanges(e={}){return PO(this.query,this.afs.schedulers.outsideAngular).pipe(Ne(t=>t.payload.docs.map(i=>e.idField?{...i.data(),[e.idField]:i.id}:i.data())),hi)}get(e){return x(this.query.get(e)).pipe(hi)}add(e){return this.ref.add(e)}doc(e){return new n6(this.ref.doc(e),this.afs)}}class REe{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kT(this.query,this.afs.schedulers.outsideAngular).pipe(Ne(t=>t.filter(i=>e.indexOf(i.type)>-1)),di(t=>t.length>0),hi):kT(this.query,this.afs.schedulers.outsideAngular).pipe(hi)}auditTrail(e){return this.stateChanges(e).pipe(Uf((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=r6(e);return i6(this.query,t,this.afs.schedulers.outsideAngular).pipe(hi)}valueChanges(e={}){return PO(this.query,this.afs.schedulers.outsideAngular).pipe(Ne(i=>i.payload.docs.map(r=>e.idField?{[e.idField]:r.id,...r.data()}:r.data())),hi)}get(e){return x(this.query.get(e)).pipe(hi)}}const o6=new ve("angularfire2.enableFirestorePersistence"),a6=new ve("angularfire2.firestore.persistenceSettings"),NEe=new ve("angularfire2.firestore.settings"),xEe=new ve("angularfire2.firestore.use-emulator");function l6(n,e=(t=>t)){return{query:e(n),ref:n}}let PEe=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,s,o,a,l,u,h,g,m,y,E,w,I,O,S){this.schedulers=l;const k=E_(t,a,i),L=h;g&&mA(k,a,m,E,w,I,y,O),[this.firestore,this.persistenceEnabled$]=Qb(`${k.name}.firestore`,"AngularFirestore",k.name,()=>{const Y=a.runOutsideAngular(()=>k.firestore());if(s&&Y.settings(s),L&&Y.useEmulator(...L),r&&!yb(o)){const ye=()=>{try{return x(Y.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(Me){return typeof console<"u"&&console.warn(Me),Ee(!1)}};return[Y,a.runOutsideAngular(ye)]}return[Y,Ee(!1)]},[s,L,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=l6(r,i),a=this.schedulers.ngZone.run(()=>s);return new s6(a,o,this)}collectionGroup(t,i){const r=i||(o=>o),s=this.firestore.collectionGroup(t);return new REe(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new n6(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(W(Xf),W(ep,8),W(o6,8),W(NEe,8),W(No),W(ot),W(Yb),W(a6,8),W(xEe,8),W(_A,8),W(uA,8),W(dA,8),W(hA,8),W(fA,8),W(pA,8),W(gA,8),W(Zb,8))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),OEe=(()=>{class n{constructor(){co.Z.registerVersion("angularfire",v_.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:o6,useValue:!0},{provide:a6,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=It({type:n});static \u0275inj=mt({providers:[PEe]})}return n})();const c6="firebasestorage.googleapis.com",u6="storageBucket";class Qn extends b.ZR{constructor(e,t,i=0){super(MO(e),`Firebase Storage: ${t} (${MO(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return MO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var $n=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}($n||{});function MO(n){return"storage/"+n}function kO(){return new Qn($n.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function d6(){return new Qn($n.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function h6(){return new Qn($n.CANCELED,"User canceled the upload/download.")}function f6(){return new Qn($n.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fg(n){return new Qn($n.INVALID_ARGUMENT,n)}function p6(){return new Qn($n.APP_DELETED,"The Firebase app was deleted.")}function g6(n){return new Qn($n.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dv(n,e){return new Qn($n.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Sv(n){throw new Qn($n.INTERNAL_ERROR,"Internal error: "+n)}class Rr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Rr.makeFromUrl(e,t)}catch{return new Rr(e,"")}if(""===i.path)return i;throw function $Ee(n){return new Qn($n.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+r+"(/(.*))?$","i");function u(L){L.path_=decodeURIComponent(L.path)}const g=t.replace(/[.]/g,"\\."),k=[{regex:a,indices:{bucket:1,path:3},postModify:function s(L){"/"===L.path.charAt(L.path.length-1)&&(L.path_=L.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${g}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:u},{regex:new RegExp(`^https?://${t===c6?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:u}];for(let L=0;L<k.length;L++){const Y=k[L],ye=Y.regex.exec(e);if(ye){let Ge=ye[Y.indices.path];Ge||(Ge=""),i=new Rr(ye[Y.indices.bucket],Ge),Y.postModify(i);break}}if(null==i)throw function HEe(n){return new Qn($n.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return i}}class KEe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function FT(n){return"string"==typeof n||n instanceof String}function m6(n){return FO()&&n instanceof Blob}function FO(){return typeof Blob<"u"}function LO(n,e,t,i){if(i<e)throw fg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw fg(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ul(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function _6(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var pg=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(pg||{});function y6(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||r||s}class ebe{constructor(e,t,i,r,s,o,a,l,u,h,g,m=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=g,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,E)=>{this.resolve_=y,this.reject_=E,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function QEe(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=kO();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(r.canceled?this.appDelete_?p6():h6():d6())};this.canceled_?t(0,new LT(!1,null,!0)):this.backoffId_=function ZEe(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let u=!1;function h(...I){u||(u=!0,e.apply(null,I))}function g(I){r=setTimeout(()=>{r=null,n(y,l())},I)}function m(){s&&clearTimeout(s)}function y(I,...O){if(u)return void m();if(I)return m(),void h.call(null,I,...O);if(l()||o)return m(),void h.call(null,I,...O);let k;i<64&&(i*=2),1===a?(a=2,k=0):k=1e3*(i+Math.random()),g(k)}let E=!1;function w(I){E||(E=!0,m(),!u&&(null!==r?(I||(a=2),clearTimeout(r),g(0)):I||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,w(!0)},t),w}((i,r)=>{if(r)return void i(!1,new LT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===pg.NO_ERROR,l=s.getStatus();if(!a||y6(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===pg.ABORT;return void i(!1,new LT(!1,null,h))}const u=-1!==this.successCodes_.indexOf(l);i(!0,new LT(u,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function YEe(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class LT{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function abe(...n){const e=function obe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(FO())return new Blob(n);throw new Qn($n.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const zs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class VO{constructor(e,t){this.data=e,this.contentType=t||null}}function BO(n,e){switch(n){case zs.RAW:return new VO(v6(e));case zs.BASE64:case zs.BASE64URL:return new VO(E6(n,e));case zs.DATA_URL:return new VO(function dbe(n){const e=new b6(n);return e.base64?E6(zs.BASE64,e.rest):function ube(n){let e;try{e=decodeURIComponent(n)}catch{throw Dv(zs.DATA_URL,"Malformed data URL.")}return v6(e)}(e.rest)}(e),function hbe(n){return new b6(n).contentType}(e))}throw kO()}function v6(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function E6(n,e){switch(n){case zs.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw Dv(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case zs.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw Dv(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function cbe(n){if(typeof atob>"u")throw function qEe(n){return new Qn($n.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(r){throw r.message.includes("polyfill")?r:Dv(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class b6{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Dv(zs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function fbe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class Ua{constructor(e,t){let i=0,r="";m6(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(m6(this.data_)){const r=function lbe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new Ua(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ua(i,!0)}}static getBlob(...e){if(FO()){const t=e.map(i=>i instanceof Ua?i.data_:i);return new Ua(abe.apply(null,t))}{const t=e.map(o=>FT(o)?BO(zs.RAW,o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Ua(r,!0)}}uploadData(){return this.data_}}function UO(n){let e;try{e=JSON.parse(n)}catch{return null}return function XEe(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function w6(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function mbe(n,e){return e}class Wr{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||mbe}}let VT=null;function Av(){if(VT)return VT;const n=[];n.push(new Wr("bucket")),n.push(new Wr("generation")),n.push(new Wr("metageneration")),n.push(new Wr("name","fullPath",!0));const t=new Wr("name");t.xform=function e(s,o){return function _be(n){return!FT(n)||n.length<2?n:w6(n)}(o)},n.push(t);const r=new Wr("size");return r.xform=function i(s,o){return void 0!==o?Number(o):o},n.push(r),n.push(new Wr("timeCreated")),n.push(new Wr("updated")),n.push(new Wr("md5Hash",null,!0)),n.push(new Wr("cacheControl",null,!0)),n.push(new Wr("contentDisposition",null,!0)),n.push(new Wr("contentEncoding",null,!0)),n.push(new Wr("contentLanguage",null,!0)),n.push(new Wr("contentType",null,!0)),n.push(new Wr("metadata","customMetadata",!0)),VT=n,VT}function I6(n,e,t){const i=UO(e);return null===i?null:function vbe(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const o=t[s];i[o.local]=o.xform(i,e[o.server])}return function ybe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Rr(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function jO(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const T6="prefixes",C6="items";class ja{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ha(n){if(!n)throw kO()}function BT(n,e){return function t(i,r){const s=I6(n,r,e);return Ha(null!==s),s}}function gg(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function UEe(){return new Qn($n.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function BEe(){return new Qn($n.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function VEe(n){return new Qn($n.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function jEe(n){return new Qn($n.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function Rv(n){const e=gg(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function LEe(n){return new Qn($n.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function D6(n,e,t){const r=Ul(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ja(r,"GET",BT(n,t),o);return a.errorHandler=Rv(e),a}function Cbe(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=Ul(e.bucketOnlyServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new ja(a,"GET",function Ibe(n,e){return function t(i,r){const s=function wbe(n,e,t){const i=UO(t);return null===i?null:function bbe(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[T6])for(const r of t[T6]){const s=r.replace(/\/$/,""),o=n._makeStorageReference(new Rr(e,s));i.prefixes.push(o)}if(t[C6])for(const r of t[C6]){const s=n._makeStorageReference(new Rr(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return Ha(null!==s),s}}(n,e.bucket),u);return h.urlParams=s,h.errorHandler=gg(e),h}function A6(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function Rbe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class UT{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function HO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ha(!1)}return Ha(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Obe={STATE_CHANGED:"state_changed"},qr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $O(n){switch(n){case"running":case"pausing":case"canceling":return qr.RUNNING;case"paused":return qr.PAUSED;case"success":return qr.SUCCESS;case"canceled":return qr.CANCELED;default:return qr.ERROR}}class Mbe{constructor(e,t,i){if(function JEe(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function mg(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let x6=null;class kbe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pg.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pg.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pg.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw Sv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Sv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Sv("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Sv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Sv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Fbe extends kbe{initXhr(){this.xhr_.responseType="text"}}function Yo(){return x6?x6():new Fbe}class P6{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Av(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals($n.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(y6(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=d6()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals($n.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function Nbe(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o=A6(e,i,r),a={name:o.fullPath},l=Ul(s,n.host,n._protocol),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},g=jO(o,t),E=new ja(l,"POST",function y(w){let I;HO(w);try{I=w.getResponseHeader("X-Goog-Upload-URL")}catch{Ha(!1)}return Ha(FT(I)),I},n.maxUploadRetryTime);return E.urlParams=a,E.headers=h,E.body=g,E.errorHandler=gg(e),E}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Yo,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function xbe(n,e,t,i){const l=new ja(t,"POST",function s(u){const h=HO(u,["active","final"]);let g=null;try{g=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ha(!1)}g||Ha(!1);const m=Number(g);return Ha(!isNaN(m)),new UT(m,i.size(),"final"===h)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=gg(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Yo,t,i);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new UT(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=function Pbe(n,e,t,i,r,s,o,a){const l=new UT(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function zEe(){return new Qn($n.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const u=l.total-l.current;let h=u;r>0&&(h=Math.min(h,r));const g=l.current;let y="";y=0===h?"finalize":u===h?"upload, finalize":"upload";const E={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${l.current}`},w=i.slice(g,g+h);if(null===w)throw f6();const k=new ja(t,"POST",function I(L,Y){const ye=HO(L,["active","final"]),Me=l.current+h,Ge=i.size();let fn;return fn="final"===ye?BT(e,s)(L,Y):null,new UT(Me,Ge,"final"===ye,fn)},e.maxUploadRetryTime);return k.headers=E,k.body=w.uploadData(),k.progressCallback=a||null,k.errorHandler=gg(n),k}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Yo,r,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=D6(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Yo,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function R6(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let k="";for(let L=0;L<2;L++)k+=Math.random().toString().slice(2);return k}();o["Content-Type"]="multipart/related; boundary="+l;const u=A6(e,i,r),h=jO(u,t),y=Ua.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+l+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===y)throw f6();const E={name:u.fullPath},w=Ul(s,n.host,n._protocol),O=n.maxUploadRetryTime,S=new ja(w,"POST",BT(n,t),O);return S.urlParams=E,S.headers=o,S.body=y.uploadData(),S.errorHandler=gg(e),S}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Yo,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=h6(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=$O(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new Mbe(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch($O(this._state)){case qr.SUCCESS:mg(this._resolve.bind(null,this.snapshot))();break;case qr.CANCELED:case qr.ERROR:mg(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($O(this._state)){case qr.RUNNING:case qr.PAUSED:e.next&&mg(e.next.bind(e,this.snapshot))();break;case qr.SUCCESS:e.complete&&mg(e.complete.bind(e))();break;default:e.error&&mg(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class eh{constructor(e,t){this._service=e,this._location=t instanceof Rr?t:Rr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new eh(e,t)}get root(){const e=new Rr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return w6(this._location.path)}get storage(){return this._service}get parent(){const e=function pbe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Rr(this._location.bucket,e);return new eh(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw g6(e)}}function M6(n,e,t){return GO.apply(this,arguments)}function GO(){return GO=(0,K.Z)(function*(n,e,t){const r=yield k6(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield M6(n,e,r.nextPageToken))}),GO.apply(this,arguments)}function k6(n,e){null!=e&&"number"==typeof e.maxResults&&LO("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=Cbe(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,Yo)}function Kbe(n){n._throwIfRoot("getDownloadURL");const e=function Dbe(n,e,t){const r=Ul(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ja(r,"GET",function Tbe(n,e){return function t(i,r){const s=I6(n,r,e);return Ha(null!==s),function Ebe(n,e,t,i){const r=UO(e);if(null===r||!FT(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const g=n.fullPath;return Ul("/b/"+o(n.bucket)+"/o/"+o(g),t,i)+_6({alt:"media",token:u})})[0]}(s,r,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Rv(e),a}(n.storage,n._location,Av());return n.storage.makeRequestWithTokens(e,Yo).then(t=>{if(null===t)throw function WEe(){return new Qn($n.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function F6(n,e){const t=function gbe(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Rr(n._location.bucket,t);return new eh(n.storage,i)}function L6(n,e){if(n instanceof zO){const t=n;if(null==t._bucket)throw function GEe(){return new Qn($n.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+u6+"' property when initializing the app?")}();const i=new eh(t,t._bucket);return null!=e?L6(i,e):i}return void 0!==e?F6(n,e):n}function Jbe(n,e){if(e&&function Ybe(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof zO)return function Qbe(n,e){return new eh(n,e)}(n,e);throw fg("To use ref(service, url), the first argument must be a Storage instance.")}return L6(n,e)}function V6(n,e){const t=e?.[u6];return null==t?null:Rr.makeFromBucketSpec(t,n)}class zO{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=c6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Rr.makeFromBucketSpec(r,this._host):V6(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Rr.makeFromBucketSpec(this._url,e):V6(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,K.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,K.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eh(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new KEe(p6());{const o=function sbe(n,e,t,i,r,s,o=!0){const a=_6(n.urlParams),l=n.url+a,u=Object.assign({},n.headers);return function ibe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(u,e),function tbe(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(u,t),function nbe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(u,s),function rbe(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(u,i),new ebe(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var i=this;return(0,K.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const B6="@firebase/storage";function H6(n,e){return Jbe(n=(0,b.m9)(n),e)}function lwe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new zO(t,i,r,e,ps.SDK_VERSION)}!function cwe(){(0,ps._registerComponent)(new Bo.wA("storage",lwe,"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(B6,"0.12.0",""),(0,ps.registerVersion)(B6,"0.12.0","esm2017")}();class jT{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class G6{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new jT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new jT(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?o=>t(new jT(o,this,this._ref)):{next:t.next?o=>t.next(new jT(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class z6{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new jl(e,this._service))}get items(){return this._delegate.items.map(e=>new jl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function awe(n,e){return F6(n,e)}(this._delegate,e);return new jl(t,this.storage)}get root(){return new jl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new jl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new G6(function ewe(n,e,t){return function $be(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new P6(n,new Ua(e),t)}(n=(0,b.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=zs.RAW,i){this._throwIfRoot("putString");const r=BO(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new G6(new P6(this._delegate,new Ua(r.data,!0),s),this)}listAll(){return function rwe(n){return function zbe(n){const e={prefixes:[],items:[]};return M6(n,e).then(()=>e)}(n=(0,b.m9)(n))}(this._delegate).then(e=>new z6(e,this.storage))}list(e){return function iwe(n,e){return k6(n=(0,b.m9)(n),e)}(this._delegate,e||void 0).then(t=>new z6(t,this.storage))}getMetadata(){return function twe(n){return function Wbe(n){n._throwIfRoot("getMetadata");const e=D6(n.storage,n._location,Av());return n.storage.makeRequestWithTokens(e,Yo)}(n=(0,b.m9)(n))}(this._delegate)}updateMetadata(e){return function nwe(n,e){return function qbe(n,e){n._throwIfRoot("updateMetadata");const t=function Sbe(n,e,t,i){const s=Ul(e.fullServerUrl(),n.host,n._protocol),a=jO(t,i),u=n.maxOperationRetryTime,h=new ja(s,"PATCH",BT(n,i),u);return h.headers={"Content-Type":"application/json; charset=utf-8"},h.body=a,h.errorHandler=Rv(e),h}(n.storage,n._location,e,Av());return n.storage.makeRequestWithTokens(t,Yo)}(n=(0,b.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function swe(n){return Kbe(n=(0,b.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function owe(n){return function Zbe(n){n._throwIfRoot("deleteObject");const e=function Abe(n,e){const i=Ul(e.fullServerUrl(),n.host,n._protocol),a=new ja(i,"DELETE",function o(l,u){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Rv(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Yo)}(n=(0,b.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw g6(e)}}class W6{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(q6(e))throw fg("ref() expected a child path but got a URL, use refFromURL instead.");return new jl(H6(this._delegate,e),this)}refFromURL(e){if(!q6(e))throw fg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rr.makeFromUrl(e,this._delegate.host)}catch{throw fg("refFromUrl() expected a valid full URL but got an invalid one.")}return new jl(H6(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function $6(n,e,t,i={}){!function Xbe(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,b.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function q6(n){return/^[A-Za-z]+:\/\//.test(n)}function fwe(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new W6(t,i)}function K6(n){const e=function gwe(n){return new je(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(X4(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Ne(t=>t.bytesTransferred/t.totalBytes*100))}}function HT(n){return{getDownloadURL:()=>Ee(void 0).pipe(MU,Bt(()=>n.getDownloadURL()),hi),getMetadata:()=>Ee(void 0).pipe(MU,Bt(()=>n.getMetadata()),hi),delete:()=>x(n.delete()),child:e=>HT(n.child(e)),updateMetadata:e=>x(n.updateMetadata(e)),put:(e,t)=>K6(n.put(e,t)),putString:(e,t,i)=>K6(n.putString(e,t,i)),list:e=>x(n.list(e)),listAll:()=>x(n.listAll())}}!function pwe(n){const e={TaskState:qr,TaskEvent:Obe,StringFormat:zs,Storage:W6,Reference:jl};n.INTERNAL.registerComponent(new Bo.wA("storage-compat",fwe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.3")}(co.Z);const mwe=new ve("angularfire2.storageBucket"),_we=new ve("angularfire2.storage.maxUploadRetryTime"),ywe=new ve("angularfire2.storage.maxOperationRetryTime"),vwe=new ve("angularfire2.storage.use-emulator");let Ewe=(()=>{class n{storage;constructor(t,i,r,s,o,a,l,u,h,g){const m=E_(t,o,i);this.storage=Qb(`${m.name}.storage.${r}`,"AngularFireStorage",m.name,()=>{const y=o.runOutsideAngular(()=>m.storage(r||void 0)),E=h;return E&&y.useEmulator(...E),l&&y.setMaxUploadRetryTime(l),u&&y.setMaxOperationRetryTime(u),y},[l,u])}ref(t){return HT(this.storage.ref(t))}refFromURL(t){return HT(this.storage.refFromURL(t))}upload(t,i,r){return HT(this.storage.ref(t)).put(i,r)}static \u0275fac=function(i){return new(i||n)(W(Xf),W(ep,8),W(mwe,8),W(No),W(ot),W(Yb),W(_we,8),W(ywe,8),W(vwe,8),W(Zb,8))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),bwe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=It({type:n});static \u0275inj=mt({})}return n})(),wwe=(()=>{class n{constructor(){co.Z.registerVersion("angularfire",v_.full,"gcs-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=It({type:n});static \u0275inj=mt({providers:[Ewe],imports:[bwe]})}return n})();const Z6_firebase={apiKey:"AIzaSyAKD3R8dMk-YpNi78GsHXvU_Tkhqp9u3XM",authDomain:"please-take-your-turn.firebaseapp.com",projectId:"please-take-your-turn",storageBucket:"please-take-your-turn.appspot.com",messagingSenderId:"386803685699",appId:"1:386803685699:web:63cff6e4163b36a971f7f6",measurementId:"G-9FT9L70K5D"};let Iwe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=It({type:n,bootstrap:[Jge]});static#n=this.\u0275inj=mt({providers:[AR,RR,n$],imports:[jee,kce,Bce,_re.initializeApp(Z6_firebase),Fle,OEe,wwe,J4,Bge,Hie,J4]})}return n})();Bee().bootstrapModule(Iwe).catch(n=>console.error(n))},614:()=>{const Zr=":";const vo=function(x,...M){if(vo.translate){const Q=vo.translate(x,M);x=Q[0],M=Q[1]}let $=na(x[0],x.raw[0]);for(let Q=1;Q<x.length;Q++)$+=M[Q-1]+na(x[Q],x.raw[Q]);return $},za=":";function na(x,M){return M.charAt(0)===za?x.substring(function Qi(x,M){for(let $=1,Q=1;$<x.length;$++,Q++)if("\\"===M[Q])Q++;else if(x[$]===Zr)return $;throw new Error(`Unterminated $localize metadata block in "${M}".`)}(x,M)+1):x}globalThis.$localize=vo},106:(Zr,gi,it)=>{it.d(gi,{Z:()=>zn});var D=it(58),Ve=it(537),j=it(534),ze=it(879);class cn{constructor(ft,Xe){this._delegate=ft,this.firebase=Xe,(0,j._addComponent)(ft,new Ve.wA("app-compat",()=>this,"PUBLIC")),this.container=ft.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ft){this._delegate.automaticDataCollectionEnabled=ft}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ft=>{this._delegate.checkDestroyed(),ft()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(ft,Xe=j._DEFAULT_ENTRY_NAME){var Jn;this._delegate.checkDestroyed();const Fi=this._delegate.container.getProvider(ft);return!Fi.isInitialized()&&"EXPLICIT"===(null===(Jn=Fi.getComponent())||void 0===Jn?void 0:Jn.instantiationMode)&&Fi.initialize(),Fi.getImmediate({identifier:Xe})}_removeServiceInstance(ft,Xe=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ft).clearInstance(Xe)}_addComponent(ft){(0,j._addComponent)(this._delegate,ft)}_addOrOverwriteComponent(ft){(0,j._addOrOverwriteComponent)(this._delegate,ft)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Fn=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function xt(){const tn=function oi(tn){const ft={},Xe={__esModule:!0,initializeApp:function Wn(ct,qn={}){const Dn=j.initializeApp(ct,qn);if((0,D.r3)(ft,Dn.name))return ft[Dn.name];const qe=new tn(Dn,Xe);return ft[Dn.name]=qe,qe},app:Fi,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function Yr(ct){const qn=ct.name,Dn=qn.replace("-compat","");if(j._registerComponent(ct)&&"PUBLIC"===ct.type){const qe=(Nr=Fi())=>{if("function"!=typeof Nr[Dn])throw Fn.create("invalid-app-argument",{appName:qn});return Nr[Dn]()};void 0!==ct.serviceProps&&(0,D.ZB)(qe,ct.serviceProps),Xe[Dn]=qe,tn.prototype[Dn]=function(...Nr){return this._getService.bind(this,qn).apply(this,ct.multipleInstances?Nr:[])}}return"PUBLIC"===ct.type?Xe[Dn]:null},removeApp:function Jn(ct){delete ft[ct]},useAsService:function $a(ct,qn){return"serverAuth"===qn?null:qn},modularAPIs:j}};function Fi(ct){if(!(0,D.r3)(ft,ct=ct||j._DEFAULT_ENTRY_NAME))throw Fn.create("no-app",{appName:ct});return ft[ct]}return Xe.default=Xe,Object.defineProperty(Xe,"apps",{get:function je(){return Object.keys(ft).map(ct=>ft[ct])}}),Fi.App=tn,Xe}(cn);return tn.INTERNAL=Object.assign(Object.assign({},tn.INTERNAL),{createFirebaseNamespace:xt,extendNamespace:function ft(Xe){(0,D.ZB)(tn,Xe)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),tn}(),oe=new ze.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){oe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tn=self.firebase.SDK_VERSION;tn&&tn.indexOf("LITE")>=0&&oe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const zn=H;!function Pe(tn){(0,j.registerVersion)("@firebase/app-compat","0.2.25",tn)}()},534:(Zr,gi,it)=>{it.r(gi),it.d(gi,{FirebaseError:()=>ze.ZR,SDK_VERSION:()=>oh,_DEFAULT_ENTRY_NAME:()=>rt,_addComponent:()=>Qt,_addOrOverwriteComponent:()=>pn,_apps:()=>J,_clearComponents:()=>_r,_components:()=>Yt,_getProvider:()=>Ci,_registerComponent:()=>Ee,_removeServiceInstance:()=>yn,deleteApp:()=>Wa,getApp:()=>Jt,getApps:()=>Wt,initializeApp:()=>zl,onLog:()=>Xr,registerVersion:()=>Bt,setLogLevel:()=>Wl});var D=it(861),Ve=it(537),j=it(879),ze=it(58);const cn=(q,B)=>B.some(re=>q instanceof re);let zt,Fn;const H=new WeakMap,oe=new WeakMap,ke=new WeakMap,bt=new WeakMap,Pe=new WeakMap;let ft={get(q,B,re){if(q instanceof IDBTransaction){if("done"===B)return oe.get(q);if("objectStoreNames"===B)return q.objectStoreNames||ke.get(q);if("store"===B)return re.objectStoreNames[1]?void 0:re.objectStore(re.objectStoreNames[0])}return Wn(q[B])},set:(q,B,re)=>(q[B]=re,!0),has:(q,B)=>q instanceof IDBTransaction&&("done"===B||"store"===B)||B in q};function Fi(q){return"function"==typeof q?function Jn(q){return q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xt(){return Fn||(Fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(q)?function(...B){return q.apply(je(this),B),Wn(H.get(this))}:function(...B){return Wn(q.apply(je(this),B))}:function(B,...re){const Ae=q.call(je(this),B,...re);return ke.set(Ae,B.sort?B.sort():[B]),Wn(Ae)}}(q):(q instanceof IDBTransaction&&function tn(q){if(oe.has(q))return;const B=new Promise((re,Ae)=>{const Le=()=>{q.removeEventListener("complete",Ct),q.removeEventListener("error",ut),q.removeEventListener("abort",ut)},Ct=()=>{re(),Le()},ut=()=>{Ae(q.error||new DOMException("AbortError","AbortError")),Le()};q.addEventListener("complete",Ct),q.addEventListener("error",ut),q.addEventListener("abort",ut)});oe.set(q,B)}(q),cn(q,function oi(){return zt||(zt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(q,ft):q)}function Wn(q){if(q instanceof IDBRequest)return function zn(q){const B=new Promise((re,Ae)=>{const Le=()=>{q.removeEventListener("success",Ct),q.removeEventListener("error",ut)},Ct=()=>{re(Wn(q.result)),Le()},ut=()=>{Ae(q.error),Le()};q.addEventListener("success",Ct),q.addEventListener("error",ut)});return B.then(re=>{re instanceof IDBCursor&&H.set(re,q)}).catch(()=>{}),Pe.set(B,q),B}(q);if(bt.has(q))return bt.get(q);const B=Fi(q);return B!==q&&(bt.set(q,B),Pe.set(B,q)),B}const je=q=>Pe.get(q),ct=["get","getKey","getAll","getAllKeys","count"],qn=["put","add","delete","clear"],Dn=new Map;function qe(q,B){if(!(q instanceof IDBDatabase)||B in q||"string"!=typeof B)return;if(Dn.get(B))return Dn.get(B);const re=B.replace(/FromIndex$/,""),Ae=B!==re,Le=qn.includes(re);if(!(re in(Ae?IDBIndex:IDBObjectStore).prototype)||!Le&&!ct.includes(re))return;const Ct=function(){var ut=(0,D.Z)(function*(Xn,...nn){const ra=this.transaction(Xn,Le?"readwrite":"readonly");let mu=ra.store;return Ae&&(mu=mu.index(nn.shift())),(yield Promise.all([mu[re](...nn),Le&&ra.done]))[0]});return function(nn){return ut.apply(this,arguments)}}();return Dn.set(B,Ct),Ct}!function Xe(q){ft=q(ft)}(q=>({...q,get:(B,re,Ae)=>qe(B,re)||q.get(B,re,Ae),has:(B,re)=>!!qe(B,re)||q.has(B,re)}));class Nr{constructor(B){this.container=B}getPlatformInfoString(){return this.container.getProviders().map(re=>{if(function gr(q){const B=q.getComponent();return"VERSION"===B?.type}(re)){const Ae=re.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(re=>re).join(" ")}}const Ne="@firebase/app",Qr=new j.Yd("@firebase/app"),rt="[DEFAULT]",Sn={[Ne]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},J=new Map,Yt=new Map;function Qt(q,B){try{q.container.addComponent(B)}catch(re){Qr.debug(`Component ${B.name} failed to register with FirebaseApp ${q.name}`,re)}}function pn(q,B){q.container.addOrOverwriteComponent(B)}function Ee(q){const B=q.name;if(Yt.has(B))return Qr.debug(`There were multiple attempts to register component ${B}.`),!1;Yt.set(B,q);for(const re of J.values())Qt(re,q);return!0}function Ci(q,B){const re=q.container.getProvider("heartbeat").getImmediate({optional:!0});return re&&re.triggerHeartbeat(),q.container.getProvider(B)}function yn(q,B,re=rt){Ci(q,B).clearInstance(re)}function _r(){Yt.clear()}const Di=new ze.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ia{constructor(B,re,Ae){this._isDeleted=!1,this._options=Object.assign({},B),this._config=Object.assign({},re),this._name=re.name,this._automaticDataCollectionEnabled=re.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new Ve.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(B){this.checkDestroyed(),this._automaticDataCollectionEnabled=B}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(B){this._isDeleted=B}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}const oh="10.7.1";function zl(q,B={}){let re=q;"object"!=typeof B&&(B={name:B});const Ae=Object.assign({name:rt,automaticDataCollectionEnabled:!1},B),Le=Ae.name;if("string"!=typeof Le||!Le)throw Di.create("bad-app-name",{appName:String(Le)});if(re||(re=(0,ze.aH)()),!re)throw Di.create("no-options");const Ct=J.get(Le);if(Ct){if((0,ze.vZ)(re,Ct.options)&&(0,ze.vZ)(Ae,Ct.config))return Ct;throw Di.create("duplicate-app",{appName:Le})}const ut=new Ve.H0(Le);for(const nn of Yt.values())ut.addComponent(nn);const Xn=new ia(re,Ae,ut);return J.set(Le,Xn),Xn}function Jt(q=rt){const B=J.get(q);if(!B&&q===rt&&(0,ze.aH)())return zl();if(!B)throw Di.create("no-app",{appName:q});return B}function Wt(){return Array.from(J.values())}function Wa(q){return qs.apply(this,arguments)}function qs(){return(qs=(0,D.Z)(function*(q){const B=q.name;J.has(B)&&(J.delete(B),yield Promise.all(q.container.getProviders().map(re=>re.delete())),q.isDeleted=!0)})).apply(this,arguments)}function Bt(q,B,re){var Ae;let Le=null!==(Ae=Sn[q])&&void 0!==Ae?Ae:q;re&&(Le+=`-${re}`);const Ct=Le.match(/\s|\//),ut=B.match(/\s|\//);if(Ct||ut){const Xn=[`Unable to register library "${Le}" with version "${B}":`];return Ct&&Xn.push(`library name "${Le}" contains illegal characters (whitespace or "/")`),Ct&&ut&&Xn.push("and"),ut&&Xn.push(`version name "${B}" contains illegal characters (whitespace or "/")`),void Qr.warn(Xn.join(" "))}Ee(new Ve.wA(`${Le}-version`,()=>({library:Le,version:B}),"VERSION"))}function Xr(q,B){if(null!==q&&"function"!=typeof q)throw Di.create("invalid-log-argument");(0,j.Am)(q,B)}function Wl(q){(0,j.Ub)(q)}const Eo="firebase-heartbeat-database",gu=1,A="firebase-heartbeat-store";let C=null;function P(){return C||(C=function Yr(q,B,{blocked:re,upgrade:Ae,blocking:Le,terminated:Ct}={}){const ut=indexedDB.open(q,B),Xn=Wn(ut);return Ae&&ut.addEventListener("upgradeneeded",nn=>{Ae(Wn(ut.result),nn.oldVersion,nn.newVersion,Wn(ut.transaction),nn)}),re&&ut.addEventListener("blocked",nn=>re(nn.oldVersion,nn.newVersion,nn)),Xn.then(nn=>{Ct&&nn.addEventListener("close",()=>Ct()),Le&&nn.addEventListener("versionchange",ra=>Le(ra.oldVersion,ra.newVersion,ra))}).catch(()=>{}),Xn}(Eo,gu,{upgrade:(q,B)=>{0===B&&q.createObjectStore(A)}}).catch(q=>{throw Di.create("idb-open",{originalErrorMessage:q.message})})),C}function V(){return(V=(0,D.Z)(function*(q){try{return yield(yield P()).transaction(A).objectStore(A).get(Ce(q))}catch(B){if(B instanceof ze.ZR)Qr.warn(B.message);else{const re=Di.create("idb-get",{originalErrorMessage:B?.message});Qr.warn(re.message)}}})).apply(this,arguments)}function xe(q,B){return me.apply(this,arguments)}function me(){return(me=(0,D.Z)(function*(q,B){try{const Ae=(yield P()).transaction(A,"readwrite");yield Ae.objectStore(A).put(B,Ce(q)),yield Ae.done}catch(re){if(re instanceof ze.ZR)Qr.warn(re.message);else{const Ae=Di.create("idb-set",{originalErrorMessage:re?.message});Qr.warn(Ae.message)}}})).apply(this,arguments)}function Ce(q){return`${q.name}!${q.options.appId}`}class xr{constructor(B){this.container=B,this._heartbeatsCache=null;const re=this.container.getProvider("app").getImmediate();this._storage=new Cs(re),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var B=this;return(0,D.Z)(function*(){var re,Ae;const Ct=B.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=Pt();if((null!=(null===(re=B._heartbeatsCache)||void 0===re?void 0:re.heartbeats)||(B._heartbeatsCache=yield B._heartbeatsCachePromise,null!=(null===(Ae=B._heartbeatsCache)||void 0===Ae?void 0:Ae.heartbeats)))&&B._heartbeatsCache.lastSentHeartbeatDate!==ut&&!B._heartbeatsCache.heartbeats.some(Xn=>Xn.date===ut))return B._heartbeatsCache.heartbeats.push({date:ut,agent:Ct}),B._heartbeatsCache.heartbeats=B._heartbeatsCache.heartbeats.filter(Xn=>{const nn=new Date(Xn.date).valueOf();return Date.now()-nn<=2592e6}),B._storage.overwrite(B._heartbeatsCache)})()}getHeartbeatsHeader(){var B=this;return(0,D.Z)(function*(){var re;if(null===B._heartbeatsCache&&(yield B._heartbeatsCachePromise),null==(null===(re=B._heartbeatsCache)||void 0===re?void 0:re.heartbeats)||0===B._heartbeatsCache.heartbeats.length)return"";const Ae=Pt(),{heartbeatsToSend:Le,unsentEntries:Ct}=function X(q,B=1024){const re=[];let Ae=q.slice();for(const Le of q){const Ct=re.find(ut=>ut.agent===Le.agent);if(Ct){if(Ct.dates.push(Le.date),Ue(re)>B){Ct.dates.pop();break}}else if(re.push({agent:Le.agent,dates:[Le.date]}),Ue(re)>B){re.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:re,unsentEntries:Ae}}(B._heartbeatsCache.heartbeats),ut=(0,ze.L)(JSON.stringify({version:2,heartbeats:Le}));return B._heartbeatsCache.lastSentHeartbeatDate=Ae,Ct.length>0?(B._heartbeatsCache.heartbeats=Ct,yield B._storage.overwrite(B._heartbeatsCache)):(B._heartbeatsCache.heartbeats=[],B._storage.overwrite(B._heartbeatsCache)),ut})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class Cs{constructor(B){this.app=B,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,ze.hl)()&&(0,ze.eu)().then(()=>!0).catch(()=>!1)})()}read(){var B=this;return(0,D.Z)(function*(){if(yield B._canUseIndexedDBPromise){const Ae=yield function G(q){return V.apply(this,arguments)}(B.app);return Ae?.heartbeats?Ae:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(B){var re=this;return(0,D.Z)(function*(){var Ae;if(yield re._canUseIndexedDBPromise){const Ct=yield re.read();return xe(re.app,{lastSentHeartbeatDate:null!==(Ae=B.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Ct.lastSentHeartbeatDate,heartbeats:B.heartbeats})}})()}add(B){var re=this;return(0,D.Z)(function*(){var Ae;if(yield re._canUseIndexedDBPromise){const Ct=yield re.read();return xe(re.app,{lastSentHeartbeatDate:null!==(Ae=B.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Ct.lastSentHeartbeatDate,heartbeats:[...Ct.heartbeats,...B.heartbeats]})}})()}}function Ue(q){return(0,ze.L)(JSON.stringify({version:2,heartbeats:q})).length}!function wt(q){Ee(new Ve.wA("platform-logger",B=>new Nr(B),"PRIVATE")),Ee(new Ve.wA("heartbeat",B=>new xr(B),"PRIVATE")),Bt(Ne,"0.9.25",q),Bt(Ne,"0.9.25","esm2017"),Bt("fire-js","")}("")},537:(Zr,gi,it)=>{it.d(gi,{H0:()=>oi,wA:()=>j,zt:()=>cn});var D=it(861),Ve=it(58);class j{constructor(H,oe,ke){this.name=H,this.instanceFactory=oe,this.type=ke,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ze="[DEFAULT]";class cn{constructor(H,oe){this.name=H,this.container=oe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const oe=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(oe)){const ke=new Ve.BH;if(this.instancesDeferred.set(oe,ke),this.isInitialized(oe)||this.shouldAutoInitialize())try{const bt=this.getOrInitializeService({instanceIdentifier:oe});bt&&ke.resolve(bt)}catch{}}return this.instancesDeferred.get(oe).promise}getImmediate(H){var oe;const ke=this.normalizeInstanceIdentifier(H?.identifier),bt=null!==(oe=H?.optional)&&void 0!==oe&&oe;if(!this.isInitialized(ke)&&!this.shouldAutoInitialize()){if(bt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ke})}catch(Pe){if(bt)return null;throw Pe}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function Fn(xt){return"EAGER"===xt.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ze})}catch{}for(const[oe,ke]of this.instancesDeferred.entries()){const bt=this.normalizeInstanceIdentifier(oe);try{const Pe=this.getOrInitializeService({instanceIdentifier:bt});ke.resolve(Pe)}catch{}}}}clearInstance(H=ze){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,D.Z)(function*(){const oe=Array.from(H.instances.values());yield Promise.all([...oe.filter(ke=>"INTERNAL"in ke).map(ke=>ke.INTERNAL.delete()),...oe.filter(ke=>"_delete"in ke).map(ke=>ke._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ze){return this.instances.has(H)}getOptions(H=ze){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:oe={}}=H,ke=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(ke))throw Error(`${this.name}(${ke}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const bt=this.getOrInitializeService({instanceIdentifier:ke,options:oe});for(const[Pe,zn]of this.instancesDeferred.entries())ke===this.normalizeInstanceIdentifier(Pe)&&zn.resolve(bt);return bt}onInit(H,oe){var ke;const bt=this.normalizeInstanceIdentifier(oe),Pe=null!==(ke=this.onInitCallbacks.get(bt))&&void 0!==ke?ke:new Set;Pe.add(H),this.onInitCallbacks.set(bt,Pe);const zn=this.instances.get(bt);return zn&&H(zn,bt),()=>{Pe.delete(H)}}invokeOnInitCallbacks(H,oe){const ke=this.onInitCallbacks.get(oe);if(ke)for(const bt of ke)try{bt(H,oe)}catch{}}getOrInitializeService({instanceIdentifier:H,options:oe={}}){let ke=this.instances.get(H);if(!ke&&this.component&&(ke=this.component.instanceFactory(this.container,{instanceIdentifier:(xt=H,xt===ze?void 0:xt),options:oe}),this.instances.set(H,ke),this.instancesOptions.set(H,oe),this.invokeOnInitCallbacks(ke,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,ke)}catch{}var xt;return ke||null}normalizeInstanceIdentifier(H=ze){return this.component?this.component.multipleInstances?H:ze:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oi{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const oe=this.getProvider(H.name);if(oe.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);oe.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const oe=new cn(H,this);return this.providers.set(H,oe),oe}getProviders(){return Array.from(this.providers.values())}}},879:(Zr,gi,it)=>{it.d(gi,{Am:()=>xt,Ub:()=>oi,Yd:()=>Fn,in:()=>Ve});const D=[];var Ve=function(H){return H[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",H}(Ve||{});const j={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},ze=Ve.INFO,cn={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},zt=(H,oe,...ke)=>{if(oe<H.logLevel)return;const bt=(new Date).toISOString(),Pe=cn[oe];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${oe})`);console[Pe](`[${bt}]  ${H.name}:`,...ke)};class Fn{constructor(oe){this.name=oe,this._logLevel=ze,this._logHandler=zt,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(oe){if(!(oe in Ve))throw new TypeError(`Invalid value "${oe}" assigned to \`logLevel\``);this._logLevel=oe}setLogLevel(oe){this._logLevel="string"==typeof oe?j[oe]:oe}get logHandler(){return this._logHandler}set logHandler(oe){if("function"!=typeof oe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=oe}get userLogHandler(){return this._userLogHandler}set userLogHandler(oe){this._userLogHandler=oe}debug(...oe){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...oe),this._logHandler(this,Ve.DEBUG,...oe)}log(...oe){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...oe),this._logHandler(this,Ve.VERBOSE,...oe)}info(...oe){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...oe),this._logHandler(this,Ve.INFO,...oe)}warn(...oe){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...oe),this._logHandler(this,Ve.WARN,...oe)}error(...oe){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...oe),this._logHandler(this,Ve.ERROR,...oe)}}function oi(H){D.forEach(oe=>{oe.setLogLevel(H)})}function xt(H,oe){for(const ke of D){let bt=null;oe&&oe.level&&(bt=j[oe.level]),ke.userLogHandler=null===H?null:(Pe,zn,...tn)=>{const ft=tn.map(Xe=>{if(null==Xe)return null;if("string"==typeof Xe)return Xe;if("number"==typeof Xe||"boolean"==typeof Xe)return Xe.toString();if(Xe instanceof Error)return Xe.message;try{return JSON.stringify(Xe)}catch{return null}}).filter(Xe=>Xe).join(" ");zn>=(bt??Pe.logLevel)&&H({level:Ve[zn].toLowerCase(),message:ft,args:tn,type:Pe.name})}}}},980:(Zr,gi,it)=>{it.r(gi);var D=it(861),Ve=it(106),j=it(58),ze=it(534),cn=it(879);function xt(f,c){var d={};for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&c.indexOf(p)<0&&(d[p]=f[p]);if(null!=f&&"function"==typeof Object.getOwnPropertySymbols){var _=0;for(p=Object.getOwnPropertySymbols(f);_<p.length;_++)c.indexOf(p[_])<0&&Object.prototype.propertyIsEnumerable.call(f,p[_])&&(d[p[_]]=f[p[_]])}return d}"function"==typeof SuppressedError&&SuppressedError;var Ts=it(537);const mr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const za=function Gl(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},na=function vo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},x=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$=new cn.Yd("@firebase/auth");function ge(f,...c){$.logLevel<=cn.in.ERROR&&$.error(`Auth (${ze.SDK_VERSION}): ${f}`,...c)}function ue(f,...c){throw Sn(f,...c)}function Be(f,...c){return Sn(f,...c)}function kt(f,c,d){const p=Object.assign(Object.assign({},na()),{[c]:d});return new j.LL("auth","Firebase",p).create(c,{appName:f.name})}function rt(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&ue(f,"argument-error"),kt(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sn(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return x.create(f,...c)}function J(f,c,...d){if(!f)throw Sn(c,...d)}function Yt(f){const c="INTERNAL ASSERTION FAILED: "+f;throw ge(c),new Error(c)}function Qt(f,c){f||Yt(c)}function pn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Ee(){return"http:"===Ci()||"https:"===Ci()}function Ci(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Jr{constructor(c,d){this.shortDelay=c,this.longDelay=d,Qt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function yn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ee()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Di(f,c){Qt(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class ia{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},zl=new Jr(3e4,6e4);function Jt(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function Wt(f,c,d,p){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,D.Z)(function*(f,c,d,p,_={}){return qs(f,_,(0,D.Z)(function*(){let v={},T={};p&&("GET"===c?T=p:v={body:JSON.stringify(p)});const N=(0,j.xO)(Object.assign({key:f.config.apiKey},T)).slice(1),z=yield f._getAdditionalHeaders();return z["Content-Type"]="application/json",f.languageCode&&(z["X-Firebase-Locale"]=f.languageCode),ia.fetch()(Eo(f,f.config.apiHost,d,N),Object.assign({method:c,headers:z,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function qs(f,c,d){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,D.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},oh),c);try{const _=new A(f),v=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const T=yield v.json();if("needConfirmation"in T)throw C(f,"account-exists-with-different-credential",T);if(v.ok&&!("errorMessage"in T))return T;{const N=v.ok?T.errorMessage:T.error.message,[z,Z]=N.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===z)throw C(f,"credential-already-in-use",T);if("EMAIL_EXISTS"===z)throw C(f,"email-already-in-use",T);if("USER_DISABLED"===z)throw C(f,"user-disabled",T);const he=p[z]||z.toLowerCase().replace(/[_\s]+/g,"-");if(Z)throw kt(f,he,Z);ue(f,he)}}catch(_){if(_ instanceof j.ZR)throw _;ue(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function Xr(f,c,d,p){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,D.Z)(function*(f,c,d,p,_={}){const v=yield Wt(f,c,d,p,_);return"mfaPendingCredential"in v&&ue(f,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function Eo(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?Di(f.config,_):`${f.config.apiScheme}://${_}`}function gu(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class A{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Be(this.auth,"network-request-failed")),zl.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function C(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=Be(f,c,p);return _.customData._tokenResponse=d,_}function P(f){return void 0!==f&&void 0!==f.getResponse}function G(f){return void 0!==f&&void 0!==f.enterprise}class V{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return gu(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function me(){return(me=(0,D.Z)(function*(f){return(yield Wt(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ce(f,c){return ai.apply(this,arguments)}function ai(){return(ai=(0,D.Z)(function*(f,c){return Wt(f,"GET","/v2/recaptchaConfig",Jt(f,c))})).apply(this,arguments)}function xr(){return(xr=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function X(){return(X=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ue(){return(Ue=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function wt(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function re(){return(re=(0,D.Z)(function*(f,c=!1){const d=(0,j.m9)(f),p=yield d.getIdToken(c),_=Le(p);J(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const v="object"==typeof _.firebase?_.firebase:void 0,T=v?.sign_in_provider;return{claims:_,token:p,authTime:wt(Ae(_.auth_time)),issuedAtTime:wt(Ae(_.iat)),expirationTime:wt(Ae(_.exp)),signInProvider:T||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function Ae(f){return 1e3*Number(f)}function Le(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return ge("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,j.tV)(d);return _?JSON.parse(_):(ge("Failed to decode base64 JWT payload"),null)}catch(_){return ge("Caught error parsing JWT payload as JSON",_?.toString()),null}}function ut(f,c){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,D.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof j.ZR&&function nn({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class ra{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,D.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,D.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class mu{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=wt(this.lastLoginAt),this.creationTime=wt(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ah(f){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,D.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield ut(f,function Cs(f,c){return Ue.apply(this,arguments)}(d,{idToken:p}));J(_?.users.length,d,"internal-error");const v=_.users[0];f._notifyReloadListener(v);const T=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function YO(f){return f.map(c=>{var{providerId:d}=c,p=xt(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],N=function ZT(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,T),he=!!f.isAnonymous&&!(f.email&&v.passwordHash||N?.length),_e={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:N,metadata:new mu(v.createdAt,v.lastLoginAt),isAnonymous:he};Object.assign(f,_e)}),Pv.apply(this,arguments)}function Ov(){return(Ov=(0,D.Z)(function*(f){const c=(0,j.m9)(f);yield ah(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function He(){return(He=(0,D.Z)(function*(f,c){const d=yield qs(f,{},(0,D.Z)(function*(){const p=(0,j.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:v}=f.config,T=Eo(f,_,"/v1/token",`key=${v}`),N=yield f._getAdditionalHeaders();return N["Content-Type"]="application/x-www-form-urlencoded",ia.fetch()(T,{method:"POST",headers:N,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function Mv(){return(Mv=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v2/accounts:revokeToken",Jt(f,c))})).apply(this,arguments)}class lh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){J(c.idToken,"internal-error"),J(typeof c.idToken<"u","internal-error"),J(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Ct(f){const c=Le(f);return J(c,"internal-error"),J(typeof c.exp<"u","internal-error"),J(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,D.Z)(function*(){return J(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,D.Z)(function*(){const{accessToken:_,refreshToken:v,expiresIn:T}=yield function es(f,c){return He.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,v,Number(T))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:v}=d,T=new lh;return p&&(J("string"==typeof p,"internal-error",{appName:c}),T.refreshToken=p),_&&(J("string"==typeof _,"internal-error",{appName:c}),T.accessToken=_),v&&(J("number"==typeof v,"internal-error",{appName:c}),T.expirationTime=v),T}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new lh,this.toJSON())}_performRefresh(){return Yt("not implemented")}}function le(f,c){J("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class ql{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,v=xt(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ra(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new mu(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,D.Z)(function*(){const p=yield ut(d,d.stsTokenManager.getToken(d.auth,c));return J(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function B(f){return re.apply(this,arguments)}(this,c)}reload(){return function KT(f){return Ov.apply(this,arguments)}(this)}_assign(c){this!==c&&(J(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new ql(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,D.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield ah(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,D.Z)(function*(){const d=yield c.getIdToken();return yield ut(c,function li(f,c){return xr.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,v,T,N,z,Z,he;const _e=null!==(p=d.displayName)&&void 0!==p?p:void 0,et=null!==(_=d.email)&&void 0!==_?_:void 0,At=null!==(v=d.phoneNumber)&&void 0!==v?v:void 0,rr=null!==(T=d.photoURL)&&void 0!==T?T:void 0,ls=null!==(N=d.tenantId)&&void 0!==N?N:void 0,Fr=null!==(z=d._redirectEventId)&&void 0!==z?z:void 0,xn=null!==(Z=d.createdAt)&&void 0!==Z?Z:void 0,gc=null!==(he=d.lastLoginAt)&&void 0!==he?he:void 0,{uid:nf,emailVerified:ym,isAnonymous:nE,providerData:rf,stsTokenManager:iE}=d;J(nf&&iE,c,"internal-error");const rE=lh.fromJSON(this.name,iE);J("string"==typeof nf,c,"internal-error"),le(_e,c.name),le(et,c.name),J("boolean"==typeof ym,c,"internal-error"),J("boolean"==typeof nE,c,"internal-error"),le(At,c.name),le(rr,c.name),le(ls,c.name),le(Fr,c.name),le(xn,c.name),le(gc,c.name);const vm=new ql({uid:nf,auth:c,email:et,emailVerified:ym,displayName:_e,isAnonymous:nE,photoURL:rr,phoneNumber:At,tenantId:ls,stsTokenManager:rE,createdAt:xn,lastLoginAt:gc});return rf&&Array.isArray(rf)&&(vm.providerData=rf.map(sE=>Object.assign({},sE))),Fr&&(vm._redirectEventId=Fr),vm}static _fromIdTokenResponse(c,d,p=!1){return(0,D.Z)(function*(){const _=new lh;_.updateFromServerResponse(d);const v=new ql({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield ah(v),v})()}}const mt=new Map;function Vi(f){Qt(f instanceof Function,"Expected a class definition");let c=mt.get(f);return c?(Qt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,mt.set(f,c),c)}const qa=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,D.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,D.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,D.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function Ka(f,c,d){return`firebase:${f}:${c}:${d}`}class bo{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:v}=this.auth;this.fullUserKey=Ka(this.userKey,_.apiKey,v),this.fullPersistenceKey=Ka("persistence",_.apiKey,v),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,D.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?ql._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,D.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,D.Z)(function*(){if(!d.length)return new bo(Vi(qa),c,p);const _=(yield Promise.all(d.map(function(){var Z=(0,D.Z)(function*(he){if(yield he._isAvailable())return he});return function(he){return Z.apply(this,arguments)}}()))).filter(Z=>Z);let v=_[0]||Vi(qa);const T=Ka(p,c.config.apiKey,c.name);let N=null;for(const Z of d)try{const he=yield Z._get(T);if(he){const _e=ql._fromJSON(c,he);Z!==v&&(N=_e),v=Z;break}}catch{}const z=_.filter(Z=>Z._shouldAllowMigration);return v._shouldAllowMigration&&z.length?(v=z[0],N&&(yield v._set(T,N.toJSON())),yield Promise.all(d.map(function(){var Z=(0,D.Z)(function*(he){if(he!==v)try{yield he._remove(T)}catch{}});return function(he){return Z.apply(this,arguments)}}())),new bo(v,c,p)):new bo(v,c,p)})()}}function _u(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(_t(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(ch(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(yg(c))return"Blackberry";if(Ji(c))return"Webos";if(uh(c))return"Safari";if((c.includes("chrome/")||kv(c))&&!c.includes("edge/"))return"Chrome";if(Za(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function ch(f=(0,j.z$)()){return/firefox\//i.test(f)}function uh(f=(0,j.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function kv(f=(0,j.z$)()){return/crios\//i.test(f)}function _t(f=(0,j.z$)()){return/iemobile/i.test(f)}function Za(f=(0,j.z$)()){return/android/i.test(f)}function yg(f=(0,j.z$)()){return/blackberry/i.test(f)}function Ji(f=(0,j.z$)()){return/webos/i.test(f)}function Ya(f=(0,j.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function YT(f=(0,j.z$)()){return Ya(f)||Za(f)||Ji(f)||yg(f)||/windows phone/i.test(f)||_t(f)}function dh(f,c=[]){let d;switch(f){case"Browser":d=_u((0,j.z$)());break;case"Worker":d=`${_u((0,j.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${ze.SDK_VERSION}/${p}`}class vg{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=v=>new Promise((T,N)=>{try{T(c(v))}catch(z){N(z)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,D.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const v of p)try{v()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function yu(){return(yu=(0,D.Z)(function*(f,c={}){return Wt(f,"GET","/v2/passwordPolicy",Jt(f,c))})).apply(this,arguments)}class Eg{constructor(c){var d,p,_,v;const T=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=T.minPasswordLength)&&void 0!==d?d:6,T.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=T.maxPasswordLength),void 0!==T.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=T.containsLowercaseCharacter),void 0!==T.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=T.containsUppercaseCharacter),void 0!==T.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=T.containsNumericCharacter),void 0!==T.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=T.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,v,T,N;const z={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,z),this.validatePasswordCharacterOptions(c,z),z.isValid&&(z.isValid=null===(d=z.meetsMinPasswordLength)||void 0===d||d),z.isValid&&(z.isValid=null===(p=z.meetsMaxPasswordLength)||void 0===p||p),z.isValid&&(z.isValid=null===(_=z.containsLowercaseLetter)||void 0===_||_),z.isValid&&(z.isValid=null===(v=z.containsUppercaseLetter)||void 0===v||v),z.isValid&&(z.isValid=null===(T=z.containsNumericCharacter)||void 0===T||T),z.isValid&&(z.isValid=null===(N=z.containsNonAlphanumericCharacter)||void 0===N||N),z}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class tM{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JT(this),this.idTokenSubscription=new JT(this),this.beforeStateQueue=new vg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=Vi(d)),this._initializationPromise=this.queue((0,D.Z)(function*(){var _,v;if(!p._deleted&&(p.persistenceManager=yield bo.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,D.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,D.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let v=_,T=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const N=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,z=v?._redirectEventId,Z=yield d.tryRedirectSignIn(c);(!N||N===z)&&Z?.user&&(v=Z.user,T=!0)}if(!v)return d.directlySetCurrentUser(null);if(!v._redirectEventId){if(T)try{yield d.beforeStateQueue.runMiddleware(v)}catch(N){v=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(N))}return v?d.reloadAndSetCurrentUserOrClear(v):d.directlySetCurrentUser(null)}return J(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===v._redirectEventId?d.directlySetCurrentUser(v):d.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var d=this;return(0,D.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,D.Z)(function*(){try{yield ah(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function _r(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,D.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,D.Z)(function*(){const p=c?(0,j.m9)(c):null;return p&&J(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,D.Z)(function*(){if(!p._deleted)return c&&J(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,D.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,D.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,D.Z)(function*(){yield d.assertedPersistence.setPersistence(Vi(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,D.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,D.Z)(function*(){const d=yield function Fv(f){return yu.apply(this,arguments)}(c),p=new Eg(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new j.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,D.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function QO(f,c){return Mv.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,D.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,D.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&Vi(c)||d._popupRedirectResolver;J(p,d,"argument-error"),d.redirectPersistenceManager=yield bo.create(d,[Vi(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,D.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,D.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,D.Z)(function*(){if(c===d.currentUser)return d.queue((0,D.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const v="function"==typeof d?d:d.next.bind(d);let T=!1;const N=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(N,this,"internal-error"),N.then(()=>{T||v(this.currentUser)}),"function"==typeof d){const z=c.addObserver(d,p,_);return()=>{T=!0,z()}}{const z=c.addObserver(d);return()=>{T=!0,z()}}}directlySetCurrentUser(c){var d=this;return(0,D.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=dh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,D.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,D.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function Q(f,...c){$.logLevel<=cn.in.WARN&&$.warn(`Auth (${ze.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function vn(f){return(0,j.m9)(f)}class JT{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,j.ne)(d=>this.observer=d)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Lv(f){return new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const v=Be("internal-error");v.customData=_,d(v)},p.type="text/javascript",p.charset="UTF-8",function nM(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)})}function Kl(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Vv{constructor(c){this.type="recaptcha-enterprise",this.auth=vn(c)}verify(c="verify",d=!1){var p=this;return(0,D.Z)(function*(){function v(){return v=(0,D.Z)(function*(N){if(!d){if(null==N.tenantId&&null!=N._agentRecaptchaConfig)return N._agentRecaptchaConfig.siteKey;if(null!=N.tenantId&&void 0!==N._tenantRecaptchaConfigs[N.tenantId])return N._tenantRecaptchaConfigs[N.tenantId].siteKey}return new Promise(function(){var z=(0,D.Z)(function*(Z,he){Ce(N,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_e=>{if(void 0!==_e.recaptchaKey){const et=new V(_e);return null==N.tenantId?N._agentRecaptchaConfig=et:N._tenantRecaptchaConfigs[N.tenantId]=et,Z(et.siteKey)}he(new Error("recaptcha Enterprise site key undefined"))}).catch(_e=>{he(_e)})});return function(Z,he){return z.apply(this,arguments)}}())}),v.apply(this,arguments)}function T(N,z,Z){const he=window.grecaptcha;G(he)?he.enterprise.ready(()=>{he.enterprise.execute(N,{action:c}).then(_e=>{z(_e)}).catch(()=>{z("NO_RECAPTCHA")})}):Z(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((N,z)=>{(function _(N){return v.apply(this,arguments)})(p.auth).then(Z=>{if(!d&&G(window.grecaptcha))T(Z,N,z);else{if(typeof window>"u")return void z(new Error("RecaptchaVerifier is only supported in browser"));Lv("https://www.google.com/recaptcha/enterprise.js?render="+Z).then(()=>{T(Z,N,z)}).catch(he=>{z(he)})}}).catch(Z=>{z(Z)})})})()}}function Bv(f,c,d){return fh.apply(this,arguments)}function fh(){return(fh=(0,D.Z)(function*(f,c,d,p=!1){const _=new Vv(f);let v;try{v=yield _.verify(d)}catch{v=yield _.verify(d,!0)}const T=Object.assign({},c);return Object.assign(T,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T})).apply(this,arguments)}function Ks(f,c,d,p){return wg.apply(this,arguments)}function wg(){return wg=(0,D.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield Bv(f,c,d,"getOobCode"===d);return p(f,v)}return p(f,c).catch(function(){var v=(0,D.Z)(function*(T){if("auth/missing-recaptcha-token"===T.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const N=yield Bv(f,c,d,"getOobCode"===d);return p(f,N)}return Promise.reject(T)});return function(T){return v.apply(this,arguments)}}())}),wg.apply(this,arguments)}function vu(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function Zl(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class Yl{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return Yt("not implemented")}_getIdTokenResponse(c){return Yt("not implemented")}_linkToIdToken(c,d){return Yt("not implemented")}_getReauthenticationResolver(c){return Yt("not implemented")}}function jv(f,c){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:resetPassword",Jt(f,c))})).apply(this,arguments)}function Pr(){return(Pr=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Zs(f,c){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Eu(){return(Eu=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:update",Jt(f,c))})).apply(this,arguments)}function Cg(f,c){return mh.apply(this,arguments)}function mh(){return(mh=(0,D.Z)(function*(f,c){return Xr(f,"POST","/v1/accounts:signInWithPassword",Jt(f,c))})).apply(this,arguments)}function ts(f,c){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:sendOobCode",Jt(f,c))})).apply(this,arguments)}function _h(){return(_h=(0,D.Z)(function*(f,c){return ts(f,c)})).apply(this,arguments)}function Dg(f,c){return yh.apply(this,arguments)}function yh(){return(yh=(0,D.Z)(function*(f,c){return ts(f,c)})).apply(this,arguments)}function $v(f,c){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,D.Z)(function*(f,c){return ts(f,c)})).apply(this,arguments)}function vh(){return(vh=(0,D.Z)(function*(f,c){return ts(f,c)})).apply(this,arguments)}function Eh(){return(Eh=(0,D.Z)(function*(f,c){return Xr(f,"POST","/v1/accounts:signInWithEmailLink",Jt(f,c))})).apply(this,arguments)}function Sg(){return(Sg=(0,D.Z)(function*(f,c){return Xr(f,"POST","/v1/accounts:signInWithEmailLink",Jt(f,c))})).apply(this,arguments)}class Xi extends Yl{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new Xi(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new Xi(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,D.Z)(function*(){switch(d.signInMethod){case"password":return Ks(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Cg);case"emailLink":return function tC(f,c){return Eh.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:ue(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,D.Z)(function*(){switch(p.signInMethod){case"password":return Ks(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zs);case"emailLink":return function nC(f,c){return Sg.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:ue(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function wo(f,c){return bh.apply(this,arguments)}function bh(){return(bh=(0,D.Z)(function*(f,c){return Xr(f,"POST","/v1/accounts:signInWithIdp",Jt(f,c))})).apply(this,arguments)}class Ys extends Yl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Ys(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):ue("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,v=xt(d,["providerId","signInMethod"]);if(!p||!_)return null;const T=new Ys(p,_);return T.idToken=v.idToken||void 0,T.accessToken=v.accessToken||void 0,T.secret=v.secret,T.nonce=v.nonce,T.pendingToken=v.pendingToken||null,T}_getIdTokenResponse(c){return wo(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,wo(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,wo(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,j.xO)(d)}return c}}function Ag(){return(Ag=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:sendVerificationCode",Jt(f,c))})).apply(this,arguments)}function Rg(){return(Rg=(0,D.Z)(function*(f,c){return Xr(f,"POST","/v1/accounts:signInWithPhoneNumber",Jt(f,c))})).apply(this,arguments)}function Ng(){return(Ng=(0,D.Z)(function*(f,c){const d=yield Xr(f,"POST","/v1/accounts:signInWithPhoneNumber",Jt(f,c));if(d.temporaryProof)throw C(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Si={USER_NOT_FOUND:"user-not-found"};function xg(){return(xg=(0,D.Z)(function*(f,c){return Xr(f,"POST","/v1/accounts:signInWithPhoneNumber",Jt(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Si)})).apply(this,arguments)}class Xa extends Yl{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Xa({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Xa({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function zv(f,c){return Rg.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function sC(f,c){return Ng.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function oC(f,c){return xg.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:v}=c;return p||d||_||v?new Xa({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:v}):null}}class Ql{constructor(c){var d,p,_,v,T,N;const z=(0,j.zd)((0,j.pd)(c)),Z=null!==(d=z.apiKey)&&void 0!==d?d:null,he=null!==(p=z.oobCode)&&void 0!==p?p:null,_e=function It(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=z.mode)&&void 0!==_?_:null);J(Z&&he&&_e,"argument-error"),this.apiKey=Z,this.operation=_e,this.code=he,this.continueUrl=null!==(v=z.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(T=z.languageCode)&&void 0!==T?T:null,this.tenantId=null!==(N=z.tenantId)&&void 0!==N?N:null}static parseLink(c){const d=function aC(f){const c=(0,j.zd)((0,j.pd)(f)).link,d=c?(0,j.zd)((0,j.pd)(c)).deep_link_id:null,p=(0,j.zd)((0,j.pd)(f)).deep_link_id;return(p?(0,j.zd)((0,j.pd)(p)).link:null)||p||d||c||f}(c);try{return new Ql(d)}catch{return null}}}let Bi=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return Xi._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=Ql.parseLink(p);return J(_,"argument-error"),Xi._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class st{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Ln extends st{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ei extends Ln{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return J("providerId"in d&&"signInMethod"in d,"argument-error"),Ys._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return J(c.idToken||c.accessToken,"argument-error"),Ys._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ei.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ei.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:v,nonce:T,providerId:N}=c;if(!p&&!_&&!d&&!v||!N)return null;try{return new ei(N)._credential({idToken:d,accessToken:p,nonce:T,pendingToken:v})}catch{return null}}}let el=(()=>{class f extends Ln{constructor(){super("facebook.com")}static credential(d){return Ys._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),yr=(()=>{class f extends Ln{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return Ys._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Pg=(()=>{class f extends Ln{constructor(){super("github.com")}static credential(d){return Ys._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Io extends Yl{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return wo(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,wo(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,wo(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:v}=d;return p&&_&&v&&p===_?new Io(p,v):null}static _create(c,d){return new Io(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wh extends st{constructor(c){J(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return wh.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return wh.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=Io.fromJSON(c);return J(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return Io._create(p,d)}catch{return null}}}let An=(()=>{class f extends Ln{constructor(){super("twitter.com")}static credential(d,p){return Ys._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Te(f,c){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,D.Z)(function*(f,c){return Xr(f,"POST","/v1/accounts:signUp",Jt(f,c))})).apply(this,arguments)}class Dt{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,D.Z)(function*(){const v=yield ql._fromIdTokenResponse(c,p,_),T=ns(p);return new Dt({user:v,providerId:T,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,D.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=ns(p);return new Dt({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function ns(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function mi(){return(mi=(0,D.Z)(function*(f){var c;const d=vn(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new Dt({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Te(d,{returnSecureToken:!0}),_=yield Dt._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class To extends j.ZR{constructor(c,d,p,_){var v;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,To.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new To(c,d,p,_)}}function Vn(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?To._fromErrorAndOperation(f,v,c,p):v})}function Co(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function Ke(){return Ke=(0,D.Z)(function*(f,c){const d=(0,j.m9)(f);yield Do(!0,d,c);const{providerUserInfo:p}=yield function Pt(f,c){return X.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=Co(p||[]);return d.providerData=d.providerData.filter(v=>_.has(v.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Ke.apply(this,arguments)}function tl(f,c){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,D.Z)(function*(f,c,d=!1){const p=yield ut(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return Dt._forOperation(f,"link",p)})).apply(this,arguments)}function Do(f,c,d){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,D.Z)(function*(f,c,d){yield ah(c);const _=!1===f?"provider-already-linked":"no-such-provider";J(Co(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function Xl(f,c){return oa.apply(this,arguments)}function oa(){return(oa=(0,D.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const v=yield ut(f,Vn(p,_,c,f),d);J(v.idToken,p,"internal-error");const T=Le(v.idToken);J(T,p,"internal-error");const{sub:N}=T;return J(f.uid===N,p,"user-mismatch"),Dt._forOperation(f,_,v)}catch(v){throw"auth/user-not-found"===v?.code&&ue(p,"user-mismatch"),v}})).apply(this,arguments)}function Ss(f,c){return nl.apply(this,arguments)}function nl(){return(nl=(0,D.Z)(function*(f,c,d=!1){const p="signIn",_=yield Vn(f,p,c),v=yield Dt._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(v.user)),v})).apply(this,arguments)}function wu(f,c){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,D.Z)(function*(f,c){return Ss(vn(f),c)})).apply(this,arguments)}function Js(f,c){return il.apply(this,arguments)}function il(){return(il=(0,D.Z)(function*(f,c){const d=(0,j.m9)(f);return yield Do(!1,d,c.providerId),tl(d,c)})).apply(this,arguments)}function ec(f,c){return pt.apply(this,arguments)}function pt(){return(pt=(0,D.Z)(function*(f,c){return Xl((0,j.m9)(f),c)})).apply(this,arguments)}function Iu(){return(Iu=(0,D.Z)(function*(f,c){return Xr(f,"POST","/v1/accounts:signInWithCustomToken",Jt(f,c))})).apply(this,arguments)}function is(){return is=(0,D.Z)(function*(f,c){const d=vn(f),p=yield function iM(f,c){return Iu.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield Dt._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),is.apply(this,arguments)}class aa{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?la._fromServerResponse(c,d):"totpInfo"in d?rl._fromServerResponse(c,d):ue(c,"internal-error")}}class la extends aa{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new la(d)}}class rl extends aa{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new rl(d)}}function ti(f,c,d){var p;J((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),J(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(J(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(J(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function Kv(f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,D.Z)(function*(f){const c=vn(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Tu(){return(Tu=(0,D.Z)(function*(f,c,d){const p=vn(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&ti(p,_,d),yield Ks(p,_,"getOobCode",Dg)})).apply(this,arguments)}function tc(){return tc=(0,D.Z)(function*(f,c,d){yield jv((0,j.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,D.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Kv(f),_});return function(_){return p.apply(this,arguments)}}())}),tc.apply(this,arguments)}function Cu(){return Cu=(0,D.Z)(function*(f,c){yield function gh(f,c){return Eu.apply(this,arguments)}((0,j.m9)(f),{oobCode:c})}),Cu.apply(this,arguments)}function Zv(f,c){return Og.apply(this,arguments)}function Og(){return(Og=(0,D.Z)(function*(f,c){const d=(0,j.m9)(f),p=yield jv(d,{oobCode:c}),_=p.requestType;switch(J(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(p.mfaInfo,d,"internal-error");default:J(p.email,d,"internal-error")}let v=null;return p.mfaInfo&&(v=aa._fromServerResponse(vn(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:_}})).apply(this,arguments)}function Mg(){return(Mg=(0,D.Z)(function*(f,c){const{data:d}=yield Zv((0,j.m9)(f),c);return d.email})).apply(this,arguments)}function Yv(){return(Yv=(0,D.Z)(function*(f,c,d){const p=vn(f),T=yield Ks(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Te).catch(z=>{throw"auth/password-does-not-meet-requirements"===z.code&&Kv(f),z}),N=yield Dt._fromIdTokenResponse(p,"signIn",T);return yield p._updateCurrentUser(N.user),N})).apply(this,arguments)}function Qv(){return(Qv=(0,D.Z)(function*(f,c,d){const p=vn(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(T,N){J(N.handleCodeInApp,p,"argument-error"),N&&ti(p,T,N)})(_,d),yield Ks(p,_,"getOobCode",$v)})).apply(this,arguments)}function Jv(){return(Jv=(0,D.Z)(function*(f,c,d){const p=(0,j.m9)(f),_=Bi.credentialWithLink(c,d||pn());return J(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),wu(p,_)})).apply(this,arguments)}function Xv(){return(Xv=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:createAuthUri",Jt(f,c))})).apply(this,arguments)}function e0(){return e0=(0,D.Z)(function*(f,c){const p={identifier:c,continueUri:Ee()?pn():"http://localhost"},{signinMethods:_}=yield function cM(f,c){return Xv.apply(this,arguments)}((0,j.m9)(f),p);return _||[]}),e0.apply(this,arguments)}function Th(){return Th=(0,D.Z)(function*(f,c){const d=(0,j.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&ti(d.auth,_,c);const{email:v}=yield function Hv(f,c){return _h.apply(this,arguments)}(d.auth,_);v!==f.email&&(yield f.reload())}),Th.apply(this,arguments)}function n0(){return n0=(0,D.Z)(function*(f,c,d){const p=(0,j.m9)(f),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&ti(p.auth,v,d);const{email:T}=yield function Gv(f,c){return vh.apply(this,arguments)}(p.auth,v);T!==f.email&&(yield f.reload())}),n0.apply(this,arguments)}function r0(){return(r0=(0,D.Z)(function*(f,c){return Wt(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Xs(){return Xs=(0,D.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,j.m9)(f),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},T=yield ut(p,function hM(f,c){return r0.apply(this,arguments)}(p.auth,v));p.displayName=T.displayName||null,p.photoURL=T.photoUrl||null;const N=p.providerData.find(({providerId:z})=>"password"===z);N&&(N.displayName=p.displayName,N.photoURL=p.photoURL),yield p._updateTokensIfNecessary(T)}),Xs.apply(this,arguments)}function _i(f,c,d){return nc.apply(this,arguments)}function nc(){return nc=(0,D.Z)(function*(f,c,d){const{auth:p}=f,v={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(v.email=c),d&&(v.password=d);const T=yield ut(f,function ph(f,c){return Pr.apply(this,arguments)}(p,v));yield f._updateTokensIfNecessary(T,!0)}),nc.apply(this,arguments)}class al{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class kg extends al{constructor(c,d,p,_){super(c,d,p),this.username=_}}class s0 extends al{constructor(c,d){super(c,"facebook.com",d)}}class o0 extends kg{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Fg extends al{constructor(c,d){super(c,"google.com",d)}}class a0 extends kg{constructor(c,d,p){super(c,"twitter.com",d,p)}}function Lg(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function rs(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},v=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const T=null===(d=null===(c=Le(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(T)return new al(v,"anonymous"!==T&&"custom"!==T?T:null)}if(!p)return null;switch(p){case"facebook.com":return new s0(v,_);case"github.com":return new o0(v,_);case"google.com":return new Fg(v,_);case"twitter.com":return new a0(v,_,f.screenName||null);case"custom":case"anonymous":return new al(v,null);default:return new al(v,p,_)}}(d)}class ic{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new ic("enroll",c,d)}static _fromMfaPendingCredential(c){return new ic("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return ic._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return ic._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Sh{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=vn(c),_=d.customData._serverResponse,v=(_.mfaInfo||[]).map(N=>aa._fromServerResponse(p,N));J(_.mfaPendingCredential,p,"internal-error");const T=ic._fromMfaPendingCredential(_.mfaPendingCredential);return new Sh(T,v,function(){var N=(0,D.Z)(function*(z){const Z=yield z._process(p,T);delete _.mfaInfo,delete _.mfaPendingCredential;const he=Object.assign(Object.assign({},_),{idToken:Z.idToken,refreshToken:Z.refreshToken});switch(d.operationType){case"signIn":const _e=yield Dt._fromIdTokenResponse(p,d.operationType,he);return yield p._updateCurrentUser(_e.user),_e;case"reauthenticate":return J(d.user,p,"internal-error"),Dt._forOperation(d.user,d.operationType,he);default:ue(p,"internal-error")}});return function(z){return N.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,D.Z)(function*(){return d.signInResolver(c)})()}}class Ah{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>aa._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Ah(c)}getSession(){var c=this;return(0,D.Z)(function*(){return ic._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,D.Z)(function*(){const _=c,v=yield p.getSession(),T=yield ut(p.user,_._process(p.user.auth,v,d));return yield p.user._updateTokensIfNecessary(T),p.user.reload()})()}unenroll(c){var d=this;return(0,D.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const v=yield ut(d.user,function pC(f,c){return Wt(f,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:T})=>T!==p),yield d.user._updateTokensIfNecessary(v),yield d.user.reload()}catch(v){throw v}})()}}const Rh=new WeakMap,Nh="__sak";class c0{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const jg=(()=>{class f extends c0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function u0(){const f=(0,j.z$)();return uh(f)||Ya(f)}()&&function ve(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=YT(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),v=this.localCache[p];_!==v&&d(p,v,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((N,z,Z)=>{this.notifyListeners(N,Z)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const N=this.storage.getItem(_);if(d.newValue!==N)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const v=()=>{const N=this.storage.getItem(_);!p&&this.localCache[_]===N||this.notifyListeners(_,N)},T=this.storage.getItem(_);!function eM(){return(0,j.w1)()&&10===document.documentMode}()||T===d.newValue||d.newValue===d.oldValue?v():setTimeout(v,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const v of Array.from(_))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,v=this;return(0,D.Z)(function*(){yield _().call(v,d,p),v.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,D.Z)(function*(){const v=yield p().call(_,d);return _.localCache[d]=JSON.stringify(v),v})()}_remove(d){var p=()=>super._remove,_=this;return(0,D.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),qt=(()=>{class f extends c0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let _C=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(v=>v.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,D.Z)(function*(){const _=d,{eventId:v,eventType:T,data:N}=_.data,z=p.handlersMap[T];if(!z?.size)return;_.ports[0].postMessage({status:"ack",eventId:v,eventType:T});const Z=Array.from(z).map(function(){var _e=(0,D.Z)(function*(et){return et(_.origin,N)});return function(et){return _e.apply(this,arguments)}}()),he=yield function h0(f){return Promise.all(f.map(function(){var c=(0,D.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(Z);_.ports[0].postMessage({status:"done",eventId:v,eventType:T,response:he})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Au(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class f0{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,D.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let T,N;return new Promise((z,Z)=>{const he=Au("",20);v.port1.start();const _e=setTimeout(()=>{Z(new Error("unsupported_event"))},p);N={messageChannel:v,onMessage(et){const At=et;if(At.data.eventId===he)switch(At.data.status){case"ack":clearTimeout(_e),T=setTimeout(()=>{Z(new Error("timeout"))},3e3);break;case"done":clearTimeout(T),z(At.data.response);break;default:clearTimeout(_e),clearTimeout(T),Z(new Error("invalid_response"))}}},_.handlers.add(N),v.port1.addEventListener("message",N.onMessage),_.target.postMessage({eventType:c,eventId:he,data:d},[v.port2])}).finally(()=>{N&&_.removeMessageHandler(N)})})()}}function Kn(){return window}function Ru(){return typeof Kn().WorkerGlobalScope<"u"&&"function"==typeof Kn().importScripts}function ss(){return(ss=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const rn="firebaseLocalStorageDb",ll="firebaseLocalStorage",tr="fbase_key";class Nu{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function xu(f,c){return f.transaction([ll],c?"readwrite":"readonly").objectStore(ll)}function nr(){const f=indexedDB.open(rn,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(ll,{keyPath:tr})}catch(_){d(_)}}),f.addEventListener("success",(0,D.Z)(function*(){const p=f.result;p.objectStoreNames.contains(ll)?c(p):(p.close(),yield function rc(){const f=indexedDB.deleteDatabase(rn);return new Nu(f).toPromise()}(),c(yield nr()))}))})}function m0(f,c,d){return $g.apply(this,arguments)}function $g(){return($g=(0,D.Z)(function*(f,c,d){const p=xu(f,!0).put({[tr]:c,value:d});return new Nu(p).toPromise()})).apply(this,arguments)}function eo(){return(eo=(0,D.Z)(function*(f,c){const d=xu(f,!1).get(c),p=yield new Nu(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Gg(f,c){const d=xu(f,!0).delete(c);return new Nu(d).toPromise()}const cl=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,D.Z)(function*(){return d.db||(d.db=yield nr()),d.db})()}_withRetries(d){var p=this;return(0,D.Z)(function*(){let _=0;for(;;)try{const v=yield p._openDb();return yield d(v)}catch(v){if(_++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,D.Z)(function*(){return Ru()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,D.Z)(function*(){d.receiver=_C._getInstance(function g0(){return Ru()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,D.Z)(function*(_,v){return{keyProcessed:(yield d._poll()).includes(v.key)}});return function(_,v){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,D.Z)(function*(_,v){return["keyChanged"]});return function(_,v){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,D.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function vC(){return ss.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new f0(d.activeServiceWorker);const v=yield d.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(_=v[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,D.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function p0(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const d=yield nr();return yield m0(d,Nh,"1"),yield Gg(d,Nh),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,D.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,D.Z)(function*(){return _._withPendingWrite((0,D.Z)(function*(){return yield _._withRetries(v=>m0(v,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,D.Z)(function*(){const _=yield p._withRetries(v=>function EC(f,c){return eo.apply(this,arguments)}(v,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,D.Z)(function*(){return p._withPendingWrite((0,D.Z)(function*(){return yield p._withRetries(_=>Gg(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,D.Z)(function*(){const p=yield d._withRetries(T=>{const N=xu(T,!1).getAll();return new Nu(N).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],v=new Set;if(0!==p.length)for(const{fbase_key:T,value:N}of p)v.add(T),JSON.stringify(d.localCache[T])!==JSON.stringify(N)&&(d.notifyListeners(T,N),_.push(T));for(const T of Object.keys(d.localCache))d.localCache[T]&&!v.has(T)&&(d.notifyListeners(T,null),_.push(T));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const v of Array.from(_))v(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),xh=1e12;class CC{constructor(c){this.auth=c,this.counter=xh,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new v0(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||xh;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||xh))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,D.Z)(function*(){var p;return null===(p=d._widgets.get(c||xh))||void 0===p||p.execute(),""})()}}class v0{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;J(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function sc(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zg=Kl("rcb"),DC=new Jr(3e4,6e4);class AC{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Kn().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return J(function RC(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&P(Kn().grecaptcha)?Promise.resolve(Kn().grecaptcha):new Promise((p,_)=>{const v=Kn().setTimeout(()=>{_(Be(c,"network-request-failed"))},DC.get());Kn()[zg]=()=>{Kn().clearTimeout(v),delete Kn()[zg];const N=Kn().grecaptcha;if(!N||!P(N))return void _(Be(c,"internal-error"));const z=N.render;N.render=(Z,he)=>{const _e=z(Z,he);return this.counter++,_e},this.hostLanguage=d,p(N)},Lv(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:zg,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(v),_(Be(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=Kn().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ee{load(c){return(0,D.Z)(function*(){return new CC(c)})()}clearedOneInstance(){}}const St="recaptcha",Ft={theme:"light",type:"image"};class Lt{constructor(c,d,p=Object.assign({},Ft)){this.parameters=p,this.type=St,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(c),this.isInvisible="invisible"===this.parameters.size,J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;J(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ee:new AC,this.validateStartingState()}verify(){var c=this;return(0,D.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(v=>{const T=N=>{N&&(c.tokenChangeListeners.delete(T),v(N))};c.tokenChangeListeners.add(T),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=Kn()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,D.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,D.Z)(function*(){J(Ee()&&!Ru(),c.auth,"internal-error"),yield function Ai(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function xe(f){return me.apply(this,arguments)}(c.auth);J(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ph{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Xa._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function os(){return(os=(0,D.Z)(function*(f,c,d){const p=vn(f),_=yield Mu(p,c,(0,j.m9)(d));return new Ph(_,v=>wu(p,v))})).apply(this,arguments)}function Ou(){return(Ou=(0,D.Z)(function*(f,c,d){const p=(0,j.m9)(f);yield Do(!1,p,"phone");const _=yield Mu(p.auth,c,(0,j.m9)(d));return new Ph(_,v=>Js(p,v))})).apply(this,arguments)}function E0(){return(E0=(0,D.Z)(function*(f,c,d){const p=(0,j.m9)(f),_=yield Mu(p.auth,c,(0,j.m9)(d));return new Ph(_,v=>ec(p,v))})).apply(this,arguments)}function Mu(f,c,d){return Ri.apply(this,arguments)}function Ri(){return Ri=(0,D.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let v;if(J("string"==typeof _,f,"argument-error"),J(d.type===St,f,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const T=v.session;if("phoneNumber"in v)return J("enroll"===T.type,f,"internal-error"),(yield function fC(f,c){return Wt(f,"POST","/v2/accounts/mfaEnrollment:start",Jt(f,c))}(f,{idToken:T.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{J("signin"===T.type,f,"internal-error");const N=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return J(N,f,"missing-multi-factor-info"),(yield function IC(f,c){return Wt(f,"POST","/v2/accounts/mfaSignIn:start",Jt(f,c))}(f,{mfaPendingCredential:T.credential,mfaEnrollmentId:N,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:T}=yield function rC(f,c){return Ag.apply(this,arguments)}(f,{phoneNumber:v.phoneNumber,recaptchaToken:_});return T}}finally{d._reset()}}),Ri.apply(this,arguments)}function Oh(){return(Oh=(0,D.Z)(function*(f,c){yield tl((0,j.m9)(f),c)})).apply(this,arguments)}let to=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=vn(d)}verifyPhoneNumber(d,p){return Mu(this.auth,d,(0,j.m9)(p))}static credential(d,p){return Xa._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?Xa._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function ir(f,c){return c?Vi(c):(J(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class qg extends Yl{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return wo(c,this._buildIdpRequest())}_linkToIdToken(c,d){return wo(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return wo(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function b0(f){return Ss(f.auth,new qg(f),f.bypassAuthState)}function xC(f){const{auth:c,user:d}=f;return J(d,c,"internal-error"),Xl(d,new qg(f),f.bypassAuthState)}function PC(f){return ku.apply(this,arguments)}function ku(){return(ku=(0,D.Z)(function*(f){const{auth:c,user:d}=f;return J(d,c,"internal-error"),tl(d,new qg(f),f.bypassAuthState)})).apply(this,arguments)}class Mh{constructor(c,d,p,_,v=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,D.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,D.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:v,tenantId:T,error:N,type:z}=c;if(N)return void d.reject(N);const Z={auth:d.auth,requestUri:p,sessionId:_,tenantId:T||void 0,postBody:v||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(z)(Z))}catch(he){d.reject(he)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return b0;case"linkViaPopup":case"linkViaRedirect":return PC;case"reauthViaPopup":case"reauthViaRedirect":return xC;default:ue(this.auth,"internal-error")}}resolve(c){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const w0=new Jr(2e3,1e4);function Zg(){return(Zg=(0,D.Z)(function*(f,c,d){const p=vn(f);rt(f,c,st);const _=ir(p,d);return new Fh(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function Fu(){return(Fu=(0,D.Z)(function*(f,c,d){const p=(0,j.m9)(f);rt(p.auth,c,st);const _=ir(p.auth,d);return new Fh(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function kh(){return(kh=(0,D.Z)(function*(f,c,d){const p=(0,j.m9)(f);rt(p.auth,c,st);const _=ir(p.auth,d);return new Fh(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let Fh=(()=>{class f extends Mh{constructor(d,p,_,v,T){super(d,p,v,T),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,D.Z)(function*(){const p=yield d.execute();return J(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,D.Z)(function*(){Qt(1===d.filter.length,"Popup operations only handle one event");const p=Au();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(Be(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,w0.get())};d()}}return f.currentPopupAction=null,f})();const C0="pendingRedirect",ul=new Map;class OC extends Mh{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,D.Z)(function*(){let p=ul.get(d.auth._key());if(!p){try{const v=(yield function MC(f,c){return Ni.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(v)}catch(_){p=()=>Promise.reject(_)}ul.set(d.auth._key(),p)}return d.bypassAuthState||ul.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,D.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function Ni(){return(Ni=(0,D.Z)(function*(f,c){const d=S0(c),p=D0(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function Ao(f,c){return gn.apply(this,arguments)}function gn(){return(gn=(0,D.Z)(function*(f,c){return D0(f)._set(S0(c),"true")})).apply(this,arguments)}function Yg(f,c){ul.set(f._key(),c)}function D0(f){return Vi(f._redirectPersistence)}function S0(f){return Ka(C0,f.config.apiKey,f.name)}function A0(f,c,d){return function R0(f,c,d){return oc.apply(this,arguments)}(f,c,d)}function oc(){return(oc=(0,D.Z)(function*(f,c,d){const p=vn(f);rt(f,c,st),yield p._initializationPromise;const _=ir(p,d);return yield Ao(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function ca(f,c,d){return function FC(f,c,d){return ac.apply(this,arguments)}(f,c,d)}function ac(){return(ac=(0,D.Z)(function*(f,c,d){const p=(0,j.m9)(f);rt(p.auth,c,st),yield p.auth._initializationPromise;const _=ir(p.auth,d);yield Ao(_,p.auth);const v=yield lc(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function Lh(f,c,d){return function Vh(f,c,d){return Lu.apply(this,arguments)}(f,c,d)}function Lu(){return(Lu=(0,D.Z)(function*(f,c,d){const p=(0,j.m9)(f);rt(p.auth,c,st),yield p.auth._initializationPromise;const _=ir(p.auth,d);yield Do(!1,p,c.providerId),yield Ao(_,p.auth);const v=yield lc(p);return _._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function Bh(){return(Bh=(0,D.Z)(function*(f,c){return yield vn(f)._initializationPromise,Uh(f,c,!1)})).apply(this,arguments)}function Uh(f,c){return ua.apply(this,arguments)}function ua(){return(ua=(0,D.Z)(function*(f,c,d=!1){const p=vn(f),_=ir(p,c),T=yield new OC(p,_,d).execute();return T&&!d&&(delete T.user._redirectEventId,yield p._persistUserIfCurrent(T.user),yield p._setRedirectUser(null,c)),T})).apply(this,arguments)}function lc(f){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,D.Z)(function*(f){const c=Au(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class jh{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function VC(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x0(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!x0(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Be(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(LC(c))}saveEventToCache(c){this.cachedEventUids.add(LC(c)),this.lastProcessedEventTime=Date.now()}}function LC(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function x0({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function BC(f){return P0.apply(this,arguments)}function P0(){return(P0=(0,D.Z)(function*(f,c={}){return Wt(f,"GET","/v1/projects",c)})).apply(this,arguments)}const Jg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vu=/^https?/;function dl(){return(dl=(0,D.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield BC(f);for(const d of c)try{if(Xg(d))return}catch{}ue(f,"unauthorized-domain")})).apply(this,arguments)}function Xg(f){const c=pn(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const T=new URL(f);return""===T.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&T.hostname===p}if(!Vu.test(d))return!1;if(Jg.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const Hh=new Jr(3e4,6e4);function jC(){const f=Kn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Bu=null;const no=new Jr(5e3,15e3),$C="__/auth/iframe",$h="emulator/auth/iframe",em={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gh(f){const c=f.config;J(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?Di(c,$h):`https://${f.config.authDomain}/${$C}`,p={apiKey:c.apiKey,appName:f.name,v:ze.SDK_VERSION},_=M0.get(f.config.apiHost);_&&(p.eid=_);const v=f._getFrameworks();return v.length&&(p.fw=v.join(",")),`${d}?${(0,j.xO)(p).slice(1)}`}function nm(){return nm=(0,D.Z)(function*(f){const c=yield function HC(f){return Bu=Bu||function O0(f){return new Promise((c,d)=>{var p,_,v;function T(){jC(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{jC(),d(Be(f,"network-request-failed"))},timeout:Hh.get()})}if(null!==(_=null===(p=Kn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(v=Kn().gapi)||void 0===v||!v.load){const N=Kl("iframefcb");return Kn()[N]=()=>{gapi.load?T():d(Be(f,"network-request-failed"))},Lv(`https://apis.google.com/js/api.js?onload=${N}`).catch(z=>d(z))}T()}}).catch(c=>{throw Bu=null,c})}(f),Bu}(f),d=Kn().gapi;return J(d,f,"internal-error"),c.open({where:document.body,url:Gh(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:em,dontclear:!0},p=>new Promise(function(){var _=(0,D.Z)(function*(v,T){yield p.restyle({setHideOnLeave:!1});const N=Be(f,"network-request-failed"),z=Kn().setTimeout(()=>{T(N)},no.get());function Z(){Kn().clearTimeout(z),v(p)}p.ping(Z).then(Z,()=>{T(N)})});return function(v,T){return _.apply(this,arguments)}}()))}),nm.apply(this,arguments)}const k0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Uu{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const B0="__/auth/handler",U0="emulator/auth/handler",ju=encodeURIComponent("fac");function im(f,c,d,p,_,v){return xi.apply(this,arguments)}function xi(){return(xi=(0,D.Z)(function*(f,c,d,p,_,v){J(f.config.authDomain,f,"auth-domain-config-required"),J(f.config.apiKey,f,"invalid-api-key");const T={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:ze.SDK_VERSION,eventId:_};if(c instanceof st){c.setDefaultLanguage(f.languageCode),T.providerId=c.providerId||"",(0,j.xb)(c.getCustomParameters())||(T.customParameters=JSON.stringify(c.getCustomParameters()));for(const[he,_e]of Object.entries(v||{}))T[he]=_e}if(c instanceof Ln){const he=c.getScopes().filter(_e=>""!==_e);he.length>0&&(T.scopes=he.join(","))}f.tenantId&&(T.tid=f.tenantId);const N=T;for(const he of Object.keys(N))void 0===N[he]&&delete N[he];const z=yield f._getAppCheckToken(),Z=z?`#${ju}=${encodeURIComponent(z)}`:"";return`${function WC({config:f}){return f.emulator?Di(f,U0):`https://${f.authDomain}/${B0}`}(f)}?${(0,j.xO)(N).slice(1)}${Z}`})).apply(this,arguments)}const Nn="webStorageSupport",j0=class rm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qt,this._completeRedirectFn=Uh,this._overrideRedirectResult=Yg}_openPopup(c,d,p,_){var v=this;return(0,D.Z)(function*(){var T;Qt(null===(T=v.eventManagers[c._key()])||void 0===T?void 0:T.manager,"_initialize() not called before _openPopup()");const N=yield im(c,d,p,pn(),_);return function hl(f,c,d,p=500,_=600){const v=Math.max((window.screen.availHeight-_)/2,0).toString(),T=Math.max((window.screen.availWidth-p)/2,0).toString();let N="";const z=Object.assign(Object.assign({},k0),{width:p.toString(),height:_.toString(),top:v,left:T}),Z=(0,j.z$)().toLowerCase();d&&(N=kv(Z)?"_blank":d),ch(Z)&&(c=c||"http://localhost",z.scrollbars="yes");const he=Object.entries(z).reduce((et,[At,rr])=>`${et}${At}=${rr},`,"");if(function un(f=(0,j.z$)()){var c;return Ya(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Z)&&"_self"!==N)return function zC(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",N),new Uu(null);const _e=window.open(c||"",N,he);J(_e,f,"popup-blocked");try{_e.focus()}catch{}return new Uu(_e)}(c,N,Au())})()}_openRedirect(c,d,p,_){var v=this;return(0,D.Z)(function*(){return yield v._originValidation(c),function yC(f){Kn().location.href=f}(yield im(c,d,p,pn(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:v}=this.eventManagers[d];return _?Promise.resolve(_):(Qt(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,D.Z)(function*(){const p=yield function tm(f){return nm.apply(this,arguments)}(c),_=new jh(c);return p.register("authEvent",v=>(J(v?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Nn,{type:Nn},_=>{var v;const T=null===(v=_?.[0])||void 0===v?void 0:v[Nn];void 0!==T&&d(!!T),ue(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function UC(f){return dl.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return YT()||uh()||Ya()}};class H0{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return Yt("unexpected MultiFactorSessionType")}}}class Rs extends H0{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Rs(c)}_finalizeEnroll(c,d,p){return function Ug(f,c){return Wt(f,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function We(f,c){return Wt(f,"POST","/v2/accounts/mfaSignIn:finalize",Jt(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let cc=(()=>{class f{constructor(){}static assertion(d){return Rs._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var fl="@firebase/auth";class KC{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,D.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pl(){return window}(0,j.Pz)("authIdTokenMaxAge"),function wM(f){(0,ze._registerComponent)(new Ts.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:T,authDomain:N}=p.options;J(T&&!T.includes(":"),"invalid-api-key",{appName:p.name});const z={apiKey:T,authDomain:N,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dh(f)},Z=new tM(p,_,v,z);return function Uv(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(Vi);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(Z,d),Z},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,ze._registerComponent)(new Ts.wA("auth-internal",c=>{const d=vn(c.getProvider("auth").getImmediate());return new KC(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ze.registerVersion)(fl,"1.5.1",function bM(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,ze.registerVersion)(fl,"1.5.1","esm2017")}("Browser");function om(){return om=(0,D.Z)(function*(f,c,d){var p;const{BuildInfo:_}=pl();Qt(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function zu(f){return lm.apply(this,arguments)}(c.sessionId),T={};return Ya()?T.ibi=_.packageName:Za()?T.apn=_.packageName:ue(f,"operation-not-supported-in-this-environment"),_.displayName&&(T.appDisplayName=_.displayName),T.sessionId=v,im(f,d,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,T)}),om.apply(this,arguments)}function am(){return(am=(0,D.Z)(function*(f){const{BuildInfo:c}=pl(),d={};Ya()?d.iosBundleId=c.packageName:Za()?d.androidPackageName=c.packageName:ue(f,"operation-not-supported-in-this-environment"),yield BC(f,d)})).apply(this,arguments)}function zh(){return(zh=(0,D.Z)(function*(f,c,d){const{cordova:p}=pl();let _=()=>{};try{yield new Promise((v,T)=>{let N=null;function z(){var _e;v();const et=null===(_e=p.plugins.browsertab)||void 0===_e?void 0:_e.close;"function"==typeof et&&et(),"function"==typeof d?.close&&d.close()}function Z(){N||(N=window.setTimeout(()=>{T(Be(f,"redirect-cancelled-by-user"))},2e3))}function he(){"visible"===document?.visibilityState&&Z()}c.addPassiveListener(z),document.addEventListener("resume",Z,!1),Za()&&document.addEventListener("visibilitychange",he,!1),_=()=>{c.removePassiveListener(z),document.removeEventListener("resume",Z,!1),document.removeEventListener("visibilitychange",he,!1),N&&window.clearTimeout(N)}})}finally{_()}})).apply(this,arguments)}function lm(){return(lm=(0,D.Z)(function*(f){const c=function DM(f){if(Qt(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),d=new Uint8Array(c);for(let p=0;p<f.length;p++)d[p]=f.charCodeAt(p);return d}(f),d=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(d)).map(_=>_.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class SM extends jh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(c)),super.onEvent(c)}initialized(){var c=this;return(0,D.Z)(function*(){yield c.initPromise})()}}function gl(f){return $0.apply(this,arguments)}function $0(){return($0=(0,D.Z)(function*(f){const c=yield um()._get(dm(f));return c&&(yield um()._remove(dm(f))),c})).apply(this,arguments)}function JC(){const f=[];for(let d=0;d<20;d++){const p=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return f.join("")}function um(){return Vi(jg)}function dm(f){return Ka("authEvent",f.config.apiKey,f.name)}function qh(f){if(!f?.includes("?"))return{};const[c,...d]=f.split("?");return(0,j.zd)(d.join("?"))}const tD=class Kh{constructor(){this._redirectPersistence=qt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Uh,this._overrideRedirectResult=Yg}_initialize(c){var d=this;return(0,D.Z)(function*(){const p=c._key();let _=d.eventManagers.get(p);return _||(_=new SM(c),d.eventManagers.set(p,_),d.attachCallbackListeners(c,_)),_})()}_openPopup(c){ue(c,"operation-not-supported-in-this-environment")}_openRedirect(c,d,p,_){var v=this;return(0,D.Z)(function*(){!function Wh(f){var c,d,p,_,v,T,N,z,Z,he;const _e=pl();J("function"==typeof(null===(c=_e?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),J(typeof(null===(d=_e?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),J("function"==typeof(null===(v=null===(_=null===(p=_e?.cordova)||void 0===p?void 0:p.plugins)||void 0===_?void 0:_.browsertab)||void 0===v?void 0:v.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),J("function"==typeof(null===(z=null===(N=null===(T=_e?.cordova)||void 0===T?void 0:T.plugins)||void 0===N?void 0:N.browsertab)||void 0===z?void 0:z.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),J("function"==typeof(null===(he=null===(Z=_e?.cordova)||void 0===Z?void 0:Z.InAppBrowser)||void 0===he?void 0:he.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const T=yield v._initialize(c);yield T.initialized(),T.resetRedirect(),function kC(){ul.clear()}(),yield v._originValidation(c);const N=function Or(f,c,d=null){return{type:c,eventId:d,urlResponse:null,sessionId:JC(),postBody:null,tenantId:f.tenantId,error:Be(f,"no-auth-event")}}(c,p,_);yield function cm(f,c){return um()._set(dm(f),c)}(c,N);const z=yield function ci(f,c,d){return om.apply(this,arguments)}(c,N,d),Z=yield function as(f){const{cordova:c}=pl();return new Promise(d=>{c.plugins.browsertab.isAvailable(p=>{let _=null;p?c.plugins.browsertab.openUrl(f):_=c.InAppBrowser.open(f,function XO(f=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),d(_)})})}(z);return function dc(f,c,d){return zh.apply(this,arguments)}(c,T,Z)})()}_isIframeWebStorageSupported(c,d){throw new Error("Method not implemented.")}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Gu(f){return am.apply(this,arguments)}(c)),this.originValidationPromises[d]}attachCallbackListeners(c,d){const{universalLinks:p,handleOpenURL:_,BuildInfo:v}=pl(),T=setTimeout((0,D.Z)(function*(){yield gl(c),d.onEvent(hc())}),500),N=function(){var he=(0,D.Z)(function*(_e){clearTimeout(T);const et=yield gl(c);let At=null;et&&_e?.url&&(At=function G0(f,c){var d,p;const _=function eD(f){const c=qh(f),d=c.link?decodeURIComponent(c.link):void 0,p=qh(d).link,_=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return qh(_).link||_||p||d||f}(c);if(_.includes("/__/auth/callback")){const v=qh(_),T=v.firebaseError?function XC(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,N=null===(p=null===(d=T?.code)||void 0===d?void 0:d.split("auth/"))||void 0===p?void 0:p[1],z=N?Be(N):null;return z?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:z,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:_,postBody:null}}return null}(et,_e.url)),d.onEvent(At||hc())});return function(et){return he.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,N);const z=_,Z=`${v.packageName.toLowerCase()}://`;pl().handleOpenURL=function(){var he=(0,D.Z)(function*(_e){if(_e.toLowerCase().startsWith(Z)&&N({url:_e}),"function"==typeof z)try{z(_e)}catch(et){console.error(et)}});return function(_e){return he.apply(this,arguments)}}()}};function hc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Be("no-auth-event")}}function ml(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function fm(f=(0,j.z$)()){return!("file:"!==ml()&&"ionic:"!==ml()&&"capacitor:"!==ml()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function W0(){try{const f=self.localStorage,c=Au();if(f)return f.setItem(c,"1"),f.removeItem(c),!function Wu(f=(0,j.z$)()){return function sD(){return(0,j.w1)()&&11===document?.documentMode}()||function fc(f=(0,j.z$)()){return/Edge\/\d+/.test(f)}(f)}()||(0,j.hl)()}catch{return q0()&&(0,j.hl)()}return!1}function q0(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qh(){return(function Yh(){return"http:"===ml()||"https:"===ml()}()||(0,j.ru)()||fm())&&!function rD(){return(0,j.b$)()||(0,j.UG)()}()&&W0()&&!q0()}function K0(){return fm()&&typeof document<"u"}function pm(){return(pm=(0,D.Z)(function*(){return!!K0()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const Mr={LOCAL:"local",NONE:"none",SESSION:"session"},ha=J,gm="persistence";function Jh(f){return Z0.apply(this,arguments)}function Z0(){return(Z0=(0,D.Z)(function*(f){yield f._initializationPromise;const c=lD(),d=Ka(gm,f.config.apiKey,f.name);c&&c.setItem(d,f._getPersistence())})).apply(this,arguments)}function lD(){var f;try{return(null===(f=function oD(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const cD=J;class fa{constructor(){this.browserResolver=Vi(j0),this.cordovaResolver=Vi(tD),this.underlyingResolver=null,this._redirectPersistence=qt,this._completeRedirectFn=Uh,this._overrideRedirectResult=Yg}_initialize(c){var d=this;return(0,D.Z)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,d,p,_){var v=this;return(0,D.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,d,p,_)})()}_openRedirect(c,d,p,_){var v=this;return(0,D.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,d,p,_)})()}_isIframeWebStorageSupported(c,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,d)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return K0()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cD(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,D.Z)(function*(){if(c.underlyingResolver)return;const d=yield function AM(){return pm.apply(this,arguments)}();c.underlyingResolver=d?c.cordovaResolver:c.browserResolver})()}}function Xh(f){return f.unwrap()}function NM(f){return uD(f)}function uD(f){const{_tokenResponse:c}=f instanceof j.ZR?f.customData:f;if(!c)return null;if(!(f instanceof j.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return to.credentialFromResult(f);const d=c.providerId;if(!d||d===mr.PASSWORD)return null;let p;switch(d){case mr.GOOGLE:p=yr;break;case mr.FACEBOOK:p=el;break;case mr.GITHUB:p=Pg;break;case mr.TWITTER:p=An;break;default:const{oauthIdToken:_,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:N,nonce:z}=c;return v||T||_||N?N?d.startsWith("saml.")?Io._create(d,N):Ys._fromParams({providerId:d,signInMethod:d,pendingToken:N,idToken:_,accessToken:v}):new ei(d).credential({idToken:_,accessToken:v,rawNonce:z}):null}return f instanceof j.ZR?p.credentialFromError(f):p.credentialFromResult(f)}function kr(f,c){return c.catch(d=>{throw d instanceof j.ZR&&function mm(f,c){var d;const p=null===(d=c.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new xM(f,function Bg(f,c){var d;const p=(0,j.m9)(f),_=c;return J(c.customData.operationType,p,"argument-error"),J(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),Sh._fromError(p,_)}(f,c));else if(p){const _=uD(c),v=c;_&&(v.credential=_,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(f,d),d}).then(d=>{const _=d.user;return{operationType:d.operationType,credential:NM(d),additionalUserInfo:Lg(d),user:Ro.getOrCreate(_)}})}function Q0(f,c){return J0.apply(this,arguments)}function J0(){return(J0=(0,D.Z)(function*(f,c){const d=yield c;return{verificationId:d.verificationId,confirm:p=>kr(f,d.confirm(p))}})).apply(this,arguments)}class xM{constructor(c,d){this.resolver=d,this.auth=function RM(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return kr(Xh(this.auth),this.resolver.resolveSignIn(c))}}class Ro{constructor(c){this._delegate=c,this.multiFactor=function gC(f){const c=(0,j.m9)(f);return Rh.has(c)||Rh.set(c,Ah._fromUser(c)),Rh.get(c)}(c)}static getOrCreate(c){return Ro.USER_MAP.has(c)||Ro.USER_MAP.set(c,new Ro(c)),Ro.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var d=this;return(0,D.Z)(function*(){return kr(d.auth,Js(d._delegate,c))})()}linkWithPhoneNumber(c,d){var p=this;return(0,D.Z)(function*(){return Q0(p.auth,function Wg(f,c,d){return Ou.apply(this,arguments)}(p._delegate,c,d))})()}linkWithPopup(c){var d=this;return(0,D.Z)(function*(){return kr(d.auth,function T0(f,c,d){return kh.apply(this,arguments)}(d._delegate,c,fa))})()}linkWithRedirect(c){var d=this;return(0,D.Z)(function*(){return yield Jh(vn(d.auth)),Lh(d._delegate,c,fa)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var d=this;return(0,D.Z)(function*(){return kr(d.auth,ec(d._delegate,c))})()}reauthenticateWithPhoneNumber(c,d){return Q0(this.auth,function NC(f,c,d){return E0.apply(this,arguments)}(this._delegate,c,d))}reauthenticateWithPopup(c){return kr(this.auth,function I0(f,c,d){return Fu.apply(this,arguments)}(this._delegate,c,fa))}reauthenticateWithRedirect(c){var d=this;return(0,D.Z)(function*(){return yield Jh(vn(d.auth)),ca(d._delegate,c,fa)})()}sendEmailVerification(c){return function dM(f,c){return Th.apply(this,arguments)}(this._delegate,c)}unlink(c){var d=this;return(0,D.Z)(function*(){return yield function Jl(f,c){return Ke.apply(this,arguments)}(d._delegate,c),d})()}updateEmail(c){return function fM(f,c){return _i((0,j.m9)(f),c,null)}(this._delegate,c)}updatePassword(c){return function pM(f,c){return _i((0,j.m9)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function So(f,c){return Oh.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function ol(f,c){return Xs.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,d){return function t0(f,c,d){return n0.apply(this,arguments)}(this._delegate,c,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ro.USER_MAP=new WeakMap;const pa=J;let qu=(()=>{class f{constructor(d,p){if(this.app=d,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:_}=d.options;pa(_,"invalid-api-key",{appName:d.name}),pa(_,"invalid-api-key",{appName:d.name});const v=typeof window<"u"?fa:void 0;this._delegate=p.initialize({options:{persistence:X0(_,d.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(za),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ro.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,p){!function be(f,c,d){const p=vn(f);J(p._canInitEmulator,p,"emulator-config-failed"),J(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,v=vu(c),{host:T,port:N}=function Tg(f){const c=vu(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const v=_[1];return{host:v,port:Zl(p.substr(v.length+1))}}{const[v,T]=p.split(":");return{host:v,port:Zl(T)}}}(c);p.config.emulator={url:`${v}//${T}${null===N?"":`:${N}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:T,port:N,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function eC(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,d,p)}applyActionCode(d){return function As(f,c){return Cu.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return Zv(this._delegate,d)}confirmPasswordReset(d,p){return function sl(f,c,d){return tc.apply(this,arguments)}(this._delegate,d,p)}createUserWithEmailAndPassword(d,p){var _=this;return(0,D.Z)(function*(){return kr(_._delegate,function cC(f,c,d){return Yv.apply(this,arguments)}(_._delegate,d,p))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function uM(f,c){return e0.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function aM(f,c){const d=Ql.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,D.Z)(function*(){pa(Qh(),d._delegate,"operation-not-supported-in-this-environment");const p=yield function N0(f,c){return Bh.apply(this,arguments)}(d._delegate,fa);return p?kr(d._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function nD(f,c){vn(f)._logFramework(c)}(this._delegate,d)}onAuthStateChanged(d,p,_){const{next:v,error:T,complete:N}=_m(d,p,_);return this._delegate.onAuthStateChanged(v,T,N)}onIdTokenChanged(d,p,_){const{next:v,error:T,complete:N}=_m(d,p,_);return this._delegate.onIdTokenChanged(v,T,N)}sendSignInLinkToEmail(d,p){return function oM(f,c,d){return Qv.apply(this,arguments)}(this._delegate,d,p)}sendPasswordResetEmail(d,p){return function er(f,c,d){return Tu.apply(this,arguments)}(this._delegate,d,p||void 0)}setPersistence(d){var p=this;return(0,D.Z)(function*(){let _;switch(function aD(f,c){ha(Object.values(Mr).includes(c),f,"invalid-persistence-type"),(0,j.b$)()?ha(c!==Mr.SESSION,f,"unsupported-persistence-type"):(0,j.UG)()?ha(c===Mr.NONE,f,"unsupported-persistence-type"):q0()?ha(c===Mr.NONE||c===Mr.LOCAL&&(0,j.hl)(),f,"unsupported-persistence-type"):ha(c===Mr.NONE||W0(),f,"unsupported-persistence-type")}(p._delegate,d),d){case Mr.SESSION:_=qt;break;case Mr.LOCAL:_=(yield Vi(cl)._isAvailable())?cl:jg;break;case Mr.NONE:_=qa;break;default:return ue("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(_)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return kr(this._delegate,function bu(f){return mi.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return kr(this._delegate,wu(this._delegate,d))}signInWithCustomToken(d){return kr(this._delegate,function qv(f,c){return is.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,p){return kr(this._delegate,function sM(f,c,d){return wu((0,j.m9)(f),Bi.credential(c,d)).catch(function(){var p=(0,D.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Kv(f),_});return function(_){return p.apply(this,arguments)}}())}(this._delegate,d,p))}signInWithEmailLink(d,p){return kr(this._delegate,function lM(f,c,d){return Jv.apply(this,arguments)}(this._delegate,d,p))}signInWithPhoneNumber(d,p){return Q0(this._delegate,function Pu(f,c,d){return os.apply(this,arguments)}(this._delegate,d,p))}signInWithPopup(d){var p=this;return(0,D.Z)(function*(){return pa(Qh(),p._delegate,"operation-not-supported-in-this-environment"),kr(p._delegate,function Kg(f,c,d){return Zg.apply(this,arguments)}(p._delegate,d,fa))})()}signInWithRedirect(d){var p=this;return(0,D.Z)(function*(){return pa(Qh(),p._delegate,"operation-not-supported-in-this-environment"),yield Jh(p._delegate),A0(p._delegate,d,fa)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function rM(f,c){return Mg.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=Mr,f})();function _m(f,c,d){let p=f;"function"!=typeof f&&({next:p,error:c,complete:d}=f);const _=p;return{next:T=>_(T&&Ro.getOrCreate(T)),error:c,complete:d}}function X0(f,c){const d=function Y0(f,c){const d=lD();if(!d)return[];const p=Ka(gm,f,c);switch(d.getItem(p)){case Mr.NONE:return[qa];case Mr.LOCAL:return[cl,qt];case Mr.SESSION:return[qt];default:return[]}}(f,c);if(typeof self<"u"&&!d.includes(cl)&&d.push(cl),typeof window<"u")for(const p of[jg,qt])d.includes(p)||d.push(p);return d.includes(qa)||d.push(qa),d}class ef{constructor(){this.providerId="phone",this._delegate=new to(Xh(Ve.Z.auth()))}static credential(c,d){return to.credential(c,d)}verifyPhoneNumber(c,d){return this._delegate.verifyPhoneNumber(c,d)}unwrap(){return this._delegate}}ef.PHONE_SIGN_IN_METHOD=to.PHONE_SIGN_IN_METHOD,ef.PROVIDER_ID=to.PROVIDER_ID;const pc=J;class eE{constructor(c,d,p=Ve.Z.app()){var _;pc(null===(_=p.options)||void 0===_?void 0:_.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new Lt(p.auth(),c,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function tf(f){f.INTERNAL.registerComponent(new Ts.wA("auth-compat",c=>{const d=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new qu(d,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Bi,FacebookAuthProvider:el,GithubAuthProvider:Pg,GoogleAuthProvider:yr,OAuthProvider:ei,SAMLAuthProvider:wh,PhoneAuthProvider:ef,PhoneMultiFactorGenerator:cc,RecaptchaVerifier:eE,TwitterAuthProvider:An,Auth:qu,AuthCredential:Yl,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.1")}(Ve.Z)},861:(Zr,gi,it)=>{function D(j,ze,cn,zt,Fn,oi,xt){try{var H=j[oi](xt),oe=H.value}catch(ke){return void cn(ke)}H.done?ze(oe):Promise.resolve(oe).then(zt,Fn)}function Ve(j){return function(){var ze=this,cn=arguments;return new Promise(function(zt,Fn){var oi=j.apply(ze,cn);function xt(oe){D(oi,zt,Fn,xt,H,"next",oe)}function H(oe){D(oi,zt,Fn,xt,H,"throw",oe)}xt(void 0)})}}it.d(gi,{Z:()=>Ve})}},Zr=>{var gi=D=>Zr(Zr.s=D);gi(614),gi(953)}]);
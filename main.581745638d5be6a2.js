(self.webpackChunkplease_take_your_turn=self.webpackChunkplease_take_your_turn||[]).push([[179],{58:(fr,Un,st)=>{"use strict";st.d(Un,{BH:()=>ci,DV:()=>H,Dv:()=>Tn,G6:()=>Jo,GJ:()=>Xo,L:()=>Ae,LL:()=>vs,Pz:()=>ze,Sg:()=>Wr,UG:()=>fn,UI:()=>le,US:()=>xe,Wj:()=>Ci,Wl:()=>cu,Yr:()=>Qo,ZB:()=>_,ZR:()=>fo,aH:()=>yt,b$:()=>Ti,cI:()=>po,dS:()=>ih,eu:()=>Zi,g5:()=>T,gK:()=>gr,gQ:()=>oe,h$:()=>_t,hl:()=>La,hu:()=>$e,jU:()=>at,lb:()=>ea,m9:()=>uu,ne:()=>Jt,p$:()=>ce,pd:()=>xn,r3:()=>k,ru:()=>Ki,tV:()=>M,uI:()=>ot,ug:()=>Bl,vZ:()=>we,w1:()=>Us,w9:()=>Va,xO:()=>Ht,xb:()=>J,z$:()=>ct,zd:()=>ft});const N={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},$e=function(P,R){if(!P)throw T(R)},T=function(P){return new Error("Firebase Database ("+N.SDK_VERSION+") INTERNAL ASSERT FAILED: "+P)},$=function(P){const R=[];let F=0;for(let X=0;X<P.length;X++){let W=P.charCodeAt(X);W<128?R[F++]=W:W<2048?(R[F++]=W>>6|192,R[F++]=63&W|128):55296==(64512&W)&&X+1<P.length&&56320==(64512&P.charCodeAt(X+1))?(W=65536+((1023&W)<<10)+(1023&P.charCodeAt(++X)),R[F++]=W>>18|240,R[F++]=W>>12&63|128,R[F++]=W>>6&63|128,R[F++]=63&W|128):(R[F++]=W>>12|224,R[F++]=W>>6&63|128,R[F++]=63&W|128)}return R},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(P,R){if(!Array.isArray(P))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=R?this.byteToCharMapWebSafe_:this.byteToCharMap_,X=[];for(let W=0;W<P.length;W+=3){const Ge=P[W],Ce=W+1<P.length,Ve=Ce?P[W+1]:0,ui=W+2<P.length,di=ui?P[W+2]:0;let ae=(15&Ve)<<2|di>>6,bs=63&di;ui||(bs=64,Ce||(ae=64)),X.push(F[Ge>>2],F[(3&Ge)<<4|Ve>>4],F[ae],F[bs])}return X.join("")},encodeString(P,R){return this.HAS_NATIVE_SUPPORT&&!R?btoa(P):this.encodeByteArray($(P),R)},decodeString(P,R){return this.HAS_NATIVE_SUPPORT&&!R?atob(P):function(P){const R=[];let F=0,X=0;for(;F<P.length;){const W=P[F++];if(W<128)R[X++]=String.fromCharCode(W);else if(W>191&&W<224){const Ge=P[F++];R[X++]=String.fromCharCode((31&W)<<6|63&Ge)}else if(W>239&&W<365){const ui=((7&W)<<18|(63&P[F++])<<12|(63&P[F++])<<6|63&P[F++])-65536;R[X++]=String.fromCharCode(55296+(ui>>10)),R[X++]=String.fromCharCode(56320+(1023&ui))}else{const Ge=P[F++],Ce=P[F++];R[X++]=String.fromCharCode((15&W)<<12|(63&Ge)<<6|63&Ce)}}return R.join("")}(this.decodeStringToByteArray(P,R))},decodeStringToByteArray(P,R){this.init_();const F=R?this.charToByteMapWebSafe_:this.charToByteMap_,X=[];for(let W=0;W<P.length;){const Ge=F[P.charAt(W++)],Ve=W<P.length?F[P.charAt(W)]:0;++W;const di=W<P.length?F[P.charAt(W)]:64;++W;const Bt=W<P.length?F[P.charAt(W)]:64;if(++W,null==Ge||null==Ve||null==di||null==Bt)throw new Fe;X.push(Ge<<2|Ve>>4),64!==di&&(X.push(Ve<<4&240|di>>2),64!==Bt&&X.push(di<<6&192|Bt))}return X},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let P=0;P<this.ENCODED_VALS.length;P++)this.byteToCharMap_[P]=this.ENCODED_VALS.charAt(P),this.charToByteMap_[this.byteToCharMap_[P]]=P,this.byteToCharMapWebSafe_[P]=this.ENCODED_VALS_WEBSAFE.charAt(P),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[P]]=P,P>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(P)]=P,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(P)]=P)}}};class Fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _t=function(P){const R=$(P);return xe.encodeByteArray(R,!0)},Ae=function(P){return _t(P).replace(/\./g,"")},M=function(P){try{return xe.decodeString(P,!0)}catch(R){console.error("base64Decode failed: ",R)}return null};function ce(P){return _(void 0,P)}function _(P,R){if(!(R instanceof Object))return R;switch(R.constructor){case Date:return new Date(R.getTime());case Object:void 0===P&&(P={});break;case Array:P=[];break;default:return R}for(const F in R)!R.hasOwnProperty(F)||!E(F)||(P[F]=_(P[F],R[F]));return P}function E(P){return"__proto__"!==P}const j=()=>{try{return function I(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const P=process.env.__FIREBASE_DEFAULTS__;return P?JSON.parse(P):void 0})()||(()=>{if(typeof document>"u")return;let P;try{P=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const R=P&&M(P[1]);return R&&JSON.parse(R)})()}catch(P){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${P}`)}},yt=()=>{var P;return null===(P=j())||void 0===P?void 0:P.config},ze=P=>{var R;return null===(R=j())||void 0===R?void 0:R[`_${P}`]};class ci{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((R,F)=>{this.resolve=R,this.reject=F})}wrapCallback(R){return(F,X)=>{F?this.reject(F):this.resolve(X),"function"==typeof R&&(this.promise.catch(()=>{}),1===R.length?R(F):R(F,X))}}}function Wr(P,R){if(P.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const X=R||"demo-project",W=P.iat||0,Ge=P.sub||P.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ce=Object.assign({iss:`https://securetoken.google.com/${X}`,aud:X,iat:W,exp:W+3600,auth_time:W,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},P);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(Ce)),""].join(".")}function ct(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ot(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function fn(){var P;const R=null===(P=j())||void 0===P?void 0:P.forceEnvironment;if("node"===R)return!0;if("browser"===R)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function at(){return"object"==typeof self&&self.self===self}function Ki(){const P="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof P&&void 0!==P.id}function Ti(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Us(){const P=ct();return P.indexOf("MSIE ")>=0||P.indexOf("Trident/")>=0}function Qo(){return!0===N.NODE_CLIENT||!0===N.NODE_ADMIN}function Jo(){return!fn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function La(){try{return"object"==typeof indexedDB}catch{return!1}}function Zi(){return new Promise((P,R)=>{try{let F=!0;const X="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(X);W.onsuccess=()=>{W.result.close(),F||self.indexedDB.deleteDatabase(X),P(!0)},W.onupgradeneeded=()=>{F=!1},W.onerror=()=>{var Ge;R((null===(Ge=W.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(F){R(F)}})}class fo extends Error{constructor(R,F,X){super(F),this.code=R,this.customData=X,this.name="FirebaseError",Object.setPrototypeOf(this,fo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vs.prototype.create)}}class vs{constructor(R,F,X){this.service=R,this.serviceName=F,this.errors=X}create(R,...F){const X=F[0]||{},W=`${this.service}/${R}`,Ge=this.errors[R],Ce=Ge?function Ll(P,R){return P.replace(pr,(F,X)=>{const W=R[X];return null!=W?String(W):`<${X}?>`})}(Ge,X):"Error";return new fo(W,`${this.serviceName}: ${Ce} (${W}).`,X)}}const pr=/\{\$([^}]+)}/g;function po(P){return JSON.parse(P)}function cu(P){return JSON.stringify(P)}const ki=function(P){let R={},F={},X={},W="";try{const Ge=P.split(".");R=po(M(Ge[0])||""),F=po(M(Ge[1])||""),W=Ge[2],X=F.d||{},delete F.d}catch{}return{header:R,claims:F,data:X,signature:W}},Va=function(P){const F=ki(P).claims;return!!F&&"object"==typeof F&&F.hasOwnProperty("iat")},Xo=function(P){const R=ki(P).claims;return"object"==typeof R&&!0===R.admin};function k(P,R){return Object.prototype.hasOwnProperty.call(P,R)}function H(P,R){if(Object.prototype.hasOwnProperty.call(P,R))return P[R]}function J(P){for(const R in P)if(Object.prototype.hasOwnProperty.call(P,R))return!1;return!0}function le(P,R,F){const X={};for(const W in P)Object.prototype.hasOwnProperty.call(P,W)&&(X[W]=R.call(F,P[W],W,P));return X}function we(P,R){if(P===R)return!0;const F=Object.keys(P),X=Object.keys(R);for(const W of F){if(!X.includes(W))return!1;const Ge=P[W],Ce=R[W];if(ve(Ge)&&ve(Ce)){if(!we(Ge,Ce))return!1}else if(Ge!==Ce)return!1}for(const W of X)if(!F.includes(W))return!1;return!0}function ve(P){return null!==P&&"object"==typeof P}function Ht(P){const R=[];for(const[F,X]of Object.entries(P))Array.isArray(X)?X.forEach(W=>{R.push(encodeURIComponent(F)+"="+encodeURIComponent(W))}):R.push(encodeURIComponent(F)+"="+encodeURIComponent(X));return R.length?"&"+R.join("&"):""}function ft(P){const R={};return P.replace(/^\?/,"").split("&").forEach(X=>{if(X){const[W,Ge]=X.split("=");R[decodeURIComponent(W)]=decodeURIComponent(Ge)}}),R}function xn(P){const R=P.indexOf("?");if(!R)return"";const F=P.indexOf("#",R);return P.substring(R,F>0?F:void 0)}class oe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let R=1;R<this.blockSize;++R)this.pad_[R]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(R,F){F||(F=0);const X=this.W_;if("string"==typeof R)for(let Bt=0;Bt<16;Bt++)X[Bt]=R.charCodeAt(F)<<24|R.charCodeAt(F+1)<<16|R.charCodeAt(F+2)<<8|R.charCodeAt(F+3),F+=4;else for(let Bt=0;Bt<16;Bt++)X[Bt]=R[F]<<24|R[F+1]<<16|R[F+2]<<8|R[F+3],F+=4;for(let Bt=16;Bt<80;Bt++){const ae=X[Bt-3]^X[Bt-8]^X[Bt-14]^X[Bt-16];X[Bt]=4294967295&(ae<<1|ae>>>31)}let di,Rr,W=this.chain_[0],Ge=this.chain_[1],Ce=this.chain_[2],Ve=this.chain_[3],ui=this.chain_[4];for(let Bt=0;Bt<80;Bt++){Bt<40?Bt<20?(di=Ve^Ge&(Ce^Ve),Rr=1518500249):(di=Ge^Ce^Ve,Rr=1859775393):Bt<60?(di=Ge&Ce|Ve&(Ge|Ce),Rr=2400959708):(di=Ge^Ce^Ve,Rr=3395469782);const ae=(W<<5|W>>>27)+di+ui+Rr+X[Bt]&4294967295;ui=Ve,Ve=Ce,Ce=4294967295&(Ge<<30|Ge>>>2),Ge=W,W=ae}this.chain_[0]=this.chain_[0]+W&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+Ce&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+ui&4294967295}update(R,F){if(null==R)return;void 0===F&&(F=R.length);const X=F-this.blockSize;let W=0;const Ge=this.buf_;let Ce=this.inbuf_;for(;W<F;){if(0===Ce)for(;W<=X;)this.compress_(R,W),W+=this.blockSize;if("string"==typeof R){for(;W<F;)if(Ge[Ce]=R.charCodeAt(W),++Ce,++W,Ce===this.blockSize){this.compress_(Ge),Ce=0;break}}else for(;W<F;)if(Ge[Ce]=R[W],++Ce,++W,Ce===this.blockSize){this.compress_(Ge),Ce=0;break}}this.inbuf_=Ce,this.total_+=F}digest(){const R=[];let F=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let W=this.blockSize-1;W>=56;W--)this.buf_[W]=255&F,F/=256;this.compress_(this.buf_);let X=0;for(let W=0;W<5;W++)for(let Ge=24;Ge>=0;Ge-=8)R[X]=this.chain_[W]>>Ge&255,++X;return R}}function Jt(P,R){const F=new yn(P,R);return F.subscribe.bind(F)}class yn{constructor(R,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{R(this)}).catch(X=>{this.error(X)})}next(R){this.forEachObserver(F=>{F.next(R)})}error(R){this.forEachObserver(F=>{F.error(R)}),this.close(R)}complete(){this.forEachObserver(R=>{R.complete()}),this.close()}subscribe(R,F,X){let W;if(void 0===R&&void 0===F&&void 0===X)throw new Error("Missing Observer.");W=function Re(P,R){if("object"!=typeof P||null===P)return!1;for(const F of R)if(F in P&&"function"==typeof P[F])return!0;return!1}(R,["next","error","complete"])?R:{next:R,error:F,complete:X},void 0===W.next&&(W.next=Ii),void 0===W.error&&(W.error=Ii),void 0===W.complete&&(W.complete=Ii);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),Ge}unsubscribeOne(R){void 0===this.observers||void 0===this.observers[R]||(delete this.observers[R],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(R){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,R)}sendOne(R,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[R])try{F(this.observers[R])}catch(X){typeof console<"u"&&console.error&&console.error(X)}})}close(R){this.finalized||(this.finalized=!0,void 0!==R&&(this.finalError=R),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ii(){}const Tn=function(P,R,F,X){let W;if(X<R?W="at least "+R:X>F&&(W=0===F?"none":"no more than "+F),W)throw new Error(P+" failed: Was called with "+X+(1===X?" argument.":" arguments.")+" Expects "+W+".")};function gr(P,R){return`${P} failed: ${R} argument `}function Ci(P,R,F,X){if((!X||F)&&"function"!=typeof F)throw new Error(gr(P,R)+"must be a valid function.")}function ea(P,R,F,X){if((!X||F)&&("object"!=typeof F||null===F))throw new Error(gr(P,R)+"must be a valid context object.")}const ih=function(P){const R=[];let F=0;for(let X=0;X<P.length;X++){let W=P.charCodeAt(X);if(W>=55296&&W<=56319){const Ge=W-55296;X++,$e(X<P.length,"Surrogate pair missing trail surrogate."),W=65536+(Ge<<10)+(P.charCodeAt(X)-56320)}W<128?R[F++]=W:W<2048?(R[F++]=W>>6|192,R[F++]=63&W|128):W<65536?(R[F++]=W>>12|224,R[F++]=W>>6&63|128,R[F++]=63&W|128):(R[F++]=W>>18|240,R[F++]=W>>12&63|128,R[F++]=W>>6&63|128,R[F++]=63&W|128)}return R},Bl=function(P){let R=0;for(let F=0;F<P.length;F++){const X=P.charCodeAt(F);X<128?R++:X<2048?R+=2:X>=55296&&X<=56319?(R+=4,F++):R+=3}return R};function uu(P){return P&&P._delegate?P._delegate:P}},274:(fr,Un,st)=>{"use strict";function N(n){return"function"==typeof n}let $e=!1;const T={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else $e&&console.log("RxJS: Back to a better error behavior. Thank you. <3");$e=n},get useDeprecatedSynchronousErrorHandling(){return $e}};function $(n){setTimeout(()=>{throw n},0)}const K={closed:!0,next(n){},error(n){if(T.useDeprecatedSynchronousErrorHandling)throw n;$(n)},complete(){}},xe=Array.isArray||(n=>n&&"number"==typeof n.length);function Fe(n){return null!==n&&"object"==typeof n}const Ae=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class M{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof M)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(N(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof Ae?ce(o.errors):[o]}}if(xe(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(Fe(l))try{l.unsubscribe()}catch(u){e=e||[],u instanceof Ae?e=e.concat(ce(u.errors)):e.push(u)}}}if(e)throw new Ae(e)}add(e){let t=e;if(!e)return M.EMPTY;switch(typeof e){case"function":t=new M(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof M)){const s=t;t=new M,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof M){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function ce(n){return n.reduce((e,t)=>e.concat(t instanceof Ae?t.errors:t),[])}M.EMPTY=((n=new M).closed=!0,n);const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class I extends M{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=K;break;case 1:if(!e){this.destination=K;break}if("object"==typeof e){e instanceof I?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new B(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new B(this,e,t,i)}}[_](){return this}static create(e,t,i){const r=new I(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class B extends I{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;N(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==K&&(o=Object.create(t),N(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;T.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=T;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):$(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;$(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);T.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),T.useDeprecatedSynchronousErrorHandling)throw i;$(i)}}__tryOrSetError(e,t,i){if(!T.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return T.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):($(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const j="function"==typeof Symbol&&Symbol.observable||"@@observable";function Me(n){return n}function yt(n){return 0===n.length?Me:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let ze=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function Z(n,e,t){if(n){if(n instanceof I)return n;if(n[_])return n[_]()}return n||e||t?new I(n,e,t):new I(K)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||T.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),T.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){T.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function Y(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof I?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=ci(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[j](){return this}pipe(...t){return 0===t.length?this:yt(t)(this)}toPromise(t){return new(t=ci(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function ci(n){if(n||(n=T.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const ct=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class ot extends M{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class fn extends I{constructor(e){super(e),this.destination=e}}let at=(()=>{class n extends ze{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[_](){return new fn(this)}lift(t){const i=new Ki(this,this);return i.operator=t,i}next(t){if(this.closed)throw new ct;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new ct;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new ct;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new ct;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new ct;return this.hasError?(t.error(this.thrownError),M.EMPTY):this.isStopped?(t.complete(),M.EMPTY):(this.observers.push(t),new ot(this,t))}asObservable(){const t=new ze;return t.source=this,t}}return n.create=(e,t)=>new Ki(e,t),n})();class Ki extends at{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):M.EMPTY}}function Ti(n){return n&&"function"==typeof n.schedule}function Ue(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new Us(n,e))}}class Us{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new qr(e,this.project,this.thisArg))}}class qr extends I{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const Qo=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},Zi=function La(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),vs=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ll(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const pr=n=>{if(n&&"function"==typeof n[j])return(n=>e=>{const t=n[j]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(vs(n))return Qo(n);if(Ll(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$),e))(n);if(n&&"function"==typeof n[Zi])return(n=>e=>{const t=n[Zi]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${Fe(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function ki(n,e){return new ze(t=>{const i=new M;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function k(n,e){return e?function Xo(n,e){if(null!=n){if(function go(n){return n&&"function"==typeof n[j]}(n))return function po(n,e){return new ze(t=>{const i=new M;return i.add(e.schedule(()=>{const r=n[j]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(Ll(n))return function cu(n,e){return new ze(t=>{const i=new M;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(vs(n))return ki(n,e);if(function Va(n){return n&&"function"==typeof n[Zi]}(n)||"string"==typeof n)return function Vl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ze(t=>{const i=new M;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[Zi](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof ze?n:new ze(pr(n))}class H extends I{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class le extends I{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function ve(n,e){if(e.closed)return;if(n instanceof ze)return n.subscribe(e);let t;try{t=pr(n)(e)}catch(i){e.error(i)}return t}function Je(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(Je((r,s)=>k(n(r,s)).pipe(Ue((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new Ht(n,t)))}class Ht{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new ft(e,this.project,this.concurrent))}}class ft extends le{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new H(this),i=this.destination;i.add(t);const r=ve(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function oe(n=Number.POSITIVE_INFINITY){return Je(Me,n)}function Jt(n,e){return e?ki(n,e):new ze(Qo(n))}function yn(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return Ti(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof ze?n[0]:oe(e)(Jt(n,t))}class an extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ct;return this._value}next(e){super.next(this._value=e)}}function Re(...n){let e=n[n.length-1];return Ti(e)?(n.pop(),ki(n,e)):Jt(n)}function Ii(){return function(e){return e.lift(new Tn(e))}}class Tn{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new gr(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class gr extends I{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Kr extends ze{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new M,e.add(this.source.subscribe(new ea(this.getSubject(),this))),e.closed&&(this._connection=null,e=M.EMPTY)),e}refCount(){return Ii()(this)}}const Ci=(()=>{const n=Kr.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class ea extends fn{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class Zt{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function Ba(){return new at}function js(){return n=>Ii()(function Xt(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new Zt(r,e));const s=Object.create(i,Ci);return s.source=i,s.subjectFactory=r,s}}(Ba)(n))}function $t(n,e){return"function"==typeof e?t=>t.pipe($t((i,r)=>k(n(i,r)).pipe(Ue((s,o)=>e(i,s,r,o))))):t=>t.lift(new Zr(n))}class Zr{constructor(e){this.project=e}call(e,t){return t.subscribe(new Ul(e,this.project))}}class Ul extends le{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new H(this),r=this.destination;r.add(i),this.innerSubscription=ve(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function mo(n,e){return t=>t.lift(new uu(n,e))}class uu{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new P(e,this.compare,this.keySelector))}}class P extends I{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}function R(n){for(let e in n)if(n[e]===R)return e;throw Error("Could not find renamed property on target object.")}function F(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function X(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(X).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function W(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Ge=R({__forward_ref__:R});function Ce(n){return n.__forward_ref__=Ce,n.toString=function(){return X(this())},n}function Ve(n){return ui(n)?n():n}function ui(n){return"function"==typeof n&&n.hasOwnProperty(Ge)&&n.__forward_ref__===Ce}function di(n){return n&&!!n.\u0275providers}const Bt="https://g.co/ng/security#xss";class ae extends Error{constructor(e,t){super(function bs(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Xe(n){return"string"==typeof n?n:null==n?"":String(n)}function je(n,e){throw new ae(-201,!1)}function Yr(n,e){null==n&&function et(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function ye(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ct(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fi(n){return Ua(n,hu)||Ua(n,ah)}function Ua(n,e){return n.hasOwnProperty(e)?n[e]:null}function _o(n){return n&&(n.hasOwnProperty(oh)||n.hasOwnProperty(Nv))?n[oh]:null}const hu=R({\u0275prov:R}),oh=R({\u0275inj:R}),ah=R({ngInjectableDef:R}),Nv=R({ngInjectorDef:R});var St=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(St||{});let Ha;function Yi(n){const e=Ha;return Ha=n,e}function $a(n,e,t){const i=Fi(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&St.Optional?null:void 0!==e?e:void je(X(n))}const pn=globalThis;class Se{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ye({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Hl={},_g="__NG_DI_FLAG__",ch="ngTempTokenPath",Ov=/\n/gm,uh="__source";let Hs;function na(n){const e=Hs;return Hs=n,e}function vg(n,e=St.Default){if(void 0===Hs)throw new ae(-203,!1);return null===Hs?$a(n,void 0,e):Hs.get(n,e&St.Optional?null:void 0,e)}function ee(n,e=St.Default){return(function pg(){return Ha}()||vg)(Ve(n),e)}function Ne(n,e=St.Default){return ee(n,pu(e))}function pu(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bg(n){const e=[];for(let t=0;t<n.length;t++){const i=Ve(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ae(900,!1);let r,s=St.Default;for(let o=0;o<i.length;o++){const a=i[o],l=WI(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(ee(r,s))}else e.push(ee(i))}return e}function $l(n,e){return n[_g]=e,n.prototype[_g]=e,n}function WI(n){return n[_g]}function Es(n){return{toString:n}.toString()}var dh=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(dh||{}),Nr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Nr||{});const $s={},Ut=[],hh=R({\u0275cmp:R}),gu=R({\u0275dir:R}),Eg=R({\u0275pipe:R}),fh=R({\u0275mod:R}),Qr=R({\u0275fac:R}),Ga=R({__NG_ELEMENT_ID__:R}),Lv=R({__NG_ENV_ID__:R});function ph(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function wg(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];Vv(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function gh(n){return 3===n||4===n||6===n}function Vv(n){return 64===n.charCodeAt(0)}function za(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Bv(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Bv(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const mh="ng-template";function qI(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==ph(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function _h(n){return 4===n.type&&n.value!==mh}function KI(n,e,t){return e===(4!==n.type||t?n.value:mh)}function Tg(n,e,t){let i=4;const r=n.attrs||[],s=function Gs(n){for(let e=0;e<n.length;e++)if(gh(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!KI(n,l,t)||""===l&&1===e.length){if(Qi(i))return!1;o=!0}}else{const u=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!qI(n.attrs,u,t)){if(Qi(i))return!1;o=!0}continue}const g=yo(8&i?"class":l,r,_h(n),t);if(-1===g){if(Qi(i))return!1;o=!0;continue}if(""!==u){let m;m=g>s?"":r[g+1].toLowerCase();const v=8&i?m:null;if(v&&-1!==ph(v,u,0)||2&i&&u!==m){if(Qi(i))return!1;o=!0}}}}else{if(!o&&!Qi(i)&&!Qi(l))return!1;if(o&&Qi(l))continue;o=!1,i=l|1&i}}return Qi(i)||o}function Qi(n){return 0==(1&n)}function yo(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function YI(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function yh(n,e,t=!1){for(let i=0;i<e.length;i++)if(Tg(n,e[i],t))return!0;return!1}function Ig(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Uv(n,e){return n?":not("+e.trim()+")":e}function Cg(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Qi(o)&&(e+=Uv(s,r),r=""),i=o,s=s||!Qi(i);t++}return""!==r&&(e+=Uv(s,r)),e}function mr(n){return Es(()=>{const e=Ag(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===dh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Nr.Emulated,styles:n.styles||Ut,_:null,schemas:n.schemas||null,tView:null,id:""};jv(t);const i=n.dependencies;return t.directiveDefs=vo(i,!1),t.pipeDefs=vo(i,!0),t.id=function vh(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Dg(n){return pt(n)||jn(n)}function Wa(n){return null!==n}function Pt(n){return Es(()=>({type:n.type,bootstrap:n.bootstrap||Ut,declarations:n.declarations||Ut,imports:n.imports||Ut,exports:n.exports||Ut,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function zl(n,e){if(null==n)return $s;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function De(n){return Es(()=>{const e=Ag(n);return jv(e),e})}function pt(n){return n[hh]||null}function jn(n){return n[gu]||null}function ti(n){return n[Eg]||null}function _r(n,e){const t=n[fh]||null;if(!t&&!0===e)throw new Error(`Type ${X(n)} does not have '\u0275mod' property.`);return t}function Ag(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||$s,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ut,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zl(n.inputs,e),outputs:zl(n.outputs)}}function jv(n){n.features?.forEach(e=>e(n))}function vo(n,e){if(!n)return null;const t=e?ti:Dg;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(Wa)}const Pn=0,Le=1,lt=2,kt=3,Jr=4,mu=5,_i=6,bo=7,Hn=8,Eo=9,Wl=10,rt=11,Ka=12,bh=13,wo=14,On=15,ql=16,ia=17,ws=18,Za=19,_u=20,zs=21,Ws=22,Ya=23,Kl=24,It=25,yu=1,Hv=2,Xr=7,sa=9,ni=11;function Vi(n){return Array.isArray(n)&&"object"==typeof n[yu]}function Ji(n){return Array.isArray(n)&&!0===n[yu]}function vu(n){return 0!=(4&n.flags)}function Ja(n){return n.componentOffset>-1}function Zl(n){return 1==(1&n.flags)}function Ts(n){return!!n.template}function bu(n){return 0!=(512&n[lt])}function Xa(n,e){return n.hasOwnProperty(Qr)?n[Qr]:null}let yi=null,Yl=!1;function es(n){const e=yi;return yi=n,e}const el={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Xv(n){if(!Eu(n)||n.dirty){if(!n.producerMustRecompute(n)&&!nC(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function t0(n){n.dirty=!0,function e0(n){if(void 0===n.liveConsumerNode)return;const e=Yl;Yl=!0;try{for(const t of n.liveConsumerNode)t.dirty||t0(t)}finally{Yl=e}}(n),n.consumerMarkedDirty?.(n)}function Og(n){return n&&(n.nextProducerIndex=0),es(n)}function n0(n,e){if(es(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Eu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Th(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function nC(n){wu(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(Xv(t),i!==t.version))return!0}return!1}function iC(n){if(wu(n),Eu(n))for(let e=0;e<n.producerNode.length;e++)Th(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Th(n,e){if(function rC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),wu(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Th(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];wu(r),r.producerIndexOfThis[i]=e}}function Eu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function wu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Ih=null;const o0=()=>{},dM=(()=>({...el,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:o0}))();class hM{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function vn(){return a0}function a0(n){return n.type.prototype.ngOnChanges&&(n.setInput=Tu),cC}function cC(){const n=Zn(this),e=n?.current;if(e){const t=n.previous;if(t===$s)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Tu(n,e,t,i){const r=this.declaredInputs[t],s=Zn(n)||function uC(n,e){return n[l0]=e}(n,{previous:$s,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new hM(l&&l.currentValue,e,a===$s),n[i]=e}vn.ngInherit=!0;const l0="__ngSimpleChanges__";function Zn(n){return n[l0]||null}const ts=function(n,e,t){};function cn(n){for(;Array.isArray(n);)n=n[Pn];return n}function tl(n,e){return cn(e[n])}function Xi(n,e){return cn(e[n.index])}function Su(n,e){return n.data[e]}function er(n,e){const t=e[n];return Vi(t)?t:t[Pn]}function Ks(n,e){return null==e?null:n[e]}function Ug(n){n[ia]=0}function fC(n){1024&n[lt]||(n[lt]|=1024,pC(n,1))}function h0(n){1024&n[lt]&&(n[lt]&=-1025,pC(n,-1))}function pC(n,e){let t=n[kt];if(null===t)return;t[mu]+=e;let i=t;for(t=t[kt];null!==t&&(1===e&&1===i[mu]||-1===e&&0===i[mu]);)t[mu]+=e,i=t,t=t[kt]}const it={lFrame:Ph(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function p0(){return it.bindingsEnabled}function Xl(){return null!==it.skipHydrationRootTNode}function ue(){return it.lFrame.lView}function Ft(){return it.lFrame.tView}function Dt(n){return it.lFrame.contextLView=n,n[Hn]}function At(n){return it.lFrame.contextLView=null,n}function Si(){let n=Rh();for(;null!==n&&64===n.type;)n=n.parent;return n}function Rh(){return it.lFrame.currentTNode}function ns(n,e){const t=it.lFrame;t.currentTNode=n,t.isParent=e}function Hg(){return it.lFrame.isParent}function Au(){it.lFrame.isParent=!1}function Zs(){return it.lFrame.bindingIndex++}function tr(n){const e=it.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function TC(n,e){const t=it.lFrame;t.bindingIndex=t.bindingRootIndex=n,Nu(e)}function Nu(n){it.lFrame.currentDirectiveIndex=n}function _0(){return it.lFrame.currentQueryIndex}function Gg(n){it.lFrame.currentQueryIndex=n}function zg(n){const e=n[Le];return 2===e.type?e.declTNode:1===e.type?n[_i]:null}function y0(n,e,t){if(t&St.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&St.Host||(r=zg(s),null===r||(s=s[wo],10&r.type))););if(null===r)return!1;e=r,n=s}const i=it.lFrame=v0();return i.currentTNode=e,i.lView=n,!0}function xu(n){const e=v0(),t=n[Le];it.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function v0(){const n=it.lFrame,e=null===n?null:n.child;return null===e?Ph(n):e}function Ph(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Oh(){const n=it.lFrame;return it.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const b0=Oh;function il(){const n=Oh();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ai(){return it.lFrame.selectedIndex}function Io(n){it.lFrame.selectedIndex=n}function bn(){const n=it.lFrame;return Su(n.tView,n.selectedIndex)}let I0=!0;function ec(){return I0}function oa(n){I0=n}function tc(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function Mh(n,e,t){C0(n,e,3,t)}function kh(n,e,t,i){(3&n[lt])===t&&C0(n,e,t,i)}function Pu(n,e){let t=n[lt];(3&t)===e&&(t&=8191,t+=1,n[lt]=t)}function C0(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[ia]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[ia]+=65536),(a<s||-1==s)&&(Lh(n,t,e,l),n[ia]=(4294901760&n[ia])+l+2),l++}function Fh(n,e){ts(4,n,e);const t=es(null);try{e.call(n)}finally{es(t),ts(5,n,e)}}function Lh(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[lt]>>13<n[ia]>>16&&(3&n[lt])===e&&(n[lt]+=8192,Fh(a,s)):Fh(a,s)}const aa=-1;class nc{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Kg(n){return n!==aa}function Ou(n){return 32767&n}function rl(n,e){let t=function PC(n){return n>>16}(n),i=e;for(;t>0;)i=i[wo],t--;return i}let Zg=!0;function Bh(n){const e=Zg;return Zg=n,e}const A0=255,Mu=5;let MC=0;const Ys={};function Uh(n,e){const t=R0(n,e);if(-1!==t)return t;const i=e[Le];i.firstCreatePass&&(n.injectorIndex=e.length,Yg(i.data,n),Yg(e,null),Yg(i.blueprint,null));const r=jh(n,e),s=n.injectorIndex;if(Kg(r)){const o=Ou(r),a=rl(r,e),l=a[Le].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=r,s}function Yg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function R0(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function jh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=L0(r),null===i)return aa;if(t++,r=r[wo],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return aa}function Qg(n,e,t){!function kC(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Ga)&&(i=t[Ga]),null==i&&(i=t[Ga]=MC++);const r=i&A0;e.data[n+(r>>Mu)]|=1<<r}(n,e,t)}function N0(n,e,t){if(t&St.Optional||void 0!==n)return n;je()}function x0(n,e,t,i){if(t&St.Optional&&void 0===i&&(i=null),!(t&(St.Self|St.Host))){const r=n[Eo],s=Yi(void 0);try{return r?r.get(e,i,t&St.Optional):$a(e,i,t&St.Optional)}finally{Yi(s)}}return N0(i,0,t)}function P0(n,e,t,i=St.Default,r){if(null!==n){if(2048&e[lt]&&!(i&St.Self)){const o=function F0(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[lt]&&!(512&o[lt]);){const a=O0(s,o,t,i|St.Self,Ys);if(a!==Ys)return a;let l=s.parent;if(!l){const u=o[_u];if(u){const h=u.get(t,Ys,i);if(h!==Ys)return h}l=L0(o),o=o[wo]}s=l}return r}(n,e,t,i,Ys);if(o!==Ys)return o}const s=O0(n,e,t,i,Ys);if(s!==Ys)return s}return x0(e,t,i,r)}function O0(n,e,t,i,r){const s=function LC(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ga)?n[Ga]:void 0;return"number"==typeof e?e>=0?e&A0:VC:e}(t);if("function"==typeof s){if(!y0(e,n,i))return i&St.Host?N0(r,0,i):x0(e,t,i,r);try{let o;if(o=s(i),null!=o||i&St.Optional)return o;je()}finally{b0()}}else if("number"==typeof s){let o=null,a=R0(n,e),l=aa,u=i&St.Host?e[On][_i]:null;for((-1===a||i&St.SkipSelf)&&(l=-1===a?jh(n,e):e[a+8],l!==aa&&k0(i,!1)?(o=e[Le],a=Ou(l),e=rl(l,e)):a=-1);-1!==a;){const h=e[Le];if(M0(s,a,h.data)){const g=FC(a,e,t,o,i,u);if(g!==Ys)return g}l=e[a+8],l!==aa&&k0(i,e[Le].data[a+8]===u)&&M0(s,a,e)?(o=h,a=Ou(l),e=rl(l,e)):a=-1}}return r}function FC(n,e,t,i,r,s){const o=e[Le],a=o.data[n+8],h=ku(a,o,t,null==i?Ja(a)&&Zg:i!=o&&0!=(3&a.type),r&St.Host&&s===a);return null!==h?sl(e,o,h,a):Ys}function ku(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,h=s>>20,m=r?a+h:n.directiveEnd;for(let v=i?a:a+h;v<m;v++){const w=o[v];if(v<l&&t===w||v>=l&&w.type===t)return v}if(r){const v=o[l];if(v&&Ts(v)&&v.type===t)return l}return null}function sl(n,e,t,i){let r=n[t];const s=e.data;if(function qg(n){return n instanceof nc}(r)){const o=r;o.resolving&&function ne(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ae(-200,`Circular dependency in DI detected for ${n}${t}`)}(function xt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Xe(n)}(s[t]));const a=Bh(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Yi(o.injectImpl):null;y0(n,i,St.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function AC(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=a0(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&Yi(u),Bh(a),o.resolving=!1,b0()}}return r}function M0(n,e,t){return!!(t[e+(n>>Mu)]&1<<n)}function k0(n,e){return!(n&St.Self||n&St.Host&&e)}class Ri{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return P0(this._tNode,this._lView,e,pu(i),t)}}function VC(){return new Ri(Si(),ue())}function Mn(n){return Es(()=>{const e=n.prototype.constructor,t=e[Qr]||em(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Qr]||em(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function em(n){return ui(n)?()=>{const e=em(Ve(n));return e&&e()}:Xa(n)}function L0(n){const e=n[Le],t=e.type;return 2===t?e.declTNode:1===t?n[_i]:null}function Co(n){return function Jg(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(gh(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Si(),n)}const Lu="__parameters__";function ol(n,e,t){return Es(()=>{const i=function rc(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,u,h){const g=l.hasOwnProperty(Lu)?l[Lu]:Object.defineProperty(l,Lu,{value:[]})[Lu];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function sc(n,e){n.forEach(t=>Array.isArray(t)?sc(t,e):e(t))}function Hh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $h(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Uu(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function xr(n,e,t){let i=ll(n,e);return i>=0?n[1|i]=t:(i=~i,function $C(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function sm(n,e){const t=ll(n,e);if(t>=0)return n[1|t]}function ll(n,e){return function B0(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const oc=$l(ol("Optional"),8),Wh=$l(ol("SkipSelf"),4);function Jh(n){return 128==(128&n.flags)}var c=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(c||{});const d=/^>|^->|<!--|-->|--!>|<!-$/g,p=/(<|>)/g,y="\u200b$1\u200b";const A=new Map;let O=0;const Mr="__ngContext__";function kn(n,e){Vi(e)?(n[Mr]=e[Za],function re(n){A.set(n[Za],n)}(e)):n[Mr]=e}let i1;function r1(n,e){return i1(n,e)}function mm(n){const e=n[kt];return Ji(e)?e[kt]:e}function SM(n){return AM(n[Ka])}function DM(n){return AM(n[Jr])}function AM(n){for(;null!==n&&!Ji(n);)n=n[Jr];return n}function tf(n,e,t,i,r){if(null!=i){let s,o=!1;Ji(i)?s=i:Vi(i)&&(o=!0,i=i[Pn]);const a=cn(i);0===n&&null!==t?null==r?PM(e,t,a):$u(e,t,a,r||null,!0):1===n&&null!==t?$u(e,t,a,r||null,!0):2===n?function ob(n,e,t){const i=rb(n,e);i&&function d9(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function p9(n,e,t,i,r){const s=t[Xr];s!==cn(t)&&tf(e,n,i,s,r);for(let a=ni;a<t.length;a++){const l=t[a];ym(l[Le],l,n,e,i,s)}}(e,n,s,t,r)}}function s1(n,e){return n.createComment(function b(n){return n.replace(d,e=>e.replace(p,y))}(e))}function nb(n,e,t){return n.createElement(e,t)}function NM(n,e){const t=n[sa],i=t.indexOf(e);h0(e),t.splice(i,1)}function ib(n,e){if(n.length<=ni)return;const t=ni+e,i=n[t];if(i){const r=i[ql];null!==r&&r!==n&&NM(r,i),e>0&&(n[t-1][Jr]=i[Jr]);const s=$h(n,ni+e);!function i9(n,e){ym(n,e,e[rt],2,null,null),e[Pn]=null,e[_i]=null}(i[Le],i);const o=s[ws];null!==o&&o.detachView(s[Le]),i[kt]=null,i[Jr]=null,i[lt]&=-129}return i}function o1(n,e){if(!(256&e[lt])){const t=e[rt];e[Ya]&&iC(e[Ya]),e[Kl]&&iC(e[Kl]),t.destroyNode&&ym(n,e,t,3,null,null),function o9(n){let e=n[Ka];if(!e)return a1(n[Le],n);for(;e;){let t=null;if(Vi(e))t=e[Ka];else{const i=e[ni];i&&(t=i)}if(!t){for(;e&&!e[Jr]&&e!==n;)Vi(e)&&a1(e[Le],e),e=e[kt];null===e&&(e=n),Vi(e)&&a1(e[Le],e),t=e&&e[Jr]}e=t}}(e)}}function a1(n,e){if(!(256&e[lt])){e[lt]&=-129,e[lt]|=256,function u9(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof nc)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];ts(4,a,l);try{l.call(a)}finally{ts(5,a,l)}}else{ts(4,r,s);try{s.call(r)}finally{ts(5,r,s)}}}}}(n,e),function c9(n,e){const t=n.cleanup,i=e[bo];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[bo]=null);const r=e[zs];if(null!==r){e[zs]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[Le].type&&e[rt].destroy();const t=e[ql];if(null!==t&&Ji(e[kt])){t!==e[kt]&&NM(t,e);const i=e[ws];null!==i&&i.detachView(n)}!function Te(n){A.delete(n[Za])}(e)}}function l1(n,e,t){return function xM(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Pn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Nr.None||s===Nr.Emulated)return null}return Xi(i,t)}}(n,e.parent,t)}function $u(n,e,t,i,r){n.insertBefore(e,t,i,r)}function PM(n,e,t){n.appendChild(e,t)}function OM(n,e,t,i,r){null!==i?$u(n,e,t,i,r):PM(n,e,t)}function rb(n,e){return n.parentNode(e)}function MM(n,e,t){return FM(n,e,t)}let c1,ab,f1,lb,FM=function kM(n,e,t){return 40&n.type?Xi(n,t):null};function sb(n,e,t,i){const r=l1(n,i,e),s=e[rt],a=MM(i.parent||e[_i],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)OM(s,r,t[l],a,!1);else OM(s,r,t,a,!1);void 0!==c1&&c1(s,i,e,t,r)}function _m(n,e){if(null!==e){const t=e.type;if(3&t)return Xi(e,n);if(4&t)return u1(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return _m(n,i);{const r=n[e.index];return Ji(r)?u1(-1,r):cn(r)}}if(32&t)return r1(e,n)()||cn(n[e.index]);{const i=VM(n,e);return null!==i?Array.isArray(i)?i[0]:_m(mm(n[On]),i):_m(n,e.next)}}return null}function VM(n,e){return null!==e?n[On][_i].projection[e.projection]:null}function u1(n,e){const t=ni+n+1;if(t<e.length){const i=e[t],r=i[Le].firstChild;if(null!==r)return _m(i,r)}return e[Xr]}function d1(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&kn(cn(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)d1(n,e,t.child,i,r,s,!1),tf(e,n,r,a,s);else if(32&l){const u=r1(t,i);let h;for(;h=u();)tf(e,n,r,h,s);tf(e,n,r,a,s)}else 16&l?UM(n,e,i,t,r,s):tf(e,n,r,a,s);t=o?t.projectionNext:t.next}}function ym(n,e,t,i,r,s){d1(t,i,n.firstChild,e,r,s,!1)}function UM(n,e,t,i,r,s){const o=t[On],l=o[_i].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)tf(e,n,r,l[u],s);else{let u=l;const h=o[kt];Jh(i)&&(u.flags|=128),d1(n,e,u,h,r,s,!0)}}function jM(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function HM(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&wg(n,e,i),null!==r&&jM(n,e,r),null!==s&&function m9(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function nf(n){return function h1(){if(void 0===ab&&(ab=null,pn.trustedTypes))try{ab=pn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ab}()?.createHTML(n)||n}function rf(){if(void 0!==f1)return f1;if(typeof document<"u")return document;throw new ae(210,!1)}function $M(n){return function p1(){if(void 0===lb&&(lb=null,pn.trustedTypes))try{lb=pn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return lb}()?.createHTML(n)||n}class WM{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Bt})`}}function uc(n){return n instanceof WM?n.changingThisBreaksApplicationSecurity:n}class D9{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(nf(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class A9{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=nf(e),t}}const N9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function g1(n){return(n=String(n)).match(N9)?n:"unsafe:"+n}function ul(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function bm(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const KM=ul("area,br,col,hr,img,wbr"),ZM=ul("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),YM=ul("rp,rt"),m1=bm(KM,bm(ZM,ul("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bm(YM,ul("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bm(YM,ZM)),_1=ul("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),QM=bm(_1,ul("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ul("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),x9=ul("script,style,template");class P9{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!m1.hasOwnProperty(t))return this.sanitizedSomething=!0,!x9.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!QM.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;_1[a]&&(l=g1(l)),this.buf.push(" ",o,'="',JM(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();m1.hasOwnProperty(t)&&!KM.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(JM(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const O9=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,M9=/([^\#-~ |!])/g;function JM(n){return n.replace(/&/g,"&amp;").replace(O9,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(M9,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cb;function y1(n){return"content"in n&&function F9(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var sf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(sf||{});function XM(n){const e=function Em(){const n=ue();return n&&n[Wl].sanitizer}();return e?$M(e.sanitize(sf.HTML,n)||""):function vm(n,e){const t=function S9(n){return n instanceof WM&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Bt})`)}return t===e}(n,"HTML")?$M(uc(n)):function k9(n,e){let t=null;try{cb=cb||function qM(n){const e=new A9(n);return function R9(){try{return!!(new window.DOMParser).parseFromString(nf(""),"text/html")}catch{return!1}}()?new D9(e):e}(n);let i=e?String(e):"";t=cb.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=cb.getInertBodyElement(i)}while(i!==s);return nf((new P9).sanitizeChildren(y1(t)||t))}finally{if(t){const i=y1(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(rf(),Xe(n))}const wm=new Se("ENVIRONMENT_INITIALIZER"),ik=new Se("INJECTOR",-1),rk=new Se("INJECTOR_DEF_TYPES");class v1{get(e,t=Hl){if(t===Hl){const i=new Error(`NullInjectorError: No provider for ${X(e)}!`);throw i.name="NullInjectorError",i}return t}}function H9(...n){return{\u0275providers:ok(0,n),\u0275fromNgModule:!0}}function ok(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return sc(e,o=>{const a=o;ub(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&ak(r,s),t}function ak(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];b1(r,s=>{e(s,i)})}}function ub(n,e,t,i){if(!(n=Ve(n)))return!1;let r=null,s=_o(n);const o=!s&&pt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=_o(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)ub(u,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;i.add(r);try{sc(s.imports,h=>{ub(h,e,t,i)&&(u||=[],u.push(h))})}finally{}void 0!==u&&ak(u,e)}if(!a){const u=Xa(r)||(()=>new r);e({provide:r,useFactory:u,deps:Ut},r),e({provide:rk,useValue:r,multi:!0},r),e({provide:wm,useValue:()=>ee(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const u=n;b1(l,h=>{e(h,u)})}}}return r!==n&&void 0!==n.providers}function b1(n,e){for(let t of n)di(t)&&(t=t.\u0275providers),Array.isArray(t)?b1(t,e):e(t)}const $9=R({provide:String,useValue:R});function E1(n){return null!==n&&"object"==typeof n&&$9 in n}function Gu(n){return"function"==typeof n}const w1=new Se("Set Injector scope."),db={},z9={};let T1;function hb(){return void 0===T1&&(T1=new v1),T1}class ss{}class af extends ss{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,C1(e,o=>this.processProvider(o)),this.records.set(ik,lf(void 0,this)),r.has("environment")&&this.records.set(ss,lf(void 0,this));const s=this.records.get(w1);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(rk.multi,Ut,St.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=na(this),i=Yi(void 0);try{return e()}finally{na(t),Yi(i)}}get(e,t=Hl,i=St.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Lv))return e[Lv](this);i=pu(i);const s=na(this),o=Yi(void 0);try{if(!(i&St.SkipSelf)){let l=this.records.get(e);if(void 0===l){const u=function Y9(n){return"function"==typeof n||"object"==typeof n&&n instanceof Se}(e)&&Fi(e);l=u&&this.injectableDefInScope(u)?lf(I1(e),db):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&St.Self?hb():this.parent).get(e,t=i&St.Optional&&t===Hl?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[ch]=a[ch]||[]).unshift(X(e)),s)throw a;return function Gl(n,e,t,i){const r=n[ch];throw e[uh]&&r.unshift(e[uh]),n.message=function Fv(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=X(e);if(Array.isArray(e))r=e.map(X).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):X(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Ov,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[ch]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Yi(o),na(s)}}resolveInjectorInitializers(){const e=na(this),t=Yi(void 0);try{const r=this.get(wm.multi,Ut,St.Self);for(const s of r)s()}finally{na(e),Yi(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(X(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ae(205,!1)}processProvider(e){let t=Gu(e=Ve(e))?e:Ve(e&&e.provide);const i=function q9(n){return E1(n)?lf(void 0,n.useValue):lf(uk(n),db)}(e);if(Gu(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=lf(void 0,db,!0),r.factory=()=>bg(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===db&&(t.value=z9,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Z9(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ve(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function I1(n){const e=Fi(n),t=null!==e?e.factory:Xa(n);if(null!==t)return t;if(n instanceof Se)throw new ae(204,!1);if(n instanceof Function)return function W9(n){const e=n.length;if(e>0)throw Uu(e,"?"),new ae(204,!1);const t=function ja(n){return n&&(n[hu]||n[ah])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ae(204,!1)}function uk(n,e,t){let i;if(Gu(n)){const r=Ve(n);return Xa(r)||I1(r)}if(E1(n))i=()=>Ve(n.useValue);else if(function ck(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...bg(n.deps||[]));else if(function lk(n){return!(!n||!n.useExisting)}(n))i=()=>ee(Ve(n.useExisting));else{const r=Ve(n&&(n.useClass||n.provide));if(!function K9(n){return!!n.deps}(n))return Xa(r)||I1(r);i=()=>new r(...bg(n.deps))}return i}function lf(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function C1(n,e){for(const t of n)Array.isArray(t)?C1(t,e):t&&di(t)?C1(t.\u0275providers,e):e(t)}const fb=new Se("AppId",{providedIn:"root",factory:()=>Q9}),Q9="ng",dk=new Se("Platform Initializer"),Do=new Se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),hk=new Se("CSP nonce",{providedIn:"root",factory:()=>rf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let fk=(n,e,t)=>null;function O1(n,e,t=!1){return fk(n,e,t)}class aq{}class mk{}class cq{resolveComponentFactory(e){throw function lq(n){const e=Error(`No component factory found for ${X(n)}.`);return e.ngComponent=n,e}(e)}}let vb=(()=>{class n{static#e=this.NULL=new cq}return n})();function uq(){return df(Si(),ue())}function df(n,e){return new en(Xi(n,e))}let en=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=uq}return n})();function dq(n){return n instanceof en?n.nativeElement:n}class F1{}let Is=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function hq(){const n=ue(),t=er(Si().index,n);return(Vi(t)?t:n)[rt]}()}return n})(),fq=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>null})}return n})();class hf{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const yk=new hf("16.2.12"),L1={};function wk(n,e=null,t=null,i){const r=Tk(n,e,t,i);return r.resolveInjectorInitializers(),r}function Tk(n,e=null,t=null,i,r=new Set){const s=[t||Ut,H9(n)];return i=i||("object"==typeof n?void 0:X(n)),new af(s,e||hb(),i||null,r)}let ir=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Hl;static#t=this.NULL=new v1;static create(t,i){if(Array.isArray(t))return wk({name:""},i,t,"");{const r=t.name??"";return wk({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=ye({token:n,providedIn:"any",factory:()=>ee(ik)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function V1(n){return n.ngOriginalError}class dl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&V1(e);for(;t&&V1(t);)t=V1(t);return t||null}}function B1(n){return e=>{setTimeout(n,void 0,e)}}const Ye=class Eq extends at{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=B1(s),r&&(r=B1(r)),o&&(o=B1(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof M&&e.add(a),a}};function Ck(...n){}class vt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ye(!1),this.onMicrotaskEmpty=new Ye(!1),this.onStable=new Ye(!1),this.onError=new Ye(!1),typeof Zone>"u")throw new ae(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function wq(){const n="function"==typeof pn.requestAnimationFrame;let e=pn[n?"requestAnimationFrame":"setTimeout"],t=pn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Cq(n){const e=()=>{!function Iq(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(pn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j1(n),n.isCheckStableRunning=!0,U1(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j1(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function Dq(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,s,o,a);try{return Sk(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Dk(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return Sk(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),Dk(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,j1(n),U1(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vt.isInAngularZone())throw new ae(909,!1)}static assertNotInAngularZone(){if(vt.isInAngularZone())throw new ae(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Tq,Ck,Ck);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Tq={};function U1(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j1(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Sk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Dk(n){n._nesting--,U1(n)}class Sq{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ye,this.onMicrotaskEmpty=new Ye,this.onStable=new Ye,this.onError=new Ye}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const Ak=new Se("",{providedIn:"root",factory:Rk});function Rk(){const n=Ne(vt);let e=!0;return yn(new ze(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new ze(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{vt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const o=n.onUnstable.subscribe(()=>{vt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(js()))}function hl(n){return n instanceof Function?n():n}let H1=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new n})}return n})();function Cm(n){for(;n;){n[lt]|=64;const e=mm(n);if(bu(n)&&!e)return n;n=e}return null}const Mk=new Se("",{providedIn:"root",factory:()=>!1});let wb=null;function Vk(n,e){return n[e]??jk()}function Bk(n,e){const t=jk();t.producerNode?.length&&(n[e]=wb,t.lView=n,wb=Uk())}const Lq={...el,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Cm(n.lView)},lView:null};function Uk(){return Object.create(Lq)}function jk(){return wb??=Uk(),wb}const gt={};function ge(n){Hk(Ft(),ue(),Ai()+n,!1)}function Hk(n,e,t,i){if(!i)if(3==(3&e[lt])){const s=n.preOrderCheckHooks;null!==s&&Mh(e,s,t)}else{const s=n.preOrderHooks;null!==s&&kh(e,s,0,t)}Io(t)}function V(n,e=St.Default){const t=ue();return null===t?ee(n,e):P0(Si(),t,Ve(n),e)}function Tb(n,e,t,i,r,s,o,a,l,u,h){const g=e.blueprint.slice();return g[Pn]=r,g[lt]=140|i,(null!==u||n&&2048&n[lt])&&(g[lt]|=2048),Ug(g),g[kt]=g[wo]=n,g[Hn]=t,g[Wl]=o||n&&n[Wl],g[rt]=a||n&&n[rt],g[Eo]=l||n&&n[Eo]||null,g[_i]=s,g[Za]=function te(){return O++}(),g[Ws]=h,g[_u]=u,g[On]=2==e.type?n[On]:g,g}function mf(n,e,t,i,r){let s=n.data[e];if(null===s)s=function $1(n,e,t,i,r){const s=Rh(),o=Hg(),l=n.data[e]=function zq(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Xl()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,i,r),function $g(){return it.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Du(){const n=it.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ns(s,!0),s}function Sm(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Gk(n,e,t,i,r){const s=Vk(e,Ya),o=Ai(),a=2&i;try{Io(-1),a&&e.length>It&&Hk(n,e,It,!1),ts(a?2:0,r);const u=a?s:null,h=Og(u);try{null!==u&&(u.dirty=!1),t(i,r)}finally{n0(u,h)}}finally{a&&null===e[Ya]&&Bk(e,Ya),Io(o),ts(a?3:1,r)}}function G1(n,e,t){if(vu(e)){const i=es(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{es(i)}}}function z1(n,e,t){p0()&&(function Jq(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;Ja(t)&&function s7(n,e,t){const i=Xi(e,n),r=zk(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Ib(n,Tb(n,r,null,o,i,e,null,n[Wl].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Uh(t,e),kn(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],u=sl(e,n,a,t);kn(u,e),null!==o&&o7(0,a-r,u,l,0,o),Ts(l)&&(er(t.index,e)[Hn]=sl(e,n,a,t))}}(n,e,t,Xi(t,e)),64==(64&t.flags)&&Yk(n,e,t))}function W1(n,e,t=Xi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function zk(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=q1(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function q1(n,e,t,i,r,s,o,a,l,u,h){const g=It+i,m=g+r,v=function Bq(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:gt);return t}(g,m),w="function"==typeof u?u():u;return v[Le]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:h}}let Wk=n=>null;function qk(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?Kk(t,e,r,s):i.hasOwnProperty(r)&&Kk(t,e,i[r],s)}return t}function Kk(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Cs(n,e,t,i,r,s,o,a){const l=Xi(e,t);let h,u=e.inputs;!a&&null!=u&&(h=u[i])?(J1(n,t,h,i,r),Ja(e)&&function Kq(n,e){const t=er(e,n);16&t[lt]||(t[lt]|=64)}(t,e.index)):3&e.type&&(i=function qq(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}function K1(n,e,t,i){if(p0()){const r=null===i?null:{"":-1},s=function e7(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(yh(e,o.selectors,!1))if(i||(i=[]),Ts(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),Z1(n,e,a.length)}else i.unshift(o),Z1(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Zk(n,e,t,o,r,a),r&&function t7(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new ae(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=za(t.mergedAttrs,t.attrs)}function Zk(n,e,t,i,r,s){for(let u=0;u<i.length;u++)Qg(Uh(t,e),n,i[u].type);!function i7(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let u=0;u<i.length;u++){const h=i[u];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,l=Sm(n,e,i.length,null);for(let u=0;u<i.length;u++){const h=i[u];t.mergedAttrs=za(t.mergedAttrs,h.hostAttrs),r7(n,t,e,l,h),n7(l,h,r),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function Wq(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,u=null;for(let h=e.directiveStart;h<r;h++){const g=s[h],m=t?t.get(g):null,w=m?m.outputs:null;l=qk(g.inputs,h,l,m?m.inputs:null),u=qk(g.outputs,h,u,w);const S=null===l||null===o||_h(e)?null:a7(l,h,o);a.push(S)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}(n,t,s)}function Yk(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function IC(){return it.lFrame.currentDirectiveIndex}();try{Io(s);for(let a=i;a<r;a++){const l=n.data[a],u=e[a];Nu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Xq(l,u)}}finally{Io(-1),Nu(o)}}function Xq(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Z1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function n7(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ts(e)&&(t[""]=n)}}function r7(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Xa(r.type)),o=new nc(s,Ts(r),V);n.blueprint[i]=o,t[i]=o,function Yq(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Qq(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Sm(n,t,r.hostVars,gt),r)}function ha(n,e,t,i,r,s){const o=Xi(n,e);!function Y1(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Xe(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[rt],o,s,n.value,t,i,r)}function o7(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)Qk(i,t,o[a++],o[a++],o[a++])}function Qk(n,e,t,i,r){const s=es(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{es(s)}}function a7(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Jk(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function Xk(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];Gg(t[i]),o.contentQueries(2,e[s],s)}}}function Ib(n,e){return n[Ka]?n[bh][Jr]=e:n[Ka]=e,n[bh]=e,e}function Q1(n,e,t){Gg(0);const i=es(null);try{e(n,t)}finally{es(i)}}function eF(n){return n[bo]||(n[bo]=[])}function tF(n){return n.cleanup||(n.cleanup=[])}function iF(n,e){const t=n[Eo],i=t?t.get(dl,null):null;i&&i.handleError(e)}function J1(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];Qk(n.data[o],e[o],i,a,r)}}function l7(n,e){const t=er(e,n),i=t[Le];!function c7(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[Pn];null!==r&&null===t[Ws]&&(t[Ws]=O1(r,t[Eo])),X1(i,t,t[Hn])}function X1(n,e,t){xu(e);try{const i=n.viewQuery;null!==i&&Q1(1,i,t);const r=n.template;null!==r&&Gk(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Xk(n,e),n.staticViewQueries&&Q1(2,n.viewQuery,t);const s=n.components;null!==s&&function u7(n,e){for(let t=0;t<e.length;t++)l7(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[lt]&=-5,il()}}let rF=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function lC(n,e,t){const i=Object.create(dM);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>t0(i),run:()=>{if(i.dirty=!1,i.hasRun&&!nC(i))return;i.hasRun=!0;const o=Og(i);try{i.cleanupFn(),i.cleanupFn=o0,i.fn(r)}finally{n0(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},r);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new n})}return n})();function Cb(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=W(r,a):2==s&&(i=W(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Dm(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push(cn(s)),Ji(s)&&sF(s,i);const o=t.type;if(8&o)Dm(n,e,t.child,i);else if(32&o){const a=r1(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=VM(e,t);if(Array.isArray(a))i.push(...a);else{const l=mm(e[On]);Dm(l[Le],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function sF(n,e){for(let t=ni;t<n.length;t++){const i=n[t],r=i[Le].firstChild;null!==r&&Dm(i[Le],i,r,e)}n[Xr]!==n[Pn]&&e.push(n[Xr])}function Sb(n,e,t,i=!0){const r=e[Wl],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{oF(n,e,n.template,t)}catch(l){throw i&&iF(e,l),l}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function oF(n,e,t,i){const r=e[lt];if(256!=(256&r)){e[Wl].effectManager?.flush(),xu(e);try{Ug(e),function Nh(n){return it.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Gk(n,e,t,2,i);const o=3==(3&r);if(o){const u=n.preOrderCheckHooks;null!==u&&Mh(e,u,null)}else{const u=n.preOrderHooks;null!==u&&kh(e,u,0,null),Pu(e,0)}if(function f7(n){for(let e=SM(n);null!==e;e=DM(e)){if(!e[Hv])continue;const t=e[sa];for(let i=0;i<t.length;i++){fC(t[i])}}}(e),aF(e,2),null!==n.contentQueries&&Xk(n,e),o){const u=n.contentCheckHooks;null!==u&&Mh(e,u)}else{const u=n.contentHooks;null!==u&&kh(e,u,1),Pu(e,1)}!function Vq(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=Vk(e,Kl);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)Io(~s);else{const o=s,a=t[++r],l=t[++r];TC(a,o),i.dirty=!1;const u=Og(i);try{l(2,e[o])}finally{n0(i,u)}}}}finally{null===e[Kl]&&Bk(e,Kl),Io(-1)}}(n,e);const a=n.components;null!==a&&cF(e,a,0);const l=n.viewQuery;if(null!==l&&Q1(2,l,i),o){const u=n.viewCheckHooks;null!==u&&Mh(e,u)}else{const u=n.viewHooks;null!==u&&kh(e,u,2),Pu(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[lt]&=-73,h0(e)}finally{il()}}}function aF(n,e){for(let t=SM(n);null!==t;t=DM(t))for(let i=ni;i<t.length;i++)lF(t[i],e)}function p7(n,e,t){lF(er(e,n),t)}function lF(n,e){if(!function Bg(n){return 128==(128&n[lt])}(n))return;const t=n[Le],i=n[lt];if(80&i&&0===e||1024&i||2===e)oF(t,n,t.template,n[Hn]);else if(n[mu]>0){aF(n,1);const r=t.components;null!==r&&cF(n,r,1)}}function cF(n,e,t){for(let i=0;i<e.length;i++)p7(n,e[i],t)}class Am{get rootNodes(){const e=this._lView,t=e[Le];return Dm(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Hn]}set context(e){this._lView[Hn]=e}get destroyed(){return 256==(256&this._lView[lt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[kt];if(Ji(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(ib(e,i),$h(t,i))}this._attachedToViewContainer=!1}o1(this._lView[Le],this._lView)}onDestroy(e){!function nl(n,e){if(256==(256&n[lt]))throw new ae(911,!1);null===n[zs]&&(n[zs]=[]),n[zs].push(e)}(this._lView,e)}markForCheck(){Cm(this._cdRefInjectingView||this._lView)}detach(){this._lView[lt]&=-129}reattach(){this._lView[lt]|=128}detectChanges(){Sb(this._lView[Le],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function s9(n,e){ym(n,e,e[rt],2,null,null)}(this._lView[Le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ae(902,!1);this._appRef=e}}class g7 extends Am{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Sb(e[Le],e,e[Hn],!1)}checkNoChanges(){}get context(){return null}}class uF extends vb{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=pt(e);return new Rm(t,this.ngModule)}}function dF(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class _7{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=pu(i);const r=this.injector.get(e,L1,i);return r!==L1||t===L1?r:this.parentInjector.get(e,t,i)}}class Rm extends mk{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=dF(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return dF(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function QI(n){return n.map(Cg).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof ss?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new _7(e,s):e,a=o.get(F1,null);if(null===a)throw new ae(407,!1);const g={rendererFactory:a,sanitizer:o.get(fq,null),effectManager:o.get(rF,null),afterRenderEventManager:o.get(H1,null)},m=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=i?function Uq(n,e,t,i){const s=i.get(Mk,!1)||t===Nr.ShadowDom,o=n.selectRootElement(e,s);return function jq(n){Wk(n)}(o),o}(m,i,this.componentDef.encapsulation,o):nb(m,v,function m7(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),L=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let x=null;null!==w&&(x=O1(w,o,!0));const U=q1(0,null,null,1,0,null,null,null,null,null,null),z=Tb(null,U,null,L,null,null,g,m,o,null,x);let se,Ie;xu(z);try{const Ke=this.componentDef;let tt,_n=null;Ke.findHostDirectiveDefs?(tt=[],_n=new Map,Ke.findHostDirectiveDefs(Ke,tt,_n),tt.push(Ke)):tt=[Ke];const Kn=function v7(n,e){const t=n[Le],i=It;return n[i]=e,mf(t,i,2,"#host",null)}(z,w),qi=function b7(n,e,t,i,r,s,o){const a=r[Le];!function E7(n,e,t,i){for(const r of n)e.mergedAttrs=za(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Cb(e,e.mergedAttrs,!0),null!==t&&HM(i,t,e))}(i,n,e,o);let l=null;null!==e&&(l=O1(e,r[Eo]));const u=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const g=Tb(r,zk(t),null,h,r[n.index],n,s,u,null,null,l);return a.firstCreatePass&&Z1(a,n,i.length-1),Ib(r,g),r[n.index]=g}(Kn,w,Ke,tt,z,g,m);Ie=Su(U,It),w&&function T7(n,e,t,i){if(i)wg(n,t,["ng-version",yk.full]);else{const{attrs:r,classes:s}=function Sg(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Qi(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&wg(n,t,r),s&&s.length>0&&jM(n,t,s.join(" "))}}(m,Ke,w,i),void 0!==t&&function I7(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(Ie,this.ngContentSelectors,t),se=function w7(n,e,t,i,r,s){const o=Si(),a=r[Le],l=Xi(o,r);Zk(a,r,o,t,null,i);for(let h=0;h<t.length;h++)kn(sl(r,a,o.directiveStart+h,o),r);Yk(a,r,o),l&&kn(l,r);const u=sl(r,a,o.directiveStart+o.componentOffset,o);if(n[Hn]=r[Hn]=u,null!==s)for(const h of s)h(u,e);return G1(a,o,n),u}(qi,Ke,tt,_n,z,[C7]),X1(U,z,null)}finally{il()}return new y7(this.componentType,se,df(Ie,z),z,Ie)}}class y7 extends aq{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new g7(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;J1(s[Le],s,r,e,t),this.previousInputValues.set(e,t),Cm(er(this._tNode.index,s))}}get injector(){return new Ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function C7(){const n=Si();tc(ue()[Le],n)}function tn(n){let e=function hF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Ts(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ae(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=Db(n.inputs),o.inputTransforms=Db(n.inputTransforms),o.declaredInputs=Db(n.declaredInputs),o.outputs=Db(n.outputs);const a=r.hostBindings;a&&R7(n,a);const l=r.viewQuery,u=r.contentQueries;if(l&&D7(n,l),u&&A7(n,u),F(n.inputs,r.inputs),F(n.declaredInputs,r.declaredInputs),F(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),F(o.inputTransforms,r.inputTransforms)),Ts(r)&&r.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===tn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function S7(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=za(r.hostAttrs,t=za(t,r.hostAttrs))}}(i)}function Db(n){return n===$s?{}:n===Ut?[]:n}function D7(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function A7(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function R7(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Ab(n){return!!eS(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function eS(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function yr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function nn(n,e,t,i){const r=ue();return yr(r,Zs(),e)&&(Ft(),ha(bn(),r,n,e,t,i)),nn}function ke(n,e,t,i,r,s,o,a){const l=ue(),u=Ft(),h=n+It,g=u.firstCreatePass?function X7(n,e,t,i,r,s,o,a,l){const u=e.consts,h=mf(e,n,4,o||null,Ks(u,a));K1(e,t,h,Ks(u,l)),tc(e,h);const g=h.tView=q1(2,h,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,u,l,e,t,i,r,s,o):u.data[h];ns(g,!1);const m=RF(u,l,g,n);ec()&&sb(u,l,m,g),kn(m,l),Ib(l,l[h]=Jk(m,l,m,g)),Zl(g)&&z1(u,l,g),null!=o&&W1(l,g,a)}let RF=function NF(n,e,t,i){return oa(!0),e[rt].createComment("")};function me(n,e,t){const i=ue();return yr(i,Zs(),e)&&Cs(Ft(),bn(),i,n,e,i[rt],t,!1),me}function oS(n,e,t,i,r){const o=r?"class":"style";J1(n,t,e.inputs[o],o,i)}function _e(n,e,t,i){const r=ue(),s=Ft(),o=It+n,a=r[rt],l=s.firstCreatePass?function iK(n,e,t,i,r,s){const o=e.consts,l=mf(e,n,2,i,Ks(o,r));return K1(e,t,l,Ks(o,s)),null!==l.attrs&&Cb(l,l.attrs,!1),null!==l.mergedAttrs&&Cb(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,t,i):s.data[o],u=xF(s,r,l,a,e,n);r[o]=u;const h=Zl(l);return ns(l,!0),HM(a,u,l),32!=(32&l.flags)&&ec()&&sb(s,r,u,l),0===function mC(){return it.lFrame.elementDepthCount}()&&kn(u,r),function Ah(){it.lFrame.elementDepthCount++}(),h&&(z1(s,r,l),G1(s,l,r)),null!==i&&W1(r,l),_e}function pe(){let n=Si();Hg()?Au():(n=n.parent,ns(n,!1));const e=n;(function jg(n){return it.skipHydrationRootTNode===n})(e)&&function EC(){it.skipHydrationRootTNode=null}(),function _C(){it.lFrame.elementDepthCount--}();const t=Ft();return t.firstCreatePass&&(tc(t,n),vu(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function S0(n){return 0!=(8&n.flags)}(e)&&oS(t,e,ue(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function NC(n){return 0!=(16&n.flags)}(e)&&oS(t,e,ue(),e.stylesWithoutHost,!1),pe}function os(n,e,t,i){return _e(n,e,t,i),pe(),os}let xF=(n,e,t,i,r,s)=>(oa(!0),nb(i,r,function T0(){return it.lFrame.currentNamespace}()));function Ob(n,e,t){const i=ue(),r=Ft(),s=n+It,o=r.firstCreatePass?function oK(n,e,t,i,r){const s=e.consts,o=Ks(s,i),a=mf(e,n,8,"ng-container",o);return null!==o&&Cb(a,o,!0),K1(e,t,a,Ks(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];ns(o,!0);const a=PF(r,i,o,n);return i[s]=a,ec()&&sb(r,i,a,o),kn(a,i),Zl(o)&&(z1(r,i,o),G1(r,o,i)),null!=t&&W1(i,o),Ob}function Mb(){let n=Si();const e=Ft();return Hg()?Au():(n=n.parent,ns(n,!1)),e.firstCreatePass&&(tc(e,n),vu(n)&&e.queries.elementEnd(n)),Mb}function aS(n,e,t){return Ob(n,e,t),Mb(),aS}let PF=(n,e,t,i)=>(oa(!0),s1(e[rt],""));function ii(){return ue()}function km(n){return!!n&&"function"==typeof n.then}function OF(n){return!!n&&"function"==typeof n.subscribe}function We(n,e,t,i){const r=ue(),s=Ft(),o=Si();return function kF(n,e,t,i,r,s,o){const a=Zl(i),u=n.firstCreatePass&&tF(n),h=e[Hn],g=eF(e);let m=!0;if(3&i.type||o){const S=Xi(i,e),D=o?o(S):S,L=g.length,x=o?z=>o(cn(z[i.index])):i.index;let U=null;if(!o&&a&&(U=function cK(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[bo],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==U)(U.__ngLastListenerFn__||U).__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,m=!1;else{s=LF(i,e,h,s,!1);const z=t.listen(D,r,s);g.push(s,z),u&&u.push(r,x,L,L+1)}}else s=LF(i,e,h,s,!1);const v=i.outputs;let w;if(m&&null!==v&&(w=v[r])){const S=w.length;if(S)for(let D=0;D<S;D+=2){const se=e[w[D]][w[D+1]].subscribe(s),Ie=g.length;g.push(s,se),u&&u.push(r,i.index,Ie,-(Ie+1))}}}(s,r,r[rt],o,n,e,i),We}function FF(n,e,t,i){try{return ts(6,e,t),!1!==t(i)}catch(r){return iF(n,r),!1}finally{ts(7,e,t)}}function LF(n,e,t,i,r){return function s(o){if(o===Function)return i;Cm(n.componentOffset>-1?er(n.index,e):e);let l=FF(e,t,i,o),u=s.__ngNextListenerFn__;for(;u;)l=FF(e,t,u,o)&&l,u=u.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function Ee(n=1){return function CC(n){return(it.lFrame.contextLView=function SC(n,e){for(;n>0;)e=e[wo],n--;return e}(n,it.lFrame.contextLView))[Hn]}(n)}function uK(n,e){let t=null;const i=function ZI(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?yh(n,s,!0):Ig(i,s))return r}else t=r}return t}function Fb(n,e){return n<<17|e<<2}function dc(n){return n>>17&32767}function cS(n){return 2|n}function Wu(n){return(131068&n)>>2}function uS(n,e){return-131069&n|e<<2}function dS(n){return 1|n}function KF(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?dc(s):Wu(s),l=!1;for(;0!==a&&(!1===l||o);){const h=n[a+1];mK(n[a],e)&&(l=!0,n[a+1]=i?dS(h):cS(h)),a=i?dc(h):Wu(h)}l&&(n[t+1]=i?cS(s):dS(s))}function mK(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ll(n,e)>=0}const Ni={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ZF(n){return n.substring(Ni.key,Ni.keyEnd)}function YF(n,e){const t=Ni.textEnd;return t===e?-1:(e=Ni.keyEnd=function bK(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Ni.key=e,t),Sf(n,e,t))}function Sf(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function hc(n,e,t){return Ro(n,e,t,!1),hc}function Gt(n,e){return Ro(n,e,null,!0),Gt}function qu(n){!function No(n,e,t,i){const r=Ft(),s=tr(2);r.firstUpdatePass&&nL(r,null,s,i);const o=ue();if(t!==gt&&yr(o,s,t)){const a=r.data[Ai()];if(oL(a,i)&&!tL(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=W(l,t||"")),oS(r,a,o,t,i)}else!function NK(n,e,t,i,r,s,o,a){r===gt&&(r=Ut);let l=0,u=0,h=0<r.length?r[0]:null,g=0<s.length?s[0]:null;for(;null!==h||null!==g;){const m=l<r.length?r[l+1]:void 0,v=u<s.length?s[u+1]:void 0;let S,w=null;h===g?(l+=2,u+=2,m!==v&&(w=g,S=v)):null===g||null!==h&&h<g?(l+=2,w=h):(u+=2,w=g,S=v),null!==w&&rL(n,e,t,i,w,S,o,a),h=l<r.length?r[l]:null,g=u<s.length?s[u]:null}}(r,a,o,o[rt],o[s+1],o[s+1]=function AK(n,e,t){if(null==t||""===t)return Ut;const i=[],r=uc(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(RK,ga,n,!0)}function ga(n,e){for(let t=function yK(n){return function JF(n){Ni.key=0,Ni.keyEnd=0,Ni.value=0,Ni.valueEnd=0,Ni.textEnd=n.length}(n),YF(n,Sf(n,0,Ni.textEnd))}(e);t>=0;t=YF(e,t))xr(n,ZF(e),!0)}function Ro(n,e,t,i){const r=ue(),s=Ft(),o=tr(2);s.firstUpdatePass&&nL(s,n,o,i),e!==gt&&yr(r,o,e)&&rL(s,s.data[Ai()],r,r[rt],n,r[o+1]=function xK(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=X(uc(n)))),n}(e,t),i,o)}function tL(n,e){return e>=n.expandoStartIndex}function nL(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Ai()],o=tL(n,t);oL(s,i)&&null===e&&!o&&(e=!1),e=function IK(n,e,t,i){const r=function xh(n){const e=it.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Fm(t=hS(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=hS(r,n,e,t,i),null===s){let l=function CK(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Wu(i))return n[dc(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=hS(null,n,e,l[1],i),l=Fm(l,e.attrs,i),function SK(n,e,t,i){n[dc(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function DK(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Fm(i,n[s].hostAttrs,t);return Fm(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function pK(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=dc(o),l=Wu(o);n[i]=t;let h,u=!1;if(Array.isArray(t)?(h=t[1],(null===h||ll(t,h)>0)&&(u=!0)):h=t,r)if(0!==l){const m=dc(n[a+1]);n[i+1]=Fb(m,a),0!==m&&(n[m+1]=uS(n[m+1],i)),n[a+1]=function hK(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Fb(a,0),0!==a&&(n[a+1]=uS(n[a+1],i)),a=i;else n[i+1]=Fb(l,0),0===a?a=i:n[l+1]=uS(n[l+1],i),l=i;u&&(n[i+1]=cS(n[i+1])),KF(n,h,i,!0),KF(n,h,i,!1),function gK(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ll(s,e)>=0&&(t[i+1]=dS(t[i+1]))}(e,h,n,i,s),o=Fb(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function hS(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Fm(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Fm(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),xr(n,o,!!t||e[++s]))}return void 0===n?null:n}function RK(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&xr(n,i,t)}function rL(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,u=l[a+1],h=function fK(n){return 1==(1&n)}(u)?sL(l,e,t,r,Wu(u),o):void 0;Lb(h)||(Lb(s)||function dK(n){return 2==(2&n)}(u)&&(s=sL(l,null,t,r,a,o)),function g9(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:c.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=c.Important),n.setStyle(t,i,r,s))}}(i,o,tl(Ai(),t),r,s))}function sL(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],u=Array.isArray(l),h=u?l[1]:l,g=null===h;let m=t[r+1];m===gt&&(m=g?Ut:void 0);let v=g?sm(m,i):h===i?m:void 0;if(u&&!Lb(v)&&(v=sm(l,i)),Lb(v)&&(a=v,o))return a;const w=n[r+1];r=o?dc(w):Wu(w)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=sm(l,i))}return a}function Lb(n){return void 0!==n}function oL(n,e){return 0!=(n.flags&(e?8:16))}function mt(n,e=""){const t=ue(),i=Ft(),r=n+It,s=i.firstCreatePass?mf(i,r,1,e,null):i.data[r],o=aL(i,t,s,e,n);t[r]=o,ec()&&sb(i,t,o,s),ns(s,!1)}let aL=(n,e,t,i,r)=>(oa(!0),function tb(n,e){return n.createText(e)}(e[rt],i));function ma(n){return xo("",n,""),ma}function xo(n,e,t){const i=ue(),r=function yf(n,e,t,i){return yr(n,Zs(),t)?e+Xe(t)+i:gt}(i,n,e,t);return r!==gt&&function fl(n,e,t){const i=tl(e,n);!function RM(n,e,t){n.setValue(e,t)}(n[rt],i,t)}(i,Ai(),r),xo}function Js(n,e,t){const i=ue();return yr(i,Zs(),e)&&Cs(Ft(),bn(),i,n,e,i[rt],t,!0),Js}const Ku=void 0;var XK=["en",[["a","p"],["AM","PM"],Ku],[["AM","PM"],Ku,Ku],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ku,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ku,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ku,"{1} 'at' {0}",Ku],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JK(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Df={};function kr(n){const e=function eZ(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=DL(e);if(t)return t;const i=e.split("-")[0];if(t=DL(i),t)return t;if("en"===i)return XK;throw new ae(701,!1)}function DL(n){return n in Df||(Df[n]=pn.ng&&pn.ng.common&&pn.ng.common.locales&&pn.ng.common.locales[n]),Df[n]}var Cn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Cn||{});const Af="en-US";let AL=Af;function gS(n,e,t,i,r){if(n=Ve(n),Array.isArray(n))for(let s=0;s<n.length;s++)gS(n[s],e,t,i,r);else{const s=Ft(),o=ue(),a=Si();let l=Gu(n)?n:Ve(n.provide);const u=uk(n),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(Gu(n)||!n.multi){const v=new nc(u,r,V),w=_S(l,e,r?h:h+m,g);-1===w?(Qg(Uh(a,o),s,l),mS(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[w]=v,o[w]=v)}else{const v=_S(l,e,h+m,g),w=_S(l,e,h,h+m),D=w>=0&&t[w];if(r&&!D||!r&&!(v>=0&&t[v])){Qg(Uh(a,o),s,l);const L=function QZ(n,e,t,i,r){const s=new nc(n,t,V);return s.multi=[],s.index=e,s.componentProviders=0,XL(s,r,i&&!t),s}(r?YZ:ZZ,t.length,r,i,u);!r&&D&&(t[w].providerFactory=L),mS(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(L),o.push(L)}else mS(s,n,v>-1?v:w,XL(t[r?w:v],u,!r&&i));!r&&i&&D&&t[w].componentProviders++}}}function mS(n,e,t,i){const r=Gu(e),s=function G9(n){return!!n.useClass}(e);if(r||s){const l=(s?Ve(e.useClass):e).prototype.ngOnDestroy;if(l){const u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const h=u.indexOf(t);-1===h?u.push(t,[i,l]):u[h+1].push(i,l)}else u.push(t,l)}}}function XL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _S(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function ZZ(n,e,t,i){return yS(this.multi,[])}function YZ(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=sl(t,t[Le],this.providerFactory.index,i);s=a.slice(0,o),yS(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],yS(r,s);return s}function yS(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function gn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function KZ(n,e,t){const i=Ft();if(i.firstCreatePass){const r=Ts(n);gS(t,i.data,i.blueprint,r,!0),gS(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Zu{}class e2{}class vS extends Zu{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new uF(this);const r=_r(e);this._bootstrapComponents=hl(r.bootstrap),this._r3Injector=Tk(e,t,[{provide:Zu,useValue:this},{provide:vb,useValue:this.componentFactoryResolver},...i],X(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class bS extends e2{constructor(e){super(),this.moduleType=e}create(e){return new vS(this.moduleType,e,[])}}class t2 extends Zu{constructor(e){super(),this.componentFactoryResolver=new uF(this),this.instance=null;const t=new af([...e.providers,{provide:Zu,useValue:this},{provide:vb,useValue:this.componentFactoryResolver}],e.parent||hb(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ES(n,e,t=null){return new t2({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let eY=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=ok(0,t.type),r=i.length>0?ES([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ye({token:n,providedIn:"environment",factory:()=>new n(ee(ss))})}return n})();function Ss(n){n.getStandaloneInjector=e=>e.get(eY).getOrCreateStandaloneInjector(n)}function Rf(n,e,t,i){return function l2(n,e,t,i,r,s){const o=e+t;return yr(n,o,r)?function fa(n,e,t){return n[e]=t}(n,o+1,s?i.call(s,r):i(r)):function Gm(n,e){const t=n[e];return t===gt?void 0:t}(n,o+1)}(ue(),function Di(){const n=it.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,i)}function TY(){return this._results[Symbol.iterator]()}class IS{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Ye)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=IS.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=TY)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function is(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function im(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function CY(n,e,t,i=!0){const r=e[Le];if(function a9(n,e,t,i){const r=ni+i,s=t.length;i>0&&(t[r-1][Jr]=e),i<s-ni?(e[Jr]=t[r],Hh(t,ni+i,e)):(t.push(e),e[Jr]=null),e[kt]=t;const o=e[ql];null!==o&&t!==o&&function l9(n,e){const t=n[sa];e[On]!==e[kt][kt][On]&&(n[Hv]=!0),null===t?n[sa]=[e]:t.push(e)}(o,e);const a=e[ws];null!==a&&a.insertView(n),e[lt]|=128}(r,e,n,t),i){const s=u1(t,n),o=e[rt],a=rb(o,n[Xr]);null!==a&&function r9(n,e,t,i,r,s){i[Pn]=r,i[_i]=e,ym(n,i,t,1,r,s)}(r,n[_i],o,e,a,s)}}let Yn=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=AY}return n})();const SY=Yn,DY=class extends SY{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function IY(n,e,t,i){const r=e.tView,a=Tb(n,r,t,4096&n[lt]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[ql]=n[e.index];const u=n[ws];return null!==u&&(a[ws]=u.createEmbeddedView(r)),X1(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new Am(r)}};function AY(){return Hb(Si(),ue())}function Hb(n,e){return 4&n.type?new DY(e,n,df(n,e)):null}let Xs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=MY}return n})();function MY(){return v2(Si(),ue())}const kY=Xs,_2=class extends kY{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return df(this._hostTNode,this._hostLView)}get injector(){return new Ri(this._hostTNode,this._hostLView)}get parentInjector(){const e=jh(this._hostTNode,this._hostLView);if(Kg(e)){const t=rl(e,this._hostLView),i=Ou(e);return new Ri(t[Le].data[i+8],t)}return new Ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=y2(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ni}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,s){const o=e&&!function Bu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const S=t||{};a=S.index,i=S.injector,r=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}const l=o?e:new Rm(pt(e)),u=i||this.parentInjector;if(!s&&null==l.ngModule){const D=(o?u:this.parentInjector).get(ss,null);D&&(s=D)}pt(l.componentType??{});const v=l.create(u,r,null,s);return this.insertImpl(v.hostView,a,false),v}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function hC(n){return Ji(n[kt])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const u=r[kt],h=new _2(u,u[_i],u[kt]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return CY(a,r,o,!i),e.attachToViewContainerRef(),Hh(CS(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=y2(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=ib(this._lContainer,t);i&&($h(CS(this._lContainer),t),o1(i[Le],i))}detach(e){const t=this._adjustIndex(e,-1),i=ib(this._lContainer,t);return i&&null!=$h(CS(this._lContainer),t)?new Am(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function y2(n){return n[8]}function CS(n){return n[8]||(n[8]=[])}function v2(n,e){let t;const i=e[n.index];return Ji(i)?t=i:(t=Jk(i,e,null,n),e[n.index]=t,Ib(e,t)),b2(t,e,n,i),new _2(t,n,e)}let b2=function E2(n,e,t,i){if(n[Xr])return;let r;r=8&t.type?cn(i):function FY(n,e){const t=n[rt],i=t.createComment(""),r=Xi(e,n);return $u(t,rb(t,r),i,function h9(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Xr]=r};class SS{constructor(e){this.queryList=e,this.matches=null}clone(){return new SS(this.queryList)}setDirty(){this.queryList.setDirty()}}class DS{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new DS(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==S2(e,t).matches&&this.queries[t].setDirty()}}class w2{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class AS{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new AS(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class RS{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new RS(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,BY(t,s)),this.matchTNodeWithReadOption(e,t,ku(t,e,s,!1,!1))}else i===Yn?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ku(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===en||r===Xs||r===Yn&&4&t.type)this.addMatch(t.index,-2);else{const s=ku(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function BY(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function jY(n,e,t,i){return-1===t?function UY(n,e){return 11&n.type?df(n,e):4&n.type?Hb(n,e):null}(e,n):-2===t?function HY(n,e,t){return t===en?df(e,n):t===Yn?Hb(e,n):t===Xs?v2(e,n):void 0}(n,e,i):sl(n,n[Le],t,e)}function T2(n,e,t,i){const r=e[ws].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const u=o[l];a.push(u<0?null:jY(e,s[u],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function NS(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=T2(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const u=s[a+1],h=e[-l];for(let g=ni;g<h.length;g++){const m=h[g];m[ql]===m[kt]&&NS(m[Le],m,u,i)}if(null!==h[sa]){const g=h[sa];for(let m=0;m<g.length;m++){const v=g[m];NS(v[Le],v,u,i)}}}}}return i}function rn(n){const e=ue(),t=Ft(),i=_0();Gg(i+1);const r=S2(t,i);if(n.dirty&&function d0(n){return 4==(4&n[lt])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?NS(t,e,i,[]):T2(t,e,r,i);n.reset(s,dq),n.notifyOnChanges()}return!0}return!1}function fc(n,e,t){const i=Ft();i.firstCreatePass&&(C2(i,new w2(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),I2(i,ue(),e)}function Qn(n,e,t,i){const r=Ft();if(r.firstCreatePass){const s=Si();C2(r,new w2(e,t,i),s.index),function GY(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}I2(r,ue(),t)}function sn(){return function $Y(n,e){return n[ws].queries[e].queryList}(ue(),_0())}function I2(n,e,t){const i=new IS(4==(4&t));(function Gq(n,e,t,i){const r=eF(e);r.push(t),n.firstCreatePass&&tF(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[ws]&&(e[ws]=new DS),e[ws].queries.push(new SS(i))}function C2(n,e,t){null===n.queries&&(n.queries=new AS),n.queries.track(new RS(e,t))}function S2(n,e){return n.queries.getByIndex(e)}const FS=new Se("Application Initializer");let LS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Ne(FS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(km(s))t.push(s);else if(OF(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$2=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Ds=new Se("LocaleId",{providedIn:"root",factory:()=>Ne(Ds,St.Optional|St.SkipSelf)||function dQ(){return typeof $localize<"u"&&$localize.locale||Af}()});let G2=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new an(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class pQ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let z2=(()=>{class n{compileModuleSync(t){return new bS(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=hl(_r(t).declarations).reduce((o,a)=>{const l=pt(a);return l&&o.push(new Rm(l)),o},[]);return new pQ(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Z2=new Se(""),Wb=new Se("");let HS,US=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,HS||(function FQ(n){HS=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(ee(vt),ee(jS),ee(Wb))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),jS=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return HS?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),pc=null;const Y2=new Se("AllowMultipleToken"),$S=new Se("PlatformDestroyListeners"),GS=new Se("appBootstrapListener");class J2{constructor(e,t){this.name=e,this.token=t}}function eV(n,e,t=[]){const i=`Platform: ${e}`,r=new Se(i);return(s=[])=>{let o=zS();if(!o||o.injector.get(Y2,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function BQ(n){if(pc&&!pc.get(Y2,!1))throw new ae(400,!1);(function Q2(){!function sC(n){Ih=n}(()=>{throw new ae(600,!1)})})(),pc=n;const e=n.get(nV);(function X2(n){n.get(dk,null)?.forEach(t=>t())})(n)}(function tV(n=[],e){return ir.create({name:e,providers:[{provide:w1,useValue:"platform"},{provide:$S,useValue:new Set([()=>pc=null])},...n]})}(a,i))}return function jQ(n){const e=zS();if(!e)throw new ae(401,!1);return e}()}}function zS(){return pc?.get(nV)??null}let nV=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function HQ(n="zone.js",e){return"noop"===n?new Sq:"zone.js"===n?new vt(e):n}(i?.ngZone,function iV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function XZ(n,e,t){return new vS(n,e,t)}(t.moduleType,this.injector,function lV(n){return[{provide:vt,useFactory:n},{provide:wm,multi:!0,useFactory:()=>{const e=Ne(GQ,{optional:!0});return()=>e.initialize()}},{provide:aV,useFactory:$Q},{provide:Ak,useFactory:Rk}]}(()=>r)),o=s.injector.get(dl,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{qb(this._modules,s),a.unsubscribe()})}),function rV(n,e,t){try{const i=t();return km(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(LS);return a.runInitializers(),a.donePromise.then(()=>(function RL(n){Yr(n,"Expected localeId to be defined"),"string"==typeof n&&(AL=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ds,Af)||Af),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=sV({},i);return function LQ(n,e,t){const i=new bS(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(gc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ae(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ae(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get($S,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(ee(ir))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function sV(n,e){return Array.isArray(e)?e.reduce(sV,n):{...n,...e}}let gc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ne(aV),this.zoneIsStable=Ne(Ak),this.componentTypes=[],this.components=[],this.isStable=Ne(G2).hasPendingTasks.pipe($t(t=>t?Re(!1):this.zoneIsStable),mo(),js()),this._injector=Ne(ss)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof mk;if(!this._injector.get(LS).done)throw!r&&function qa(n){const e=pt(n)||jn(n)||ti(n);return null!==e&&e.standalone}(t),new ae(405,!1);let o;o=r?t:this._injector.get(vb).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function VQ(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Zu),u=o.create(ir.NULL,[],i||o.selector,a),h=u.location.nativeElement,g=u.injector.get(Z2,null);return g?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),qb(this.components,u),g?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new ae(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;qb(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(GS,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qb(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ae(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const aV=new Se("",{providedIn:"root",factory:()=>Ne(dl).handleError.bind(void 0)});function $Q(){const n=Ne(vt),e=Ne(dl);return t=>n.runOutsideAngular(()=>e.handleError(t))}let GQ=(()=>{class n{constructor(){this.zone=Ne(vt),this.applicationRef=Ne(gc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let eo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=WQ}return n})();function WQ(n){return function qQ(n,e,t){if(Ja(n)&&!t){const i=er(n.index,e);return new Am(i,i)}return 47&n.type?new Am(e[On],e):null}(Si(),ue(),16==(16&n))}class fV{constructor(){}supports(e){return Ab(e)}create(e){return new XQ(e)}}const JQ=(n,e)=>e;class XQ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||JQ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<gV(i,r,s)?t:i,a=gV(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const u=a-r,h=l-r;if(u!=h){for(let m=0;m<u;m++){const v=m<s.length?s[m]:s[m]=0,w=v+m;h<=w&&w<u&&(s[m]=v+1)}s[o.previousIndex]=h-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ab(e))throw new ae(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function k7(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new eJ(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new pV),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class eJ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tJ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class pV{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new tJ,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gV(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class mV{constructor(){}supports(e){return e instanceof Map||eS(e)}create(){return new nJ}}class nJ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||eS(e)))throw new ae(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new iJ(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class iJ{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function _V(){return new Yb([new fV])}let Yb=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:_V});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||_V()),deps:[[n,new Wh,new oc]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new ae(901,!1)}}return n})();function yV(){return new Km([new mV])}let Km=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:yV});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||yV()),deps:[[n,new Wh,new oc]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new ae(901,!1)}}return n})();const oJ=eV(null,"core",[]);let aJ=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(ee(gc))};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})();function QS(n,e){const t=pt(n),i=e.elementInjector||hb();return new Rm(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}let JS=null;function mc(){return JS}class EJ{}const xi=new Se("DocumentToken");let XS=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return Ne(TJ)},providedIn:"platform"})}return n})();const wJ=new Se("Location Initialized");let TJ=(()=>{class n extends XS{constructor(){super(),this._doc=Ne(xi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mc().getBaseHref(this._doc)}onPopState(t){const i=mc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=mc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function eD(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function DV(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function pl(n){return n&&"?"!==n[0]?"?"+n:n}let Qu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return Ne(RV)},providedIn:"root"})}return n})();const AV=new Se("appBaseHref");let RV=(()=>{class n extends Qu{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ne(xi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return eD(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+pl(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+pl(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+pl(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(ee(XS),ee(AV,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IJ=(()=>{class n extends Qu{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=eD(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+pl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+pl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(ee(XS),ee(AV,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),tD=(()=>{class n{constructor(t){this._subject=new Ye,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function DJ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(DV(NV(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+pl(i))}normalize(t){return n.stripTrailingSlash(function SJ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,NV(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pl(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=pl;static#t=this.joinWithSlash=eD;static#n=this.stripTrailingSlash=DV;static#i=this.\u0275fac=function(i){return new(i||n)(ee(Qu))};static#r=this.\u0275prov=ye({token:n,factory:function(){return function CJ(){return new tD(ee(Qu))}()},providedIn:"root"})}return n})();function NV(n){return n.replace(/\/index.html$/,"")}var Bi=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Bi||{}),qt=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(qt||{}),As=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(As||{}),fi=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(fi||{});function Xb(n,e){return no(kr(n)[Cn.DateFormat],e)}function eE(n,e){return no(kr(n)[Cn.TimeFormat],e)}function tE(n,e){return no(kr(n)[Cn.DateTimeFormat],e)}function to(n,e){const t=kr(n),i=t[Cn.NumberSymbols][e];if(typeof i>"u"){if(e===fi.CurrencyDecimal)return t[Cn.NumberSymbols][fi.Decimal];if(e===fi.CurrencyGroup)return t[Cn.NumberSymbols][fi.Group]}return i}function OV(n){if(!n[Cn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Cn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function no(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function rD(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const BJ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zm={},UJ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var gl=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(gl||{}),Yt=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Yt||{}),Qt=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Qt||{});function sD(n,e,t,i){let r=function ZJ(n){if(FV(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return nE(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(BJ))return function YJ(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,l=Number(n[6]||0),u=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,l,u),e}(i)}const e=new Date(n);if(!FV(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=ml(t,e)||e;let a,o=[];for(;e;){if(a=UJ.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const h=o.pop();if(!h)break;e=h}}let l=r.getTimezoneOffset();i&&(l=kV(i,l),r=function KJ(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function qJ(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(kV(e,r)-r))}(r,i,!0));let u="";return o.forEach(h=>{const g=function WJ(n){if(aD[n])return aD[n];let e;switch(n){case"G":case"GG":case"GGG":e=Sn(Qt.Eras,qt.Abbreviated);break;case"GGGG":e=Sn(Qt.Eras,qt.Wide);break;case"GGGGG":e=Sn(Qt.Eras,qt.Narrow);break;case"y":e=vi(Yt.FullYear,1,0,!1,!0);break;case"yy":e=vi(Yt.FullYear,2,0,!0,!0);break;case"yyy":e=vi(Yt.FullYear,3,0,!1,!0);break;case"yyyy":e=vi(Yt.FullYear,4,0,!1,!0);break;case"Y":e=oE(1);break;case"YY":e=oE(2,!0);break;case"YYY":e=oE(3);break;case"YYYY":e=oE(4);break;case"M":case"L":e=vi(Yt.Month,1,1);break;case"MM":case"LL":e=vi(Yt.Month,2,1);break;case"MMM":e=Sn(Qt.Months,qt.Abbreviated);break;case"MMMM":e=Sn(Qt.Months,qt.Wide);break;case"MMMMM":e=Sn(Qt.Months,qt.Narrow);break;case"LLL":e=Sn(Qt.Months,qt.Abbreviated,Bi.Standalone);break;case"LLLL":e=Sn(Qt.Months,qt.Wide,Bi.Standalone);break;case"LLLLL":e=Sn(Qt.Months,qt.Narrow,Bi.Standalone);break;case"w":e=oD(1);break;case"ww":e=oD(2);break;case"W":e=oD(1,!0);break;case"d":e=vi(Yt.Date,1);break;case"dd":e=vi(Yt.Date,2);break;case"c":case"cc":e=vi(Yt.Day,1);break;case"ccc":e=Sn(Qt.Days,qt.Abbreviated,Bi.Standalone);break;case"cccc":e=Sn(Qt.Days,qt.Wide,Bi.Standalone);break;case"ccccc":e=Sn(Qt.Days,qt.Narrow,Bi.Standalone);break;case"cccccc":e=Sn(Qt.Days,qt.Short,Bi.Standalone);break;case"E":case"EE":case"EEE":e=Sn(Qt.Days,qt.Abbreviated);break;case"EEEE":e=Sn(Qt.Days,qt.Wide);break;case"EEEEE":e=Sn(Qt.Days,qt.Narrow);break;case"EEEEEE":e=Sn(Qt.Days,qt.Short);break;case"a":case"aa":case"aaa":e=Sn(Qt.DayPeriods,qt.Abbreviated);break;case"aaaa":e=Sn(Qt.DayPeriods,qt.Wide);break;case"aaaaa":e=Sn(Qt.DayPeriods,qt.Narrow);break;case"b":case"bb":case"bbb":e=Sn(Qt.DayPeriods,qt.Abbreviated,Bi.Standalone,!0);break;case"bbbb":e=Sn(Qt.DayPeriods,qt.Wide,Bi.Standalone,!0);break;case"bbbbb":e=Sn(Qt.DayPeriods,qt.Narrow,Bi.Standalone,!0);break;case"B":case"BB":case"BBB":e=Sn(Qt.DayPeriods,qt.Abbreviated,Bi.Format,!0);break;case"BBBB":e=Sn(Qt.DayPeriods,qt.Wide,Bi.Format,!0);break;case"BBBBB":e=Sn(Qt.DayPeriods,qt.Narrow,Bi.Format,!0);break;case"h":e=vi(Yt.Hours,1,-12);break;case"hh":e=vi(Yt.Hours,2,-12);break;case"H":e=vi(Yt.Hours,1);break;case"HH":e=vi(Yt.Hours,2);break;case"m":e=vi(Yt.Minutes,1);break;case"mm":e=vi(Yt.Minutes,2);break;case"s":e=vi(Yt.Seconds,1);break;case"ss":e=vi(Yt.Seconds,2);break;case"S":e=vi(Yt.FractionalSeconds,1);break;case"SS":e=vi(Yt.FractionalSeconds,2);break;case"SSS":e=vi(Yt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=rE(gl.Short);break;case"ZZZZZ":e=rE(gl.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=rE(gl.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=rE(gl.Long);break;default:return null}return aD[n]=e,e}(h);u+=g?g(r,t,l):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function nE(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function ml(n,e){const t=function RJ(n){return kr(n)[Cn.LocaleId]}(n);if(Zm[t]=Zm[t]||{},Zm[t][e])return Zm[t][e];let i="";switch(e){case"shortDate":i=Xb(n,As.Short);break;case"mediumDate":i=Xb(n,As.Medium);break;case"longDate":i=Xb(n,As.Long);break;case"fullDate":i=Xb(n,As.Full);break;case"shortTime":i=eE(n,As.Short);break;case"mediumTime":i=eE(n,As.Medium);break;case"longTime":i=eE(n,As.Long);break;case"fullTime":i=eE(n,As.Full);break;case"short":const r=ml(n,"shortTime"),s=ml(n,"shortDate");i=iE(tE(n,As.Short),[r,s]);break;case"medium":const o=ml(n,"mediumTime"),a=ml(n,"mediumDate");i=iE(tE(n,As.Medium),[o,a]);break;case"long":const l=ml(n,"longTime"),u=ml(n,"longDate");i=iE(tE(n,As.Long),[l,u]);break;case"full":const h=ml(n,"fullTime"),g=ml(n,"fullDate");i=iE(tE(n,As.Full),[h,g])}return i&&(Zm[t][e]=i),i}function iE(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function Oo(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function vi(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function HJ(n,e){switch(n){case Yt.FullYear:return e.getFullYear();case Yt.Month:return e.getMonth();case Yt.Date:return e.getDate();case Yt.Hours:return e.getHours();case Yt.Minutes:return e.getMinutes();case Yt.Seconds:return e.getSeconds();case Yt.FractionalSeconds:return e.getMilliseconds();case Yt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===Yt.Hours)0===a&&-12===t&&(a=12);else if(n===Yt.FractionalSeconds)return function jJ(n,e){return Oo(n,3).substring(0,e)}(a,e);const l=to(o,fi.MinusSign);return Oo(a,e,l,i,r)}}function Sn(n,e,t=Bi.Format,i=!1){return function(r,s){return function $J(n,e,t,i,r,s){switch(t){case Qt.Months:return function nD(n,e,t){const i=kr(n),s=no([i[Cn.MonthsFormat],i[Cn.MonthsStandalone]],e);return no(s,t)}(e,r,i)[n.getMonth()];case Qt.Days:return function PV(n,e,t){const i=kr(n),s=no([i[Cn.DaysFormat],i[Cn.DaysStandalone]],e);return no(s,t)}(e,r,i)[n.getDay()];case Qt.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const u=function MJ(n){const e=kr(n);return OV(e),(e[Cn.ExtraData][2]||[]).map(i=>"string"==typeof i?rD(i):[rD(i[0]),rD(i[1])])}(e),h=function kJ(n,e,t){const i=kr(n);OV(i);const s=no([i[Cn.ExtraData][0],i[Cn.ExtraData][1]],e)||[];return no(s,t)||[]}(e,r,i),g=u.findIndex(m=>{if(Array.isArray(m)){const[v,w]=m,S=o>=v.hours&&a>=v.minutes,D=o<w.hours||o===w.hours&&a<w.minutes;if(v.hours<w.hours){if(S&&D)return!0}else if(S||D)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(-1!==g)return h[g]}return function NJ(n,e,t){const i=kr(n),s=no([i[Cn.DayPeriodsFormat],i[Cn.DayPeriodsStandalone]],e);return no(s,t)}(e,r,i)[o<12?0:1];case Qt.Eras:return function xJ(n,e){return no(kr(n)[Cn.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function rE(n){return function(e,t,i){const r=-1*i,s=to(t,fi.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case gl.Short:return(r>=0?"+":"")+Oo(o,2,s)+Oo(Math.abs(r%60),2,s);case gl.ShortGMT:return"GMT"+(r>=0?"+":"")+Oo(o,1,s);case gl.Long:return"GMT"+(r>=0?"+":"")+Oo(o,2,s)+":"+Oo(Math.abs(r%60),2,s);case gl.Extended:return 0===i?"Z":(r>=0?"+":"")+Oo(o,2,s)+":"+Oo(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const GJ=0,sE=4;function MV(n){return nE(n.getFullYear(),n.getMonth(),n.getDate()+(sE-n.getDay()))}function oD(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=MV(t),o=function zJ(n){const e=nE(n,GJ,1).getDay();return nE(n,0,1+(e<=sE?sE:sE+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return Oo(r,n,to(i,fi.MinusSign))}}function oE(n,e=!1){return function(t,i){return Oo(MV(t).getFullYear(),n,to(i,fi.MinusSign),e)}}const aD={};function kV(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function FV(n){return n instanceof Date&&!isNaN(n.valueOf())}const fD=/\s+/,UV=[];let jV=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=UV,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(fD):UV}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(fD):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(fD).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(V(Yb),V(Km),V(en),V(Is))};static#t=this.\u0275dir=De({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class uX{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _l=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new uX(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),$V(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{$V(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(V(Xs),V(Yn),V(Yb))};static#t=this.\u0275dir=De({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function $V(n,e){n.context.$implicit=e.item}let yl=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new dX,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){GV("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){GV("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(V(Xs),V(Yn))};static#t=this.\u0275dir=De({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class dX{constructor(){this.$implicit=null,this.ngIf=null}}function GV(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${X(e)}'.`)}let Ju=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(V(Xs))};static#t=this.\u0275dir=De({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[vn]})}return n})(),yD=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})();function lE(n){return"server"===n}let jX=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new HX(ee(xi),window)})}return n})();class HX{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $X(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class fee extends EJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ED extends fee{static makeCurrent(){!function bJ(n){JS||(JS=n)}(new ED)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function pee(){return Jm=Jm||document.querySelector("base"),Jm?Jm.getAttribute("href"):null}();return null==t?null:function gee(n){dE=dE||document.createElement("a"),dE.setAttribute("href",n);const e=dE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Jm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function lX(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let dE,Jm=null,_ee=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const wD=new Se("EventManagerPlugins");let JV=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new ae(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(ee(wD),ee(vt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();class XV{constructor(e){this._doc=e}}const TD="ng-app-id";let eB=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=lE(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${TD}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(TD),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(TD,this.appId),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(ee(xi),ee(fb),ee(hk,8),ee(Do))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const ID={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},CD=/%COMP%/g,Eee=new Se("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function nB(n,e){return e.map(t=>t.replace(CD,n))}let iB=(()=>{class n{constructor(t,i,r,s,o,a,l,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=lE(a),this.defaultRenderer=new SD(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Nr.ShadowDom&&(i={...i,encapsulation:Nr.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof sB?r.applyToHost(t):r instanceof DD&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case Nr.Emulated:s=new sB(l,u,i,this.appId,h,o,a,g);break;case Nr.ShadowDom:return new Cee(l,u,t,i,o,a,this.nonce,g);default:s=new DD(l,u,i,h,o,a,g)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(ee(JV),ee(eB),ee(fb),ee(Eee),ee(xi),ee(Do),ee(vt),ee(hk))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();class SD{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ID[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(rB(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(rB(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ae(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=ID[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=ID[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(c.DashCase|c.Important)?e.style.setProperty(t,i,r&c.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&c.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=mc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function rB(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Cee extends SD{constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=nB(r.id,r.styles);for(const h of u){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class DD extends SD{constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?nB(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class sB extends DD{constructor(e,t,i,r,s,o,a,l){const u=r+"-"+i.id;super(e,t,i,s,o,a,l,u),this.contentAttr=function wee(n){return"_ngcontent-%COMP%".replace(CD,n)}(u),this.hostAttr=function Tee(n){return"_nghost-%COMP%".replace(CD,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let See=(()=>{class n extends XV{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(ee(xi))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const oB=["alt","control","meta","shift"],Dee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Aee={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ree=(()=>{class n extends XV{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),oB.forEach(u=>{const h=i.indexOf(u);h>-1&&(i.splice(h,1),o+=u+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=Dee[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),oB.forEach(o=>{o!==r&&(0,Aee[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(ee(xi))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const lB=[{provide:Do,useValue:"browser"},{provide:dk,useValue:function Nee(){ED.makeCurrent()},multi:!0},{provide:xi,useFactory:function Pee(){return function b9(n){f1=n}(document),document},deps:[]}],Oee=eV(oJ,"browser",lB),Mee=new Se(""),cB=[{provide:Wb,useClass:class mee{addToWindow(e){pn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new ae(5103,!1);return s},pn.getAllAngularTestabilities=()=>e.getAllTestabilities(),pn.getAllAngularRootElements=()=>e.getAllRootElements(),pn.frameworkStabilizers||(pn.frameworkStabilizers=[]),pn.frameworkStabilizers.push(i=>{const r=pn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?mc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:Z2,useClass:US,deps:[vt,jS,Wb]},{provide:US,useClass:US,deps:[vt,jS,Wb]}],uB=[{provide:w1,useValue:"root"},{provide:dl,useFactory:function xee(){return new dl},deps:[]},{provide:wD,useClass:See,multi:!0,deps:[xi,vt,Do]},{provide:wD,useClass:Ree,multi:!0,deps:[xi]},iB,eB,JV,{provide:F1,useExisting:iB},{provide:class GX{},useClass:_ee,deps:[]},[]];let kee=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:fb,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(ee(Mee,12))};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({providers:[...uB,...cB],imports:[yD,aJ]})}return n})(),dB=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(ee(xi))};static#t=this.\u0275prov=ye({token:n,factory:function(i){let r=null;return r=i?new i:function Lee(){return new dB(ee(xi))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;class RD extends I{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class $ee extends I{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function ND(n,e,t,i,r=new $ee(n,t,i)){if(!r.closed)return e instanceof ze?e.subscribe(r):pr(e)(r)}const gB={};function xD(...n){let e,t;return Ti(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&xe(n[0])&&(n=n[0]),Jt(n,t).lift(new Gee(e))}class Gee{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new zee(e,this.resultSelector))}}class zee extends RD{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(gB),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(ND(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===gB?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const hE=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function fE(...n){return function Wee(){return oe(1)}()(Re(...n))}const yc=new ze(n=>n.complete());function pE(n){return n?function qee(n){return new ze(e=>n.schedule(()=>e.complete()))}(n):yc}function mB(n){return new ze(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?k(t):pE()).subscribe(e)})}function Mf(n,e){return new ze(e?t=>e.schedule(Kee,0,{error:n,subscriber:t}):t=>t.error(n))}function Kee({error:n,subscriber:e}){e.error(n)}const _B=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function vr(n){return e=>0===n?pE():e.lift(new Zee(n))}class Zee{constructor(e){if(this.total=e,this.total<0)throw new _B}call(e,t){return t.subscribe(new Yee(e,this.total))}}class Yee extends I{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function Xm(...n){const e=n[n.length-1];return Ti(e)?(n.pop(),t=>fE(n,t,e)):t=>fE(n,t)}function bi(n,e){return function(i){return i.lift(new Qee(n,e))}}class Qee{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Jee(e,this.predicate,this.thisArg))}}class Jee extends I{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function gE(n=null){return e=>e.lift(new Xee(n))}class Xee{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ete(e,this.defaultValue))}}class ete extends I{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function yB(n=ite){return e=>e.lift(new tte(n))}class tte{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new nte(e,this.errorFactory))}}class nte extends I{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function ite(){return new hE}function vc(n,e){const t=arguments.length>=2;return i=>i.pipe(n?bi((r,s)=>n(r,s,i)):Me,vr(1),t?gE(e):yB(()=>new hE))}function e_(n,e){return Je(n,e,1)}function bc(){}function Ei(n,e,t){return function(r){return r.lift(new rte(n,e,t))}}class rte{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new ste(e,this.nextOrObserver,this.error,this.complete))}}class ste extends I{constructor(e,t,i,r){super(e),this._tapNext=bc,this._tapError=bc,this._tapComplete=bc,this._tapError=i||bc,this._tapComplete=r||bc,N(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||bc,this._tapError=t.error||bc,this._tapComplete=t.complete||bc)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function kf(n){return function(t){const i=new ote(n),r=t.lift(i);return i.caught=r}}class ote{constructor(e){this.selector=e}call(e,t){return t.subscribe(new ate(e,this.selector,this.caught))}}class ate extends le{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new H(this);this.add(i);const r=ve(t,i);r!==i&&this.add(r)}}}function Ff(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new lte(n,e,t))}}class lte{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new cte(e,this.accumulator,this.seed,this.hasSeed))}}class cte extends I{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function PD(n){return function(t){return 0===n?pE():t.lift(new ute(n))}}class ute{constructor(e){if(this.total=e,this.total<0)throw new _B}call(e,t){return t.subscribe(new dte(e,this.total))}}class dte extends I{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<i;s++){const o=t++%i;e.next(r[o])}}e.complete()}}class pte{constructor(e){this.value=e}call(e,t){return t.subscribe(new gte(e,this.value))}}class gte extends I{constructor(e,t){super(e),this.value=t}_next(e){this.destination.next(this.value)}}function OD(n){return e=>e.lift(new mte(n))}class mte{constructor(e){this.callback=e}call(e,t){return t.subscribe(new _te(e,this.callback))}}class _te extends I{constructor(e,t){super(e),this.add(new M(t))}}function si(n){return e=>e.lift(new yte(n))}class yte{constructor(e){this.notifier=e}call(e,t){const i=new vte(e),r=ve(this.notifier,new H(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class vte extends le{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const wt="primary",t_=Symbol("RouteTitle");class bte{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lf(n){return new bte(n)}function Ete(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function _a(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!vB(n[r],e[r]))return!1;return!0}function vB(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function bB(n){return n.length>0?n[n.length-1]:null}function Ec(n){return function Hee(n){return!!n&&(n instanceof ze||"function"==typeof n.lift&&"function"==typeof n.subscribe)}(n)?n:km(n)?k(Promise.resolve(n)):Re(n)}const Tte={exact:function TB(n,e,t){if(!Xu(n.segments,e.segments)||!mE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!TB(n.children[i],e.children[i],t))return!1;return!0},subset:IB},EB={exact:function Ite(n,e){return _a(n,e)},subset:function Cte(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vB(n[t],e[t]))},ignored:()=>!0};function wB(n,e,t){return Tte[t.paths](n.root,e.root,t.matrixParams)&&EB[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function IB(n,e,t){return CB(n,e,e.segments,t)}function CB(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Xu(r,t)||e.hasChildren()||!mE(r,t,i))}if(n.segments.length===t.length){if(!Xu(n.segments,t)||!mE(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!IB(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Xu(n.segments,r)&&mE(n.segments,r,i)&&n.children[wt])&&CB(n.children[wt],e,s,i)}}function mE(n,e,t){return e.every((i,r)=>EB[t](n[r].parameters,i.parameters))}class Vf{constructor(e=new un([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lf(this.queryParams)),this._queryParamMap}toString(){return Ate.serialize(this)}}class un{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _E(this)}}class n_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Lf(this.parameters)),this._parameterMap}toString(){return AB(this)}}function Xu(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let i_=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return new MD},providedIn:"root"})}return n})();class MD{parse(e){const t=new Bte(e);return new Vf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${r_(e.root,!0)}`,i=function xte(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${yE(t)}=${yE(r)}`).join("&"):`${yE(t)}=${yE(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function Rte(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const Ate=new MD;function _E(n){return n.segments.map(e=>AB(e)).join("/")}function r_(n,e){if(!n.hasChildren())return _E(n);if(e){const t=n.children[wt]?r_(n.children[wt],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==wt&&i.push(`${r}:${r_(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Dte(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===wt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==wt&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===wt?[r_(n.children[wt],!1)]:[`${r}:${r_(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[wt]?`${_E(n)}/${t[0]}`:`${_E(n)}/(${t.join("//")})`}}function SB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yE(n){return SB(n).replace(/%3B/gi,";")}function kD(n){return SB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vE(n){return decodeURIComponent(n)}function DB(n){return vE(n.replace(/\+/g,"%20"))}function AB(n){return`${kD(n.path)}${function Nte(n){return Object.keys(n).map(e=>`;${kD(e)}=${kD(n[e])}`).join("")}(n.parameters)}`}const Pte=/^[^\/()?;#]+/;function FD(n){const e=n.match(Pte);return e?e[0]:""}const Ote=/^[^\/()?;=#]+/,kte=/^[^=?&#]+/,Lte=/^[^&#]+/;class Bte{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[wt]=new un(e,t)),i}parseSegment(){const e=FD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ae(4009,!1);return this.capture(e),new n_(vE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Mte(n){const e=n.match(Ote);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=FD(this.remaining);r&&(i=r,this.capture(i))}e[vE(t)]=vE(i)}parseQueryParam(e){const t=function Fte(n){const e=n.match(kte);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Vte(n){const e=n.match(Lte);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=DB(t),s=DB(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=FD(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ae(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=wt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[wt]:new un([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ae(4011,!1)}}function RB(n){return n.segments.length>0?new un([],{[wt]:n}):n}function NB(n){const e={};for(const i of Object.keys(n.children)){const s=NB(n.children[i]);if(i===wt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Ute(n){if(1===n.numberOfChildren&&n.children[wt]){const e=n.children[wt];return new un(n.segments.concat(e.segments),e.children)}return n}(new un(n.segments,e))}function ed(n){return n instanceof Vf}function xB(n){let e;const r=RB(function t(s){const o={};for(const l of s.children){const u=t(l);o[l.outlet]=u}const a=new un(s.url,o);return s===n&&(e=a),a}(n.root));return e??r}function PB(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return LD(r,r,r,t,i);const s=function Hte(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new MB(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]="string"==typeof u?u.split("/"):u}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new MB(t,e,i)}(e);if(s.toRoot())return LD(r,r,new un([],{}),t,i);const o=function $te(n,e,t){if(n.isAbsolute)return new EE(e,!0,0);if(!t)return new EE(e,!1,NaN);if(null===t.parent)return new EE(t,!0,0);const i=bE(n.commands[0])?0:1;return function Gte(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ae(4005,!1);r=i.segments.length}return new EE(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?o_(o.segmentGroup,o.index,s.commands):kB(o.segmentGroup,o.index,s.commands);return LD(r,o.segmentGroup,a,t,i)}function bE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function s_(n){return"object"==typeof n&&null!=n&&n.outlets}function LD(n,e,t,i,r){let o,s={};i&&Object.entries(i).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`}),o=n===e?t:OB(n,e,t);const a=RB(NB(o));return new Vf(a,s,r)}function OB(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:OB(s,e,t)}),new un(n.segments,i)}class MB{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&bE(i[0]))throw new ae(4003,!1);const r=i.find(s_);if(r&&r!==bB(i))throw new ae(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class EE{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function kB(n,e,t){if(n||(n=new un([],{})),0===n.segments.length&&n.hasChildren())return o_(n,e,t);const i=function Wte(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(s_(a))break;const l=`${a}`,u=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!LB(l,u,o))return s;i+=2}else{if(!LB(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new un(n.segments.slice(0,i.pathIndex),{});return s.children[wt]=new un(n.segments.slice(i.pathIndex),n.children),o_(s,0,r)}return i.match&&0===r.length?new un(n.segments,{}):i.match&&!n.hasChildren()?VD(n,e,t):i.match?o_(n,0,r):VD(n,e,t)}function o_(n,e,t){if(0===t.length)return new un(n.segments,{});{const i=function zte(n){return s_(n[0])?n[0].outlets:{[wt]:n}}(t),r={};if(Object.keys(i).some(s=>s!==wt)&&n.children[wt]&&1===n.numberOfChildren&&0===n.children[wt].segments.length){const s=o_(n.children[wt],e,t);return new un(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=kB(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new un(n.segments,r)}}function VD(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(s_(s)){const l=qte(s.outlets);return new un(i,l)}if(0===r&&bE(t[0])){i.push(new n_(n.segments[e].path,FB(t[0]))),r++;continue}const o=s_(s)?s.outlets[wt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&bE(a)?(i.push(new n_(o,FB(a))),r+=2):(i.push(new n_(o,{})),r++)}return new un(i,{})}function qte(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=VD(new un([],{}),0,i))}),e}function FB(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function LB(n,e,t){return n==t.path&&_a(e,t.parameters)}const a_="imperative";class ya{constructor(e,t){this.id=e,this.url=t}}class wE extends ya{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wc extends ya{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class l_ extends ya{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bf extends ya{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class TE extends ya{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class VB extends ya{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kte extends ya{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zte extends ya{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yte extends ya{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qte extends ya{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jte{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xte{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ene{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tne{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nne{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ine{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BB{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class BD{}class UD{constructor(e){this.url=e}}class rne{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new c_,this.attachRef=null}}let c_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new rne,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class UB{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jD(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=jD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=HD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return HD(e,this._root).map(t=>t.value)}}function jD(n,e){if(n===e.value)return e;for(const t of e.children){const i=jD(n,t);if(i)return i}return null}function HD(n,e){if(n===e.value)return[e];for(const t of e.children){const i=HD(n,t);if(i.length)return i.unshift(e),i}return[]}class vl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Uf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class jB extends UB{constructor(e,t){super(e),this.snapshot=t,$D(this,e)}toString(){return this.snapshot.toString()}}function HB(n,e){const t=function sne(n,e){const o=new IE([],{},{},"",{},wt,e,null,{});return new GB("",new vl(o,[]))}(0,e),i=new an([new n_("",{})]),r=new an({}),s=new an({}),o=new an({}),a=new an(""),l=new jf(i,r,o,a,s,wt,e,t.root);return l.snapshot=t.root,new jB(new vl(l,[]),t)}class jf{constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ue(u=>u[t_]))??Re(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ue(e=>Lf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ue(e=>Lf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $B(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function one(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class IE{get title(){return this.data?.[t_]}constructor(e,t,i,r,s,o,a,l,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class GB extends UB{constructor(e,t){super(t),this.url=e,$D(this,t)}toString(){return zB(this._root)}}function $D(n,e){e.value._routerState=n,e.children.forEach(t=>$D(n,t))}function zB(n){const e=n.children.length>0?` { ${n.children.map(zB).join(", ")} } `:"";return`${n.value}${e}`}function GD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_a(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),_a(e.params,t.params)||n.paramsSubject.next(t.params),function wte(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_a(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),_a(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function zD(n,e){const t=_a(n.params,e.params)&&function Ste(n,e){return Xu(n,e)&&n.every((t,i)=>_a(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zD(n.parent,e.parent))}let WB=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=wt,this.activateEvents=new Ye,this.deactivateEvents=new Ye,this.attachEvents=new Ye,this.detachEvents=new Ye,this.parentContexts=Ne(c_),this.location=Ne(Xs),this.changeDetector=Ne(eo),this.environmentInjector=Ne(ss),this.inputBinder=Ne(CE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ae(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ae(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ae(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ae(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new ane(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=De({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vn]})}return n})();class ane{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===jf?this.route:e===c_?this.childContexts:this.parent.get(e,t)}}const CE=new Se("");let qB=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=xD([i.queryParams,i.params,i.data]).pipe($t(([s,o,a],l)=>(a={...s,...o,...a},0===l?Re(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=function vJ(n){const e=pt(n);if(!e)return null;const t=new Rm(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function u_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function cne(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return u_(n,i,r);return u_(n,i)})}(n,e,t);return new vl(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>u_(n,a)),o}}const i=function une(n){return new jf(new an(n.url),new an(n.params),new an(n.queryParams),new an(n.fragment),new an(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>u_(n,s));return new vl(i,r)}}const WD="ngNavigationCancelingError";function KB(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=ed(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=ZB(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function ZB(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[WD]=!0,i.cancellationCode=e,t&&(i.url=t),i}function YB(n){return n&&n[WD]}let QB=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=mr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ss],decls:1,vars:0,template:function(i,r){1&i&&os(0,"router-outlet")},dependencies:[WB],encapsulation:2})}return n})();function qD(n){const e=n.children&&n.children.map(qD),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==wt&&(t.component=QB),t}function ko(n){return n.outlet||wt}function d_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yne{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),GD(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Uf(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Uf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Uf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Uf(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new ine(s.value.snapshot))}),e.children.length&&this.forwardEvent(new tne(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(GD(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),GD(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=d_(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class JB{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class SE{constructor(e,t){this.component=e,this.route=t}}function vne(n,e,t){const i=n._root;return h_(i,e?e._root:null,t,[i.value])}function Hf(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function WO(n){return null!==Fi(n)}(n)?e.get(n):n:i}function h_(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Uf(e);return n.children.forEach(o=>{(function Ene(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function wne(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Xu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Xu(n.url,e.url)||!_a(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zD(n,e)||!_a(n.queryParams,e.queryParams);default:return!zD(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new JB(i)):(s.data=o.data,s._resolvedData=o._resolvedData),h_(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new SE(a.outlet.component,o))}else o&&f_(e,a,r),r.canActivateChecks.push(new JB(i)),h_(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>f_(a,t.getContext(o),r)),r}function f_(n,e,t){const i=Uf(n),r=n.value;Object.entries(i).forEach(([s,o])=>{f_(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new SE(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function p_(n){return"function"==typeof n}function XB(n){return n instanceof hE||"EmptyError"===n?.name}const DE=Symbol("INITIAL_VALUE");function $f(){return $t(n=>xD(n.map(e=>e.pipe(vr(1),Xm(DE)))).pipe(Ue(e=>{for(const t of e)if(!0!==t){if(t===DE)return DE;if(!1===t||t instanceof Vf)return t}return!0}),bi(e=>e!==DE),vr(1)))}function eU(n){return function nt(...n){return yt(n)}(Ei(e=>{if(ed(e))throw KB(0,e)}),Ue(e=>!0===e))}class AE{constructor(e){this.segmentGroup=e||null}}class tU{constructor(e){this.urlTree=e}}function Gf(n){return Mf(new AE(n))}function nU(n){return Mf(new tU(n))}class Hne{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new ae(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Re(i);if(r.numberOfChildren>1||!r.children[wt])return Mf(new ae(4e3,!1));r=r.children[wt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Vf(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new un(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new ae(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const KD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $ne(n,e,t,i,r){const s=ZD(n,e,t);return s.matched?(i=function hne(n,e){return n.providers&&!n._injector&&(n._injector=ES(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function Bne(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Re(r.map(o=>{const a=Hf(o,n);return Ec(function Ane(n){return n&&p_(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe($f(),eU()):Re(!0)}(i,e,t).pipe(Ue(o=>!0===o?s:{...KD}))):Re(s)}function ZD(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...KD}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Ete)(t,n,e);if(!r)return{...KD};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function iU(n,e,t,i){return t.length>0&&function Wne(n,e,t){return t.some(i=>RE(n,e,i)&&ko(i)!==wt)}(n,t,i)?{segmentGroup:new un(e,zne(i,new un(t,n.children))),slicedSegments:[]}:0===t.length&&function qne(n,e,t){return t.some(i=>RE(n,e,i))}(n,t,i)?{segmentGroup:new un(n.segments,Gne(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new un(n.segments,n.children),slicedSegments:t}}function Gne(n,e,t,i,r){const s={};for(const o of i)if(RE(n,t,o)&&!r[ko(o)]){const a=new un([],{});s[ko(o)]=a}return{...r,...s}}function zne(n,e){const t={};t[wt]=e;for(const i of n)if(""===i.path&&ko(i)!==wt){const r=new un([],{});t[ko(i)]=r}return t}function RE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Qne{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Hne(this.urlSerializer,this.urlTree)}noMatchError(e){return new ae(4002,!1)}recognize(){const e=iU(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,wt).pipe(kf(t=>{if(t instanceof tU)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof AE?this.noMatchError(t):t}),Ue(t=>{const i=new IE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},wt,this.rootComponentType,null,{}),r=new vl(i,t),s=new GB("",r),o=function jte(n,e,t=null,i=null){return PB(xB(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,wt).pipe(kf(i=>{throw i instanceof AE?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=$B(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return k(r).pipe(e_(s=>{const o=i.children[s],a=function mne(n,e){const t=n.filter(i=>ko(i)===e);return t.push(...n.filter(i=>ko(i)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Ff((s,o)=>(s.push(...o),s)),gE(null),function hte(n,e){const t=arguments.length>=2;return i=>i.pipe(n?bi((r,s)=>n(r,s,i)):Me,PD(1),t?gE(e):yB(()=>new hE))}(),Je(s=>{if(null===s)return Gf(i);const o=rU(s);return function Jne(n){n.sort((e,t)=>e.value.outlet===wt?-1:t.value.outlet===wt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),Re(o)}))}processSegment(e,t,i,r,s,o){return k(t).pipe(e_(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(kf(l=>{if(l instanceof AE)return Re(null);throw l}))),vc(a=>!!a),kf(a=>{if(XB(a))return function Zne(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?Re([]):Gf(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return function Kne(n,e,t,i){return!!(ko(n)===i||i!==wt&&RE(e,t,n))&&("**"===n.path||ZD(e,n,t).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):Gf(r):Gf(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?nU(s):this.applyRedirects.lineralizeSegments(i,s).pipe(Je(o=>{const a=new un(o,{});return this.processSegment(e,t,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:u,positionalParamSegments:h}=ZD(t,r,s);if(!a)return Gf(t);const g=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?nU(g):this.applyRedirects.lineralizeSegments(r,g).pipe(Je(m=>this.processSegment(e,i,t,m.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a;if("**"===i.path){const l=r.length>0?bB(r).parameters:{};a=Re({snapshot:new IE(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sU(i),ko(i),i.component??i._loadedComponent??null,i,oU(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=$ne(t,i,r,e).pipe(Ue(({matched:l,consumedSegments:u,remainingSegments:h,parameters:g})=>l?{snapshot:new IE(u,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sU(i),ko(i),i.component??i._loadedComponent??null,i,oU(i)),consumedSegments:u,remainingSegments:h}:null));return a.pipe($t(l=>null===l?Gf(t):this.getChildConfig(e=i._injector??e,i,r).pipe($t(({routes:u})=>{const h=i._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:v}=l,{segmentGroup:w,slicedSegments:S}=iU(t,m,v,u);if(0===S.length&&w.hasChildren())return this.processChildren(h,u,w).pipe(Ue(L=>null===L?null:[new vl(g,L)]));if(0===u.length&&0===S.length)return Re([new vl(g,[])]);const D=ko(i)===s;return this.processSegment(h,u,w,S,D?wt:s,!0).pipe(Ue(L=>[new vl(g,L)]))}))))}getChildConfig(e,t,i){return t.children?Re({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Re({routes:t._loadedRoutes,injector:t._loadedInjector}):function Vne(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Re(!0):Re(r.map(o=>{const a=Hf(o,n);return Ec(function Ine(n){return n&&p_(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe($f(),eU())}(e,t,i).pipe(Je(r=>r?this.configLoader.loadChildren(e,t).pipe(Ei(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function jne(n){return Mf(ZB(!1,3))}())):Re({routes:[],injector:e})}}function Xne(n){const e=n.value.routeConfig;return e&&""===e.path}function rU(n){const e=[],t=new Set;for(const i of n){if(!Xne(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=rU(i.children);e.push(new vl(i.value,r))}return e.filter(i=>!t.has(i))}function sU(n){return n.data||{}}function oU(n){return n.resolve||{}}function aU(n){return"string"==typeof n.title||null===n.title}function YD(n){return $t(e=>{const t=n(e);return t?k(t).pipe(Ue(()=>e)):Re(e)})}const zf=new Se("ROUTES");let QD=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ne(z2)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Re(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Ec(t.loadComponent()).pipe(Ue(lU),Ei(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),OD(()=>{this.componentLoaders.delete(t)})),r=new Kr(i,()=>new at).pipe(Ii());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Re({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function oie(n,e,t,i){return Ec(n.loadChildren()).pipe(Ue(lU),Je(r=>r instanceof e2||Array.isArray(r)?Re(r):k(e.compileModuleAsync(r))),Ue(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get(zf,[],{optional:!0,self:!0}).flat()),{routes:o.map(qD),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(OD(()=>{this.childrenLoaders.delete(i)})),o=new Kr(s,()=>new at).pipe(Ii());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lU(n){return function aie(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let NE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new at,this.transitionAbortSubject=new at,this.configLoader=Ne(QD),this.environmentInjector=Ne(ss),this.urlSerializer=Ne(i_),this.rootContexts=Ne(c_),this.inputBindingEnabled=null!==Ne(CE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Re(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Xte(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Jte(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new an({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:a_,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(bi(s=>0!==s.id),Ue(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),$t(s=>{this.currentTransition=s;let o=!1,a=!1;return Re(s).pipe(Ei(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$t(l=>{const u=l.currentBrowserUrl.toString(),h=!t.navigated||l.extractedUrl.toString()!==u||u!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const m="";return this.events.next(new Bf(l.id,this.urlSerializer.serialize(l.rawUrl),m,0)),l.resolve(null),yc}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Re(l).pipe($t(m=>{const v=this.transitions?.getValue();return this.events.next(new wE(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),v!==this.transitions?.getValue()?yc:Promise.resolve(m)}),function eie(n,e,t,i,r,s){return Je(o=>function Yne(n,e,t,i,r,s,o="emptyOnly"){return new Qne(n,e,t,i,r,o,s).recognize()}(n,e,t,i,o.extractedUrl,r,s).pipe(Ue(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ei(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const v=new VB(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:m,extractedUrl:v,source:w,restoredState:S,extras:D}=l,L=new wE(m,this.urlSerializer.serialize(v),w,S);this.events.next(L);const x=HB(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:x,urlAfterRedirects:v,extras:{...D,skipLocationChange:!1,replaceUrl:!1}},Re(s)}{const m="";return this.events.next(new Bf(l.id,this.urlSerializer.serialize(l.extractedUrl),m,1)),l.resolve(null),yc}}),Ei(l=>{const u=new Kte(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Ue(l=>(this.currentTransition=s={...l,guards:vne(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Nne(n,e){return Je(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Re({...t,guardsResult:!0}):function xne(n,e,t,i){return k(n).pipe(Je(r=>function Lne(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Re(s.map(a=>{const l=d_(e)??r,u=Hf(a,l);return Ec(function Dne(n){return n&&p_(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,i):l.runInContext(()=>u(n,e,t,i))).pipe(vc())})).pipe($f()):Re(!0)}(r.component,r.route,t,e,i)),vc(r=>!0!==r,!0))}(o,i,r,n).pipe(Je(a=>a&&function Tne(n){return"boolean"==typeof n}(a)?function Pne(n,e,t,i){return k(e).pipe(e_(r=>fE(function Mne(n,e){return null!==n&&e&&e(new ene(n)),Re(!0)}(r.route.parent,i),function One(n,e){return null!==n&&e&&e(new nne(n)),Re(!0)}(r.route,i),function Fne(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function bne(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>mB(()=>Re(o.guards.map(l=>{const u=d_(o.node)??t,h=Hf(l,u);return Ec(function Sne(n){return n&&p_(n.canActivateChild)}(h)?h.canActivateChild(i,n):u.runInContext(()=>h(i,n))).pipe(vc())})).pipe($f())));return Re(s).pipe($f())}(n,r.path,t),function kne(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Re(!0);const r=i.map(s=>mB(()=>{const o=d_(e)??t,a=Hf(s,o);return Ec(function Cne(n){return n&&p_(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(vc())}));return Re(r).pipe($f())}(n,r.route,t))),vc(r=>!0!==r,!0))}(i,s,n,e):Re(a)),Ue(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Ei(l=>{if(s.guardsResult=l.guardsResult,ed(l.guardsResult))throw KB(0,l.guardsResult);const u=new Zte(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),bi(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),YD(l=>{if(l.guards.canActivateChecks.length)return Re(l).pipe(Ei(u=>{const h=new Yte(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),$t(u=>{let h=!1;return Re(u).pipe(function tie(n,e){return Je(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Re(t);let s=0;return k(r).pipe(e_(o=>function nie(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!aU(r)&&(s[t_]=r.title),function iie(n,e,t,i){const r=function rie(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Re({});const s={};return k(r).pipe(Je(o=>function sie(n,e,t,i){const r=d_(e)??i,s=Hf(n,r);return Ec(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(vc(),Ei(a=>{s[o]=a}))),PD(1),function fte(n){return e=>e.lift(new pte(n))}(s),kf(o=>XB(o)?yc:Mf(o)))}(s,n,e,i).pipe(Ue(o=>(n._resolvedData=o,n.data=$B(n,t).resolve,r&&aU(r)&&(n.data[t_]=r.title),null)))}(o.route,i,n,e)),Ei(()=>s++),PD(1),Je(o=>s===r.length?Re(t):yc))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ei({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",2)}}))}),Ei(u=>{const h=new Qte(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),YD(l=>{const u=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ei(m=>{h.component=m}),Ue(()=>{})));for(const m of h.children)g.push(...u(m));return g};return xD(u(l.targetSnapshot.root)).pipe(gE(),vr(1))}),YD(()=>this.afterPreactivation()),Ue(l=>{const u=function lne(n,e,t){const i=u_(n,e._root,t?t._root:void 0);return new jB(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:u},s}),Ei(()=>{this.events.next(new BD)}),((n,e,t,i)=>Ue(r=>(new yne(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),vr(1),Ei({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new wc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),si(this.transitionAbortSubject.pipe(Ei(l=>{throw l}))),OD(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),kf(l=>{if(a=!0,YB(l))this.events.next(new l_(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function dne(n){return YB(n)&&ed(n.url)}(l)?this.events.next(new UD(l.url)):s.resolve(!1);else{this.events.next(new TE(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(u){s.reject(u)}}return yc}))}))}cancelNavigationTransition(t,i,r){const s=new l_(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cU(n){return n!==a_}let uU=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===wt);return i}getResolvedTitleForRoute(t){return t.data[t_]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return Ne(lie)},providedIn:"root"})}return n})(),lie=(()=>{class n extends uU{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(ee(dB))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return Ne(die)},providedIn:"root"})}return n})();class uie{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let die=(()=>{class n extends uie{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Mn(n)))(r||n)}}();static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xE=new Se("",{providedIn:"root",factory:()=>({})});let hie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return Ne(fie)},providedIn:"root"})}return n})(),fie=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(g_||{});function dU(n,e){n.events.pipe(bi(t=>t instanceof wc||t instanceof l_||t instanceof TE||t instanceof Bf),Ue(t=>t instanceof wc||t instanceof Bf?g_.COMPLETE:t instanceof l_&&(0===t.code||1===t.code)?g_.REDIRECTING:g_.FAILED),bi(t=>t!==g_.REDIRECTING),vr(1)).subscribe(()=>{e()})}function pie(n){throw n}function gie(n,e,t){return e.parse("/")}const mie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_ie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let io=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ne($2),this.isNgZoneEnabled=!1,this._events=new at,this.options=Ne(xE,{optional:!0})||{},this.pendingTasks=Ne(G2),this.errorHandler=this.options.errorHandler||pie,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||gie,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ne(hie),this.routeReuseStrategy=Ne(cie),this.titleStrategy=Ne(uU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ne(zf,{optional:!0})?.flat()??[],this.navigationTransitions=Ne(NE),this.urlSerializer=Ne(i_),this.location=Ne(tD),this.componentInputBindingEnabled=!!Ne(CE,{optional:!0}),this.eventsSubscription=new M,this.isNgZoneEnabled=Ne(vt)instanceof vt&&vt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Vf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=HB(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(hU(i)&&this._events.next(i));if(i instanceof wE)cU(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof Bf)this.rawUrlTree=r.rawUrl;else if(i instanceof VB){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof BD)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof l_)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof UD){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cU(r.source)};this.scheduleNavigation(s,a_,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof TE&&this.restoreHistory(r,!0),i instanceof wc&&(this.navigated=!0),hU(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),a_,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(qD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:o;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=xB(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),g=this.currentUrlTree.root}return PB(g,t,h,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=ed(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,a_,null,i)}navigate(t,i={skipLocationChange:!1}){return function yie(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ae(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...mie}:!1===i?{..._ie}:i,ed(t))return wB(this.currentUrlTree,t,r);const s=this.parseUrl(t);return wB(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((g,m)=>{a=g,l=m});const h=this.pendingTasks.add();return dU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(g=>Promise.reject(g))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hU(n){return!(n instanceof BD||n instanceof UD)}class fU{}let Eie=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(bi(t=>t instanceof wc),e_(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=ES(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return k(r).pipe(oe())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Re(null);const s=r.pipe(Je(o=>null===o?Re(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?k([s,this.loader.loadComponent(i)]).pipe(oe()):s})}static#e=this.\u0275fac=function(i){return new(i||n)(ee(io),ee(z2),ee(ss),ee(fU),ee(QD))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const XD=new Se("");let pU=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Bf&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof BB&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new BB(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){!function $k(){throw new Error("invalid")}()};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function bl(n,e){return{\u0275kind:n,\u0275providers:e}}function mU(){const n=Ne(ir);return e=>{const t=n.get(gc);if(e!==t.components[0])return;const i=n.get(io),r=n.get(_U);1===n.get(eA)&&i.initialNavigation(),n.get(yU,null,St.Optional)?.setUpPreloading(),n.get(XD,null,St.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const _U=new Se("",{factory:()=>new at}),eA=new Se("",{providedIn:"root",factory:()=>1}),yU=new Se("");function Cie(n){return bl(0,[{provide:yU,useExisting:Eie},{provide:fU,useExisting:n}])}const vU=new Se("ROUTER_FORROOT_GUARD"),Die=[tD,{provide:i_,useClass:MD},io,c_,{provide:jf,useFactory:function gU(n){return n.routerState.root},deps:[io]},QD,[]];function Aie(){return new J2("Router",io)}let bU=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[Die,[],{provide:zf,multi:!0,useValue:t},{provide:vU,useFactory:Pie,deps:[[io,new oc,new Wh]]},{provide:xE,useValue:i||{}},i?.useHash?{provide:Qu,useClass:IJ}:{provide:Qu,useClass:RV},{provide:XD,useFactory:()=>{const n=Ne(jX),e=Ne(vt),t=Ne(xE),i=Ne(NE),r=Ne(i_);return t.scrollOffset&&n.setOffset(t.scrollOffset),new pU(r,i,n,e,t)}},i?.preloadingStrategy?Cie(i.preloadingStrategy).\u0275providers:[],{provide:J2,multi:!0,useFactory:Aie},i?.initialNavigation?Oie(i):[],i?.bindToComponentInputs?bl(8,[qB,{provide:CE,useExisting:qB}]).\u0275providers:[],[{provide:EU,useFactory:mU},{provide:GS,multi:!0,useExisting:EU}]]}}static forChild(t){return{ngModule:n,providers:[{provide:zf,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(ee(vU,8))};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})();function Pie(n){return"guarded"}function Oie(n){return["disabled"===n.initialNavigation?bl(3,[{provide:FS,multi:!0,useFactory:()=>{const e=Ne(io);return()=>{e.setUpLocationChangeListener()}}},{provide:eA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?bl(2,[{provide:eA,useValue:0},{provide:FS,multi:!0,deps:[ir],useFactory:e=>{const t=e.get(wJ,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(io),s=e.get(_U);dU(r,()=>{i(!0)}),e.get(NE).afterPreactivation=()=>(i(!0),s.closed?Re(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const EU=new Se(""),kie=[];let Fie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({imports:[bU.forRoot(kie),bU]})}return n})();class wU{constructor(e){this.key="",this.players=[],this.turnTimeInSeconds=60,this.totalGameTimeInMinutes=null,this.totalTurnTimeInMinutes=null,this.playerCount=2,this.startTime=null,this.endTime=null,this.inProgress=!1,e?(this.key=e.key,this.code=e.code,this.turnTimeInSeconds=e.turnTimeInSeconds,this.totalGameTimeInMinutes=e.totalGameTimeInMinutes??null,this.totalTurnTimeInMinutes=e.totalTurnTimeInMinutes??null,this.playerCount=e.playerCount,this.inProgress=e.inProgress,this.startTime=e.startTime??null,this.endTime=e.endTime??null,this.players=e.players):this.code=Math.random().toString(36).slice(2,7).toString().toUpperCase()}addPlayer(){const e=new Lie(this.getNextPlayerNumber());return e.totalTurnTimeRemainingInSeconds=60*(this.totalTurnTimeInMinutes??0),e.turnTimeInSeconds=this.turnTimeInSeconds,this.players.push(e),e}findPlayer(e){return this.players.find(t=>t.number===e)}getNextPlayerNumber(){return(Math.max(0,...this.players.map(e=>+e.number))+1).toString()}}class Lie{constructor(e){this.number="",this.name="",this.color="",this.turnTimeInSeconds=null,this.totalTurnTimeRemainingInSeconds=null,this.myTurn=!1,this.number=e,this.color="#"+((1<<24)*Math.random()|0).toString(16).padStart(6,"0")}}var cs=st(534);(0,cs.registerVersion)("firebase","10.7.1","app");class Uie extends M{constructor(e,t){super()}schedule(e,t=0){return this}}class OE extends Uie{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let TU=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class Fo extends TU{constructor(e,t=TU.now){super(e,()=>Fo.delegate&&Fo.delegate!==this?Fo.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return Fo.delegate&&Fo.delegate!==this?Fo.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const IU=new class Hie extends Fo{}(class jie extends OE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}),$ie=IU,ME=new Fo(OE),tA=ME;class us{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return Re(this.value);case"E":return Mf(this.error);case"C":return pE()}throw new Error("unexpected notification kind value")}static createNext(e){return typeof e<"u"?new us("N",e):us.undefinedValueNotification}static createError(e){return new us("E",void 0,e)}static createComplete(){return us.completeNotification}}function Wf(n,e=0){return function(i){return i.lift(new zie(n,e))}}us.completeNotification=new us("C"),us.undefinedValueNotification=new us("N",void 0);class zie{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new kE(e,this.scheduler,this.delay))}}class kE extends I{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(kE.dispatch,this.delay,new Wie(e,this.destination)))}_next(e){this.scheduleMessage(us.createNext(e))}_error(e){this.scheduleMessage(us.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(us.createComplete()),this.unsubscribe()}}class Wie{constructor(e,t){this.notification=e,this.destination=t}}let qie=1;const Kie=Promise.resolve(),FE={};function CU(n){return n in FE&&(delete FE[n],!0)}const SU={setImmediate(n){const e=qie++;return FE[e]=!0,Kie.then(()=>CU(e)&&n()),e},clearImmediate(n){CU(n)}},nA=new class Yie extends Fo{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class Zie extends OE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=SU.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(SU.clearImmediate(t),e.scheduled=void 0)}});function iA(n){return!xe(n)&&n-parseFloat(n)+1>=0}class LE extends ze{constructor(e,t=0,i=nA){super(),this.source=e,this.delayTime=t,this.scheduler=i,(!iA(t)||t<0)&&(this.delayTime=0),(!i||"function"!=typeof i.schedule)&&(this.scheduler=nA)}static create(e,t=0,i=nA){return new LE(e,t,i)}static dispatch(e){const{source:t,subscriber:i}=e;return this.add(t.subscribe(i))}_subscribe(e){return this.scheduler.schedule(LE.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function VE(n,e=0){return function(i){return i.lift(new Qie(n,e))}}class Qie{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new LE(t,this.delay,this.scheduler).subscribe(e)}}const m_=new hf("ANGULARFIRE2_VERSION");class BE{constructor(){return((n,e)=>{const t=(0,cs.getApps)(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i})(Xie)}}const Xie="app-check";function qf(){}class AU{zone;delegate;constructor(e,t=IU){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{e.apply(this,[o])})},t,i)}}class ere{zone;task=null;constructor(e){this.zone=e}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qf,{},qf,qf)),t.pipe(Ei({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let UE=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new AU(Zone.current)),this.insideAngular=t.run(()=>new AU(Zone.current,ME)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(ee(vt))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kf(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function RU(n){return n.pipe(Wf(Kf().outsideAngular))}function pi(n){return function nre(n){return function(t){return(t=t.lift(new ere(n.ngZone))).pipe(VE(n.outsideAngular),Wf(n.insideAngular))}}(Kf())(n)}var ro=st(106);ro.Z.registerVersion("firebase","10.7.1","app-compat");const ore=["ngOnDestroy"];class NU{constructor(e){return e}}const Zf=new Se("angularfire2.app.options"),Yf=new Se("angularfire2.app.name");function __(n,e,t){const r="object"==typeof t&&t||{};r.name=r.name||"string"==typeof t&&t||"[DEFAULT]";const o=ro.Z.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>ro.Z.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;cre("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new NU(o)}const cre=(n,...e)=>{},ure={provide:NU,useFactory:__,deps:[Zf,vt,[new oc,Yf]]};let dre=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:Zf,useValue:t},{provide:Yf,useValue:i}]}}constructor(t){ro.Z.registerVersion("angularfire",m_.full,"core"),ro.Z.registerVersion("angularfire",m_.full,"app-compat"),ro.Z.registerVersion("angular",yk.full,t.toString())}static \u0275fac=function(i){return new(i||n)(ee(Do))};static \u0275mod=Pt({type:n});static \u0275inj=Ct({providers:[ure]})}return n})();function jE(n,e,t,i,r){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function hre(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(r,o)||(xU("error",`${e} was already initialized on the ${t} Firebase App with different settings.${fre?" You may need to reload as Firebase is not HMR aware.":""}`),xU("warn",{is:r,was:o})),s;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}const fre=typeof module<"u"&&!!module.hot,xU=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],st(980);class pre extends at{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new gre(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let o;if(this.closed)throw new ct;if(this.isStopped||this.hasError?o=M.EMPTY:(this.observers.push(e),o=new ot(this,e)),r&&e.add(e=new kE(e,r)),t)for(let a=0;a<s&&!e.closed;a++)e.next(i[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(i[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||$ie).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(e-r[o].time<i);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&r.splice(0,o),r}}class gre{constructor(e,t){this.time=e,this.value=t}}function PU(n,e,t){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},r=>r.lift(function mre({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:i}){let r,o,s=0,a=!1,l=!1;return function(h){let g;s++,!r||a?(a=!1,r=new pre(n,e,i),g=r.subscribe(this),o=h.subscribe({next(m){r.next(m)},error(m){a=!0,r.error(m)},complete(){l=!0,o=void 0,r.complete()}}),l&&(o=void 0)):g=r.subscribe(this),this.add(()=>{s--,g.unsubscribe(),g=void 0,o&&!l&&t&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}function OU(n,e){return e?$t(()=>n,e):$t(()=>n)}const rA=new Se("angularfire2.auth.use-emulator"),sA=new Se("angularfire2.auth.settings"),oA=new Se("angularfire2.auth.tenant-id"),aA=new Se("angularfire2.auth.langugage-code"),lA=new Se("angularfire2.auth.use-device-language"),cA=new Se("angularfire.auth.persistence"),uA=(n,e,t,i,r,s,o,a)=>jE(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(const[u,h]of Object.entries(o))l.settings[u]=h;return a&&l.setPersistence(a),l},[t,i,r,s,o,a]);let dA=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,s,o,a,l,u,h,g,m,v){const w=new at,S=Re(void 0).pipe(Wf(o.outsideAngular),$t(()=>s.runOutsideAngular(()=>Promise.resolve().then(st.bind(st,980)))),Ue(()=>__(t,s,i)),Ue(D=>uA(D,s,a,u,h,g,l,m)),PU({bufferSize:1,refCount:!1}));if(lE(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Re(null);else{S.pipe(vc()).subscribe();const D=S.pipe($t(U=>U.getRedirectResult().then(z=>z,()=>null)),pi,PU({bufferSize:1,refCount:!1})),L=S.pipe($t(U=>new ze(z=>({unsubscribe:s.runOutsideAngular(()=>U.onAuthStateChanged(se=>z.next(se),se=>z.error(se),()=>z.complete()))})))),x=S.pipe($t(U=>new ze(z=>({unsubscribe:s.runOutsideAngular(()=>U.onIdTokenChanged(se=>z.next(se),se=>z.error(se),()=>z.complete()))}))));this.authState=D.pipe(OU(L),VE(o.outsideAngular),Wf(o.insideAngular)),this.user=D.pipe(OU(x),VE(o.outsideAngular),Wf(o.insideAngular)),this.idToken=this.user.pipe($t(U=>U?k(U.getIdToken()):Re(null))),this.idTokenResult=this.user.pipe($t(U=>U?k(U.getIdTokenResult()):Re(null))),this.credential=yn(D,w,this.authState.pipe(bi(U=>!U))).pipe(Ue(U=>U?.user?U:null),VE(o.outsideAngular),Wf(o.insideAngular))}return((n,e,t,i={})=>new Proxy(n,{get:(r,s)=>t.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(ore.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(u=>t.run(()=>u)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,u)=>o.then(h=>{const g=h?.(...u);return i?.spy?.apply&&i.spy.apply(s,u,g),g})})})}))(this,S,s,{spy:{apply:(D,L,x)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&x.then(U=>w.next(U))}}})}static \u0275fac=function(i){return new(i||n)(ee(Zf),ee(Yf,8),ee(Do),ee(vt),ee(UE),ee(rA,8),ee(sA,8),ee(oA,8),ee(aA,8),ee(lA,8),ee(cA,8),ee(BE,8))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function HE(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new yre(n,t))}}class yre{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new vre(e,this.observables,this.project))}}class vre extends RD{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let s=0;s<r;s++)this.toRespond.push(s);for(let s=0;s<r;s++)this.add(ND(this,t[s],void 0,s))}notifyNext(e,t,i){this.values[i]=t;const r=this.toRespond;if(r.length>0){const s=r.indexOf(i);-1!==s&&r.splice(s,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class Ere{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new wre(e,this.predicate))}}class wre extends I{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=!!t}catch(t){this.destination.error(t)}}}var Lo=st(537),ie=st(861),C=st(58),Rs=st(879);const MU="@firebase/database";let hA="";function fA(n){hA=n}class Tre{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,C.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,C.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Ire{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,C.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const FU=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Tre(e)}}catch{}return new Ire},nd=FU("localStorage"),pA=FU("sessionStorage"),Qf=new Rs.Yd("@firebase/database"),LU=function(){let n=1;return function(){return n++}}(),VU=function(n){const e=(0,C.dS)(n),t=new C.gQ;t.update(e);const i=t.digest();return C.US.encodeByteArray(i)},y_=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=y_.apply(null,i):e+="object"==typeof i?(0,C.Wl)(i):i,e+=" "}return e};let id=null,BU=!0;const UU=function(n,e){(0,C.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Qf.logLevel=Rs.in.VERBOSE,id=Qf.log.bind(Qf),e&&pA.set("logging_enabled",!0)):"function"==typeof n?id=n:(id=null,pA.remove("logging_enabled"))},Ui=function(...n){if(!0===BU&&(BU=!1,null===id&&!0===pA.get("logging_enabled")&&UU(!0)),id){const e=y_.apply(null,n);id(e)}},v_=function(n){return function(...e){Ui(n,...e)}},gA=function(...n){const e="FIREBASE INTERNAL ERROR: "+y_(...n);Qf.error(e)},va=function(...n){const e=`FIREBASE FATAL ERROR: ${y_(...n)}`;throw Qf.error(e),new Error(e)},br=function(...n){const e="FIREBASE WARNING: "+y_(...n);Qf.warn(e)},$E=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Tc="[MIN_NAME]",El="[MAX_NAME]",rd=function(n,e){if(n===e)return 0;if(n===Tc||e===El)return-1;if(e===Tc||n===El)return 1;{const t=$U(n),i=$U(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},Dre=function(n,e){return n===e?0:n<e?-1:1},b_=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,C.Wl)(e))},mA=function(n){if("object"!=typeof n||null===n)return(0,C.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,C.Wl)(e[i]),t+=":",t+=mA(n[e[i]]);return t+="}",t},jU=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function ji(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const HU=function(n){(0,C.hu)(!$E(n),"Invalid JSON number");const i=1023;let r,s,o,a,l;0===n?(s=0,o=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const u=[];for(l=52;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(r?1:0),u.reverse();const h=u.join("");let g="";for(l=0;l<64;l+=8){let m=parseInt(h.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),g+=m}return g.toLowerCase()},xre=new RegExp("^-?(0*)\\d{1,10}$"),$U=function(n){if(xre.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Jf=function(n){try{n()}catch(e){setTimeout(()=>{throw br("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},E_=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class kre{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){br(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Fre{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ui("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',br(e)}}let w_=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const KU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QU="websocket",JU="long_polling";class yA{constructor(e,t,i,r,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function XU(n,e,t){let i;if((0,C.hu)("string"==typeof e,"typeof type must == string"),(0,C.hu)("object"==typeof t,"typeof params must == object"),e===QU)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==JU)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Lre(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return ji(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}class Vre{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,C.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,C.p$)(this.counters_)}}const vA={},bA={};function EA(n){const e=n.toString();return vA[e]||(vA[e]=new Vre),vA[e]}class Ure{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Jf(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ic{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=v_(e),this.stats_=EA(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),XU(t,JU,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ure(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,C.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wA((...s)=>{const[o,a,l,u,h]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&KU.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ic.forceAllow_=!0}static forceDisallow(){Ic.forceDisallow_=!0}static isAvailable(){return!((0,C.Yr)()||!Ic.forceAllow_&&(Ic.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,C.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,C.h$)(t),r=jU(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,C.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,C.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class wA{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,C.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=LU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=wA.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ui("frame writing exception"),a.stack&&Ui(a.stack),Ui(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ui("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,C.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Ui("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let zE=null;typeof MozWebSocket<"u"?zE=MozWebSocket:typeof WebSocket<"u"&&(zE=WebSocket);let Xf=(()=>{class n{constructor(t,i,r,s,o,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=v_(this.connId),this.stats_=EA(i),this.connURL=n.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){const a={v:"5"};return!(0,C.Yr)()&&typeof location<"u"&&location.hostname&&KU.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),s&&(a.ac=s),o&&(a.p=o),XU(t,QU,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nd.set("previous_websocket_failure",!0);try{let r;if((0,C.Yr)()){r={headers:{"User-Agent":`Firebase/5/${hA}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new zE(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==zE&&!n.forceDisallow_}static previouslyFailed(){return nd.isInMemoryStorage||!0===nd.get("previous_websocket_failure")}markConnectionHealthy(){nd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,C.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,C.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,C.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=jU(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),oj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ic,Xf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Xf&&Xf.isAvailable();let r=i&&!Xf.previouslyFailed();if(t.webSocketOnly&&(i||br("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Xf];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class fj{constructor(e,t,i,r,s,o,a,l,u,h){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=v_("c:"+this.id+":"),this.transportManager_=new oj(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=E_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=b_("t",e),i=b_("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=b_("t",e),i=b_("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=b_("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?gA("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gA("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&br("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),E_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):E_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class pj{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class gj{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,C.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,C.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class WE extends gj{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,C.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new WE}getInitialEvent(e){return(0,C.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class on{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Kt(){return new on("")}function Rt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Cc(n){return n.pieces_.length-n.pieceNum_}function En(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new on(n.pieces_,e)}function IA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function T_(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function yj(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new on(e,0)}function $n(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof on)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new on(t,0)}function Nt(n){return n.pieceNum_>=n.pieces_.length}function Lr(n,e){const t=Rt(n),i=Rt(e);if(null===t)return e;if(t===i)return Lr(En(n),En(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function lse(n,e){const t=T_(n,0),i=T_(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=rd(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function CA(n,e){if(Cc(n)!==Cc(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function so(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Cc(n)>Cc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class cse{constructor(e,t){this.errorPrefix_=t,this.parts_=T_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,C.ug)(this.parts_[i]);vj(this)}}function vj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+sd(n))}function sd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class SA extends gj{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new SA}getInitialEvent(e){return(0,C.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const I_=1e3;let KE,od=(()=>{class n extends pj{constructor(t,i,r,s,o,a,l,u){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=v_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=I_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!(0,C.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");SA.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&WE.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_((0,C.Wl)(o)),(0,C.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new C.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,C.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,C.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const u=l.d,h=l.s;n.warnOnListenWarnings_(u,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),"ok"!==h&&this.removeListen_(r,s),t.onComplete&&t.onComplete(h,u))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,C.r3)(t,"w")){const r=(0,C.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();br(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,C.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,C.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,C.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const o={p:t};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();const a={p:i,d:r};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,C.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):gA("Unrecognized action received from server: "+(0,C.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,C.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=I_,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=I_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=I_),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ie.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,u=null;const h=function(){u?u.close():(l=!0,s())};t.realtime_={close:h,sendRequest:function(v){(0,C.hu)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(v)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[v,w]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?Ui("getToken() completed but was canceled"):(Ui("getToken() completed. Creating connection."),t.authToken_=v&&v.accessToken,t.appCheckToken_=w&&w.token,u=new fj(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,S=>{br(S+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(v){t.log_("Failed to get token: "+v),l||(t.repoInfo_.nodeAdmin&&br(v),h())}}})()}interrupt(t){Ui("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ui("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,C.xb)(this.interruptReasons_)&&(this.reconnectDelay_=I_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(o=>mA(o)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new on(t).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Ui("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Ui("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,C.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+hA.replace(/\./g,"-")]=1,(0,C.uI)()?t["framework.cordova"]=1:(0,C.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=WE.getInstance().currentlyOnline();return(0,C.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ot{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ot(e,t)}}class qE{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Ot(Tc,e),r=new Ot(Tc,t);return 0!==this.compare(i,r)}minPost(){return Ot.MIN}}class wj extends qE{static get __EMPTY_NODE(){return KE}static set __EMPTY_NODE(e){KE=e}compare(e,t){return rd(e.name,t.name)}isDefinedOn(e){throw(0,C.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ot.MIN}maxPost(){return new Ot(El,KE)}makePost(e,t){return(0,C.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ot(e,KE)}toString(){return".key"}}const ba=new wj;class ZE{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let AA,Vo=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??ds.EMPTY_NODE,this.right=o??ds.EMPTY_NODE}copy(t,i,r,s,o){return new n(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ds.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return ds.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ds{constructor(e,t=ds.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ds(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Vo.BLACK,null,null))}remove(e){return new ds(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vo.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ZE(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ZE(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ZE(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ZE(this.root_,null,this.comparator_,!0,e)}}function _se(n,e){return rd(n.name,e.name)}function DA(n,e){return rd(n,e)}ds.EMPTY_NODE=new class mse{copy(e,t,i,r,s){return this}insert(e,t,i){return new Vo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Tj=function(n){return"number"==typeof n?"number:"+HU(n):"string:"+n},Ij=function(n){if(n.isLeafNode()){const e=n.val();(0,C.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,C.r3)(e,".sv"),"Priority must be a string or number.")}else(0,C.hu)(n===AA||n.isEmpty(),"priority of unexpected type.");(0,C.hu)(n===AA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Cj,Sj,Dj,ep=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,C.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ij(this.priorityNode_)}static set __childrenNodeConstructor(t){Cj=t}static get __childrenNodeConstructor(){return Cj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Nt(t)?this:".priority"===Rt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Rt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,C.hu)(".priority"!==r||1===Cc(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(En(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Tj(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?HU(this.value_):this.value_,this.lazyHash_=VU(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,C.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return(0,C.hu)(s>=0,"Unknown leaf type: "+i),(0,C.hu)(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Dn=new class Ese extends qE{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?rd(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ot.MIN}maxPost(){return new Ot(El,new ep("[PRIORITY-POST]",Dj))}makePost(e,t){const i=Sj(e);return new Ot(t,new ep("[PRIORITY-POST]",i))}toString(){return".priority"}},wse=Math.log(2);class Tse{constructor(e){this.count=parseInt(Math.log(e+1)/wse,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const YE=function(n,e,t,i){n.sort(e);const r=function(l,u){const h=u-l;let g,m;if(0===h)return null;if(1===h)return g=n[l],m=t?t(g):g,new Vo(m,g.node,Vo.BLACK,null,null);{const v=parseInt(h/2,10)+l,w=r(l,v),S=r(v+1,u);return g=n[v],m=t?t(g):g,new Vo(m,g.node,Vo.BLACK,w,S)}},a=function(l){let u=null,h=null,g=n.length;const m=function(w,S){const D=g-w,L=g;g-=w;const x=r(D+1,L),U=n[D],z=t?t(U):U;v(new Vo(z,U.node,S,null,x))},v=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<l.count;++w){const S=l.nextBitIsOne(),D=Math.pow(2,l.count-(w+1));S?m(D,Vo.BLACK):(m(D,Vo.BLACK),m(D,Vo.RED))}return h}(new Tse(n.length));return new ds(i||e,a)};let RA;const tp={};class wl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,C.hu)(tp&&Dn,"ChildrenNode.ts has not been loaded"),RA=RA||new wl({".priority":tp},{".priority":Dn}),RA}get(e){const t=(0,C.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ds?t:null}hasIndex(e){return(0,C.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,C.hu)(e!==ba,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Ot.Wrap);let a,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();a=r?YE(i,e.getCompare()):tp;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new wl(h,u)}addToIndexes(e,t){const i=(0,C.UI)(this.indexes_,(r,s)=>{const o=(0,C.DV)(this.indexSet_,s);if((0,C.hu)(o,"Missing index implementation for "+s),r===tp){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Ot.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),YE(a,o.getCompare())}return tp}{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new Ot(e.name,a))),l.insert(e,e.node)}});return new wl(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,C.UI)(this.indexes_,r=>{if(r===tp)return r;{const s=t.get(e.name);return s?r.remove(new Ot(e.name,s)):r}});return new wl(i,this.indexSet_)}}let C_,bt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ij(this.priorityNode_),this.children_.isEmpty()&&(0,C.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return C_||(C_=new n(new ds(DA),null,wl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||C_}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?C_:i}}getChild(t){const i=Rt(t);return null===i?this:this.getImmediateChild(i).getChild(En(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,C.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Ot(t,i);let s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?C_:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){const r=Rt(t);if(null===r)return i;{(0,C.hu)(".priority"!==Rt(t)||1===Cc(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(En(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(Dn,(a,l)=>{i[a]=l.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Tj(this.getPriority().val())+":"),this.forEachChild(Dn,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":VU(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new Ot(t,i));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Ot(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Ot(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Ot.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Ot.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===S_?-1:0}withIndex(t){if(t===ba||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===ba||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Dn),s=i.getIterator(Dn);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===ba?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const S_=new class Ise extends bt{constructor(){super(new ds(DA),bt.EMPTY_NODE,wl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return bt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ot,{MIN:{value:new Ot(Tc,bt.EMPTY_NODE)},MAX:{value:new Ot(El,S_)}}),wj.__EMPTY_NODE=bt.EMPTY_NODE,ep.__childrenNodeConstructor=bt,function yse(n){AA=n}(S_),function bse(n){Dj=n}(S_);const Cse=!0;function Jn(n,e=null){if(null===n)return bt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,C.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ep(n,Jn(e));if(n instanceof Array||!Cse){let t=bt.EMPTY_NODE;return ji(n,(i,r)=>{if((0,C.r3)(n,i)&&"."!==i.substring(0,1)){const s=Jn(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Jn(e))}{const t=[];let i=!1;if(ji(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Jn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new Ot(o,l)))}}),0===t.length)return bt.EMPTY_NODE;const s=YE(t,_se,o=>o.name,DA);if(i){const o=YE(t,Dn.getCompare());return new bt(s,Jn(e),new wl({".priority":o},{".priority":Dn}))}return new bt(s,Jn(e),wl.Default)}}!function vse(n){Sj=n}(Jn);class NA extends qE{constructor(e){super(),this.indexPath_=e,(0,C.hu)(!Nt(e)&&".priority"!==Rt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?rd(e.name,t.name):s}makePost(e,t){const i=Jn(e),r=bt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ot(t,r)}maxPost(){const e=bt.EMPTY_NODE.updateChild(this.indexPath_,S_);return new Ot(El,e)}toString(){return T_(this.indexPath_,0).join("/")}}const xA=new class Sse extends qE{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?rd(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ot.MIN}maxPost(){return Ot.MAX}makePost(e,t){const i=Jn(e);return new Ot(t,i)}toString(){return".value"}};function Aj(n){return{type:"value",snapshotNode:n}}function np(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function D_(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function A_(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class PA{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){(0,C.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(D_(t,a)):(0,C.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(np(t,i)):o.trackChildChange(A_(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Dn,(r,s)=>{t.hasChild(r)||i.trackChildChange(D_(r,s))}),t.isLeafNode()||t.forEachChild(Dn,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(A_(r,s,o))}else i.trackChildChange(np(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?bt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class R_{constructor(e){this.indexedFilter_=new PA(e.getIndex()),this.index_=e.getIndex(),this.startPost_=R_.getStartPost_(e),this.endPost_=R_.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new Ot(t,i))||(i=bt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=bt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(bt.EMPTY_NODE);const s=this;return t.forEachChild(Dn,(o,a)=>{s.matches(new Ot(o,a))||(r=r.updateImmediateChild(o,bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Ase{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new R_(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new Ot(t,i))||(i=bt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=bt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),o++}}}else{let s;r=t.withIndex(this.index_),r=r.updatePriority(bt.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){const g=this.index_.getCompare();o=(m,v)=>g(v,m)}else o=this.index_.getCompare();const a=e;(0,C.hu)(a.numChildren()===this.limit_,"");const l=new Ot(t,i),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(t)){const g=a.getImmediateChild(t);let m=r.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=r.getChildAfterChild(this.index_,m,this.reverse_);const v=null==m?1:o(m,l);if(h&&!i.isEmpty()&&v>=0)return s?.trackChildChange(A_(t,i,g)),a.updateImmediateChild(t,i);{s?.trackChildChange(D_(t,g));const S=a.updateImmediateChild(t,bt.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(np(m.name,m.node)),S.updateImmediateChild(m.name,m.node)):S}}return i.isEmpty()?e:h&&o(u,l)>=0?(null!=s&&(s.trackChildChange(D_(u.name,u.node)),s.trackChildChange(np(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(u.name,bt.EMPTY_NODE)):e}}class QE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,C.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,C.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Tc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,C.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,C.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:El}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,C.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dn}copy(){const e=new QE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function OA(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function MA(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function JE(n,e){const t=n.copy();return t.index_=e,t}function Rj(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Dn?t="$priority":n.index_===xA?t="$value":n.index_===ba?t="$key":((0,C.hu)(n.index_ instanceof NA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,C.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,C.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,C.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,C.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,C.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Nj(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Dn&&(e.i=n.index_.toString()),e}class XE extends pj{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=v_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,C.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=XE.getListenId_(e,i),a={};this.listens_[o]=a;const l=Rj(e._queryParams);this.restRequest_(s+".json",l,(u,h)=>{let g=h;if(404===u&&(g=null,u=null),null===u&&this.onDataUpdate_(s,g,!1,i),(0,C.DV)(this.listens_,o)===a){let m;m=u?401===u?"permission_denied":"rest_error:"+u:"ok",r(m,null)}})}unlisten(e,t){const i=XE.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Rj(e._queryParams),i=e._path.toString(),r=new C.BH;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,C.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,C.cI)(a.responseText)}catch{br("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&br("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class Mse{constructor(){this.rootNode_=bt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ew(){return{value:null,children:new Map}}function ip(n,e,t){if(Nt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Rt(e);n.children.has(i)||n.children.set(i,ew()),ip(n.children.get(i),e=En(e),t)}}function kA(n,e){if(Nt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Dn,(i,r)=>{ip(n,new on(i),r)}),kA(n,e)}}if(n.children.size>0){const t=Rt(e);return e=En(e),n.children.has(t)&&kA(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function FA(n,e,t){null!==n.value?t(e,n.value):function kse(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{FA(r,new on(e.toString()+"/"+i),t)})}class Fse{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ji(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class Bse{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Fse(e);const i=1e4+2e4*Math.random();E_(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;ji(e,(r,s)=>{s>0&&(0,C.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),E_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ea=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ea||{});function BA(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class tw{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ea.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Nt(this.path)){if(null!=this.affectedTree.value)return(0,C.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new on(e));return new tw(Kt(),t,this.revert)}}return(0,C.hu)(Rt(this.path)===e,"operationForChild called for unrelated child."),new tw(En(this.path),this.affectedTree,this.revert)}}class N_{constructor(e,t){this.source=e,this.path=t,this.type=Ea.LISTEN_COMPLETE}operationForChild(e){return Nt(this.path)?new N_(this.source,Kt()):new N_(this.source,En(this.path))}}class ad{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ea.OVERWRITE}operationForChild(e){return Nt(this.path)?new ad(this.source,Kt(),this.snap.getImmediateChild(e)):new ad(this.source,En(this.path),this.snap)}}class rp{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ea.MERGE}operationForChild(e){if(Nt(this.path)){const t=this.children.subtree(new on(e));return t.isEmpty()?null:t.value?new ad(this.source,Kt(),t.value):new rp(this.source,Kt(),t)}return(0,C.hu)(Rt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rp(this.source,En(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sc{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Nt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Rt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Use{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function x_(n,e,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,l)=>function $se(n,e,t){if(null==e.childName||null==t.childName)throw(0,C.g5)("Should only compare child_ events.");const i=new Ot(e.childName,e.snapshotNode),r=new Ot(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,a,l)),o.forEach(a=>{const l=function Hse(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,n.query_))})})}function nw(n,e){return{eventCache:n,serverCache:e}}function P_(n,e,t,i){return nw(new Sc(e,t,i),n.serverCache)}function Pj(n,e,t,i){return nw(n.eventCache,new Sc(e,t,i))}function iw(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ld(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let UA;class An{constructor(e,t=(()=>(UA||(UA=new ds(Dre)),UA))()){this.value=e,this.children=t}static fromObject(e){let t=new An(null);return ji(e,(i,r)=>{t=t.set(new on(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Kt(),value:this.value};if(Nt(e))return null;{const i=Rt(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(En(e),t);return null!=s?{path:$n(new on(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Nt(e))return this;{const t=Rt(e),i=this.children.get(t);return null!==i?i.subtree(En(e)):new An(null)}}set(e,t){if(Nt(e))return new An(t,this.children);{const i=Rt(e),s=(this.children.get(i)||new An(null)).set(En(e),t),o=this.children.insert(i,s);return new An(this.value,o)}}remove(e){if(Nt(e))return this.children.isEmpty()?new An(null):new An(null,this.children);{const t=Rt(e),i=this.children.get(t);if(i){const r=i.remove(En(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new An(null):new An(this.value,s)}return this}}get(e){if(Nt(e))return this.value;{const t=Rt(e),i=this.children.get(t);return i?i.get(En(e)):null}}setTree(e,t){if(Nt(e))return t;{const i=Rt(e),s=(this.children.get(i)||new An(null)).setTree(En(e),t);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new An(this.value,o)}}fold(e){return this.fold_(Kt(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_($n(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Kt(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Nt(e))return null;{const s=Rt(e),o=this.children.get(s);return o?o.findOnPath_(En(e),$n(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Kt(),t)}foreachOnPath_(e,t,i){if(Nt(e))return this;{this.value&&i(t,this.value);const r=Rt(e),s=this.children.get(r);return s?s.foreachOnPath_(En(e),$n(t,r),i):new An(null)}}foreach(e){this.foreach_(Kt(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_($n(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Bo{constructor(e){this.writeTree_=e}static empty(){return new Bo(new An(null))}}function O_(n,e,t){if(Nt(e))return new Bo(new An(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=Lr(r,e);return s=s.updateChild(o,t),new Bo(n.writeTree_.set(r,s))}{const r=new An(t),s=n.writeTree_.setTree(e,r);return new Bo(s)}}}function jA(n,e,t){let i=n;return ji(t,(r,s)=>{i=O_(i,$n(e,r),s)}),i}function Oj(n,e){if(Nt(e))return Bo.empty();{const t=n.writeTree_.setTree(e,new An(null));return new Bo(t)}}function HA(n,e){return null!=cd(n,e)}function cd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Lr(t.path,e)):null}function Mj(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Dn,(i,r)=>{e.push(new Ot(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Ot(i,r.value))}),e}function Dc(n,e){if(Nt(e))return n;{const t=cd(n,e);return new Bo(null!=t?new An(t):n.writeTree_.subtree(e))}}function $A(n){return n.writeTree_.isEmpty()}function sp(n,e){return kj(Kt(),n.writeTree_,e)}function kj(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,C.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=kj($n(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild($n(n,".priority"),i)),t}}function rw(n,e){return Uj(e,n)}function Zse(n,e){if(n.snap)return so(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&so($n(n.path,t),e))return!0;return!1}function Qse(n){return n.visible}function Fj(n,e,t){let i=Bo.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let a;if(s.snap)so(t,o)?(a=Lr(t,o),i=O_(i,a,s.snap)):so(o,t)&&(a=Lr(o,t),i=O_(i,Kt(),s.snap.getChild(a)));else{if(!s.children)throw(0,C.g5)("WriteRecord should have .snap or .children");if(so(t,o))a=Lr(t,o),i=jA(i,a,s.children);else if(so(o,t))if(a=Lr(o,t),Nt(a))i=jA(i,Kt(),s.children);else{const l=(0,C.DV)(s.children,Rt(a));if(l){const u=l.getChild(En(a));i=O_(i,Kt(),u)}}}}}return i}function Lj(n,e,t,i,r){if(i||r){const s=Dc(n.visibleWrites,e);return!r&&$A(s)?t:r||null!=t||HA(s,Kt())?sp(Fj(n.allWrites,function(u){return(u.visible||r)&&(!i||!~i.indexOf(u.writeId))&&(so(u.path,e)||so(e,u.path))},e),t||bt.EMPTY_NODE):null}{const s=cd(n.visibleWrites,e);if(null!=s)return s;{const o=Dc(n.visibleWrites,e);return $A(o)?t:null!=t||HA(o,Kt())?sp(o,t||bt.EMPTY_NODE):null}}}function sw(n,e,t,i){return Lj(n.writeTree,n.treePath,e,t,i)}function GA(n,e){return function Jse(n,e,t){let i=bt.EMPTY_NODE;const r=cd(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Dn,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=Dc(n.visibleWrites,e);return t.forEachChild(Dn,(o,a)=>{const l=sp(Dc(s,new on(o)),a);i=i.updateImmediateChild(o,l)}),Mj(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return Mj(Dc(n.visibleWrites,e)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(n.writeTree,n.treePath,e)}function Vj(n,e,t,i){return function Xse(n,e,t,i,r){(0,C.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=$n(e,t);if(HA(n.visibleWrites,s))return null;{const o=Dc(n.visibleWrites,s);return $A(o)?r.getChild(t):sp(o,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function ow(n,e){return function toe(n,e){return cd(n.visibleWrites,e)}(n.writeTree,$n(n.treePath,e))}function zA(n,e,t){return function eoe(n,e,t,i){const r=$n(e,t),s=cd(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?sp(Dc(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Bj(n,e){return Uj($n(n.treePath,e),n.writeTree)}function Uj(n,e){return{treePath:n,writeTree:e}}class soe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,C.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,C.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,A_(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,D_(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,np(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,C.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,A_(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const jj=new class ooe{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class WA{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Sc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zA(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ld(this.viewCache_),s=function roe(n,e,t,i,r,s){return function noe(n,e,t,i,r,s,o){let a;const l=Dc(n.visibleWrites,e),u=cd(l,Kt());if(null!=u)a=u;else{if(null==t)return[];a=sp(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const h=[],g=o.getCompare(),m=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let v=m.getNext();for(;v&&h.length<r;)0!==g(v,i)&&h.push(v),v=m.getNext();return h}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function Hj(n,e,t,i,r,s){const o=e.eventCache;if(null!=ow(i,t))return e;{let a,l;if(Nt(t))if((0,C.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=ld(e),g=GA(i,u instanceof bt?u:bt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),g,s)}else{const u=sw(i,ld(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=Rt(t);if(".priority"===u){(0,C.hu)(1===Cc(t),"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const g=Vj(i,t,h,l);a=null!=g?n.filter.updatePriority(h,g):o.getNode()}else{const h=En(t);let g;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const m=Vj(i,t,o.getNode(),l);g=null!=m?o.getNode().getImmediateChild(u).updateChild(h,m):o.getNode().getImmediateChild(u)}else g=zA(i,u,e.serverCache);a=null!=g?n.filter.updateChild(o.getNode(),u,g,h,r,s):o.getNode()}}return P_(e,a,o.isFullyInitialized()||Nt(t),n.filter.filtersNodes())}}function aw(n,e,t,i,r,s,o,a){const l=e.serverCache;let u;const h=o?n.filter:n.filter.getIndexedFilter();if(Nt(t))u=h.updateFullNode(l.getNode(),i,null);else if(h.filtersNodes()&&!l.isFiltered()){const v=l.getNode().updateChild(t,i);u=h.updateFullNode(l.getNode(),v,null)}else{const v=Rt(t);if(!l.isCompleteForPath(t)&&Cc(t)>1)return e;const w=En(t),D=l.getNode().getImmediateChild(v).updateChild(w,i);u=".priority"===v?h.updatePriority(l.getNode(),D):h.updateChild(l.getNode(),v,D,w,jj,null)}const g=Pj(e,u,l.isFullyInitialized()||Nt(t),h.filtersNodes());return Hj(n,g,t,r,new WA(r,g,s),a)}function qA(n,e,t,i,r,s,o){const a=e.eventCache;let l,u;const h=new WA(r,e,s);if(Nt(t))u=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=P_(e,u,!0,n.filter.filtersNodes());else{const g=Rt(t);if(".priority"===g)u=n.filter.updatePriority(e.eventCache.getNode(),i),l=P_(e,u,a.isFullyInitialized(),a.isFiltered());else{const m=En(t),v=a.getNode().getImmediateChild(g);let w;if(Nt(m))w=i;else{const S=h.getCompleteChild(g);w=null!=S?".priority"===IA(m)&&S.getChild(yj(m)).isEmpty()?S:S.updateChild(m,i):bt.EMPTY_NODE}l=v.equals(w)?e:P_(e,n.filter.updateChild(a.getNode(),g,w,m,h,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function $j(n,e){return n.eventCache.isCompleteForChild(e)}function Gj(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function KA(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,l=e;u=Nt(t)?i:new An(null).setTree(t,i);const h=e.serverCache.getNode();return u.children.inorderTraversal((g,m)=>{if(h.hasChild(g)){const w=Gj(0,e.serverCache.getNode().getImmediateChild(g),m);l=aw(n,l,new on(g),w,r,s,o,a)}}),u.children.inorderTraversal((g,m)=>{const v=!e.serverCache.isCompleteForChild(g)&&null===m.value;if(!h.hasChild(g)&&!v){const S=Gj(0,e.serverCache.getNode().getImmediateChild(g),m);l=aw(n,l,new on(g),S,r,s,o,a)}}),l}class goe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new PA(i.getIndex()),s=function Rse(n){return n.loadsAllData()?new PA(n.getIndex()):n.hasLimit()?new Ase(n):new R_(n)}(i);this.processor_=function aoe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(bt.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(bt.EMPTY_NODE,a.getNode(),null),h=new Sc(l,o.isFullyInitialized(),r.filtersNodes()),g=new Sc(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=nw(g,h),this.eventGenerator_=new Use(this.query_)}get query(){return this.query_}}function yoe(n,e){const t=ld(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Nt(e)&&!t.getImmediateChild(Rt(e)).isEmpty())?t.getChild(e):null}function zj(n){return 0===n.eventRegistrations_.length}function Wj(n,e,t){const i=[];if(t){(0,C.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(o)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function qj(n,e,t,i){e.type===Ea.MERGE&&null!==e.source.queryId&&((0,C.hu)(ld(n.viewCache_),"We should always have a full cache before handling merges"),(0,C.hu)(iw(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function coe(n,e,t,i,r){const s=new soe;let o,a;if(t.type===Ea.OVERWRITE){const u=t;u.source.fromUser?o=qA(n,e,u.path,u.snap,i,r,s):((0,C.hu)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Nt(u.path),o=aw(n,e,u.path,u.snap,i,r,a,s))}else if(t.type===Ea.MERGE){const u=t;u.source.fromUser?o=function doe(n,e,t,i,r,s,o){let a=e;return i.foreach((l,u)=>{const h=$n(t,l);$j(e,Rt(h))&&(a=qA(n,a,h,u,r,s,o))}),i.foreach((l,u)=>{const h=$n(t,l);$j(e,Rt(h))||(a=qA(n,a,h,u,r,s,o))}),a}(n,e,u.path,u.children,i,r,s):((0,C.hu)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=KA(n,e,u.path,u.children,i,r,a,s))}else if(t.type===Ea.ACK_USER_WRITE){const u=t;o=u.revert?function poe(n,e,t,i,r,s){let o;if(null!=ow(i,t))return e;{const a=new WA(i,e,r),l=e.eventCache.getNode();let u;if(Nt(t)||".priority"===Rt(t)){let h;if(e.serverCache.isFullyInitialized())h=sw(i,ld(e));else{const g=e.serverCache.getNode();(0,C.hu)(g instanceof bt,"serverChildren would be complete if leaf node"),h=GA(i,g)}u=n.filter.updateFullNode(l,h,s)}else{const h=Rt(t);let g=zA(i,h,e.serverCache);null==g&&e.serverCache.isCompleteForChild(h)&&(g=l.getImmediateChild(h)),u=null!=g?n.filter.updateChild(l,h,g,En(t),a,s):e.eventCache.getNode().hasChild(h)?n.filter.updateChild(l,h,bt.EMPTY_NODE,En(t),a,s):l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=sw(i,ld(e)),o.isLeafNode()&&(u=n.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=ow(i,Kt()),P_(e,u,o,n.filter.filtersNodes())}}(n,e,u.path,i,r,s):function hoe(n,e,t,i,r,s,o){if(null!=ow(r,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(Nt(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return aw(n,e,t,l.getNode().getChild(t),r,s,a,o);if(Nt(t)){let u=new An(null);return l.getNode().forEachChild(ba,(h,g)=>{u=u.set(new on(h),g)}),KA(n,e,t,u,r,s,a,o)}return e}{let u=new An(null);return i.foreach((h,g)=>{const m=$n(t,h);l.isCompleteForPath(m)&&(u=u.set(h,l.getNode().getChild(m)))}),KA(n,e,t,u,r,s,a,o)}}(n,e,u.path,u.affectedTree,i,r,s)}else{if(t.type!==Ea.LISTEN_COMPLETE)throw(0,C.g5)("Unknown operation type: "+t.type);o=function foe(n,e,t,i,r){const s=e.serverCache;return Hj(n,Pj(e,s.getNode(),s.isFullyInitialized()||Nt(t),s.isFiltered()),t,i,jj,r)}(n,e,t.path,i,s)}const l=s.getChanges();return function uoe(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=iw(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(Aj(iw(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,r,e,t,i);return function loe(n,e){(0,C.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,C.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,C.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Kj(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Kj(n,e,t,i){return function jse(n,e,t,i){const r=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Dse(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),x_(n,r,"child_removed",e,i,t),x_(n,r,"child_added",e,i,t),x_(n,r,"child_moved",s,i,t),x_(n,r,"child_changed",e,i,t),x_(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let lw,uw;class Zj{constructor(){this.views=new Map}}function ZA(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,C.hu)(null!=s,"SyncTree gave us an op for an invalid query."),qj(s,e,t,i)}{let s=[];for(const o of n.views.values())s=s.concat(qj(o,e,t,i));return s}}function Yj(n,e,t,i,r){const o=n.views.get(e._queryIdentifier);if(!o){let a=sw(t,r?i:null),l=!1;a?l=!0:i instanceof bt?(a=GA(t,i),l=!1):(a=bt.EMPTY_NODE,l=!1);const u=nw(new Sc(a,l,!1),new Sc(i,r,!1));return new goe(e,u)}return o}function Qj(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ac(n,e){let t=null;for(const i of n.views.values())t=t||yoe(i,e);return t}function Jj(n,e){return e._queryParams.loadsAllData()?cw(n):n.views.get(e._queryIdentifier)}function Xj(n,e){return null!=Jj(n,e)}function Rc(n){return null!=cw(n)}function cw(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Aoe=1;class eH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new An(null),this.pendingWriteTree_=function ioe(){return{visibleWrites:Bo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function YA(n,e,t,i,r){return function zse(n,e,t,i,r){(0,C.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=O_(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?op(n,new ad({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Nc(n,e,t=!1){const i=function qse(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Kse(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,C.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Zse(a,i.path)?r=!1:so(i.path,a.path)&&(s=!0)),o--}return!!r&&(s?(function Yse(n){n.visibleWrites=Fj(n.allWrites,Qse,Kt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=Oj(n.visibleWrites,i.path):ji(i.children,l=>{n.visibleWrites=Oj(n.visibleWrites,$n(i.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new An(null);return null!=i.snap?s=s.set(Kt(),!0):ji(i.children,o=>{s=s.set(new on(o),!0)}),op(n,new tw(i.path,s,t))}return[]}function M_(n,e,t){return op(n,new ad({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function dw(n,e,t,i,r=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||Xj(o,e))){const l=function Coe(n,e,t,i){const r=e._queryIdentifier,s=[];let o=[];const a=Rc(n);if("default"===r)for(const[l,u]of n.views.entries())o=o.concat(Wj(u,t,i)),zj(u)&&(n.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=n.views.get(r);l&&(o=o.concat(Wj(l,t,i)),zj(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Rc(n)&&s.push(new(function woe(){return(0,C.hu)(lw,"Reference.ts has not been loaded"),lw}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,i);(function Toe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!r){const h=-1!==u.findIndex(m=>m._queryParams.loadsAllData()),g=n.syncPointTree_.findOnPath(s,(m,v)=>Rc(v));if(h&&!g){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const v=function koe(n){return n.fold((e,t,i)=>{if(t&&Rc(t))return[cw(t)];{let r=[];return t&&(r=Qj(t)),ji(i,(s,o)=>{r=r.concat(o)}),r}})}(m);for(let w=0;w<v.length;++w){const S=v[w],D=S.query,L=rH(n,S);n.listenProvider_.startListening(F_(D),k_(n,D),L.hashFn,L.onComplete)}}}!g&&u.length>0&&!i&&(h?n.listenProvider_.stopListening(F_(e),null):u.forEach(m=>{const v=n.queryToTagMap.get(fw(m));n.listenProvider_.stopListening(F_(m),v)}))}!function Foe(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=fw(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,u)}return a}function tH(n,e,t,i){const r=JA(n,i);if(null!=r){const s=XA(r),o=s.path,a=s.queryId,l=Lr(o,e);return eR(n,o,new ad(BA(a),l,t))}return[]}function QA(n,e,t,i=!1){const r=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(m,v)=>{const w=Lr(m,r);s=s||Ac(v,w),o=o||Rc(v)});let l,a=n.syncPointTree_.get(r);a?(o=o||Rc(a),s=s||Ac(a,Kt())):(a=new Zj,n.syncPointTree_=n.syncPointTree_.set(r,a)),null!=s?l=!0:(l=!1,s=bt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((v,w)=>{const S=Ac(w,Kt());S&&(s=s.updateImmediateChild(v,S))}));const u=Xj(a,e);if(!u&&!e._queryParams.loadsAllData()){const m=fw(e);(0,C.hu)(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const v=function Loe(){return Aoe++}();n.queryToTagMap.set(m,v),n.tagToQueryMap.set(v,m)}let g=function Ioe(n,e,t,i,r,s){const o=Yj(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function voe(n,e){n.eventRegistrations_.push(e)}(o,t),function boe(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Dn,(s,o)=>{i.push(np(s,o))}),t.isFullyInitialized()&&i.push(Aj(t.getNode())),Kj(n,i,t.getNode(),e)}(o,t)}(a,e,t,rw(n.pendingWriteTree_,r),s,l);if(!u&&!o&&!i){const m=Jj(a,e);g=g.concat(function Voe(n,e,t){const i=e._path,r=k_(n,e),s=rH(n,t),o=n.listenProvider_.startListening(F_(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)(0,C.hu)(!Rc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,g)=>{if(!Nt(u)&&h&&Rc(h))return[cw(h).query];{let m=[];return h&&(m=m.concat(Qj(h).map(v=>v.query))),ji(g,(v,w)=>{m=m.concat(w)}),m}});for(let u=0;u<l.length;++u){const h=l[u];n.listenProvider_.stopListening(F_(h),k_(n,h))}}return o}(n,e,m))}return g}function hw(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const u=Ac(a,Lr(o,e));if(u)return u});return Lj(r,e,s,t,!0)}function op(n,e){return nH(e,n.syncPointTree_,null,rw(n.pendingWriteTree_,Kt()))}function nH(n,e,t,i){if(Nt(n.path))return iH(n,e,t,i);{const r=e.get(Kt());null==t&&null!=r&&(t=Ac(r,Kt()));let s=[];const o=Rt(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const u=t?t.getImmediateChild(o):null,h=Bj(i,o);s=s.concat(nH(a,l,u,h))}return r&&(s=s.concat(ZA(r,n,i,t))),s}}function iH(n,e,t,i){const r=e.get(Kt());null==t&&null!=r&&(t=Ac(r,Kt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,u=Bj(i,o),h=n.operationForChild(o);h&&(s=s.concat(iH(h,a,l,u)))}),r&&(s=s.concat(ZA(r,n,i,t))),s}function rH(n,e){const t=e.query,i=k_(n,t);return{hashFn:()=>(function moe(n){return n.viewCache_.serverCache.getNode()}(e)||bt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Poe(n,e,t){const i=JA(n,t);if(i){const r=XA(i),s=r.path,o=r.queryId,a=Lr(s,e);return eR(n,s,new N_(BA(o),a))}return[]}(n,t._path,i):function xoe(n,e){return op(n,new N_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Nre(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return dw(n,t,null,s)}}}}function k_(n,e){const t=fw(e);return n.queryToTagMap.get(t)}function fw(n){return n._path.toString()+"$"+n._queryIdentifier}function JA(n,e){return n.tagToQueryMap.get(e)}function XA(n){const e=n.indexOf("$");return(0,C.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new on(n.substr(0,e))}}function eR(n,e,t){const i=n.syncPointTree_.get(e);return(0,C.hu)(i,"Missing sync point for query tag that we're tracking"),ZA(i,t,rw(n.pendingWriteTree_,e),null)}function F_(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Doe(){return(0,C.hu)(uw,"Reference.ts has not been loaded"),uw}())(n._repo,n._path):n}class tR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new tR(t)}node(){return this.node_}}class nR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=$n(this.path_,e);return new nR(this.syncTree_,t)}node(){return hw(this.syncTree_,this.path_)}}const Boe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},sH=function(n,e,t){return n&&"object"==typeof n?((0,C.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Uoe(n[".sv"],e,t):"object"==typeof n[".sv"]?joe(n[".sv"],e):void(0,C.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Uoe=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,C.hu)(!1,"Unexpected server value: "+n)},joe=function(n,e,t){n.hasOwnProperty("increment")||(0,C.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,C.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,C.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},oH=function(n,e,t,i){return rR(e,new nR(t,n),i)},iR=function(n,e,t){return rR(n,new tR(e),t)};function rR(n,e,t){const i=n.getPriority().val(),r=sH(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=sH(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new ep(a,Jn(r)):n}{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new ep(r))),o.forEachChild(Dn,(a,l)=>{const u=rR(l,e.getImmediateChild(a),t);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}class sR{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function pw(n,e){let t=e instanceof on?e:new on(e),i=n,r=Rt(t);for(;null!==r;){const s=(0,C.DV)(i.node.children,r)||{children:{},childCount:0};i=new sR(r,i,s),t=En(t),r=Rt(t)}return i}function ud(n){return n.node.value}function oR(n,e){n.node.value=e,aR(n)}function aH(n){return n.node.childCount>0}function gw(n,e){ji(n.node.children,(t,i)=>{e(new sR(t,n,i))})}function lH(n,e,t,i){t&&!i&&e(n),gw(n,r=>{lH(r,e,!0,i)}),t&&i&&e(n)}function L_(n){return new on(null===n.parent?n.name:L_(n.parent)+"/"+n.name)}function aR(n){null!==n.parent&&function Goe(n,e,t){const i=function Hoe(n){return void 0===ud(n)&&!aH(n)}(t),r=(0,C.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,aR(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,aR(n))}(n.parent,n.name,n)}const zoe=/[\[\].#$\/\u0000-\u001F\u007F]/,Woe=/[\[\].#$\u0000-\u001F\u007F]/,lR=10485760,mw=function(n){return"string"==typeof n&&0!==n.length&&!zoe.test(n)},cH=function(n){return"string"==typeof n&&0!==n.length&&!Woe.test(n)},V_=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!$E(n)||n&&"object"==typeof n&&(0,C.r3)(n,".sv")},wa=function(n,e,t,i){i&&void 0===e||B_((0,C.gK)(n,"value"),e,t)},B_=function(n,e,t){const i=t instanceof on?new cse(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+sd(i));if("function"==typeof e)throw new Error(n+"contains a function "+sd(i)+" with contents = "+e.toString());if($E(e))throw new Error(n+"contains "+e.toString()+" "+sd(i));if("string"==typeof e&&e.length>lR/3&&(0,C.ug)(e)>lR)throw new Error(n+"contains a string greater than "+lR+" utf8 bytes "+sd(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(ji(e,(o,a)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!mw(o)))throw new Error(n+" contains an invalid key ("+o+") "+sd(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function use(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,C.ug)(e),vj(n)})(i,o),B_(n,a,i),function dse(n){const e=n.parts_.pop();n.byteLength_-=(0,C.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+sd(i)+" in addition to actual children.")}},uH=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,C.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];ji(e,(o,a)=>{const l=new on(o);if(B_(r,a,$n(t,l)),".priority"===IA(l)&&!V_(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=T_(i);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!mw(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(lse);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&so(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},cR=function(n,e,t){if(!t||void 0!==e){if($E(e))throw new Error((0,C.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!V_(e))throw new Error((0,C.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},U_=function(n,e,t,i){if(!(i&&void 0===t||mw(t)))throw new Error((0,C.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},j_=function(n,e,t,i){if(!(i&&void 0===t||cH(t)))throw new Error((0,C.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Zoe=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),j_(n,e,t,i)},oo=function(n,e){if(".info"===Rt(e))throw new Error(n+" failed = Can't modify data under /.info/")},dH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!mw(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cH(n)}(t))throw new Error((0,C.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Yoe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _w(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!CA(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function hH(n,e,t){_w(n,t),fH(n,i=>CA(i,e))}function Ns(n,e,t){_w(n,t),fH(n,i=>so(i,e)||so(e,i))}function fH(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(Qoe(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Qoe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();id&&Ui("event: "+t.toString()),Jf(i)}}}const pH="repo_interrupt",Joe=25;class Xoe{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Yoe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ew(),this.transactionQueueTree_=new sR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gH(n){const t=n.infoData_.getNode(new on(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function H_(n){return Boe({timestamp:gH(n)})}function mH(n,e,t,i,r){n.dataUpdateCount++;const s=new on(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const l=(0,C.UI)(t,u=>Jn(u));o=function Ooe(n,e,t,i){const r=JA(n,i);if(r){const s=XA(r),o=s.path,a=s.queryId,l=Lr(o,e),u=An.fromObject(t);return eR(n,o,new rp(BA(a),l,u))}return[]}(n.serverSyncTree_,s,l,r)}else{const l=Jn(t);o=tH(n.serverSyncTree_,s,l,r)}else if(i){const l=(0,C.UI)(t,u=>Jn(u));o=function Noe(n,e,t){const i=An.fromObject(t);return op(n,new rp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,l)}else{const l=Jn(t);o=M_(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=lp(n,s)),Ns(n.eventQueue_,a,o)}function _H(n,e){uR(n,"connected",e),!1===e&&function rae(n){ap(n,"onDisconnectEvents");const e=H_(n),t=ew();FA(n.onDisconnect_,Kt(),(r,s)=>{const o=oH(r,s,n.serverSyncTree_,e);ip(t,r,o)});let i=[];FA(t,Kt(),(r,s)=>{i=i.concat(M_(n.serverSyncTree_,r,s));const o=pR(n,r);lp(n,o)}),n.onDisconnect_=ew(),Ns(n.eventQueue_,Kt(),i)}(n)}function uR(n,e,t){const i=new on("/.info/"+e),r=Jn(t);n.infoData_.updateSnapshot(i,r);const s=M_(n.infoSyncTree_,i,r);Ns(n.eventQueue_,i,s)}function yw(n){return n.nextWriteId_++}function dR(n,e,t,i,r){ap(n,"set",{path:e.toString(),value:t,priority:i});const s=H_(n),o=Jn(t,i),a=hw(n.serverSyncTree_,e),l=iR(o,a,s),u=yw(n),h=YA(n.serverSyncTree_,e,l,u,!0);_w(n.eventQueue_,h),n.server_.put(e.toString(),o.val(!0),(m,v)=>{const w="ok"===m;w||br("set at "+e+" failed: "+m);const S=Nc(n.serverSyncTree_,u,!w);Ns(n.eventQueue_,e,S),xc(0,r,m,v)});const g=pR(n,e);lp(n,g),Ns(n.eventQueue_,g,[])}function sae(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&kA(n.onDisconnect_,e),xc(0,t,i,r)})}function yH(n,e,t,i){const r=Jn(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{"ok"===s&&ip(n.onDisconnect_,e,r),xc(0,i,s,o)})}function hR(n,e,t){let i;i=".info"===Rt(e._path)?dw(n.infoSyncTree_,e,t):dw(n.serverSyncTree_,e,t),hH(n.eventQueue_,e._path,i)}function vH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(pH)}function ap(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ui(t,...e)}function xc(n,e,t,i){e&&Jf(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function fR(n,e,t){return hw(n.serverSyncTree_,e,t)||bt.EMPTY_NODE}function vw(n,e=n.transactionQueueTree_){if(e||bw(n,e),ud(e)){const t=EH(n,e);(0,C.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function dae(n,e,t){const i=t.map(u=>u.currentWriteId),r=fR(n,e,i);let s=r;const o=r.hash();for(let u=0;u<t.length;u++){const h=t[u];(0,C.hu)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const g=Lr(e,h.path);s=s.updateChild(g,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,u=>{ap(n,"transaction put response",{path:l.toString(),status:u});let h=[];if("ok"===u){const g=[];for(let m=0;m<t.length;m++)t[m].status=2,h=h.concat(Nc(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&g.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();bw(n,pw(n.transactionQueueTree_,e)),vw(n,n.transactionQueueTree_),Ns(n.eventQueue_,e,h);for(let m=0;m<g.length;m++)Jf(g[m])}else{if("datastale"===u)for(let g=0;g<t.length;g++)t[g].status=3===t[g].status?4:0;else{br("transaction at "+l.toString()+" failed: "+u);for(let g=0;g<t.length;g++)t[g].status=4,t[g].abortReason=u}lp(n,e)}},o)}(n,L_(e),t)}else aH(e)&&gw(e,t=>{vw(n,t)})}function lp(n,e){const t=bH(n,e),i=L_(t);return function hae(n,e,t){if(0===e.length)return;const i=[];let r=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Lr(t,l.path);let g,h=!1;if((0,C.hu)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,g=l.abortReason,r=r.concat(Nc(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=Joe)h=!0,g="maxretry",r=r.concat(Nc(n.serverSyncTree_,l.currentWriteId,!0));else{const m=fR(n,l.path,o);l.currentInputSnapshot=m;const v=e[a].update(m.val());if(void 0!==v){B_("transaction failed: Data returned ",v,l.path);let w=Jn(v);"object"==typeof v&&null!=v&&(0,C.r3)(v,".priority")||(w=w.updatePriority(m.getPriority()));const D=l.currentWriteId,L=H_(n),x=iR(w,m,L);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=x,l.currentWriteId=yw(n),o.splice(o.indexOf(D),1),r=r.concat(YA(n.serverSyncTree_,l.path,x,l.currentWriteId,l.applyLocally)),r=r.concat(Nc(n.serverSyncTree_,D,!0))}else h=!0,g="nodata",r=r.concat(Nc(n.serverSyncTree_,l.currentWriteId,!0))}Ns(n.eventQueue_,t,r),r=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&i.push("nodata"===g?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(g),!1,null)))}bw(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)Jf(i[a]);vw(n,n.transactionQueueTree_)}(n,EH(n,t),i),i}function bH(n,e){let t,i=n.transactionQueueTree_;for(t=Rt(e);null!==t&&void 0===ud(i);)i=pw(i,t),t=Rt(e=En(e));return i}function EH(n,e){const t=[];return wH(n,e,t),t.sort((i,r)=>i.order-r.order),t}function wH(n,e,t){const i=ud(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);gw(e,r=>{wH(n,r,t)})}function bw(n,e){const t=ud(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,oR(e,t.length>0?t:void 0)}gw(e,i=>{bw(n,i)})}function pR(n,e){const t=L_(bH(n,e)),i=pw(n.transactionQueueTree_,e);return function $oe(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{gR(n,r)}),gR(n,i),lH(i,r=>{gR(n,r)}),t}function gR(n,e){const t=ud(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,C.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,C.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(Nc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?oR(e,void 0):t.length=s+1,Ns(n.eventQueue_,L_(e),r);for(let o=0;o<i.length;o++)Jf(i[o])}}const mR=function(n,e){const t=gae(n),i=t.namespace;return"firebase.com"===t.domain&&va(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&va("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&br("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new yA(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new on(t.pathString)}},gae=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof n){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let h=n.indexOf("/");-1===h&&(h=n.length);let g=n.indexOf("?");-1===g&&(g=n.length),e=n.substring(0,Math.min(h,g)),h<g&&(r=function fae(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(h,g)));const m=function pae(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):br(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,g)));u=e.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(u+1),10)):u=e.length;const v=e.slice(0,u);if("localhost"===v.toLowerCase())t="localhost";else if(v.split(".").length<=2)t=v;else{const w=e.indexOf(".");i=e.substring(0,w).toLowerCase(),t=e.substring(w+1),s=i}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},TH="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mae=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=TH.charAt(t%64),t=Math.floor(t/64);(0,C.hu)(0===t,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=TH.charAt(e[r]);return(0,C.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class IH{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,C.Wl)(this.snapshot.exportVal())}}class CH{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class _R{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,C.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class SH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new C.BH;return sae(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){oo("OnDisconnect.remove",this._path);const e=new C.BH;return yH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){oo("OnDisconnect.set",this._path),wa("OnDisconnect.set",e,this._path,!1);const t=new C.BH;return yH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){oo("OnDisconnect.setWithPriority",this._path),wa("OnDisconnect.setWithPriority",e,this._path,!1),cR("OnDisconnect.setWithPriority",t,!1);const i=new C.BH;return function oae(n,e,t,i,r){const s=Jn(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&ip(n.onDisconnect_,e,s),xc(0,r,o,a)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){oo("OnDisconnect.update",this._path),uH("OnDisconnect.update",e,this._path,!1);const t=new C.BH;return function aae(n,e,t,i){if((0,C.xb)(t))return Ui("onDisconnect().update() called with empty data.  Don't do anything."),void xc(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&ji(t,(o,a)=>{const l=Jn(a);ip(n.onDisconnect_,$n(e,o),l)}),xc(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class hs{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Nt(this._path)?null:IA(this._path)}get ref(){return new ao(this._repo,this._path)}get _queryIdentifier(){const e=Nj(this._queryParams),t=mA(e);return"{}"===t?"default":t}get _queryObject(){return Nj(this._queryParams)}isEqual(e){if(!((e=(0,C.m9)(e))instanceof hs))return!1;const t=this._repo===e._repo,i=CA(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ase(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Ew(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Pc(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ba){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Tc)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==El)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===Dn){if(null!=e&&!V_(e)||null!=t&&!V_(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,C.hu)(n.getIndex()instanceof NA||n.getIndex()===xA,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ww(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ao extends hs{constructor(e,t){super(e,t,new QE,!1)}get parent(){const e=yj(this._path);return null===e?null:new ao(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class dd{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new on(e),i=hd(this.ref,e);return new dd(this._node.getChild(t),i,Dn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new dd(r,hd(this.ref,i),Dn)))}hasChild(e){const t=new on(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function DH(n,e){return(n=(0,C.m9)(n))._checkNotDeleted("ref"),void 0!==e?hd(n._root,e):n._root}function AH(n,e){(n=(0,C.m9)(n))._checkNotDeleted("refFromURL");const t=mR(e,n._repo.repoInfo_.nodeAdmin);dH("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&va("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),DH(n,t.path.toString())}function hd(n,e){return null===Rt((n=(0,C.m9)(n))._path)?Zoe("child","path",e,!1):j_("child","path",e,!1),new ao(n._repo,$n(n._path,e))}function yR(n,e){n=(0,C.m9)(n),oo("set",n._path),wa("set",e,n._path,!1);const t=new C.BH;return dR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Eae(n,e){uH("update",e,n._path,!1);const t=new C.BH;return function iae(n,e,t,i){ap(n,"update",{path:e.toString(),value:t});let r=!0;const s=H_(n),o={};if(ji(t,(a,l)=>{r=!1,o[a]=oH($n(e,a),Jn(l),n.serverSyncTree_,s)}),r)Ui("update() called with empty data.  Don't do anything."),xc(0,i,"ok",void 0);else{const a=yw(n),l=function Roe(n,e,t,i){!function Wse(n,e,t,i){(0,C.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=jA(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=An.fromObject(t);return op(n,new rp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,o,a);_w(n.eventQueue_,l),n.server_.merge(e.toString(),t,(u,h)=>{const g="ok"===u;g||br("update at "+e+" failed: "+u);const m=Nc(n.serverSyncTree_,a,!g),v=m.length>0?lp(n,e):e;Ns(n.eventQueue_,v,m),xc(0,i,u,h)}),ji(t,u=>{const h=pR(n,$n(e,u));lp(n,h)}),Ns(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function wae(n){n=(0,C.m9)(n);const e=new _R(()=>{}),t=new $_(e);return function nae(n,e,t){const i=function Moe(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(u,h)=>{const g=Lr(u,t);i=i||Ac(h,g)});let r=n.syncPointTree_.get(t);r?i=i||Ac(r,Kt()):(r=new Zj,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,o=s?new Sc(i,!0,!1):null;return function _oe(n){return iw(n.viewCache_)}(Yj(r,e,rw(n.pendingWriteTree_,e._path),s?o.getNode():bt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=Jn(r).withIndex(e._queryParams.getIndex());let o;if(QA(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=M_(n.serverSyncTree_,e._path,s);else{const a=k_(n.serverSyncTree_,e);o=tH(n.serverSyncTree_,e._path,s,a)}return Ns(n.eventQueue_,e._path,o),dw(n.serverSyncTree_,e,t,null,!0),s},r=>(ap(n,"get for query "+(0,C.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new dd(i,new ao(n._repo,n._path),n._queryParams.getIndex()))}class $_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new IH("value",this,new dd(e.snapshotNode,new ao(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CH(this,e,t):null}matches(e){return e instanceof $_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Tw{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CH(this,e,t):null}createEvent(e,t){(0,C.hu)(null!=e.childName,"Child events should have a childName.");const i=hd(new ao(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new IH(e.type,this,new dd(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Tw&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function G_(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const l=t,u=(h,g)=>{hR(n._repo,n,a),l(h,g)};u.userCallback=t.userCallback,u.context=t.context,t=u}const o=new _R(t,s||void 0),a="value"===e?new $_(o):new Tw(e,o);return function lae(n,e,t){let i;i=".info"===Rt(e._path)?QA(n.infoSyncTree_,e,t):QA(n.serverSyncTree_,e,t),hH(n.eventQueue_,e._path,i)}(n._repo,n,a),()=>hR(n._repo,n,a)}function vR(n,e,t,i){return G_(n,"value",e,t,i)}function RH(n,e,t,i){return G_(n,"child_added",e,t,i)}function NH(n,e,t,i){return G_(n,"child_changed",e,t,i)}function xH(n,e,t,i){return G_(n,"child_moved",e,t,i)}function PH(n,e,t,i){return G_(n,"child_removed",e,t,i)}function OH(n,e,t){let i=null;const r=t?new _R(t):null;"value"===e?i=new $_(r):e&&(i=new Tw(e,r)),hR(n._repo,n,i)}class Uo{}class MH extends Uo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wa("endAt",this._value,e._path,!0);const t=MA(e._queryParams,this._value,this._key);if(ww(t),Pc(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class Iae extends Uo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wa("endBefore",this._value,e._path,!1);const t=function Ose(n,e,t){let i;return i=MA(n,e,n.index_===ba||t?t:Tc),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(ww(t),Pc(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class kH extends Uo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wa("startAt",this._value,e._path,!0);const t=OA(e._queryParams,this._value,this._key);if(ww(t),Pc(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class Dae extends Uo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wa("startAfter",this._value,e._path,!1);const t=function Pse(n,e,t){let i;return i=OA(n,e,n.index_===ba||t?t:El),i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(ww(t),Pc(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class Rae extends Uo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new hs(e._repo,e._path,function Nse(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class xae extends Uo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new hs(e._repo,e._path,function xse(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Oae extends Uo{constructor(e){super(),this._path=e}_apply(e){Ew(e,"orderByChild");const t=new on(this._path);if(Nt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new NA(t),r=JE(e._queryParams,i);return Pc(r),new hs(e._repo,e._path,r,!0)}}class kae extends Uo{_apply(e){Ew(e,"orderByKey");const t=JE(e._queryParams,ba);return Pc(t),new hs(e._repo,e._path,t,!0)}}class Lae extends Uo{_apply(e){Ew(e,"orderByPriority");const t=JE(e._queryParams,Dn);return Pc(t),new hs(e._repo,e._path,t,!0)}}class Bae extends Uo{_apply(e){Ew(e,"orderByValue");const t=JE(e._queryParams,xA);return Pc(t),new hs(e._repo,e._path,t,!0)}}class jae extends Uo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(wa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new MH(this._value,this._key)._apply(new kH(this._value,this._key)._apply(e))}}function jo(n,...e){let t=(0,C.m9)(n);for(const i of e)t=i._apply(t);return t}(function Eoe(n){(0,C.hu)(!lw,"__referenceConstructor has already been defined"),lw=n})(ao),function Soe(n){(0,C.hu)(!uw,"__referenceConstructor has already been defined"),uw=n}(ao);const bR={};function ER(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||va("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ui("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,u,o=mR(s,r),a=o.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=mR(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const h=r&&l?new w_(w_.OWNER):new Fre(n.name,n.options,e);dH("Invalid Firebase Database URL",o),Nt(o.path)||va("Database URL must point to the root of a Firebase Database (not including a child path).");const g=function Wae(n,e,t,i){let r=bR[e.name];r||(r={},bR[e.name]=r);let s=r[n.toURLString()];return s&&va("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Xoe(n,false,t,i),r[n.toURLString()]=s,s}(a,n,h,new kre(n.name,t));return new Kae(g,n)}class Kae{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function eae(n,e,t){if(n.stats_=EA(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new XE(n.repoInfo_,(i,r,s,o)=>{mH(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>_H(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,C.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new od(n.repoInfo_,e,(i,r,s,o)=>{mH(n,i,r,s,o)},i=>{_H(n,i)},i=>{!function tae(n,e){ji(e,(t,i)=>{uR(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Bre(n,e){const t=n.toString();return bA[t]||(bA[t]=e()),bA[t]}(n.repoInfo_,()=>new Bse(n.stats_,n.server_)),n.infoData_=new Mse,n.infoSyncTree_=new eH({startListening:(i,r,s,o)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=M_(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),uR(n,"connected",!1),n.serverSyncTree_=new eH({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{const u=o(a,l);Ns(n.eventQueue_,i._path,u)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ao(this._repo,Kt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function zae(n,e){const t=bR[e];(!t||t[n.key]!==n)&&va(`Database ${e}(${n.repoInfo_}) has already been deleted.`),vH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&va("Cannot call "+e+" on a deleted database.")}}function LH(){oj.IS_TRANSPORT_INITIALIZED&&br("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Zae(){LH(),Ic.forceDisallow()}function Yae(){LH(),Xf.forceDisallow(),Ic.forceAllow()}function Xae(n,e){UU(n,e)}const tle={".sv":"timestamp"};class rle{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}od.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},od.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function ele(n){fA(cs.SDK_VERSION),(0,cs._registerComponent)(new Lo.wA("database",(e,{instanceIdentifier:t})=>ER(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,cs.registerVersion)(MU,"1.0.2",n),(0,cs.registerVersion)(MU,"1.0.2","esm2017")}();const lle=new Rs.Yd("@firebase/database-compat"),BH=function(n){lle.warn("FIREBASE WARNING: "+n)};class dle{constructor(e){this._delegate=e}cancel(e){(0,C.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,C.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,C.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,C.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,C.Dv)("OnDisconnect.set",1,2,arguments.length),(0,C.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,C.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,C.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,C.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,BH("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,C.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class hle{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,C.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Oc{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,C.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,C.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,C.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,C.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,C.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),j_("DataSnapshot.child","path",e,!1),new Oc(this._database,this._delegate.child(e))}hasChild(e){return(0,C.Dv)("DataSnapshot.hasChild",1,1,arguments.length),j_("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,C.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,C.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,C.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Oc(this._database,t)))}hasChildren(){return(0,C.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,C.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,C.Dv)("DataSnapshot.ref",0,0,arguments.length),new xs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class rr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,C.Dv)("Query.on",2,4,arguments.length),(0,C.Wj)("Query.on","callback",t,!1);const o=rr.getCancelAndContextArgs_("Query.on",i,r),a=(u,h)=>{t.call(o.context,new Oc(this.database,u),h)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return vR(this._delegate,a,l),t;case"child_added":return RH(this._delegate,a,l),t;case"child_removed":return PH(this._delegate,a,l),t;case"child_changed":return NH(this._delegate,a,l),t;case"child_moved":return xH(this._delegate,a,l),t;default:throw new Error((0,C.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,C.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,C.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,C.Wj)("Query.off","callback",t,!0),(0,C.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,OH(this._delegate,e,r)}else OH(this._delegate,e)}get(){return wae(this._delegate).then(e=>new Oc(this.database,e))}once(e,t,i,r){(0,C.Dv)("Query.once",1,4,arguments.length),(0,C.Wj)("Query.once","callback",t,!0);const s=rr.getCancelAndContextArgs_("Query.once",i,r),o=new C.BH,a=(u,h)=>{const g=new Oc(this.database,u);t&&t.call(s.context,g,h),o.resolve(g)};a.userCallback=t,a.context=s.context;const l=u=>{s.cancel&&s.cancel.call(s.context,u),o.reject(u)};switch(e){case"value":vR(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":RH(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":PH(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":NH(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":xH(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,C.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,C.Dv)("Query.limitToFirst",1,1,arguments.length),new rr(this.database,jo(this._delegate,function Nae(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Rae(n)}(e)))}limitToLast(e){return(0,C.Dv)("Query.limitToLast",1,1,arguments.length),new rr(this.database,jo(this._delegate,function Pae(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new xae(n)}(e)))}orderByChild(e){return(0,C.Dv)("Query.orderByChild",1,1,arguments.length),new rr(this.database,jo(this._delegate,function Mae(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return j_("orderByChild","path",n,!1),new Oae(n)}(e)))}orderByKey(){return(0,C.Dv)("Query.orderByKey",0,0,arguments.length),new rr(this.database,jo(this._delegate,function Fae(){return new kae}()))}orderByPriority(){return(0,C.Dv)("Query.orderByPriority",0,0,arguments.length),new rr(this.database,jo(this._delegate,function Vae(){return new Lae}()))}orderByValue(){return(0,C.Dv)("Query.orderByValue",0,0,arguments.length),new rr(this.database,jo(this._delegate,function Uae(){return new Bae}()))}startAt(e=null,t){return(0,C.Dv)("Query.startAt",0,2,arguments.length),new rr(this.database,jo(this._delegate,function Sae(n=null,e){return U_("startAt","key",e,!0),new kH(n,e)}(e,t)))}startAfter(e=null,t){return(0,C.Dv)("Query.startAfter",0,2,arguments.length),new rr(this.database,jo(this._delegate,function Aae(n,e){return U_("startAfter","key",e,!0),new Dae(n,e)}(e,t)))}endAt(e=null,t){return(0,C.Dv)("Query.endAt",0,2,arguments.length),new rr(this.database,jo(this._delegate,function Tae(n,e){return U_("endAt","key",e,!0),new MH(n,e)}(e,t)))}endBefore(e=null,t){return(0,C.Dv)("Query.endBefore",0,2,arguments.length),new rr(this.database,jo(this._delegate,function Cae(n,e){return U_("endBefore","key",e,!0),new Iae(n,e)}(e,t)))}equalTo(e,t){return(0,C.Dv)("Query.equalTo",1,2,arguments.length),new rr(this.database,jo(this._delegate,function Hae(n,e){return U_("equalTo","key",e,!0),new jae(n,e)}(e,t)))}toString(){return(0,C.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,C.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,C.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof rr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,C.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,C.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,C.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new xs(this.database,new ao(this._delegate._repo,this._delegate._path))}}class xs extends rr{constructor(e,t){super(e,new hs(t._repo,t._path,new QE,!1)),this.database=e,this._delegate=t}getKey(){return(0,C.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,C.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new xs(this.database,hd(this._delegate,e))}getParent(){(0,C.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new xs(this.database,e):null}getRoot(){return(0,C.Dv)("Reference.root",0,0,arguments.length),new xs(this.database,this._delegate.root)}set(e,t){(0,C.Dv)("Reference.set",1,2,arguments.length),(0,C.Wj)("Reference.set","onComplete",t,!0);const i=yR(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,C.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,BH("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oo("Reference.update",this._delegate._path),(0,C.Wj)("Reference.update","onComplete",t,!0);const i=Eae(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,C.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,C.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function bae(n,e,t){if(oo("setWithPriority",n._path),wa("setWithPriority",e,n._path,!1),cR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new C.BH;return dR(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,C.Dv)("Reference.remove",0,1,arguments.length),(0,C.Wj)("Reference.remove","onComplete",e,!0);const t=function yae(n){return oo("remove",n._path),yR(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,C.Dv)("Reference.transaction",1,3,arguments.length),(0,C.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,C.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,C.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function sle(n,e,t){var i;if(n=(0,C.m9)(n),oo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,s=new C.BH,a=vR(n,()=>{});return function uae(n,e,t,i,r,s){ap(n,"transaction on "+e);const o={path:e,update:t,onComplete:i,status:null,order:LU(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=fR(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{B_("transaction failed: Data returned ",l,o.path),o.status=0;const u=pw(n.transactionQueueTree_,e),h=ud(u)||[];let g;h.push(o),oR(u,h),"object"==typeof l&&null!==l&&(0,C.r3)(l,".priority")?(g=(0,C.DV)(l,".priority"),(0,C.hu)(V_(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(hw(n.serverSyncTree_,e)||bt.EMPTY_NODE).getPriority().val();const m=H_(n),v=Jn(l,g),w=iR(v,a,m);o.currentOutputSnapshotRaw=v,o.currentOutputSnapshotResolved=w,o.currentWriteId=yw(n);const S=YA(n.serverSyncTree_,e,w,o.currentWriteId,o.applyLocally);Ns(n.eventQueue_,e,S),vw(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,u,h)=>{let g=null;l?s.reject(l):(g=new dd(h,new ao(n._repo,n._path),Dn),s.resolve(new rle(u,g)))},a,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new hle(s.committed,new Oc(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,C.Dv)("Reference.setPriority",1,2,arguments.length),(0,C.Wj)("Reference.setPriority","onComplete",t,!0);const i=function vae(n,e){n=(0,C.m9)(n),oo("setPriority",n._path),cR("setPriority",e,!1);const t=new C.BH;return dR(n._repo,$n(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,C.Dv)("Reference.push",0,2,arguments.length),(0,C.Wj)("Reference.push","onComplete",t,!0);const i=function _ae(n,e){n=(0,C.m9)(n),oo("push",n._path),wa("push",e,n._path,!0);const t=gH(n._repo),i=mae(t),r=hd(n,i),s=hd(n,i);let o;return o=null!=e?yR(s,e).then(()=>s):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}(this._delegate,e),r=i.then(o=>new xs(this.database,o));t&&r.then(()=>t(null),o=>t(o));const s=new xs(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return oo("Reference.onDisconnect",this._delegate._path),new dle(new SH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class z_{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Zae,forceLongPolling:Yae}}useEmulator(e,t,i={}){!function VH(n,e,t,i={}){(n=(0,C.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&va("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&va('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new w_(w_.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:(0,C.Sg)(i.mockUserToken,n.app.options.projectId);s=new w_(o)}!function Gae(n,e,t,i){n.repoInfo_=new yA(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,C.Dv)("database.ref",0,1,arguments.length),e instanceof xs){const t=AH(this._delegate,e.toString());return new xs(this,t)}{const t=DH(this._delegate,e);return new xs(this,t)}}refFromURL(e){(0,C.Dv)("database.refFromURL",1,1,arguments.length);const i=AH(this._delegate,e);return new xs(this,i)}goOffline(){return(0,C.Dv)("database.goOffline",0,0,arguments.length),function Qae(n){(n=(0,C.m9)(n))._checkNotDeleted("goOffline"),vH(n._repo)}(this._delegate)}goOnline(){return(0,C.Dv)("database.goOnline",0,0,arguments.length),function Jae(n){(n=(0,C.m9)(n))._checkNotDeleted("goOnline"),function cae(n){n.persistentConnection_&&n.persistentConnection_.resume(pH)}(n._repo)}(this._delegate)}}z_.ServerValue={TIMESTAMP:function nle(){return tle}(),increment:n=>function ile(n){return{".sv":{increment:n}}}(n)};var ple=Object.freeze({__proto__:null,initStandalone:function fle({app:n,url:e,version:t,customAuthImpl:i,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){fA(t);const a=new Lo.H0("database-standalone"),l=new Lo.zt("auth-internal",a);let u;return l.setComponent(new Lo.wA("auth-internal",()=>i,"PRIVATE")),r&&(u=new Lo.zt("app-check-internal",a),u.setComponent(new Lo.wA("app-check-internal",()=>r,"PRIVATE"))),{instance:new z_(ER(n,l,u,e,o),n),namespace:s}}});const gle=z_.ServerValue;function W_(n,e,t="on",i=ME){return new ze(r=>{let s=null;return s=n[t](e,(o,a)=>{i.schedule(()=>{r.next({snapshot:o,prevKey:a})}),"once"===t&&i.schedule(()=>r.complete())},o=>{i.schedule(()=>r.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(Ue(r=>{const{snapshot:s,prevKey:o}=r;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),js())}function UH(n){return null==n}function jH(n){return"function"==typeof n.set}function HH(n,e){return jH(e)?e:n.ref(e)}function $H(n,e){if(function _le(n){return"string"==typeof n}(n))return e.stringCase();if(jH(n))return e.firebaseCase();if(function yle(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function GH(n){return(UH(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function zH(n,e,t){return yn(...(e=GH(e)).map(r=>W_(n,r,"on",t)))}function WH(n,e){return function(i,r){return $H(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function wle(n){return function(t){return t?$H(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function qH(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function Cle(n,e){const{payload:t,prevKey:i,key:r}=e,s=qH(n,r),o=function Ile(n,e){if(UH(e))return 0;{const t=qH(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const u={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,u],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==i&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==i)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===r?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function KH(n,e,t){return function Tle(n,e,t){return W_(n,"value","once",t).pipe($t(i=>{const r=[Re(i)];return e.forEach(s=>r.push(W_(n,s,"on",t))),yn(...r).pipe(Ff(Cle,[]))}),mo())}(n,e=GH(e),t)}function ZH(n,e){return function(){return W_(n,"value","on",e)}}!function mle(n){n.INTERNAL.registerComponent(new Lo.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new z_(r,i)},"PUBLIC").setServiceProps({Reference:xs,Query:rr,Database:z_,DataSnapshot:Oc,enableLogging:Xae,INTERNAL:ple,ServerValue:gle}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.2")}(ro.Z);const Ale=new Se("angularfire2.realtimeDatabaseURL"),Rle=new Se("angularfire2.database.use-emulator");let YH=(()=>{class n{schedulers;database;constructor(t,i,r,s,o,a,l,u,h,g,m,v,w,S,D){this.schedulers=a;const L=l,x=__(t,o,i);u&&uA(x,o,h,m,v,w,g,S),this.database=jE(`${x.name}.database.${r}`,"AngularFireDatabase",x.name,()=>{const U=o.runOutsideAngular(()=>x.database(r||void 0));return L&&U.useEmulator(...L),U},[L])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>HH(this.database,t));let s=r;return i&&(s=i(r)),function Sle(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:WH(i,"update"),set:WH(i,"set"),push:r=>i.push(r),remove:wle(i),snapshotChanges:r=>KH(n,r,t).pipe(pi),stateChanges:r=>zH(n,r,t).pipe(pi),auditTrail:r=>function vle(n,e,t){return function Ele(n,e,t){return function ble(n,e){return W_(n,"value","on",e).pipe(Ue(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(HE(e),Ue(([r,s])=>{const o=r.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function bre(n){return e=>e.lift(new Ere(n))}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),Ue(r=>r.actions))}(n,zH(n,e).pipe(Ff((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(pi),valueChanges:(r,s)=>KH(n,r,t).pipe(Ue(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),pi)}}(s,this)}object(t){return function Dle(n,e){return{query:n,snapshotChanges:()=>ZH(n,e.schedulers.outsideAngular)().pipe(pi),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ZH(n,e.schedulers.outsideAngular)().pipe(pi,Ue(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>HH(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||n)(ee(Zf),ee(Yf,8),ee(Ale,8),ee(Do),ee(vt),ee(UE),ee(Rle,8),ee(dA,8),ee(rA,8),ee(sA,8),ee(oA,8),ee(aA,8),ee(lA,8),ee(cA,8),ee(BE,8))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Nle=(()=>{class n{constructor(){ro.Z.registerVersion("angularfire",m_.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Pt({type:n});static \u0275inj=Ct({providers:[YH]})}return n})(),Iw=(()=>{class n{constructor(t){this.db=t,this.games=t.list("games").snapshotChanges().pipe(Ue(i=>i.map(r=>({...r.payload.val(),key:r.payload.key}))))}get games$(){return this.games.pipe(Ue(t=>t.map(i=>new wU(i))))}addGame(t){this.db.list("games").push(t)}updateGame(t){console.log("updateGame"),this.db.list("games").update(t.key,t)}static#e=this.\u0275fac=function(i){return new(i||n)(ee(YH))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cw=(()=>{class n{constructor(t){this.dbSvc=t,this.gameSubject=new an(null),this.game$=this.gameSubject.asObservable(),this.dbSvc.games$.subscribe(i=>{const r=this.game?.code??localStorage.getItem("KEY_GAME")??"";this.game=i.find(s=>s.code.toLowerCase()===r.toLowerCase())??null})}get games$(){return this.dbSvc.games$}get game(){return this.gameSubject.value}set game(t){localStorage.setItem("KEY_GAME",t?.code??""),this.gameSubject.next(t)}isGameOver(t=this.game){return!!t?.endTime&&new Date(t.endTime)<=new Date}findGame$(t){return this.games$.pipe(vr(1),Ue(i=>i.find(r=>r.code.toLowerCase()===t.toLowerCase())??null),Ei(i=>this.game=i))}findGame(t){this.findGame$(t).subscribe()}createGame(t){t&&(this.dbSvc.addGame(t),this.findGame(t.code))}updateGame(t){t&&(this.dbSvc.updateGame(t),this.findGame(t.code))}static#e=this.\u0275fac=function(i){return new(i||n)(ee(Iw))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QH=(()=>{class n{constructor(t,i){this.gameStore=t,this.dbSvc=i,this.gameSubject=new an(null),this.playerSubject=new an(null),this.dbSvc.games$.subscribe(r=>{const s=this.game?.code??this.gameStore.game?.code??"",o=r.find(a=>a.code.toLowerCase()===s.toLowerCase())??null;if(!this.gameStore.isGameOver(o)){const a=(o?.players??[]).find(l=>l.myTurn)??null;this.game=o,this.player=a}})}get game(){return this.gameSubject.value}set game(t){this.gameSubject.next(t)}get player$(){return this.playerSubject.asObservable()}get player(){return this.playerSubject.value}set player(t){t?.number!==this.player?.number&&this.playerSubject.next(t)}gameOver(){this.game=null,this.player=null}startGame(){if(this.gameStore.isGameOver())return;const t=this.gameStore.game;t&&(t.startTime=new Date,t.totalGameTimeInMinutes&&(t.endTime=new Date(t.startTime.getTime()+6e4*t.totalGameTimeInMinutes)),t.players[0].myTurn=!0,t.inProgress=!0,this.game=t,this.dbSvc.updateGame(t))}nextPlayer(t=null){const i=this.game;if(i){const r=i.players.findIndex(o=>!!o.myTurn);let s=i.players[r+1];s||(s=i.players[0]),i.players.forEach(o=>{o.number===s.number?o.myTurn=!0:o.myTurn&&(o.myTurn=!1,t&&o.totalTurnTimeRemainingInSeconds&&(o.turnTimeInSeconds=i.turnTimeInSeconds,o.totalTurnTimeRemainingInSeconds=o.totalTurnTimeRemainingInSeconds-t))}),this.dbSvc.updateGame(i)}}static#e=this.\u0275fac=function(i){return new(i||n)(ee(Cw),ee(Iw))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JH=(()=>{class n{constructor(t,i){this.gameStore=t,this.dbSvc=i,this.playerSubject=new an(null),this.player$=this.playerSubject.asObservable(),this.dbSvc.games$.subscribe(r=>{const s=this.gameStore.game?.code??"",a=((r.find(l=>l.code.toLowerCase()===s.toLowerCase())??null)?.players??[]).find(l=>l.number===this.player?.number)??null;this.player=a})}get player(){return this.playerSubject.value}set player(t){localStorage.setItem("KEY_PLAYER",t?.number??""),JSON.stringify(t)!==JSON.stringify(this.player)&&this.playerSubject.next(t)}get isPlayer1(){return"1"===this.player?.number}updatePlayer(t){if(t){const i=this.gameStore.game;i&&(i.players.forEach(r=>{r.number===t.number&&Object.assign(r,t)}),this.dbSvc.updateGame(i)),this.player=t}}static#e=this.\u0275fac=function(i){return new(i||n)(ee(Cw),ee(Iw))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wR=st(755);let XH=(()=>{class n{constructor(){this._tenSeconds=new wR.Howl({src:["..\\assets\\10s.mp3"],html5:!0}),this._djAirhord=new wR.Howl({src:["..\\assets\\dj-airhorn.mp3"],html5:!0}),this._buzzer=new wR.Howl({src:["..\\assets\\buzzer.mp3"],html5:!0})}playTenSeconds(){this._tenSeconds.play()}playDjAirhorn(){this._djAirhord.play()}playBuzzer(){this._buzzer.play()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sw(n,e){return new ze(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=k(n[a]);let u=!1;t.add(l.subscribe({next:h=>{u||(u=!0,o++),r[a]=h},error:h=>t.error(h),complete:()=>{s++,(s===i||!u)&&(o===i&&t.next(e?e.reduce((h,g,m)=>(h[g]=r[m],h),{}):r),t.complete())}}))}})}let e$=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(V(Is),V(en))};static#t=this.\u0275dir=De({type:n})}return n})(),fd=(()=>{class n extends e${static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Mn(n)))(r||n)}}();static#t=this.\u0275dir=De({type:n,features:[tn]})}return n})();const lo=new Se("NgValueAccessor"),Ole={provide:lo,useExisting:Ce(()=>Dw),multi:!0},kle=new Se("CompositionEventMode");let Dw=(()=>{class n extends e${constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Mle(){const n=mc()?mc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(V(Is),V(en),V(kle,8))};static#t=this.\u0275dir=De({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&We("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[gn([Ole]),tn]})}return n})();const sr=new Se("NgValidators"),kc=new Se("NgAsyncValidators");function d$(n){return null!=n}function h$(n){return km(n)?k(n):n}function f$(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function p$(n,e){return e.map(t=>t(n))}function g$(n){return n.map(e=>function Lle(n){return!n.validate}(e)?e:t=>e.validate(t))}function TR(n){return null!=n?function m$(n){if(!n)return null;const e=n.filter(d$);return 0==e.length?null:function(t){return f$(p$(t,e))}}(g$(n)):null}function IR(n){return null!=n?function _$(n){if(!n)return null;const e=n.filter(d$);return 0==e.length?null:function(t){return function xle(...n){if(1===n.length){const e=n[0];if(xe(e))return Sw(e,null);if(Fe(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Sw(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Sw(n=1===n.length&&xe(n[0])?n[0]:n,null).pipe(Ue(t=>e(...t)))}return Sw(n,null)}(p$(t,e).map(h$)).pipe(Ue(f$))}}(g$(n)):null}function y$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function CR(n){return n?Array.isArray(n)?n:[n]:[]}function Rw(n,e){return Array.isArray(n)?n.includes(e):n===e}function E$(n,e){const t=CR(e);return CR(n).forEach(r=>{Rw(t,r)||t.push(r)}),t}function w$(n,e){return CR(e).filter(t=>!Rw(n,t))}class T${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=TR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=IR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vr extends T${get formDirective(){return null}get path(){return null}}class Fc extends T${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class I${constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let C$=(()=>{class n extends I${constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(V(Fc,2))};static#t=this.\u0275dir=De({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Gt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[tn]})}return n})();const q_="VALID",xw="INVALID",cp="PENDING",K_="DISABLED";function Pw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class R${constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===q_}get invalid(){return this.status===xw}get pending(){return this.status==cp}get disabled(){return this.status===K_}get enabled(){return this.status!==K_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(E$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(E$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(w$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(w$(e,this._rawAsyncValidators))}hasValidator(e){return Rw(this._rawValidators,e)}hasAsyncValidator(e){return Rw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=cp,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=K_,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=q_,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===q_||this.status===cp)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?K_:q_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=cp,this._hasOwnPendingAsyncValidator=!0;const t=h$(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ye,this.statusChanges=new Ye}_calculateStatus(){return this._allControlsDisabled()?K_:this.errors?xw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cp)?cp:this._anyControlsHaveStatus(xw)?xw:q_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Hle(n){return Array.isArray(n)?TR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function $le(n){return Array.isArray(n)?IR(n):n||null}(this._rawAsyncValidators)}}const up=new Se("CallSetDisabledState",{providedIn:"root",factory:()=>Ow}),Ow="always";function Z_(n,e,t=Ow){(function xR(n,e){const t=function v$(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(y$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function b$(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(y$(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Fw(e._rawValidators,r),Fw(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Wle(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&N$(n,e)})}(n,e),function Kle(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function qle(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&N$(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function zle(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function N$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function O$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function M$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const k$=class extends R${constructor(e=null,t,i){super(function AR(n){return(Pw(n)?n.validators:n)||null}(t),function RR(n,e){return(Pw(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=M$(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){O$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){O$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){M$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},nce={provide:Fc,useExisting:Ce(()=>FR)},V$=(()=>Promise.resolve())();let FR=(()=>{class n extends Fc{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new k$,this._registered=!1,this.name="",this.update=new Ye,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function MR(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Dw?t=s:function Qle(n){return Object.getPrototypeOf(n.constructor)===fd}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function OR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Z_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){V$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function Pf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);V$.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Mw(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||n)(V(Vr,9),V(sr,10),V(kc,10),V(lo,10),V(eo,8),V(up,8))};static#t=this.\u0275dir=De({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gn([nce]),tn,vn]})}return n})();const sce={provide:lo,useExisting:Ce(()=>LR),multi:!0};let U$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),oce=(()=>{class n{constructor(){this._accessors=[]}add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t)return void this._accessors.splice(i,1)}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return!!t[0].control&&t[0]._parent===i._control._parent&&t[1].name===i.name}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:U$})}return n})(),LR=(()=>{class n extends fd{constructor(t,i,r,s){super(t,i),this._registry=r,this._injector=s,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Ne(up,{optional:!0})??Ow}ngOnInit(){this._control=this._injector.get(Fc),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(i){return new(i||n)(V(Is),V(en),V(oce),V(ir))};static#t=this.\u0275dir=De({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,r){1&i&&We("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[gn([sce]),tn]})}return n})(),Dce=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({imports:[U$]})}return n})(),Rce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:up,useValue:t.callSetDisabledState??Ow}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({imports:[Dce]})}return n})();function Nce(n,e){if(1&n&&(Ob(0),os(1,"span",2),Mb()),2&n){const t=Ee();ge(1),me("innerHTML",t.i.text,XM)}}function xce(n,e){1&n&&aS(0)}const Pce=function(n){return{$implicit:n}};var Er=function(n){return n[n.ing=0]="ing",n[n.pause=1]="pause",n[n.stop=2]="stop",n[n.done=3]="done",n}(Er||{});let r3=(()=>{class n{constructor(t){this.ngZone=t,this.fns=[],this.commands=[],this.nextTime=0,this.ing=!1}start(){!0!==this.ing&&(this.ing=!0,this.nextTime=+new Date,this.ngZone.runOutsideAngular(()=>{this.process()}))}process(){for(;this.commands.length;)this.commands.shift()();let t=+new Date-this.nextTime;const i=1+Math.floor(t/100);t=100-t%100,this.nextTime+=100*i;for(let r=0,s=this.fns.length;r<s;r+=2){let o=this.fns[r+1];if(0===o)this.fns[r](i);else{o+=2*i-1;const a=Math.floor(o/20);a>0&&this.fns[r](a),this.fns[r+1]=o%20+1}}this.ing&&setTimeout(()=>this.process(),t)}add(t,i){return this.commands.push(()=>{this.fns.push(t),this.fns.push(1e3===i?1:0),this.ing=!0}),this}remove(t){return this.commands.push(()=>{const i=this.fns.indexOf(t);-1!==i&&this.fns.splice(i,2),this.ing=this.fns.length>0}),this}static#e=this.\u0275fac=function(i){return new(i||n)(ee(vt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),s3=(()=>{class n{constructor(t){this.locale=t,this.demand=!1,this.leftTime=0,this.format="HH:mm:ss",this.timezone="+0000",this.formatDate=({date:i,formatStr:r,timezone:s})=>sD(new Date(i),r,this.locale,s||this.timezone||"+0000")}static#e=this.\u0275fac=function(i){return new(i||n)(ee(Ds))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),o3=(()=>{class n{set config(t){null!=t.notify&&!Array.isArray(t.notify)&&t.notify>0&&(t.notify=[t.notify]),this._config=t}get config(){return this._config}constructor(t,i,r,s,o){this.locale=t,this.timer=i,this.defCog=r,this.cdr=s,this.ngZone=o,this.frequency=1e3,this._notify={},this.status=Er.ing,this.isDestroy=!1,this.i={},this.left=0,this.event=new Ye}begin(){this.status=Er.ing,this.callEvent("start")}restart(){this.status!==Er.stop&&this.destroy(),this.init(),this.callEvent("restart")}stop(){this.status!==Er.stop&&(this.status=Er.stop,this.destroy(),this.callEvent("stop"))}pause(){this.status===Er.stop||this.status===Er.pause||(this.status=Er.pause,this.callEvent("pause"))}resume(){this.status===Er.stop||this.status!==Er.pause||(this.status=Er.ing,this.callEvent("resume"))}callEvent(t){this.event.emit({action:t,left:this.left,status:this.status,text:this.i.text})}init(){const{locale:t,defCog:i}=this,r=this.config={...new s3(t),...i,...this.config},s=this.frequency=~r.format.indexOf("S")?100:1e3;this.status=r.demand?Er.pause:Er.ing,this.getLeft();const o=this.reflow;this.reflow=(a=0,l=!1)=>o.apply(this,[a,l]),Array.isArray(r.notify)&&r.notify.forEach(a=>{if(a<1)throw new Error("The notify config must be a positive integer.");a*=1e3,this._notify[a-=a%s]=!0}),this.timer.add(this.reflow,s).start(),this.reflow(0,!0)}destroy(){return this.timer.remove(this.reflow),this}reflow(t=0,i=!1){if(this.isDestroy)return;const{status:r,config:s,_notify:o}=this;if(!i&&r!==Er.ing)return;let a=this.left=this.left-this.frequency*t;a<1&&(a=0),this.i={value:a,text:s.formatDate({date:a,formatStr:s.format,timezone:s.timezone})},"function"==typeof s.prettyText&&(this.i.text=s.prettyText(this.i.text)),this.cdr.detectChanges(),(0===s.notify||o[a])&&this.ngZone.run(()=>{this.callEvent("notify")}),0===a&&this.ngZone.run(()=>{this.status=Er.done,this.destroy(),this.callEvent("done")})}getLeft(){const{config:t,frequency:i}=this;let r=1e3*t.leftTime;const s=t.stopTime;!r&&s&&(r=s-(new Date).getTime()),this.left=r-r%i}ngOnInit(){this.init(),this.config.demand||this.begin()}ngOnDestroy(){this.isDestroy=!0,this.destroy()}ngOnChanges(t){t.config.firstChange||this.restart()}static#e=this.\u0275fac=function(i){return new(i||n)(V(Ds),V(r3),V(s3),V(eo),V(vt))};static#t=this.\u0275cmp=mr({type:n,selectors:[["countdown"]],hostVars:2,hostBindings:function(i,r){2&i&&Gt("count-down",!0)},inputs:{config:"config",render:"render"},outputs:{event:"event"},standalone:!0,features:[gn([r3]),vn,Ss],decls:2,vars:5,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(i,r){1&i&&(ke(0,Nce,2,1,"ng-container",0),ke(1,xce,1,0,"ng-container",1)),2&i&&(me("ngIf",!r.render),ge(1),me("ngTemplateOutlet",r.render)("ngTemplateOutletContext",Rf(3,Pce,r.i)))},dependencies:[yD,yl,Ju],encapsulation:2,changeDetection:0})}return n})(),Oce=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({imports:[o3]})}return n})();function wr(n,e,t,i){return N(t)&&(i=t,t=void 0),i?wr(n,e,t).pipe(Ue(r=>xe(r)?i(...r):i(r))):new ze(r=>{a3(n,e,function s(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function a3(n,e,t,i,r){let s;if(function Fce(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function kce(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function Mce(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)a3(n[o],e,t,i,r)}i.add(s)}function Vce(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}class Bce{call(e,t){return t.subscribe(new Uce(e))}}class Uce extends RD{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let i=0;i<t&&!this.hasFirst;i++){const s=ND(this,e[i],void 0,i);this.subscriptions&&this.subscriptions.push(s),this.add(s)}this.observables=null}}notifyNext(e,t,i){if(!this.hasFirst){this.hasFirst=!0;for(let r=0;r<this.subscriptions.length;r++)if(r!==i){let s=this.subscriptions[r];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)}}function GR(...n){const e=n[n.length-1];return"function"==typeof e&&n.pop(),Jt(n,void 0).lift(new jce(e))}class jce{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Hce(e,this.resultSelector))}}class Hce extends I{constructor(e,t,i=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;xe(e)?t.push(new Gce(e)):t.push("function"==typeof e[Zi]?new $ce(e[Zi]()):new zce(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let i=0;i<t;i++){let r=e[i];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,i=this.destination;for(let o=0;o<t;o++){let a=e[o];if("function"==typeof a.hasValue&&!a.hasValue())return}let r=!1;const s=[];for(let o=0;o<t;o++){let a=e[o],l=a.next();if(a.hasCompleted()&&(r=!0),l.done)return void i.complete();s.push(l.value)}this.resultSelector?this._tryresultSelector(s):i.next(s),r&&i.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class $ce{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return!(!e||!e.done)}}class Gce{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[Zi](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class zce extends le{constructor(e,t,i){super(e),this.parent=t,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Zi](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return ve(this.observable,new H(this))}}class Jce{constructor(e){this.total=e}call(e,t){return t.subscribe(new Xce(e,this.total))}}class Xce extends I{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}Math,Math,Math;const Sde=["*"],k3=function(n){return{$implicit:n}},nhe=["dialog"],ihe=["ngbNavOutlet",""];function rhe(n,e){}function she(n,e){if(1&n&&(_e(0,"div",2),ke(1,rhe,0,0,"ng-template",3),pe()),2&n){const t=Ee().$implicit,i=Ee();me("item",t)("nav",i.nav)("role",i.paneRole),ge(1),me("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",Rf(5,k3,t.active||i.isPanelTransitioning(t)))}}function ohe(n,e){if(1&n&&ke(0,she,2,7,"div",1),2&n){const t=e.$implicit,i=Ee();me("ngIf",t.isPanelInDom()||i.isPanelTransitioning(t))}}function _d(n){return"string"==typeof n}function yd(n){return null!=n}function mp(n){return(n||document.body).getBoundingClientRect()}const B3={animation:!0,transitionTimerDelayMs:5},Khe=()=>{},{transitionTimerDelayMs:Zhe}=B3,ry=new Map,gs=(n,e,t,i)=>{let r=i.context||{};const s=ry.get(e);if(s)switch(i.runningTransition){case"continue":return yc;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),ry.delete(e)}const o=t(e,i.animation,r)||Khe;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>o()),Re(void 0).pipe(function Whe(n){return e=>new ze(t=>e.subscribe({next:o=>n.run(()=>t.next(o)),error:o=>n.run(()=>t.error(o)),complete:()=>n.run(()=>t.complete())}))}(n));const a=new at,l=new at,u=a.pipe(function Wce(...n){return e=>fE(e,Re(...n))}(!0));ry.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const h=function qhe(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const g=wr(e,"transitionend").pipe(si(u),bi(({target:v})=>v===e)),m=function Lce(n=0,e,t){let i=-1;return iA(e)?i=Number(e)<1?1:Number(e):Ti(e)&&(t=e),Ti(t)||(t=tA),new ze(r=>{const s=iA(n)?n:+n-t.now();return t.schedule(Vce,s,{index:0,period:i,subscriber:r})})}(h+Zhe).pipe(si(u));(function l3(...n){if(1===n.length){if(!xe(n[0]))return n[0];n=n[0]}return Jt(n,void 0).lift(new Bce)})(m,g,l).pipe(si(u)).subscribe(()=>{ry.delete(e),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let zw=(()=>{class n{constructor(){this.animation=B3.animation}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),K3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),Z3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),J3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),X3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})();var wn=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(wn||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const o4=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function a4(n){const e=Array.from(n.querySelectorAll(o4)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let b4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),T4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})();class Td{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}let Kfe=(()=>{class n{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(vr(1)).subscribe(()=>{gs(this._zone,this._el.nativeElement,(t,i)=>{i&&mp(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return gs(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(i){return new(i||n)(V(en),V(vt))};static#t=this.\u0275cmp=mr({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){2&i&&(qu("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),Gt("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Ss],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();class I4{update(e){}close(e){}dismiss(e){}}const Zfe=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],Yfe=["animation","backdropClass"];class Qfe{_applyWindowOptions(e,t){Zfe.forEach(i=>{yd(t[i])&&(e[i]=t[i])})}_applyBackdropOptions(e,t){Yfe.forEach(i=>{yd(t[i])&&(e[i]=t[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(si(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(si(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new at,this._dismissed=new at,this._hidden=new at,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function F3(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(i=>{!1!==i&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Re(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),GR(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var vN=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(vN||{});let Jfe=(()=>{class n{constructor(t,i,r){this._document=t,this._elRef=i,this._zone=r,this._closed$=new at,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Ye,this.shown=new at,this.hidden=new at}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":_d(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(vr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=GR(gs(this._zone,t,()=>t.classList.remove("show"),i),gs(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const t={animation:this.animation,runningTransition:"continue"};GR(gs(this._zone,this._elRef.nativeElement,(s,o)=>{o&&mp(s),s.classList.add("show")},t),gs(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{wr(t,"keydown").pipe(si(this._closed$),bi(r=>r.which===wn.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(vN.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;wr(this._dialogEl.nativeElement,"mousedown").pipe(si(this._closed$),Ei(()=>i=!1),$t(()=>wr(t,"mouseup").pipe(si(this._closed$),vr(1))),bi(({target:r})=>t===r)).subscribe(()=>{i=!0}),wr(t,"click").pipe(si(this._closed$)).subscribe(({target:r})=>{t===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(vN.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),r=a4(t)[0];(i||r||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&gs(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(i){return new(i||n)(V(xi),V(en),V(vt))};static#t=this.\u0275cmp=mr({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(1&i&&fc(nhe,7),2&i){let s;rn(s=sn())&&(r._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){2&i&&(nn("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),qu("modal d-block"+(r.windowClass?" "+r.windowClass:"")),Gt("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Ss],ngContentSelectors:Sde,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,r){1&i&&(function VF(n){const e=ue()[On][_i];if(!e.projection){const i=e.projection=Uu(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?uK(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}(),_e(0,"div",0,1)(2,"div",2),function BF(n,e=0,t){const i=ue(),r=Ft(),s=mf(r,It+n,16,null,t||null);null===s.projection&&(s.projection=e),Au(),(!i[Ws]||Xl())&&32!=(32&s.flags)&&function f9(n,e,t){UM(e[rt],0,e,t,l1(n,t,e),MM(t.parent||e[_i],t,e))}(r,i,s)}(3),pe()()),2&i&&qu("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return n})(),Xfe=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:o}=r;if(t>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=o),r.overflow=s}}static#e=this.\u0275fac=function(i){return new(i||n)(ee(xi))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),epe=(()=>{class n{constructor(t,i,r,s,o,a,l){this._applicationRef=t,this._injector=i,this._environmentInjector=r,this._document=s,this._scrollBar=o,this._rendererFactory=a,this._ngZone=l,this._activeWindowCmptHasChanged=new at,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Ye,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const u=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,i=!1)=>{n.runOutsideAngular(()=>{const r=wr(e,"focusin").pipe(si(t),Ue(s=>s.target));wr(e,"keydown").pipe(si(t),bi(s=>s.which===wn.Tab),HE(r)).subscribe(([s,o])=>{const[a,l]=a4(e);(o===a||o===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&wr(e,"click").pipe(si(t),HE(r),Ue(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,u.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(u.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r){const s=r.container instanceof HTMLElement?r.container:yd(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new I4,l=(t=r.injector||t).get(ss,null)||this._environmentInjector,u=this._getContentRef(t,l,i,a,r);let h=!1!==r.backdrop?this._attachBackdrop(s):void 0,g=this._attachWindowComponent(s,u.nodes),m=new Qfe(g,u,h,r.beforeDismiss);return this._registerModalRef(m),this._registerWindowCmpt(g),m.hidden.pipe(vr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=v=>{m.close(v)},a.dismiss=v=>{m.dismiss(v)},a.update=v=>{m.update(v)},m.update(r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),h&&h.instance&&h.changeDetectorRef.detectChanges(),g.changeDetectorRef.detectChanges(),m}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=QS(Kfe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let r=QS(Jfe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_getContentRef(t,i,r,s,o){return r?r instanceof Yn?this._createFromTemplateRef(r,s):_d(r)?this._createFromString(r):this._createFromComponent(t,i,r,s,o):new Td([])}_createFromTemplateRef(t,i){const s=t.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(s),new Td([s.rootNodes],s)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new Td([[i]])}_createFromComponent(t,i,r,s,o){const l=QS(r,{environmentInjector:i,elementInjector:ir.create({providers:[{provide:I4,useValue:s}],parent:t})}),u=l.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new Td([[u]],l.hostView,l)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(i){return new(i||n)(ee(gc),ee(ir),ee(ss),ee(xi),ee(Xfe),ee(F1),ee(vt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tpe=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}static#e=this.\u0275fac=function(i){return new(i||n)(ee(zw))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),npe=(()=>{class n{constructor(t,i,r){this._injector=t,this._modalStack=i,this._config=r}open(t,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(i){return new(i||n)(ee(ir),ee(epe),ee(tpe))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({providers:[npe]})}return n})(),ipe=(()=>{class n{constructor(t){this._ngbConfig=t,this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}static#e=this.\u0275fac=function(i){return new(i||n)(ee(zw))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const S4=n=>yd(n)&&""!==n;let rpe=0,bN=(()=>{class n{constructor(t){this.templateRef=t}static#e=this.\u0275fac=function(i){return new(i||n)(V(Yn))};static#t=this.\u0275dir=De({type:n,selectors:[["ng-template","ngbNavContent",""]],standalone:!0})}return n})(),D4=(()=>{class n{constructor(t,i){this.role=t,this.nav=i}static#e=this.\u0275fac=function(i){return new(i||n)(Co("role"),V(Ce(()=>Id)))};static#t=this.\u0275dir=De({type:n,selectors:[["","ngbNavItem","",5,"ng-container"]],hostVars:1,hostBindings:function(i,r){2&i&&nn("role",r.role?r.role:r.nav.roles?"presentation":void 0)},standalone:!0})}return n})(),vp=(()=>{class n{constructor(t,i){this._nav=t,this.elementRef=i,this.disabled=!1,this.shown=new Ye,this.hidden=new Ye}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){yd(this.domId)||(this.domId="ngb-nav-"+rpe++)}get active(){return this._nav.activeId===this.id}get id(){return S4(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(yd(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}static#e=this.\u0275fac=function(i){return new(i||n)(V(Ce(()=>Id)),V(en))};static#t=this.\u0275dir=De({type:n,selectors:[["","ngbNavItem",""]],contentQueries:function(i,r,s){if(1&i&&Qn(s,bN,4),2&i){let o;rn(o=sn())&&(r.contentTpls=o)}},hostVars:2,hostBindings:function(i,r){2&i&&Gt("nav-item",!0)},inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:["ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"],standalone:!0})}return n})(),Id=(()=>{class n{constructor(t,i,r,s){this.role=t,this._cd=r,this._document=s,this.activeIdChange=new Ye,this.shown=new Ye,this.hidden=new Ye,this.destroy$=new at,this.navItemChange$=new at,this.navChange=new Ye,this.animation=i.animation,this.destroyOnHide=i.destroyOnHide,this.orientation=i.orientation,this.roles=i.roles,this.keyboard=i.keyboard}click(t){t.disabled||this._updateActiveId(t.id)}onKeyDown(t){if("tablist"!==this.roles||!this.keyboard)return;const i=t.which,r=this.links.filter(a=>!a.navItem.disabled),{length:s}=r;let o=-1;if(r.forEach((a,l)=>{a.elRef.nativeElement===this._document.activeElement&&(o=l)}),s){switch(i){case wn.ArrowLeft:if("vertical"===this.orientation)return;o=(o-1+s)%s;break;case wn.ArrowRight:if("vertical"===this.orientation)return;o=(o+1)%s;break;case wn.ArrowDown:if("horizontal"===this.orientation)return;o=(o+1)%s;break;case wn.ArrowUp:if("horizontal"===this.orientation)return;o=(o-1+s)%s;break;case wn.Home:o=0;break;case wn.End:o=s-1}"changeWithArrows"===this.keyboard&&this.select(r[o].navItem.id),r[o].elRef.nativeElement.focus(),t.preventDefault()}}select(t){this._updateActiveId(t,!1)}ngAfterContentInit(){if(!yd(this.activeId)){const t=this.items.first?this.items.first.id:null;S4(t)&&(this._updateActiveId(t,!1),this._cd.detectChanges())}this.items.changes.pipe(si(this.destroy$)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:t}){t&&!t.firstChange&&this._notifyItemChanged(t.currentValue)}ngOnDestroy(){this.destroy$.next()}_updateActiveId(t,i=!0){if(this.activeId!==t){let r=!1;i&&this.navChange.emit({activeId:this.activeId,nextId:t,preventDefault:()=>{r=!0}}),r||(this.activeId=t,this.activeIdChange.emit(t),this._notifyItemChanged(t))}}_notifyItemChanged(t){this.navItemChange$.next(this._getItemById(t))}_getItemById(t){return this.items&&this.items.find(i=>i.id===t)||null}static#e=this.\u0275fac=function(i){return new(i||n)(Co("role"),V(ipe),V(eo),V(xi))};static#t=this.\u0275dir=De({type:n,selectors:[["","ngbNav",""]],contentQueries:function(i,r,s){if(1&i&&(Qn(s,vp,4),Qn(s,iT,5)),2&i){let o;rn(o=sn())&&(r.items=o),rn(o=sn())&&(r.links=o)}},hostVars:6,hostBindings:function(i,r){1&i&&We("keydown.arrowLeft",function(o){return r.onKeyDown(o)})("keydown.arrowRight",function(o){return r.onKeyDown(o)})("keydown.arrowDown",function(o){return r.onKeyDown(o)})("keydown.arrowUp",function(o){return r.onKeyDown(o)})("keydown.Home",function(o){return r.onKeyDown(o)})("keydown.End",function(o){return r.onKeyDown(o)}),2&i&&(nn("aria-orientation","vertical"===r.orientation&&"tablist"===r.roles?"vertical":void 0)("role",r.role?r.role:r.roles?"tablist":void 0),Gt("nav",!0)("flex-column","vertical"===r.orientation))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],standalone:!0,features:[vn]})}return n})(),iT=(()=>{class n{constructor(t,i,r,s){this.role=t,this.navItem=i,this.nav=r,this.elRef=s}hasNavItemClass(){return this.navItem.elementRef.nativeElement.nodeType===Node.COMMENT_NODE}static#e=this.\u0275fac=function(i){return new(i||n)(Co("role"),V(vp),V(Id),V(en))};static#t=this.\u0275dir=De({type:n,selectors:[["","ngbNavLink",""]],hostVars:14,hostBindings:function(i,r){2&i&&(Js("id",r.navItem.domId),nn("role",r.role?r.role:r.nav.roles?"tab":void 0)("tabindex",r.navItem.disabled?-1:void 0)("aria-controls",r.navItem.isPanelInDom()?r.navItem.panelDomId:null)("aria-selected",r.navItem.active)("aria-disabled",r.navItem.disabled),Gt("nav-link",!0)("nav-item",r.hasNavItemClass())("active",r.navItem.active)("disabled",r.navItem.disabled))},standalone:!0})}return n})();const ape=({classList:n})=>(n.remove("show"),()=>n.remove("active")),lpe=(n,e)=>{e&&mp(n),n.classList.add("show")};let EN=(()=>{class n{constructor(t){this.elRef=t}static#e=this.\u0275fac=function(i){return new(i||n)(V(en))};static#t=this.\u0275dir=De({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(i,r){2&i&&(Js("id",r.item.panelDomId),nn("role",r.role?r.role:r.nav.roles?"tabpanel":void 0)("aria-labelledby",r.item.domId),Gt("fade",r.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0})}return n})(),A4=(()=>{class n{constructor(t,i){this._cd=t,this._ngZone=i,this._activePane=null}isPanelTransitioning(t){return this._activePane?.item===t}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(si(this.nav.destroy$),Xm(this._activePane?.item||null),mo(),function Qce(n){return e=>e.lift(new Jce(n))}(1)).subscribe(t=>{const i={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?gs(this._ngZone,this._activePane.elRef.nativeElement,ape,i).subscribe(()=>{const r=this._activePane?.item;this._activePane=this._getPaneForItem(t),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),gs(this._ngZone,this._activePane.elRef.nativeElement,lpe,i).subscribe(()=>{t&&(t.shown.emit(),this.nav.shown.emit(t.id))})),r&&(r.hidden.emit(),this.nav.hidden.emit(r.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(i=>i.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}static#e=this.\u0275fac=function(i){return new(i||n)(V(eo),V(vt))};static#t=this.\u0275cmp=mr({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(i,r){if(1&i&&fc(EN,5),2&i){let s;rn(s=sn())&&(r._panes=s)}},hostVars:2,hostBindings:function(i,r){2&i&&Gt("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[Ss],attrs:ihe,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){1&i&&ke(0,ohe,1,1,"ng-template",0),2&i&&me("ngForOf",r.nav.items)},dependencies:[EN,_l,yl,Ju],encapsulation:2,changeDetection:0})}return n})(),R4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),L4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),V4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),B4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),U4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),j4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),H4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),$4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),G4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})();new Se("live announcer delay",{providedIn:"root",factory:function mpe(){return 100}});let z4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})(),W4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({})}return n})();const ype=[K3,Z3,J3,X3,b4,T4,C4,R4,W4,L4,V4,B4,U4,j4,H4,$4,G4,z4];let q4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({imports:[ype,K3,Z3,J3,X3,b4,T4,C4,R4,W4,L4,V4,B4,U4,j4,H4,$4,G4,z4]})}return n})();const vpe=["playerTurnCountdown"];function bpe(n,e){1&n&&(_e(0,"span",12),mt(1,"|"),pe())}function Epe(n,e){if(1&n){const t=ii();_e(0,"span")(1,"span",13),We("click",function(){return Dt(t),At(Ee().gameClicked())}),mt(2,"Game"),pe(),mt(3),pe()}if(2&n){const t=Ee();ge(3),xo(" ",t.game.code,"")}}function wpe(n,e){if(1&n){const t=ii();_e(0,"span",13),We("click",function(){return Dt(t),At(Ee().playerClicked())}),mt(1),os(2,"span",14),pe()}if(2&n){const t=Ee();hc("color",t.player.color),ge(1),xo("Player ",t.player.number," "),ge(1),hc("color",t.player.color)}}function Tpe(n,e){if(1&n){const t=ii();_e(0,"div",15)(1,"button",16),We("click",function(){return Dt(t),At(Ee().newGame())}),mt(2,"New Game"),pe(),_e(3,"button",17),We("click",function(){return Dt(t),At(Ee().joinGame())}),mt(4,"Join Game"),pe()()}}function Ipe(n,e){if(1&n){const t=ii();_e(0,"div",18)(1,"div")(2,"div",19)(3,"span",20),mt(4,"# of Players:"),pe(),_e(5,"input",21),We("ngModelChange",function(r){return Dt(t),At(Ee(2).game.playerCount=r)}),pe()(),_e(6,"div",19)(7,"span",20),mt(8,"Total Game Time (m):"),pe(),_e(9,"input",21),We("ngModelChange",function(r){return Dt(t),At(Ee(2).game.totalGameTimeInMinutes=r)}),pe()(),_e(10,"div",19)(11,"span",20),mt(12,"Time per Turn (s):"),pe(),_e(13,"input",21),We("ngModelChange",function(r){return Dt(t),At(Ee(2).game.turnTimeInSeconds=r)}),pe()()(),_e(14,"div")(15,"button",22),We("click",function(){return Dt(t),At(Ee(2).back())}),mt(16,"Back"),pe(),_e(17,"button",23),We("click",function(){return Dt(t),At(Ee(2).next())}),mt(18,"Next"),pe()()()}if(2&n){const t=Ee(2);ge(5),me("ngModel",t.game.playerCount),ge(4),me("ngModel",t.game.totalGameTimeInMinutes),ge(4),me("ngModel",t.game.turnTimeInSeconds)}}function Cpe(n,e){1&n&&(_e(0,"li",8),ke(1,Ipe,19,3,"ng-template",9),pe()),2&n&&me("ngbNavItem",Ee().views.editGame)}function Spe(n,e){1&n&&(_e(0,"div"),mt(1," Game not found. "),pe()),2&n&&hc("color","red")}function Dpe(n,e){if(1&n){const t=ii();_e(0,"div",18)(1,"div")(2,"div",19)(3,"span",20),mt(4,"Code:"),pe(),_e(5,"input",24),We("ngModelChange",function(r){return Dt(t),At(Ee().gameCode=r)})("change",function(){return Dt(t),At(Ee().invalidGameCode=!1)}),pe()(),ke(6,Spe,2,2,"div",25),pe(),_e(7,"div")(8,"button",22),We("click",function(){return Dt(t),At(Ee().back())}),mt(9,"Back"),pe(),_e(10,"button",23),We("click",function(){return Dt(t),At(Ee().next())}),mt(11,"Next"),pe()()()}if(2&n){const t=Ee();ge(5),me("ngModel",t.gameCode),ge(1),me("ngIf",t.invalidGameCode)}}function Ape(n,e){if(1&n){const t=ii();_e(0,"div",29)(1,"input",30),We("ngModelChange",function(r){return Dt(t),At(Ee(3).player=r)}),pe(),_e(2,"label",31),mt(3),pe()()}if(2&n){const t=e.$implicit,i=Ee(3);ge(1),me("ngModel",i.player)("value",t)("id",t.number),ge(1),me("for",t.number),ge(1),xo("Player ",t.number,"")}}function Rpe(n,e){if(1&n){const t=ii();_e(0,"div",18)(1,"h2")(2,"div"),mt(3,"Who are you?"),pe()(),_e(4,"div")(5,"div",15),ke(6,Ape,4,5,"div",26),pe()(),_e(7,"div")(8,"button",27),We("click",function(){return Dt(t),At(Ee(2).back())}),mt(9,"Back"),pe(),_e(10,"button",28),We("click",function(){return Dt(t),At(Ee(2).next())}),mt(11,"Next"),pe()()()}if(2&n){const t=Ee(2);ge(6),me("ngForOf",t.game.players)}}function Npe(n,e){1&n&&(_e(0,"li",8),ke(1,Rpe,12,1,"ng-template",9),pe()),2&n&&me("ngbNavItem",Ee().views.selectPlayer)}function xpe(n,e){if(1&n){const t=ii();_e(0,"div",18)(1,"h2")(2,"div"),mt(3),pe()(),_e(4,"div")(5,"div",15)(6,"div",32)(7,"span",20),mt(8,"Name:"),pe(),_e(9,"input",21),We("ngModelChange",function(r){return Dt(t),At(Ee(2).player.name=r)}),pe()(),_e(10,"div",19)(11,"span",20),mt(12,"Color:"),pe(),_e(13,"input",33),We("ngModelChange",function(r){return Dt(t),At(Ee(2).player.color=r)}),pe()()()(),_e(14,"div")(15,"button",27),We("click",function(){return Dt(t),At(Ee(2).back())}),mt(16,"Back"),pe(),_e(17,"button",28),We("click",function(){return Dt(t),At(Ee(2).next())}),mt(18,"Play"),pe()()()}if(2&n){const t=Ee(2);ge(3),xo("Player ",t.player.number,""),ge(6),me("ngModel",t.player.name),ge(4),me("ngModel",t.player.color)}}function Ppe(n,e){1&n&&(_e(0,"li",8),ke(1,xpe,19,3,"ng-template",9),pe()),2&n&&me("ngbNavItem",Ee().views.editPlayer)}function Ope(n,e){if(1&n&&os(0,"span",14),2&n){const t=e.$implicit;hc("color",t.myTurn?t.color:"grey"),Gt("fs-1",t.myTurn)}}function Mpe(n,e){if(1&n&&(_e(0,"span"),mt(1),pe()),2&n){const t=Ee(3);ge(1),xo("",t.currentPlayerName,"'s Turn")}}function kpe(n,e){1&n&&(_e(0,"span"),mt(1,"Your Turn"),pe())}function Fpe(n,e){if(1&n&&(_e(0,"div")(1,"div",41)(2,"div"),ke(3,Ope,1,4,"span",42),pe()(),_e(4,"div",41)(5,"div",34)(6,"div",43),ke(7,Mpe,2,1,"span",4),ke(8,kpe,2,0,"span",4),pe()()()()),2&n){const t=Ee(2);let i;ge(3),me("ngForOf",t.game.players),ge(3),hc("color",null!==(i=null==t.currentPlayer?null:t.currentPlayer.color)&&void 0!==i?i:"grey"),ge(1),me("ngIf",!t.isMyTurn),ge(1),me("ngIf",t.isMyTurn)}}function Lpe(n,e){if(1&n){const t=ii();_e(0,"button",44),We("click",function(){return Dt(t),At(Ee(2).startGame())}),mt(1,"Start"),pe()}}function Vpe(n,e){if(1&n){const t=ii();_e(0,"div",34)(1,"span",45),We("click",function(){return Dt(t),At(Ee(2).pauseTurn())}),pe()()}}function Bpe(n,e){if(1&n&&(_e(0,"div",46)(1,"span",47),mt(2),pe(),_e(3,"span",48),mt(4," of Total Turn Time left"),pe()()),2&n){const t=Ee(2);ge(2),ma(t.totalTurnTimeRemaining)}}function Upe(n,e){if(1&n){const t=ii();_e(0,"div",18)(1,"h2"),ke(2,Fpe,9,5,"div",4),pe(),_e(3,"div")(4,"div")(5,"div",34),ke(6,Lpe,2,0,"button",35),_e(7,"button",36),We("click",function(){Dt(t);const r=Ee();return At(r.timerOn?r.endTurn():r.resumeTurn())}),_e(8,"countdown",37,38),We("event",function(r){return Dt(t),At(Ee().countdownAction(r))}),pe()()(),ke(10,Vpe,2,0,"div",39),pe(),ke(11,Bpe,5,1,"div",40),pe(),os(12,"div"),pe()}if(2&n){const t=Ee();ge(2),me("ngIf",t.game),ge(4),me("ngIf",t.showStartGameBtn),ge(1),me("hidden",t.showStartGameBtn)("ngClass",t.countdownBtnClass)("disabled",!t.isMyTurn),ge(1),me("config",t.playerTurnCountdownConfig),ge(2),me("ngIf",t.timerOn&&t.isMyTurn),ge(1),me("ngIf",(null==t.player?null:t.player.totalTurnTimeRemainingInSeconds)&&!t.isMyTurn)}}function jpe(n,e){if(1&n){const t=ii();_e(0,"div",18)(1,"h1",49),mt(2,"Game Over!"),pe(),_e(3,"div")(4,"div",15)(5,"button",16),We("click",function(){Dt(t);const r=Ee();return r.goHome(),At(r.newGame())}),mt(6,"New Game"),pe(),_e(7,"button",17),We("click",function(){Dt(t);const r=Ee();return r.goHome(),At(r.joinGame())}),mt(8,"Join Game"),pe()()()()}2&n&&(ge(1),hc("color","yellow"))}let Hpe=(()=>{class n{constructor(t,i,r,s){this.playStore=t,this.gameStore=i,this.playerStore=r,this.soundStore=s,this.countdownBtnClass="",this.gameCode="",this.invalidGameCode=!1,this.game=null,this.player=null,this.timerOn=!1,this.playerTurnCountdownConfig={demand:!0,leftTime:60,format:"mm:ss",notify:[5,10]},this.gameTimer=null,this.views={landing:"landing",editGame:"edit-game",joinGame:"join-game",selectPlayer:"select-player",editPlayer:"edit-player",playGame:"play-game",gameOver:"game-over"},this.view=this.views.landing,this.subscriptions=[],this.gameCode=localStorage.getItem("KEY_GAME")??"",this.gameCode&&(this.view=this.views.joinGame),this.setPlayerTurnCountdownConfig(),this.initializeSubscriptions(),this.setGameTimer(),this.isMyTurn&&!this.countdownBtnClass&&(this.countdownBtnClass="btn-success")}ngOnDestroy(){this.gameTimer&&clearInterval(this.gameTimer),this.subscriptions.forEach(t=>t.unsubscribe())}get isPlayer1(){return this.playerStore.isPlayer1}initializeSubscriptions(){this.subscriptions.push(this.playStore.player$.subscribe(t=>{t&&t.number===this.player?.number&&this.restartTimer()})),this.subscriptions.push(this.playerStore.player$.subscribe(t=>{this.player=t,this.isMyTurn&&!this.countdownBtnClass&&(this.countdownBtnClass="btn-success")})),this.subscriptions.push(this.gameStore.game$.subscribe(t=>{t&&this.game?.turnTimeInSeconds!==t.turnTimeInSeconds&&this.setPlayerTurnCountdownConfig(t.turnTimeInSeconds),this.game=t}))}setGameTimer(){this.gameTimer=setInterval(()=>{this.gameStore.isGameOver()&&(this.stopTimer(),this.view=this.views.gameOver,this.playStore.gameOver())},1e3)}setPlayerTurnCountdownConfig(t=60){this.playerTurnCountdownConfig&&(this.playerTurnCountdownConfig.leftTime=t)}newGame(){this.game=new wU,this.view=this.views.editGame}joinGame(){this.view=this.views.joinGame}back(){switch(this.view){case this.views.joinGame:this.goHome();break;case this.views.editGame:this.view=this.views.landing,this.player=null,this.game=null;break;case this.views.selectPlayer:this.view=this.views.editGame;break;case this.views.editPlayer:this.view=this.views.selectPlayer,this.player=null}}next(){switch(this.view){case this.views.editGame:if(this.game){const t=this.game.playerCount-this.game.players.length;for(let i=0;i<t;i++)this.game.addPlayer();this.setPlayerTurnCountdownConfig(this.game.turnTimeInSeconds),this.game.key?this.gameStore.updateGame(this.game):this.gameStore.createGame(this.game)}this.view=this.views.selectPlayer;break;case this.views.joinGame:this.gameStore.findGame$(this.gameCode).subscribe(t=>{t?(this.invalidGameCode=!1,this.game=t,this.view=this.views.selectPlayer):this.invalidGameCode=!0});break;case this.views.selectPlayer:this.view=this.views.editPlayer;break;case this.views.editPlayer:this.playerStore.updatePlayer(this.player),this.view=this.views.playGame}}get showStartGameBtn(){return this.isPlayer1&&!this.game?.inProgress}startGame(){this.timerOn=!0,this.playStore.startGame(),this.soundStore.playDjAirhorn()}endTurn(){this.stopTimer(),this.playStore.nextPlayer((this.game?.turnTimeInSeconds??0)-(this.playerTurnCountdown?.left??0)/1e3)}pauseTurn(){this.timerOn=!1,this.playerTurnCountdown?.pause(),this.player&&(this.player.turnTimeInSeconds=(this.playerTurnCountdown?.left??0)/1e3,this.playerStore.updatePlayer(this.player))}resumeTurn(){this.timerOn=!0,this.playerTurnCountdown?.resume()}restartTimer(){this.countdownBtnClass="btn-success",this.playerTurnCountdown?.restart(),this.playerTurnCountdown?.begin(),this.timerOn=!0}stopTimer(){this.playerTurnCountdown?.stop(),this.timerOn=!1}countdownAction(t){"notify"===t.action?(this.player?.myTurn&&t.left/1e3==10&&this.soundStore.playTenSeconds(),t.left/1e3==5&&(this.countdownBtnClass="btn-warning")):"done"===t.action&&(this.countdownBtnClass="btn-danger",this.player?.myTurn&&this.soundStore.playBuzzer(),this.endTurn())}goHome(){this.stopTimer(),this.view=this.views.landing,this.gameCode="",this.invalidGameCode=!1,this.player=null,this.playerStore.player=this.player,this.playStore.player=this.player,this.game=null,this.gameStore.game=this.game,this.playStore.game=this.game}gameClicked(){this.gameStore.isGameOver()||(this.view=this.view!==this.views.playGame?this.views.playGame:this.views.editGame)}playerClicked(){this.gameStore.isGameOver()||(this.view=this.view!==this.views.playGame?this.views.playGame:this.views.selectPlayer)}get currentPlayer(){return this.playStore.player}get isMyTurn(){return this.currentPlayer?this.currentPlayer?.number===this.player?.number:this.isPlayer1}get currentPlayerName(){return this.currentPlayer?.name||"Player "+(this.currentPlayer?.number??"1")}get totalTurnTimeRemaining(){if(this.player?.totalTurnTimeRemainingInSeconds){const t=Math.floor(this.player.totalTurnTimeRemainingInSeconds/60);return`${t}m ${this.player.totalTurnTimeRemainingInSeconds-60*t}s`}return""}static#e=this.\u0275fac=function(i){return new(i||n)(V(QH),V(Cw),V(JH),V(XH))};static#t=this.\u0275cmp=mr({type:n,selectors:[["app-root"]],viewQuery:function(i,r){if(1&i&&fc(vpe,5),2&i){let s;rn(s=sn())&&(r.playerTurnCountdown=s.first)}},decls:21,vars:12,consts:[[1,"container-sm","vh-100"],[1,"position-sticky","top-0","d-flex","justify-content-between"],[1,"bi","bi-house-door-fill",3,"click"],["class","m-1",4,"ngIf"],[4,"ngIf"],[3,"color","click",4,"ngIf"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[3,"ngbNavItem",4,"ngIf"],[1,"h-75",3,"ngbNavOutlet"],[1,"m-1"],[3,"click"],[1,"bi","bi-person-arms-up"],[1,"d-flex","flex-column","justify-content-center","h-100"],["type","button",1,"btn","btn-primary","btn-xl",3,"click"],["type","button",1,"btn","btn-secondary","btn-xl","mt-5",3,"click"],[1,"d-flex","flex-column","justify-content-evenly","h-100"],[1,"input-group","input-group-lg","mt-2"],["id","inputGroup-sizing-lg",1,"input-group-text"],["type","text","aria-label","Sizing example input","aria-describedby","inputGroup-sizing-lg",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-link",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","text","aria-label","Sizing example input","aria-describedby","inputGroup-sizing-lg",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"color",4,"ngIf"],["class","mb-2",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-link","btn-lg",3,"click"],["type","button",1,"btn","btn-success","btn-lg",3,"click"],[1,"mb-2"],["type","radio","name","btnradio","autocomplete","off",1,"btn-check",3,"ngModel","value","id","ngModelChange"],[1,"btn","btn-outline-primary","btn-lg",3,"for"],[1,"input-group","input-group-lg"],["type","color","aria-label","Sizing example input","aria-describedby","inputGroup-sizing-lg",1,"form-control","h-100",3,"ngModel","ngModelChange"],[1,"row"],["type","button","class","btn btn-success btn-xl",3,"click",4,"ngIf"],["type","button",1,"btn","timer",3,"hidden","ngClass","disabled","click"],[3,"config","event"],["playerTurnCountdown",""],["class","row",4,"ngIf"],["class","text-center mt-5",4,"ngIf"],[1,"d-flex","justify-content-center"],["class","bi bi-person-arms-up",3,"fs-1","color",4,"ngFor","ngForOf"],[1,"col","h4","text-center"],["type","button",1,"btn","btn-success","btn-xl",3,"click"],[1,"bi","mt-5","justify-content-around","d-flex","bi-pause-circle-fill",3,"click"],[1,"text-center","mt-5"],[1,"h4"],[1,"h5"],[1,"text-center"]],template:function(i,r){if(1&i&&(_e(0,"div",0)(1,"h3",1)(2,"span")(3,"span",2),We("click",function(){return r.goHome()}),pe(),ke(4,bpe,2,0,"span",3),ke(5,Epe,4,1,"span",4),pe(),ke(6,wpe,3,5,"span",5),pe(),_e(7,"ul",6,7),We("activeIdChange",function(o){return r.view=o}),_e(9,"li",8),ke(10,Tpe,5,0,"ng-template",9),pe(),ke(11,Cpe,2,1,"li",10),_e(12,"li",8),ke(13,Dpe,12,2,"ng-template",9),pe(),ke(14,Npe,2,1,"li",10),ke(15,Ppe,2,1,"li",10),_e(16,"li",8),ke(17,Upe,13,8,"ng-template",9),pe(),_e(18,"li",8),ke(19,jpe,9,2,"ng-template",9),pe()(),os(20,"div",11),pe()),2&i){const s=function Ao(n){return function Jl(n,e){return n[e]}(function wC(){return it.lFrame.contextLView}(),It+n)}(8);ge(4),me("ngIf",r.game),ge(1),me("ngIf",r.game),ge(1),me("ngIf",r.player),ge(1),me("activeId",r.view),ge(2),me("ngbNavItem",r.views.landing),ge(2),me("ngIf",r.game),ge(1),me("ngbNavItem",r.views.joinGame),ge(2),me("ngIf",r.game),ge(1),me("ngIf",r.player),ge(1),me("ngbNavItem",r.views.playGame),ge(2),me("ngbNavItem",r.views.gameOver),ge(2),me("ngbNavOutlet",s)}},dependencies:[jV,_l,yl,Dw,LR,C$,FR,o3,bN,Id,vp,D4,A4]})}return n})();function wN(){return n=>n.lift(new $pe)}class $pe{call(e,t){return t.subscribe(new Gpe(e))}}class Gpe extends I{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Be,zpe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zo={},TN=TN||{},ht=zpe||self;function rT(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ly(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var IN="closure_uid_"+(1e9*Math.random()>>>0),qpe=0;function Kpe(n,e,t){return n.call.apply(n.bind,arguments)}function Zpe(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Tr(n,e,t){return(Tr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kpe:Zpe).apply(null,arguments)}function sT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Hi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Bc(){this.s=this.s,this.o=this.o}Bc.prototype.s=!1,Bc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Wpe(n){Object.prototype.hasOwnProperty.call(n,IN)&&n[IN]||(n[IN]=++qpe)}(this)},Bc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const K4=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function CN(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function Z4(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(rT(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function Ir(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ir.prototype.h=function(){this.defaultPrevented=!0};var Qpe=function(){if(!ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};ht.addEventListener("test",t,e),ht.removeEventListener("test",t,e)}catch{}return n}();function cy(n){return/^[\s\xa0]*$/.test(n)}function oT(){var n=ht.navigator;return n&&(n=n.userAgent)?n:""}function Ca(n){return-1!=oT().indexOf(n)}function SN(n){return SN[" "](n),n}SN[" "]=function(){};var AN,Xpe=Ca("Opera"),bp=Ca("Trident")||Ca("MSIE"),Y4=Ca("Edge"),DN=Y4||bp,Q4=Ca("Gecko")&&!(-1!=oT().toLowerCase().indexOf("webkit")&&!Ca("Edge"))&&!(Ca("Trident")||Ca("MSIE"))&&!Ca("Edge"),ege=-1!=oT().toLowerCase().indexOf("webkit")&&!Ca("Edge");function J4(){var n=ht.document;return n?n.documentMode:void 0}e:{var RN="",NN=function(){var n=oT();return Q4?/rv:([^\);]+)(\)|;)/.exec(n):Y4?/Edge\/([\d\.]+)/.exec(n):bp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ege?/WebKit\/(\S+)/.exec(n):Xpe?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(NN&&(RN=NN?NN[1]:""),bp){var xN=J4();if(null!=xN&&xN>parseFloat(RN)){AN=String(xN);break e}}AN=RN}var tge=ht.document&&bp&&(J4()||parseInt(AN,10))||void 0;function uy(n,e){if(Ir.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Q4){e:{try{SN(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:nge[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&uy.$.h.call(this)}}Hi(uy,Ir);var nge={2:"touch",3:"pen",4:"mouse"};uy.prototype.h=function(){uy.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var dy="closure_listenable_"+(1e6*Math.random()|0),ige=0;function rge(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++ige,this.fa=this.ia=!1}function aT(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function ON(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function eG(n){const e={};for(const t in n)e[t]=n[t];return e}const tG="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nG(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<tG.length;s++)t=tG[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function lT(n){this.src=n,this.g={},this.h=0}function MN(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=K4(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(aT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kN(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}lT.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=kN(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new rge(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var FN="closure_lm_"+(1e6*Math.random()|0),LN={};function iG(n,e,t,i,r){if(i&&i.once)return sG(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)iG(n,e[s],t,i,r);return null}return t=jN(t),n&&n[dy]?n.O(e,t,ly(i)?!!i.capture:!!i,r):rG(n,e,t,!1,i,r)}function rG(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=ly(r)?!!r.capture:!!r,a=BN(n);if(a||(n[FN]=a=new lT(n)),(t=a.add(e,t,i,o,s)).proxy)return t;if(i=function oge(){const e=age;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)Qpe||(r=o),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(aG(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function sG(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)sG(n,e[s],t,i,r);return null}return t=jN(t),n&&n[dy]?n.P(e,t,ly(i)?!!i.capture:!!i,r):rG(n,e,t,!0,i,r)}function oG(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)oG(n,e[s],t,i,r);else i=ly(i)?!!i.capture:!!i,t=jN(t),n&&n[dy]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kN(s=n.g[e],t,i,r))&&(aT(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=BN(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kN(e,t,i,r)),(t=-1<n?e[n]:null)&&VN(t))}function VN(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[dy])MN(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(aG(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=BN(e))?(MN(t,n),0==t.h&&(t.src=null,e[FN]=null)):aT(n)}}}function aG(n){return n in LN?LN[n]:LN[n]="on"+n}function age(n,e){if(n.fa)n=!0;else{e=new uy(e,this);var t=n.listener,i=n.la||n.src;n.ia&&VN(n),n=t.call(i,e)}return n}function BN(n){return(n=n[FN])instanceof lT?n:null}var UN="__closure_events_fn_"+(1e9*Math.random()>>>0);function jN(n){return"function"==typeof n?n:(n[UN]||(n[UN]=function(e){return n.handleEvent(e)}),n[UN])}function $i(){Bc.call(this),this.i=new lT(this),this.S=this,this.J=null}function lr(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new Ir(e,n);else if(e instanceof Ir)e.target=e.target||n;else{var r=e;nG(e=new Ir(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=cT(o,i,!0,e)&&r}if(r=cT(o=e.g=n,i,!0,e)&&r,r=cT(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=cT(o=e.g=t[s],i,!1,e)&&r}function cT(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&MN(n.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}Hi($i,Bc),$i.prototype[dy]=!0,$i.prototype.removeEventListener=function(n,e,t,i){oG(this,n,e,t,i)},$i.prototype.N=function(){if($i.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)aT(t[i]);delete n.g[e],n.h--}}this.J=null},$i.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},$i.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var HN=ht.JSON.stringify;function cge(){var n=$N;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var lG=new class lge{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new dge,n=>n.reset());class dge{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function hge(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function fge(n){ht.setTimeout(()=>{throw n},0)}let hy,fy=!1,$N=new class uge{constructor(){this.h=this.g=null}add(e,t){const i=lG.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},cG=()=>{const n=ht.Promise.resolve(void 0);hy=()=>{n.then(pge)}};var pge=()=>{for(var n;n=cge();){try{n.h.call(n.g)}catch(t){fge(t)}var e=lG;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}fy=!1};function uT(n,e){$i.call(this),this.h=n||1,this.g=e||ht,this.j=Tr(this.qb,this),this.l=Date.now()}function GN(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function zN(n,e,t){if("function"==typeof n)t&&(n=Tr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Tr(n.handleEvent,n)}return 2147483647<Number(e)?-1:ht.setTimeout(n,e||0)}function uG(n){n.g=zN(()=>{n.g=null,n.i&&(n.i=!1,uG(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hi(uT,$i),(Be=uT.prototype).ga=!1,Be.T=null,Be.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),lr(this,"tick"),this.ga&&(GN(this),this.start()))}},Be.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Be.N=function(){uT.$.N.call(this),GN(this),delete this.g};class gge extends Bc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uG(this)}N(){super.N(),this.g&&(ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function py(n){Bc.call(this),this.h=n,this.g={}}Hi(py,Bc);var dG=[];function hG(n,e,t,i){Array.isArray(t)||(t&&(dG[0]=t.toString()),t=dG);for(var r=0;r<t.length;r++){var s=iG(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function fG(n){ON(n.g,function(e,t){this.g.hasOwnProperty(t)&&VN(e)},n),n.g={}}function dT(){this.g=!0}function Ep(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vge(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return HN(t)}catch{return e}}(n,t)+(i?" "+i:"")})}py.prototype.N=function(){py.$.N.call(this),fG(this)},py.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dT.prototype.Ea=function(){this.g=!1},dT.prototype.info=function(){};var Cd={},pG=null;function hT(){return pG=pG||new $i}function gG(n){Ir.call(this,Cd.Ta,n)}function gy(n){const e=hT();lr(e,new gG(e))}function mG(n,e){Ir.call(this,Cd.STAT_EVENT,n),this.stat=e}function Br(n){const e=hT();lr(e,new mG(e,n))}function _G(n,e){Ir.call(this,Cd.Ua,n),this.size=e}function my(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ht.setTimeout(function(){n()},e)}Cd.Ta="serverreachability",Hi(gG,Ir),Cd.STAT_EVENT="statevent",Hi(mG,Ir),Cd.Ua="timingevent",Hi(_G,Ir);var fT={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},yG={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function WN(){}function bG(){}WN.prototype.h=null;var ZN,_y={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qN(){Ir.call(this,"d")}function KN(){Ir.call(this,"c")}function pT(){}function yy(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new py(this),this.P=bge,this.V=new uT(n=DN?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new EG}function EG(){this.i=null,this.g="",this.h=!1}Hi(qN,Ir),Hi(KN,Ir),Hi(pT,WN),pT.prototype.g=function(){return new XMLHttpRequest},pT.prototype.i=function(){return{}},ZN=new pT;var bge=45e3,wG={},YN={};function QN(n,e,t){n.L=1,n.A=yT(Il(e)),n.u=t,n.S=!0,TG(n,null)}function TG(n,e){n.G=Date.now(),vy(n),n.B=Il(n.A);var t=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),OG(t.i,"t",i),n.o=0,t=n.l.J,n.h=new EG,n.g=i5(n.l,t?e:null,!n.u),0<n.O&&(n.M=new gge(Tr(n.Pa,n,n.g),n.O)),hG(n.U,n.g,"readystatechange",n.nb),e=n.I?eG(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),gy(),function mge(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var h=u[0];u=u[1];var g=h.split("_");o=2<=g.length&&"type"==g[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.v,n.B,n.m,n.W,n.u)}function IG(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function CG(n,e,t){let r,i=!0;for(;!n.J&&n.o<t.length;){if(r=Ege(n,t),r==YN){4==e&&(n.s=4,Br(14),i=!1),Ep(n.j,n.m,null,"[Incomplete Response]");break}if(r==wG){n.s=4,Br(15),Ep(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Ep(n.j,n.m,r,null),JN(n,r)}IG(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,Br(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),sx(e),e.M=!0,Br(11))):(Ep(n.j,n.m,t,"[Invalid Chunked Response]"),Sd(n),by(n))}function Ege(n,e){var t=n.o,i=e.indexOf("\n",t);return-1==i?YN:(t=Number(e.substring(t,i)),isNaN(t)?wG:(i+=1)+t>e.length?YN:(e=e.slice(i,i+t),n.o=i+t,e))}function vy(n){n.Y=Date.now()+n.P,SG(n,n.P)}function SG(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=my(Tr(n.lb,n),e)}function gT(n){n.C&&(ht.clearTimeout(n.C),n.C=null)}function by(n){0==n.l.H||n.J||XG(n.l,n)}function Sd(n){gT(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,GN(n.V),fG(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function JN(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||XN(t.i,n)))if(!n.K&&XN(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;IT(t),wT(t)}rx(t),Br(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=my(Tr(t.ib,t),6e3));if(1>=FG(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ad(t,11)}else if((n.K||t.g==n)&&IT(t),!cy(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let u=r[e];if(t.V=u[0],u=u[1],2==t.H)if("c"==u[0]){t.K=u[1],t.pa=u[2];const h=u[3];null!=h&&(t.ra=h,t.l.info("VER="+t.ra));const g=u[4];null!=g&&(t.Ga=g,t.l.info("SVER="+t.Ga));const m=u[5];null!=m&&"number"==typeof m&&0<m&&(t.L=i=1.5*m,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const v=n.g;if(v){const w=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var s=i.i;s.g||-1==w.indexOf("spdy")&&-1==w.indexOf("quic")&&-1==w.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ex(s,s.h),s.h=null))}if(i.F){const S=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(i.Da=S,Fn(i.I,i.F,S))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((i=t).wa=n5(i,i.J?i.pa:null,i.Y),o.K){LG(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(gT(a),vy(a)),i.g=o}else QG(i);0<t.j.length&&TT(t)}else"stop"!=u[0]&&"close"!=u[0]||Ad(t,7);else 3==t.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Ad(t,7):ix(t):"noop"!=u[0]&&t.h&&t.h.Aa(u),t.A=0)}gy()}catch{}}function DG(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(rT(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Tge(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(rT(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function wge(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(rT(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(Be=yy.prototype).setTimeout=function(n){this.P=n},Be.nb=function(n){n=n.target;const e=this.M;e&&3==Sa(n)?e.l():this.Pa(n)},Be.Pa=function(n){try{if(n==this.g)e:{const h=Sa(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||DN||this.g&&(this.h.h||this.g.ja()||zG(this.g)))){this.J||4!=h||7==e||gy(),gT(this);var t=this.g.da();this.ca=t;t:if(IG(this)){var i=zG(this.g);n="";var r=i.length,s=4==Sa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Sd(this),by(this);var o="";break t}this.h.i=new ht.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function _ge(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cy(a)){var u=a;break t}}u=null}if(!(t=u)){this.i=!1,this.s=3,Br(12),Sd(this),by(this);break e}Ep(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,JN(this,t)}this.S?(CG(this,h,o),DN&&this.i&&3==h&&(hG(this.U,this.V,"tick",this.mb),this.V.start())):(Ep(this.j,this.m,o,null),JN(this,o)),4==h&&Sd(this),this.i&&!this.J&&(4==h?XG(this.l,this):(this.i=!1,vy(this)))}else(function jge(n){const e={};n=(n.g&&2<=Sa(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(cy(n[i]))continue;var t=hge(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}!function sge(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.s=3,Br(12)):(this.s=0,Br(13)),Sd(this),by(this)}}}catch{}},Be.mb=function(){if(this.g){var n=Sa(this.g),e=this.g.ja();this.o<e.length&&(gT(this),CG(this,n,e),this.i&&4!=n&&vy(this))}},Be.cancel=function(){this.J=!0,Sd(this)},Be.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function yge(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(gy(),Br(17)),Sd(this),this.s=2,by(this)):SG(this,this.Y-n)};var AG=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dd(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Dd){this.h=n.h,mT(this,n.j),this.s=n.s,this.g=n.g,_T(this,n.m),this.l=n.l;var e=n.i,t=new Ty;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),RG(this,t),this.o=n.o}else n&&(e=String(n).match(AG))?(this.h=!1,mT(this,e[1]||"",!0),this.s=Ey(e[2]||""),this.g=Ey(e[3]||"",!0),_T(this,e[4]),this.l=Ey(e[5]||"",!0),RG(this,e[6]||"",!0),this.o=Ey(e[7]||"")):(this.h=!1,this.i=new Ty(null,this.h))}function Il(n){return new Dd(n)}function mT(n,e,t){n.j=t?Ey(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function _T(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function RG(n,e,t){e instanceof Ty?(n.i=e,function Nge(n,e){e&&!n.j&&(Uc(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(xG(this,i),OG(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=wy(e,Age)),n.i=new Ty(e,n.h))}function Fn(n,e,t){n.i.set(e,t)}function yT(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ey(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function wy(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Cge),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Cge(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Dd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(wy(e,NG,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(wy(e,NG,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(wy(t,"/"==t.charAt(0)?Dge:Sge,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",wy(t,Rge)),n.join("")};var NG=/[#\/\?@]/g,Sge=/[#\?:]/g,Dge=/[#\?]/g,Age=/[#\?@]/g,Rge=/#/g;function Ty(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Uc(n){n.g||(n.g=new Map,n.h=0,n.i&&function Ige(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xG(n,e){Uc(n),e=wp(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function PG(n,e){return Uc(n),e=wp(n,e),n.g.has(e)}function OG(n,e,t){xG(n,e),0<t.length&&(n.i=null,n.g.set(wp(n,e),CN(t)),n.h+=t.length)}function wp(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function MG(n){this.l=n||Pge,n=ht.PerformanceNavigationTiming?0<(n=ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ht.g&&ht.g.Ka&&ht.g.Ka()&&ht.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Be=Ty.prototype).add=function(n,e){Uc(this),this.i=null,n=wp(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Be.forEach=function(n,e){Uc(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},Be.ta=function(){Uc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},Be.Z=function(n){Uc(this);let e=[];if("string"==typeof n)PG(this,n)&&(e=e.concat(this.g.get(wp(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Be.set=function(n,e){return Uc(this),this.i=null,PG(this,n=wp(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Be.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Be.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};var Pge=10;function kG(n){return!!n.h||!!n.g&&n.g.size>=n.j}function FG(n){return n.h?1:n.g?n.g.size:0}function XN(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ex(n,e){n.g?n.g.add(e):n.h=e}function LG(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function VG(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return CN(n.i)}MG.prototype.cancel=function(){if(this.i=VG(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Oge=class{stringify(n){return ht.JSON.stringify(n,void 0)}parse(n){return ht.JSON.parse(n,void 0)}};function Mge(){this.g=new Oge}function kge(n,e,t){const i=t||"";try{DG(n,function(r,s){let o=r;ly(r)&&(o=HN(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function vT(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Iy(n){this.l=n.ec||null,this.j=n.ob||!1}function bT(n,e){$i.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=tx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hi(Iy,WN),Iy.prototype.g=function(){return new bT(this.l,this.j)},Iy.prototype.i=function(n){return function(){return n}}({}),Hi(bT,$i);var tx=0;function BG(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Cy(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Sy(n)}function Sy(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Be=bT.prototype).open=function(n,e){if(this.readyState!=tx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Sy(this)},Be.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||ht).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Be.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cy(this)),this.readyState=tx},Be.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Sy(this)),this.g&&(this.readyState=3,Sy(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ht.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;BG(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Be.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Cy(this):Sy(this),3==this.readyState&&BG(this)}},Be.Za=function(n){this.g&&(this.response=this.responseText=n,Cy(this))},Be.Ya=function(n){this.g&&(this.response=n,Cy(this))},Be.ka=function(){this.g&&Cy(this)},Be.setRequestHeader=function(n,e){this.v.append(n,e)},Be.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Be.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(bT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Lge=ht.JSON.parse;function oi(n){$i.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=UG,this.L=this.M=!1}Hi(oi,$i);var UG="",Vge=/^https?$/i,Bge=["POST","PUT"];function jG(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,HG(n),ET(n)}function HG(n){n.F||(n.F=!0,lr(n,"complete"),lr(n,"error"))}function $G(n){if(n.h&&typeof TN<"u"&&(!n.C[1]||4!=Sa(n)||2!=n.da()))if(n.v&&4==Sa(n))zN(n.La,0,n);else if(lr(n,"readystatechange"),4==Sa(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===o){var r=String(n.I).match(AG)[1]||null;!r&&ht.self&&ht.self.location&&(r=ht.self.location.protocol.slice(0,-1)),i=!Vge.test(r?r.toLowerCase():"")}t=i}if(t)lr(n,"complete"),lr(n,"success");else{n.m=6;try{var s=2<Sa(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",HG(n)}}finally{ET(n)}}}function ET(n,e){if(n.g){GG(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||lr(n,"ready");try{t.onreadystatechange=i}catch{}}}function GG(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(ht.clearTimeout(n.A),n.A=null)}function Sa(n){return n.g?n.g.readyState:0}function zG(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case UG:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function WG(n){let e="";return ON(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function nx(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=WG(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function Dy(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function qG(n){this.Ga=0,this.j=[],this.l=new dT,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Dy("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Dy("baseRetryDelayMs",5e3,n),this.hb=Dy("retryDelaySeedMs",1e4,n),this.eb=Dy("forwardChannelMaxRetries",2,n),this.xa=Dy("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new MG(n&&n.concurrentRequestLimit),this.Ja=new Mge,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ix(n){if(KG(n),3==n.H){var e=n.W++,t=Il(n.I);if(Fn(t,"SID",n.K),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),Ay(n,t),(e=new yy(n,n.l,e)).L=2,e.A=yT(Il(t)),t=!1,ht.navigator&&ht.navigator.sendBeacon)try{t=ht.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&ht.Image&&((new Image).src=e.A,t=!0),t||(e.g=i5(e.l,null),e.g.ha(e.A)),e.G=Date.now(),vy(e)}t5(n)}function wT(n){n.g&&(sx(n),n.g.cancel(),n.g=null)}function KG(n){wT(n),n.u&&(ht.clearTimeout(n.u),n.u=null),IT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ht.clearTimeout(n.m),n.m=null)}function TT(n){if(!kG(n.i)&&!n.m){n.m=!0;var e=n.Na;hy||cG(),fy||(hy(),fy=!0),$N.add(e,n),n.C=0}}function ZG(n,e){var t;t=e?e.m:n.W++;const i=Il(n.I);Fn(i,"SID",n.K),Fn(i,"RID",t),Fn(i,"AID",n.V),Ay(n,i),n.o&&n.s&&nx(i,n.o,n.s),t=new yy(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=YG(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),ex(n.i,t),QN(t,i,e)}function Ay(n,e){n.na&&ON(n.na,function(t,i){Fn(e,i,t)}),n.h&&DG({},function(t,i){Fn(e,i,t)})}function YG(n,e,t){t=Math.min(n.j.length,t);var i=n.h?Tr(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let u=r[l].g;const h=r[l].map;if(u-=s,0>u)s=Math.max(0,r[l].g-100),a=!1;else try{kge(h,o,"req"+u+"_")}catch{i&&i(h)}}if(a){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function QG(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;hy||cG(),fy||(hy(),fy=!0),$N.add(e,n),n.A=0}}function rx(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=my(Tr(n.Ma,n),e5(n,n.A)),n.A++,0))}function sx(n){null!=n.B&&(ht.clearTimeout(n.B),n.B=null)}function JG(n){n.g=new yy(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Il(n.wa);Fn(e,"RID","rpc"),Fn(e,"SID",n.K),Fn(e,"AID",n.V),Fn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Fn(e,"TO",n.qa),Fn(e,"TYPE","xmlhttp"),Ay(n,e),n.o&&n.s&&nx(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=yT(Il(e)),t.u=null,t.S=!0,TG(t,n)}function IT(n){null!=n.v&&(ht.clearTimeout(n.v),n.v=null)}function XG(n,e){var t=null;if(n.g==e){IT(n),sx(n),n.g=null;var i=2}else{if(!XN(n.i,e))return;t=e.F,LG(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.u?e.u.length:0,e=Date.now()-e.G;var r=n.C;lr(i=hT(),new _G(i,t)),TT(n)}else QG(n);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function Hge(n,e){return!(FG(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=my(Tr(n.Na,n,e),e5(n,n.C)),n.C++,0)))}(n,e)||2==i&&rx(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:Ad(n,5);break;case 4:Ad(n,10);break;case 3:Ad(n,6);break;default:Ad(n,2)}}function e5(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ad(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=Tr(n.pb,n);t||(t=new Dd("//www.google.com/images/cleardot.gif"),ht.location&&"http"==ht.location.protocol||mT(t,"https"),yT(t)),function Fge(n,e){const t=new dT;if(ht.Image){const i=new Image;i.onload=sT(vT,t,i,"TestLoadImage: loaded",!0,e),i.onerror=sT(vT,t,i,"TestLoadImage: error",!1,e),i.onabort=sT(vT,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=sT(vT,t,i,"TestLoadImage: timeout",!1,e),ht.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Br(2);n.H=0,n.h&&n.h.za(e),t5(n),KG(n)}function t5(n){if(n.H=0,n.ma=[],n.h){const e=VG(n.i);(0!=e.length||0!=n.j.length)&&(Z4(n.ma,e),Z4(n.ma,n.j),n.i.i.length=0,CN(n.j),n.j.length=0),n.h.ya()}}function n5(n,e,t){var i=t instanceof Dd?Il(t):new Dd(t);if(""!=i.g)e&&(i.g=e+"."+i.g),_T(i,i.m);else{var r=ht.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Dd(null);i&&mT(s,i),e&&(s.g=e),r&&_T(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&Fn(i,t,e),Fn(i,"VER",n.ra),Ay(n,i),i}function i5(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new oi(n.Ha&&!n.va?new Iy({ob:t}):n.va)).Oa(n.J),e}function r5(){}function CT(){if(bp&&!(10<=Number(tge)))throw Error("Environmental error: no available transport.")}function ks(n,e){$i.call(this),this.g=new qG(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!cy(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cy(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Tp(this)}function s5(n){qN.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function o5(){KN.call(this),this.status=1}function Tp(n){this.g=n}function Wo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ox(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;o=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function dn(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}(Be=oi.prototype).Oa=function(n){this.M=n},Be.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ZN.g(),this.C=function vG(n){return n.h||(n.h=n.i())}(this.u?this.u:ZN),this.g.onreadystatechange=Tr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void jG(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=ht.FormData&&n instanceof ht.FormData,!(0<=K4(Bge,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{GG(this),0<this.B&&((this.L=function Uge(n){return bp&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tr(this.ua,this)):this.A=zN(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){jG(this,s)}},Be.ua=function(){typeof TN<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,lr(this,"timeout"),this.abort(8))},Be.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,lr(this,"complete"),lr(this,"abort"),ET(this))},Be.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ET(this,!0)),oi.$.N.call(this)},Be.La=function(){this.s||(this.G||this.v||this.l?$G(this):this.kb())},Be.kb=function(){$G(this)},Be.isActive=function(){return!!this.g},Be.da=function(){try{return 2<Sa(this)?this.g.status:-1}catch{return-1}},Be.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Be.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Lge(e)}},Be.Ia=function(){return this.m},Be.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Be=qG.prototype).ra=8,Be.H=1,Be.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new yy(this,this.l,n);let s=this.s;if(this.U&&(s?(s=eG(s),nG(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=YG(this,r,e),Fn(t=Il(this.I),"RID",n),Fn(t,"CVER",22),this.F&&Fn(t,"X-HTTP-Session-Id",this.F),Ay(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(WG(s)))+"&"+e:this.o&&nx(t,this.o,s)),ex(this.i,r),this.bb&&Fn(t,"TYPE","init"),this.P?(Fn(t,"$req",e),Fn(t,"SID","null"),r.aa=!0,QN(r,t,null)):QN(r,t,e),this.H=2}}else 3==this.H&&(n?ZG(this,n):0==this.j.length||kG(this.i)||ZG(this))},Be.Ma=function(){if(this.u=null,JG(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=my(Tr(this.jb,this),n)}},Be.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Br(10),wT(this),JG(this))},Be.ib=function(){null!=this.v&&(this.v=null,wT(this),rx(this),Br(19))},Be.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Br(2)):(this.l.info("Failed to ping google.com"),Br(1))},Be.isActive=function(){return!!this.h&&this.h.isActive(this)},(Be=r5.prototype).Ba=function(){},Be.Aa=function(){},Be.za=function(){},Be.ya=function(){},Be.isActive=function(){return!0},Be.Va=function(){},CT.prototype.g=function(n,e){return new ks(n,e)},Hi(ks,$i),ks.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Br(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=n5(n,null,n.Y),TT(n)},ks.prototype.close=function(){ix(this.g)},ks.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=HN(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&TT(e)},ks.prototype.N=function(){this.g.h=null,delete this.j,ix(this.g),delete this.g,ks.$.N.call(this)},Hi(s5,qN),Hi(o5,KN),Hi(Tp,r5),Tp.prototype.Ba=function(){lr(this.g,"a")},Tp.prototype.Aa=function(n){lr(this.g,new s5(n))},Tp.prototype.za=function(n){lr(this.g,new o5)},Tp.prototype.ya=function(){lr(this.g,"b")},Hi(Wo,function $ge(){this.blockSize=-1}),Wo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Wo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)ox(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){ox(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){ox(this,i),r=0;break}}this.h=r,this.i+=e},Wo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var Gge={};function ax(n){return-128<=n&&128>n?function Jpe(n,e){var t=Gge;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new dn([0|e],0>e?-1:0)}):new dn([0|n],0>n?-1:0)}function Da(n){if(isNaN(n)||!isFinite(n))return Ip;if(0>n)return cr(Da(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=lx;return new dn(e,0)}var lx=4294967296,Ip=ax(0),cx=ax(1),l5=ax(16777216);function Cl(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function uo(n){return-1==n.h}function cr(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new dn(t,~n.h).add(cx)}function ST(n,e){return n.add(cr(e))}function DT(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ry(n,e){this.g=n,this.h=e}function AT(n,e){if(Cl(e))throw Error("division by zero");if(Cl(n))return new Ry(Ip,Ip);if(uo(n))return e=AT(cr(n),e),new Ry(cr(e.g),cr(e.h));if(uo(e))return e=AT(n,cr(e)),new Ry(cr(e.g),e.h);if(30<n.g.length){if(uo(n)||uo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=cx,i=e;0>=i.X(n);)t=c5(t),i=c5(i);var r=Cp(t,1),s=Cp(i,1);for(i=Cp(i,2),t=Cp(t,2);!Cl(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=Cp(i,1),t=Cp(t,1)}return e=ST(n,r.R(e)),new Ry(r,e)}for(r=Ip;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Da(t)).R(e);uo(o)||0<o.X(n);)o=(s=Da(t-=i)).R(e);Cl(s)&&(s=cx),r=r.add(s),n=ST(n,o)}return new Ry(r,n)}function c5(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new dn(t,n.h)}function Cp(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new dn(r,n.h)}(Be=dn.prototype).ea=function(){if(uo(this))return-cr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:lx+i)*e,e*=lx}return n},Be.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Cl(this))return"0";if(uo(this))return"-"+cr(this).toString(n);for(var e=Da(Math.pow(n,6)),t=this,i="";;){var r=AT(t,e).g,s=((0<(t=ST(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Cl(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Be.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Be.X=function(n){return uo(n=ST(this,n))?-1:Cl(n)?0:1},Be.abs=function(){return uo(this)?cr(this):this},Be.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,t[r]=(o&=65535)<<16|(s&=65535)}return new dn(t,-2147483648&t[t.length-1]?-1:0)},Be.R=function(n){if(Cl(this)||Cl(n))return Ip;if(uo(this))return uo(n)?cr(this).R(cr(n)):cr(cr(this).R(n));if(uo(n))return cr(this.R(cr(n)));if(0>this.X(l5)&&0>n.X(l5))return Da(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=n.D(r)>>>16,l=65535&n.D(r);t[2*i+2*r]+=o*l,DT(t,2*i+2*r),t[2*i+2*r+1]+=s*l,DT(t,2*i+2*r+1),t[2*i+2*r+1]+=o*a,DT(t,2*i+2*r+1),t[2*i+2*r+2]+=s*a,DT(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new dn(t,0)},Be.gb=function(n){return AT(this,n).h},Be.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new dn(t,this.h&n.h)},Be.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new dn(t,this.h|n.h)},Be.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new dn(t,this.h^n.h)},CT.prototype.createWebChannel=CT.prototype.g,ks.prototype.send=ks.prototype.u,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,fT.NO_ERROR=0,fT.TIMEOUT=8,fT.HTTP_ERROR=6,yG.COMPLETE="complete",bG.EventType=_y,_y.OPEN="a",_y.CLOSE="b",_y.ERROR="c",_y.MESSAGE="d",$i.prototype.listen=$i.prototype.O,oi.prototype.listenOnce=oi.prototype.P,oi.prototype.getLastError=oi.prototype.Sa,oi.prototype.getLastErrorCode=oi.prototype.Ia,oi.prototype.getStatus=oi.prototype.da,oi.prototype.getResponseJson=oi.prototype.Wa,oi.prototype.getResponseText=oi.prototype.ja,oi.prototype.send=oi.prototype.ha,oi.prototype.setWithCredentials=oi.prototype.Oa,Wo.prototype.digest=Wo.prototype.l,Wo.prototype.reset=Wo.prototype.reset,Wo.prototype.update=Wo.prototype.j,dn.prototype.add=dn.prototype.add,dn.prototype.multiply=dn.prototype.R,dn.prototype.modulo=dn.prototype.gb,dn.prototype.compare=dn.prototype.X,dn.prototype.toNumber=dn.prototype.ea,dn.prototype.toString=dn.prototype.toString,dn.prototype.getBits=dn.prototype.D,dn.fromNumber=Da,dn.fromString=function a5(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return cr(a5(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Da(Math.pow(e,8)),i=Ip,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=Da(Math.pow(e,s)),i=i.R(s).add(Da(o))):i=(i=i.R(t)).add(Da(o))}return i};var zge=zo.createWebChannelTransport=function(){return new CT},Wge=zo.getStatEventTarget=function(){return hT()},ux=zo.ErrorCode=fT,qge=zo.EventType=yG,Kge=zo.Event=Cd,u5=zo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},RT=(zo.FetchXmlHttpFactory=Iy,zo.WebChannel=bG),Zge=zo.XhrIo=oi,Yge=zo.Md5=Wo,Sp=zo.Integer=dn;const d5="@firebase/firestore";class Gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gi.UNAUTHENTICATED=new Gi(null),Gi.GOOGLE_CREDENTIALS=new Gi("google-credentials-uid"),Gi.FIRST_PARTY=new Gi("first-party-uid"),Gi.MOCK_USER=new Gi("mock-user");let Dp="10.7.0";const jc=new Rs.Yd("@firebase/firestore");function Ap(){return jc.logLevel}function fe(n,...e){if(jc.logLevel<=Rs.in.DEBUG){const t=e.map(dx);jc.debug(`Firestore (${Dp}): ${n}`,...t)}}function gi(n,...e){if(jc.logLevel<=Rs.in.ERROR){const t=e.map(dx);jc.error(`Firestore (${Dp}): ${n}`,...t)}}function ms(n,...e){if(jc.logLevel<=Rs.in.WARN){const t=e.map(dx);jc.warn(`Firestore (${Dp}): ${n}`,...t)}}function dx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function He(n="Unexpected state"){const e=`FIRESTORE (${Dp}) INTERNAL ASSERTION FAILED: `+n;throw gi(e),new Error(e)}function qe(n,e){n||He()}function Pe(n,e){return n}const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends C.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class h5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xge{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gi.UNAUTHENTICATED))}shutdown(){}}class eme{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tme{constructor(e){this.t=e,this.currentUser=Gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let o=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Oi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,ie.Z)(function*(){yield u.promise,yield s(i.currentUser)}))},l=u=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Oi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qe("string"==typeof i.accessToken),new h5(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qe(null===e||"string"==typeof e),new Gi(e)}}class nme{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Gi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ime{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new nme(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rme{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=s=>{null!=s.error&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qe("string"==typeof t.token),this.R=t.token,new f5(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function sme(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class p5{static newId(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=sme(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function ut(n,e){return n<e?-1:n>e?1:0}function Rp(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function g5(n){return n+"\0"}class zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new de(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zn.fromMillis(Date.now())}static fromDate(e){return zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new zn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ze{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new zn(0,0))}static max(){return new Ze(new zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ny{constructor(e,t,i){void 0===t?t=0:t>e.length&&He(),void 0===i?i=e.length-t:i>e.length-t&&He(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Ny.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ny?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zt extends Ny{construct(e,t,i){return new zt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const ome=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends Ny{construct(e,t,i){return new Ln(e,t,i)}static isValidIdentifier(e){return ome.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ln(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new de(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new de(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new de(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new de(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ln(t)}static emptyPath(){return new Ln([])}}class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(zt.fromString(e))}static fromName(e){return new Oe(zt.fromString(e).popFirst(5))}static empty(){return new Oe(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new zt(e.slice()))}}class Np{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function hx(n){return n.fields.find(e=>2===e.kind)}function Rd(n){return n.fields.filter(e=>2!==e.kind)}Np.UNKNOWN_ID=-1;class Nd{constructor(e,t){this.fieldPath=e,this.kind=t}}class xp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xp(0,Fs.min())}}function m5(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ze.fromTimestamp(1e9===i?new zn(t+1,0):new zn(t,i));return new Fs(r,Oe.empty(),e)}function _5(n){return new Fs(n.readTime,n.key,-1)}class Fs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Fs(Ze.min(),Oe.empty(),-1)}static max(){return new Fs(Ze.max(),Oe.empty(),-1)}}function fx(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Oe.comparator(n.documentKey,e.documentKey),0!==t?t:ut(n.largestBatchId,e.largestBatchId))}const y5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Hc(n){return px.apply(this,arguments)}function px(){return px=(0,ie.Z)(function*(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==y5)throw n;fe("LocalStore","Unexpectedly lost primary lease")}),px.apply(this,arguments)}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,i)=>{t(e)})}static reject(e){return new G((t,i)=>{i(e)})}static waitFor(e){return new G((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next(r=>r?G.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new G((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(h=>{o[u]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,t){return new G((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class NT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Oi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new xy(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=gx(i.target.error);this.V.reject(new xy(e,r))}}static open(e,t,i,r){try{return new NT(t,e.transaction(r,i))}catch(s){throw new xy(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ume(t)}}class qo{constructor(e,t,i){this.name=e,this.version=t,this.p=i,12.2===qo.S((0,C.z$)())&&gi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return fe("SimpleDb","Removing database:",e),xd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,C.hl)())return!1;if(qo.C())return!0;const e=(0,C.z$)(),t=qo.S(e),i=0<t&&t<10,r=qo.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){var t=this;return(0,ie.Z)(function*(){return t.db||(fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new xy(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;r("VersionError"===a.name?new de(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new de(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new xy(e,a))},s.onupgradeneeded=o=>{fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.N(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,ie.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.O(e);const l=NT.open(s.db,e,o?"readonly":"readwrite",i),u=r(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),G.reject(h))).toPromise();return u.catch(()=>{}),yield l.m,u}catch(l){const u=l,h="FirebaseError"!==u.name&&a<3;if(fe("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),s.close(),!h)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class cme{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return xd(this.k.delete())}}class xy extends de{constructor(e,t){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $c(n){return"IndexedDbTransactionError"===n.name}class ume{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(fe("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),xd(i)}add(e){return fe("SimpleDb","ADD",this.store.name,e,e),xd(this.store.add(e))}get(e){return xd(this.store.get(e)).next(t=>(void 0===t&&(t=null),fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return fe("SimpleDb","DELETE",this.store.name,e),xd(this.store.delete(e))}count(){return fe("SimpleDb","COUNT",this.store.name),xd(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.G(r,(o,a)=>{s.push(a)}).next(()=>s)}{const r=this.store.getAll(i.range);return new G((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}j(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new G((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,t){fe("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.J=!1;const r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.G(r,t)}Z(e){const t=this.cursor({});return new G((i,r)=>{t.onerror=s=>{const o=gx(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,t){const i=[];return new G((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new cme(a),u=t(a.primaryKey,a.value,l);if(u instanceof G){const h=u.catch(g=>(l.done(),G.reject(g)));i.push(h)}l.isDone?r():null===l.$?a.continue():a.continue(l.$)}}).next(()=>G.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xd(n){return new G((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=gx(i.target.error);t(r)}})}let b5=!1;function gx(n){const e=qo.S((0,C.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return b5||(b5=!0,setTimeout(()=>{throw i},0)),i}}return n}class dme{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ie.Z)(function*(){t.task=null;try{fe("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(i){$c(i)?fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Hc(i)}yield t.ee(6e4)}))}}class hme{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.ne(i,e))})()}ne(e,t){const i=new Set;let r=t,s=!0;return G.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!i.has(o))return fe("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}re(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(r,s)).next(a=>(fe("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let i=e;return t.changes.forEach((r,s)=>{const o=_5(s);fx(o,i)>0&&(i=o)}),new Fs(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ls=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function Py(n){return null==n}function Oy(n){return 0===n&&1/n==-1/0}function E5(n){return"number"==typeof n&&Number.isInteger(n)&&!Oy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Cr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=w5(e)),e=fme(n.get(t),e);return w5(e)}function fme(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function w5(n){return n+"\x01\x01"}function Aa(n){const e=n.length;if(qe(e>=2),2===e)return qe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),zt.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&He(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:He()}s=o+2}return new zt(i)}const T5=["userId","batchId"];function xT(n,e){return[n,Cr(e)]}function I5(n,e,t){return[n,Cr(e),t]}const pme={},gme=["prefixPath","collectionGroup","readTime","documentId"],mme=["prefixPath","collectionGroup","documentId"],_me=["collectionGroup","readTime","prefixPath","documentId"],yme=["canonicalId","targetId"],vme=["targetId","path"],bme=["path","targetId"],Eme=["collectionId","parent"],wme=["indexId","uid"],Tme=["uid","sequenceNumber"],Ime=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cme=["indexId","uid","orderedDocumentKey"],Sme=["userId","collectionPath","documentId"],Dme=["userId","collectionPath","largestBatchId"],Ame=["userId","collectionGroup","largestBatchId"],C5=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Rme=[...C5,"documentOverlays"],S5=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],D5=S5,Nme=[...D5,"indexConfiguration","indexState","indexEntries"];class mx extends v5{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function zi(n,e){const t=Pe(n);return qo.M(t.ae,e)}function A5(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function R5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Rn{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new Rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new Rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new PT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new PT(this.root,e,this.comparator,!1)}getReverseIterator(){return new PT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new PT(this.root,e,this.comparator,!0)}}class PT{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??ur.RED,this.left=r??ur.EMPTY,this.right=s??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new ur(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ur.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw He();const e=this.left.check();if(e!==this.right.check())throw He();return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1,ur.EMPTY=new class{constructor(){this.size=0}get key(){throw He()}get value(){throw He()}get color(){throw He()}get left(){throw He()}get right(){throw He()}copy(e,t,i,r,s){return this}insert(e,t,i){return new ur(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new Rn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new N5(this.data.getIterator())}getIteratorFrom(e){return new N5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class N5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pp(n){return n.hasNext()?n.getNext():void 0}class _s{constructor(e){this.fields=e,e.sort(Ln.comparator)}static empty(){return new _s([])}unionWith(e){let t=new mn(Ln.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new _s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rp(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class x5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new x5("Invalid base64 string: "+s):s}}(e);return new Mi(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new Mi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mi.EMPTY_BYTE_STRING=new Mi("");const Pme=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zc(n){if(qe(!!n),"string"==typeof n){let e=0;const t=Pme.exec(n);if(qe(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ai(n.seconds),nanos:ai(n.nanos)}}function ai(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Sl(n){return"string"==typeof n?Mi.fromBase64String(n):Mi.fromUint8Array(n)}function OT(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function MT(n){const e=n.mapValue.fields.__previous_value__;return OT(e)?MT(e):e}function My(n){const e=zc(n.mapValue.fields.__local_write_time__.timestampValue);return new zn(e.seconds,e.nanos)}class Ome{constructor(e,t,i,r,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Wc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wc&&e.projectId===this.projectId&&e.database===this.database}}const qc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kT={nullValue:"NULL_VALUE"};function Kc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?OT(n)?4:k5(n)?9007199254740991:10:He()}function Ra(n,e){if(n===e)return!0;const t=Kc(n);if(t!==Kc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return My(n).isEqual(My(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=zc(r.timestampValue),a=zc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Sl(n.bytesValue).isEqual(Sl(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ai(r.geoPointValue.latitude)===ai(s.geoPointValue.latitude)&&ai(r.geoPointValue.longitude)===ai(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ai(r.integerValue)===ai(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=ai(r.doubleValue),a=ai(s.doubleValue);return o===a?Oy(o)===Oy(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Rp(n.arrayValue.values||[],e.arrayValue.values||[],Ra);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(A5(o)!==A5(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Ra(o[l],a[l])))return!1;return!0}(n,e);default:return He()}var s}function ky(n,e){return void 0!==(n.values||[]).find(t=>Ra(t,e))}function Zc(n,e){if(n===e)return 0;const t=Kc(n),i=Kc(e);if(t!==i)return ut(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ut(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ai(s.integerValue||s.doubleValue),l=ai(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return P5(n.timestampValue,e.timestampValue);case 4:return P5(My(n),My(e));case 5:return ut(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Sl(s),l=Sl(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ut(a[u],l[u]);if(0!==h)return h}return ut(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ut(ai(s.latitude),ai(o.latitude));return 0!==a?a:ut(ai(s.longitude),ai(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const h=Zc(a[u],l[u]);if(h)return h}return ut(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===qc.mapValue&&o===qc.mapValue)return 0;if(s===qc.mapValue)return 1;if(o===qc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let g=0;g<l.length&&g<h.length;++g){const m=ut(l[g],h[g]);if(0!==m)return m;const v=Zc(a[l[g]],u[h[g]]);if(0!==v)return v}return ut(l.length,h.length)}(n.mapValue,e.mapValue);default:throw He()}}function P5(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ut(n,e);const t=zc(n),i=zc(e),r=ut(t.seconds,i.seconds);return 0!==r?r:ut(t.nanos,i.nanos)}function Op(n){return _x(n)}function _x(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=zc(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Sl(n.bytesValue).toBase64():"referenceValue"in n?Oe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=_x(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${_x(t.fields[o])}`;return r+"}"}(n.mapValue):He()}function Pd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yx(n){return!!n&&"integerValue"in n}function Fy(n){return!!n&&"arrayValue"in n}function O5(n){return!!n&&"nullValue"in n}function M5(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function LT(n){return!!n&&"mapValue"in n}function Ly(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ly(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ly(n.arrayValue.values[t]);return e}return Object.assign({},n)}function k5(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Mme(n){return"nullValue"in n?kT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Pd(Wc.empty(),Oe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:He()}function kme(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Pd(Wc.empty(),Oe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?qc:He()}function F5(n,e){const t=Zc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function L5(n,e){const t=Zc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!LT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ly(t)}setAll(e){let t=Ln.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Ly(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());LT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];LT(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Gc(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new dr(Ly(this.value))}}function V5(n){const e=[];return Gc(n.fields,(t,i)=>{const r=new Ln([t]);if(LT(i)){const s=V5(i.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new _s(e)}class Vn{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Vn(e,0,Ze.min(),Ze.min(),Ze.min(),dr.empty(),0)}static newFoundDocument(e,t,i,r){return new Vn(e,1,t,Ze.min(),i,r,0)}static newNoDocument(e,t){return new Vn(e,2,t,Ze.min(),Ze.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,Ze.min(),Ze.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yc{constructor(e,t){this.position=e,this.inclusive=t}}function B5(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(i=s.field.isKeyField()?Oe.comparator(Oe.fromName(o.referenceValue),t.key):Zc(o,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function U5(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ra(n.position[t],e.position[t]))return!1;return!0}class Vy{constructor(e,t="asc"){this.field=e,this.dir=t}}function Fme(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class j5{}class jt extends j5{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new Lme(e,t,i):"array-contains"===t?new Ume(e,i):"in"===t?new q5(e,i):"not-in"===t?new jme(e,i):"array-contains-any"===t?new Hme(e,i):new jt(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new Vme(e,i):new Bme(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zc(t,this.value)):null!==t&&Kc(this.value)===Kc(t)&&this.matchesComparison(Zc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return He()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends j5{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new hn(e,t)}matches(e){return Mp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Mp(n){return"and"===n.op}function vx(n){return"or"===n.op}function bx(n){return H5(n)&&Mp(n)}function H5(n){for(const e of n.filters)if(e instanceof hn)return!1;return!0}function Ex(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+Op(n.value);if(bx(n))return n.filters.map(e=>Ex(e)).join(",");{const e=n.filters.map(t=>Ex(t)).join(",");return`${n.op}(${e})`}}function $5(n,e){return n instanceof jt?(i=n,(r=e)instanceof jt&&i.op===r.op&&i.field.isEqual(r.field)&&Ra(i.value,r.value)):n instanceof hn?function(i,r){return r instanceof hn&&i.op===r.op&&i.filters.length===r.filters.length&&i.filters.reduce((s,o,a)=>s&&$5(o,r.filters[a]),!0)}(n,e):void He();var i,r}function G5(n,e){const t=n.filters.concat(e);return hn.create(t,n.op)}function z5(n){return n instanceof jt?`${(t=n).field.canonicalString()} ${t.op} ${Op(t.value)}`:n instanceof hn?function(t){return t.op.toString()+" {"+t.getFilters().map(z5).join(" ,")+"}"}(n):"Filter";var t}class Lme extends jt{constructor(e,t,i){super(e,t,i),this.key=Oe.fromName(i.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vme extends jt{constructor(e,t){super(e,"in",t),this.keys=W5(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bme extends jt{constructor(e,t){super(e,"not-in",t),this.keys=W5(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function W5(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Oe.fromName(i.referenceValue))}class Ume extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fy(t)&&ky(t.arrayValue,this.value)}}class q5 extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ky(this.value.arrayValue,t)}}class jme extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ky(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ky(this.value.arrayValue,t)}}class Hme extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ky(this.value.arrayValue,i))}}class $me{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function wx(n,e=null,t=[],i=[],r=null,s=null,o=null){return new $me(n,e,t,i,r,s,o)}function Od(n){const e=Pe(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Ex(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(s=i).field.canonicalString()+s.dir;var s}).join(","),Py(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Op(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Op(i)).join(",")),e.ce=t}return e.ce}function By(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Fme(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$5(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!U5(n.startAt,e.startAt)&&U5(n.endAt,e.endAt)}function VT(n){return Oe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function BT(n,e){return n.filters.filter(t=>t instanceof jt&&t.field.isEqual(e))}function K5(n,e,t){let i=kT,r=!0;for(const s of BT(n,e)){let o=kT,a=!0;switch(s.op){case"<":case"<=":o=Mme(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=kT}F5({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];F5({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}function Z5(n,e,t){let i=qc,r=!0;for(const s of BT(n,e)){let o=qc,a=!0;switch(s.op){case">=":case">":o=kme(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=qc}L5({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];L5({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}class Dl{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function Y5(n,e,t,i,r,s,o,a){return new Dl(n,e,t,i,r,s,o,a)}function kp(n){return new Dl(n)}function Q5(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Tx(n){return null!==n.collectionGroup}function Fp(n){const e=Pe(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new mn(Ln.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new Vy(s,i))}),t.has(Ln.keyField().canonicalString())||e.le.push(new Vy(Ln.keyField(),i))}return e.le}function Ur(n){const e=Pe(n);return e.he||(e.he=function J5(n,e){if("F"===n.limitType)return wx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>new Vy(r.field,"desc"===r.dir?"asc":"desc"));const t=n.endAt?new Yc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Yc(n.startAt.position,n.startAt.inclusive):null;return wx(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}(e,Fp(n))),e.he}function Ix(n,e){const t=n.filters.concat([e]);return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function UT(n,e,t){return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uy(n,e){return By(Ur(n),Ur(e))&&n.limitType===e.limitType}function X5(n){return`${Od(Ur(n))}|lt:${n.limitType}`}function Lp(n){return`Query(target=${function(t){let i=t.path.canonicalString();return null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>z5(r)).join(", ")}]`),Py(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Op(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Op(r)).join(",")),`Target(${i})`}(Ur(n))}; limitType=${n.limitType})`}function jy(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return null!==i.collectionGroup?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Oe.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of Fp(i))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((i=n).startAt&&!function(o,a,l){const u=B5(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,Fp(i),r)||i.endAt&&!function(o,a,l){const u=B5(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,Fp(i),r)));var i,r}function e8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function t8(n){return(e,t)=>{let i=!1;for(const r of Fp(n)){const s=Gme(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function Gme(n,e,t){const i=n.field.isKeyField()?Oe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return null!==l&&null!==u?Zc(l,u):He()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return He()}}class Al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gc(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return R5(this.inner)}size(){return this.innerSize}}const zme=new Rn(Oe.comparator);function ys(){return zme}const n8=new Rn(Oe.comparator);function Hy(...n){let e=n8;for(const t of n)e=e.insert(t.key,t);return e}function i8(n){let e=n8;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Na(){return $y()}function r8(){return $y()}function $y(){return new Al(n=>n.toString(),(n,e)=>n.isEqual(e))}const Wme=new Rn(Oe.comparator),qme=new mn(Oe.comparator);function Tt(...n){let e=qme;for(const t of n)e=e.add(t);return e}const Kme=new mn(ut);function Cx(){return Kme}function s8(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oy(e)?"-0":e}}function o8(n){return{integerValue:""+n}}function a8(n,e){return E5(e)?o8(e):s8(n,e)}class jT{constructor(){this._=void 0}}function Zme(n,e,t){return n instanceof Vp?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&OT(s)&&(s=MT(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Md?c8(n,e):n instanceof kd?u8(n,e):function(r,s){const o=l8(r,s),a=d8(o)+d8(r.Ie);return yx(o)&&yx(r.Ie)?o8(a):s8(r.serializer,a)}(n,e)}function Yme(n,e,t){return n instanceof Md?c8(n,e):n instanceof kd?u8(n,e):t}function l8(n,e){return n instanceof Bp?yx(i=e)||(s=i)&&"doubleValue"in s?e:{integerValue:0}:null;var i,s}class Vp extends jT{}class Md extends jT{constructor(e){super(),this.elements=e}}function c8(n,e){const t=h8(e);for(const i of n.elements)t.some(r=>Ra(r,i))||t.push(i);return{arrayValue:{values:t}}}class kd extends jT{constructor(e){super(),this.elements=e}}function u8(n,e){let t=h8(e);for(const i of n.elements)t=t.filter(r=>!Ra(r,i));return{arrayValue:{values:t}}}class Bp extends jT{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function d8(n){return ai(n.integerValue||n.doubleValue)}function h8(n){return Fy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Gy{constructor(e,t){this.field=e,this.transform=t}}class Jme{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function HT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class $T{}function f8(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new jp(n.key,Wn.none()):new Up(n.key,n.data,Wn.none());{const t=n.data,i=dr.empty();let r=new mn(Ln.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new Rl(n.key,i,new _s(r.toArray()),Wn.none())}}function Xme(n,e,t){n instanceof Up?function(r,s,o){const a=r.value.clone(),l=m8(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Rl?function(r,s,o){if(!HT(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=m8(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(g8(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zy(n,e,t,i){return n instanceof Up?function(s,o,a,l){if(!HT(s.precondition,o))return a;const u=s.value.clone(),h=_8(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,i):n instanceof Rl?function(s,o,a,l){if(!HT(s.precondition,o))return a;const u=_8(s.fieldTransforms,l,o),h=o.data;return h.setAll(g8(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,i):(a=t,HT(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function e_e(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=l8(i.transform,r||null);null!=s&&(null===t&&(t=dr.empty()),t.set(i.field,s))}return t||null}function p8(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===r||i&&r&&Rp(i,r,(s,o)=>function Qme(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(i=n.transform)instanceof Md&&r instanceof Md||i instanceof kd&&r instanceof kd?Rp(i.elements,r.elements,Ra):i instanceof Bp&&r instanceof Bp?Ra(i.Ie,r.Ie):i instanceof Vp&&r instanceof Vp);var i,r}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var i,r}class Up extends $T{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Rl extends $T{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function g8(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function m8(n,e,t){const i=new Map;qe(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Yme(o,a,t[r]))}return i}function _8(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,Zme(s,o,e))}return i}class jp extends $T{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sx extends $T{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Dx{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&Xme(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=zy(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=zy(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=r8();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=f8(o,a);null!==l&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Ze.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Tt())}isEqual(e){return this.batchId===e.batchId&&Rp(this.mutations,e.mutations,(t,i)=>p8(t,i))&&Rp(this.baseMutations,e.baseMutations,(t,i)=>p8(t,i))}}class Ax{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){qe(e.mutations.length===i.length);let r=Wme;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Ax(e,t,i,r)}}class Rx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class n_e{constructor(e,t){this.count=e,this.unchangedNames=t}}var wi,Wt;function y8(n){switch(n){default:return He();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function v8(n){if(void 0===n)return gi("GRPC error has no .code"),Q.UNKNOWN;switch(n){case wi.OK:return Q.OK;case wi.CANCELLED:return Q.CANCELLED;case wi.UNKNOWN:return Q.UNKNOWN;case wi.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case wi.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case wi.INTERNAL:return Q.INTERNAL;case wi.UNAVAILABLE:return Q.UNAVAILABLE;case wi.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case wi.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case wi.NOT_FOUND:return Q.NOT_FOUND;case wi.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case wi.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case wi.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case wi.ABORTED:return Q.ABORTED;case wi.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case wi.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case wi.DATA_LOSS:return Q.DATA_LOSS;default:return He()}}(Wt=wi||(wi={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";function b8(){return new TextEncoder}const i_e=new Sp([4294967295,4294967295],0);function E8(n){const e=b8().encode(n),t=new Yge;return t.update(e),new Uint8Array(t.digest())}function w8(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Sp([t,i],0),new Sp([r,s],0)]}class Nx{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Wy(`Invalid padding: ${t}`);if(i<0)throw new Wy(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new Wy(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new Wy(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Sp.fromNumber(this.Te)}de(e,t,i){let r=e.add(t.multiply(Sp.fromNumber(i)));return 1===r.compare(i_e)&&(r=new Sp([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=E8(e),[i,r]=w8(t);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Nx(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=E8(e),[i,r]=w8(t);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);this.Re(o)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Wy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qy{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Ky.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new qy(Ze.min(),r,new Rn(ut),ys(),Tt())}}class Ky{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ky(i,t,Tt(),Tt(),Tt())}}class zT{constructor(e,t,i,r){this.Ve=e,this.removedTargetIds=t,this.key=i,this.me=r}}class T8{constructor(e,t){this.targetId=e,this.fe=t}}class I8{constructor(e,t,i=Mi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class C8{constructor(){this.ge=0,this.pe=D8(),this.ye=Mi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Tt(),t=Tt(),i=Tt();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:He()}}),new Ky(this.ye,this.we,e,t,i)}Fe(){this.Se=!1,this.pe=D8()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,qe(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class r_e{constructor(e){this.Le=e,this.ke=new Map,this.qe=ys(),this.Qe=S8(),this.Ke=new Rn(ut)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(t);break;case 3:this.je(t)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.Ce(e.resumeToken));break;default:He()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((i,r)=>{this.je(r)&&t(r)})}Je(e){const t=e.targetId,i=e.fe.count,r=this.Ye(t);if(r){const s=r.target;if(VT(s))if(0===i){const o=new Oe(s.path);this.We(t,o,Vn.newNoDocument(o,Ze.min()))}else qe(1===i);else{const o=this.Ze(t);if(o!==i){const a=this.Xe(e),l=a?this.et(a,e,o):1;0!==l&&(this.He(t),this.Ke=this.Ke.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=Sl(i).toUint8Array()}catch(l){if(l instanceof x5)return ms("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Nx(o,r,s)}catch(l){return ms(l instanceof Wy?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,t,i){return t.fe.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),r++)}),r}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&VT(a.target)){const l=new Oe(a.target.path);null!==this.qe.get(l)||this.st(o,l)||this.We(o,l,Vn.newNoDocument(l,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let i=Tt();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const r=new qy(e,t,this.Ke,this.qe,i);return this.qe=ys(),this.Qe=S8(),this.Ke=new Rn(ut),r}Ue(e,t){if(!this.je(e))return;const i=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,i),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),i&&(this.qe=this.qe.insert(t,i))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new C8,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new mn(ut),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new C8),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function S8(){return new Rn(Oe.comparator)}function D8(){return new Rn(Oe.comparator)}const s_e={asc:"ASCENDING",desc:"DESCENDING"},o_e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a_e={and:"AND",or:"OR"};class l_e{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xx(n,e){return n.useProto3Json||Py(e)?e:{value:e}}function Hp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A8(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function c_e(n,e){return Hp(n,e.toTimestamp())}function mi(n){return qe(!!n),Ze.fromTimestamp(function(t){const i=zc(t);return new zn(i.seconds,i.nanos)}(n))}function Px(n,e){return(i=n,new zt(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function R8(n){const e=zt.fromString(n);return qe(V8(e)),e}function Zy(n,e){return Px(n.databaseId,e.path)}function xa(n,e){const t=R8(e);if(t.get(1)!==n.databaseId.projectId)throw new de(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(x8(t))}function Ox(n,e){return Px(n.databaseId,e)}function N8(n){const e=R8(n);return 4===e.length?zt.emptyPath():x8(e)}function Yy(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function x8(n){return qe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function P8(n,e,t){return{name:Zy(n,e),fields:t.value.mapValue.fields}}function O8(n,e,t){const i=xa(n,e.name),r=mi(e.updateTime),s=e.createTime?mi(e.createTime):Ze.min(),o=new dr({mapValue:{fields:e.fields}}),a=Vn.newFoundDocument(i,r,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Qy(n,e){let t;if(e instanceof Up)t={update:P8(n,e.key,e.value)};else if(e instanceof jp)t={delete:Zy(n,e.key)};else if(e instanceof Rl)t={update:P8(n,e.key,e.data),updateMask:__e(e.fieldMask)};else{if(!(e instanceof Sx))return He();t={verify:Zy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Vp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Md)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof kd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bp)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw He()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:c_e(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:He()),t;var s}function Mx(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Wn.updateTime(mi(s.updateTime)):void 0!==s.exists?Wn.exists(s.exists):Wn.none():Wn.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let l=null;"setToServerValue"in a?(qe("REQUEST_TIME"===a.setToServerValue),l=new Vp):"appendMissingElements"in a?l=new Md(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new kd(a.removeAllFromArray.values||[]):"increment"in a?l=new Bp(o,a.increment):He();const u=Ln.fromServerFormat(a.fieldPath);return new Gy(u,l)}(n,r)):[];var s;if(e.update){const r=xa(n,e.update.name),s=new dr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new _s((e.updateMask.fieldPaths||[]).map(h=>Ln.fromServerFormat(h)));return new Rl(r,s,o,t,i)}return new Up(r,s,t,i)}if(e.delete){const r=xa(n,e.delete);return new jp(r,t)}if(e.verify){const r=xa(n,e.verify);return new Sx(r,t)}return He()}function M8(n,e){return{documents:[Ox(n,e.path)]}}function kx(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Ox(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ox(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(0!==l.length)return L8(hn.create(l,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(l){if(0!==l.length)return l.map(u=>{return{field:Qc((g=u).field),direction:p_e(g.dir)};var g})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=xx(n,e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),t;var l}function k8(n){let e=N8(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){qe(1===i);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){const m=F8(g);return m instanceof hn&&bx(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(m=>{return new Vy($p((w=m).field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let a=null;t.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,Py(m)?null:m}(t.limit));let l=null;var g;t.startAt&&(l=new Yc((g=t.startAt).values||[],!!g.before));let u=null;return t.endAt&&(u=function(g){return new Yc(g.values||[],!g.before)}(t.endAt)),Y5(e,r,o,s,a,"F",l,u)}function F8(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=$p(t.unaryFilter.field);return jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=$p(t.unaryFilter.field);return jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$p(t.unaryFilter.field);return jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$p(t.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return He()}}(n):void 0!==n.fieldFilter?jt.create($p((t=n).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return He()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return hn.create(t.compositeFilter.filters.map(i=>F8(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return He()}}(t.compositeFilter.op))}(n):He();var t}function p_e(n){return s_e[n]}function g_e(n){return o_e[n]}function m_e(n){return a_e[n]}function Qc(n){return{fieldPath:n.canonicalString()}}function $p(n){return Ln.fromServerFormat(n.fieldPath)}function L8(n){return n instanceof jt?function(t){if("=="===t.op){if(M5(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NAN"}};if(O5(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(M5(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NOT_NAN"}};if(O5(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qc(t.field),op:g_e(t.op),value:t.value}}}(n):n instanceof hn?function(t){const i=t.getFilters().map(r=>L8(r));return 1===i.length?i[0]:{compositeFilter:{op:m_e(t.op),filters:i}}}(n):He()}function __e(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function V8(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Nl{constructor(e,t,i,r,s=Ze.min(),o=Ze.min(),a=Mi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Nl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class B8{constructor(e){this.ut=e}}function U8(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:WT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Zy(s=n.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Hp(s,o.version.toTimestamp()),createTime:Hp(s,o.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Fd(e.version)};else{if(!e.isUnknownDocument())return He();i.unknownDocument={path:t.path.toArray(),version:Fd(e.version)}}var s,o;return i}function WT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ld(n){const e=new zn(n.seconds,n.nanoseconds);return Ze.fromTimestamp(e)}function Vd(n,e){const t=(e.baseMutations||[]).map(s=>Mx(n.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const i=e.mutations.map(s=>Mx(n.ut,s)),r=zn.fromMillis(e.localWriteTimeMs);return new Dx(e.batchId,r,t,i)}function Jy(n){const e=Ld(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ld(n.lastLimboFreeSnapshotVersion):Ze.min();let i;return i=void 0!==n.query.documents?(qe(1===(s=n.query).documents.length),Ur(kp(N8(s.documents[0])))):function(s){return Ur(k8(s))}(n.query),new Nl(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Mi.fromBase64String(n.resumeToken));var s}function j8(n,e){const t=Fd(e.snapshotVersion),i=Fd(e.lastLimboFreeSnapshotVersion);let r;r=VT(e.target)?M8(n.ut,e.target):kx(n.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Od(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Fx(n){const e=k8({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?UT(e,e.limit,"L"):e}function Lx(n,e){return new Rx(e.largestBatchId,Mx(n.ut,e.overlayMutation))}function H8(n,e){const t=e.path.lastSegment();return[n,Cr(e.path.popLast()),t]}function $8(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Fd(i.readTime),documentKey:Cr(i.documentKey.path),largestBatchId:i.largestBatchId}}class v_e{getBundleMetadata(e,t){return G8(e).get(t).next(i=>{if(i)return{id:(s=i).bundleId,createTime:Ld(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return G8(e).put({bundleId:(r=t).id,createTime:Fd(mi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return z8(e).get(t).next(i=>{if(i)return{name:(s=i).name,query:Fx(s.bundledQuery),readTime:Ld(s.readTime)};var s})}saveNamedQuery(e,t){return z8(e).put({name:(r=t).name,readTime:Fd(mi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function G8(n){return zi(n,"bundles")}function z8(n){return zi(n,"namedQueries")}class qT{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new qT(e,t.uid||"")}getOverlay(e,t){return Xy(e).get(H8(this.userId,t)).next(i=>i?Lx(this.serializer,i):null)}getOverlays(e,t){const i=Na();return G.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,o)=>{const a=new Rx(t,o);r.push(this.lt(e,a))}),G.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(o=>r.add(Cr(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Xy(e).H("collectionPathOverlayIndex",a))}),G.waitFor(s)}getOverlaysForCollection(e,t,i){const r=Na(),s=Cr(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Xy(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Lx(this.serializer,l);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=Na();let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xy(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,u,h)=>{const g=Lx(this.serializer,u);s.size()<r||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}lt(e,t){return Xy(e).put(function(r,s,o){const[a,l,u]=H8(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Qy(r.ut,o.mutation)}}(this.serializer,this.userId,t))}}function Xy(n){return zi(n,"documentOverlays")}class Bd{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(ai(e.integerValue));else if("doubleValue"in e){const i=ai(e.doubleValue);isNaN(i)?this.Tt(t,13):(this.Tt(t,15),Oy(i)?t.Et(0):t.Et(i))}else if("timestampValue"in e){const i=e.timestampValue;this.Tt(t,20),"string"==typeof i?t.dt(i):(t.dt(`${i.seconds||""}`),t.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Sl(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Tt(t,45),t.Et(i.latitude||0),t.Et(i.longitude||0)}else"mapValue"in e?k5(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):He()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const i=e.fields||{};this.Tt(t,55);for(const r of Object.keys(i))this.At(r,t),this.Pt(i[r],t)}yt(e,t){const i=e.values||[];this.Tt(t,50);for(const r of i)this.Pt(r,t)}ft(e,t){this.Tt(t,37),Oe.fromName(e).path.forEach(i=>{this.Tt(t,60),this.wt(i,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function b_e(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function W8(n){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const o=b_e(255&i[s]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Bd.St=new Bd;class E_e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Dt(i.value),i=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{const r=t.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){const t=this.Bt(e),i=W8(t);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),i=W8(t);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class w_e{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class T_e{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class ev{constructor(){this.Wt=new E_e,this.Gt=new w_e(this.Wt),this.zt=new T_e(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Ud{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Ud(this.indexId,this.documentKey,this.arrayValue,i)}}function Jc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=q8(n.arrayValue,e.arrayValue),0!==t?t:(t=q8(n.directionalValue,e.directionalValue),0!==t?t:Oe.comparator(n.documentKey,e.documentKey)))}function q8(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class K8{constructor(e){this.Jt=new mn((t,i)=>Ln.comparator(t.field,i.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const i=t;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(qe(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=hx(e);if(void 0!==t&&!this.tn(t))return!1;const i=Rd(e);let r=new Set,s=0,o=0;for(;s<i.length&&this.tn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[s];if(!this.nn(a,l)||!this.rn(this.Yt[o++],l))return!1}++s}for(;s<i.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],i[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new mn(Ln.comparator);const t=[];for(const i of this.Zt)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)t.push(new Nd(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Nd(i.field,0))}for(const i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Nd(i.field,"asc"===i.dir?0:1)));return new Np(Np.UNKNOWN_ID,this.collectionId,t,xp.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Z8(n){var e,t;if(qe(n instanceof jt||n instanceof hn),n instanceof jt){if(n instanceof q5){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>jt.create(n.field,"==",s)))||[];return hn.create(r,"or")}return n}const i=n.filters.map(r=>Z8(r));return hn.create(i,n.op)}function I_e(n){if(0===n.getFilters().length)return[];const e=Ux(Z8(n));return qe(Y8(e)),Vx(e)||Bx(e)?[e]:e.getFilters()}function Vx(n){return n instanceof jt}function Bx(n){return n instanceof hn&&bx(n)}function Y8(n){return Vx(n)||Bx(n)||function(t){if(t instanceof hn&&vx(t)){for(const i of t.getFilters())if(!Vx(i)&&!Bx(i))return!1;return!0}return!1}(n)}function Ux(n){if(qe(n instanceof jt||n instanceof hn),n instanceof jt)return n;if(1===n.filters.length)return Ux(n.filters[0]);const e=n.filters.map(i=>Ux(i));let t=hn.create(e,n.op);return t=KT(t),Y8(t)?t:(qe(t instanceof hn),qe(Mp(t)),qe(t.filters.length>1),t.filters.reduce((i,r)=>jx(i,r)))}function jx(n,e){let t;return qe(n instanceof jt||n instanceof hn),qe(e instanceof jt||e instanceof hn),t=n instanceof jt?e instanceof jt?hn.create([n,e],"and"):Q8(n,e):e instanceof jt?Q8(e,n):function(r,s){if(qe(r.filters.length>0&&s.filters.length>0),Mp(r)&&Mp(s))return G5(r,s.getFilters());const o=vx(r)?r:s,a=vx(r)?s:r,l=o.filters.map(u=>jx(u,a));return hn.create(l,"or")}(n,e),KT(t)}function Q8(n,e){if(Mp(e))return G5(e,n.getFilters());{const t=e.filters.map(i=>jx(n,i));return hn.create(t,"or")}}function KT(n){if(qe(n instanceof jt||n instanceof hn),n instanceof jt)return n;const e=n.getFilters();if(1===e.length)return KT(e[0]);if(H5(n))return n;const t=e.map(r=>KT(r)),i=[];return t.forEach(r=>{r instanceof jt?i.push(r):r instanceof hn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:hn.create(i,n.op)}class C_e{constructor(){this.on=new Hx}addToCollectionParentIndex(e,t){return this.on.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Fs.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class Hx{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new mn(zt.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new mn(zt.comparator)).toArray()}}const ZT=new Uint8Array(0);class S_e{constructor(e,t){this.user=e,this.databaseId=t,this._n=new Hx,this.an=new Al(i=>Od(i),(i,r)=>By(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const s={collectionId:i,parent:Cr(r)};return J8(e).put(s)}return G.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[g5(t),""],!1,!0);return J8(e).W(r).next(s=>{for(const o of s){if(o.collectionId!==t)break;i.push(Aa(o.parent))}return i})}addFieldIndex(e,t){const i=tv(e),r={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete r.indexId;const s=i.add(r);if(t.indexState){const o=zp(e);return s.next(a=>{o.put($8(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=tv(e),r=zp(e),s=Gp(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=tv(e),i=Gp(e),r=zp(e);return t.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,t){return G.forEach(this.un(t),i=>this.getIndexType(e,i).next(r=>{if(0===r||1===r){const s=new K8(i).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const i=Gp(e);let r=!0;const s=new Map;return G.forEach(this.un(t),o=>this.cn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Tt();const a=[];return G.forEach(s,(l,u)=>{var U;fe("IndexedDbIndexManager",`Using index ${U=l,`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`} to execute ${Od(t)}`);const h=function(U,z){const se=hx(z);if(void 0===se)return null;for(const Ie of BT(U,se.fieldPath))switch(Ie.op){case"array-contains-any":return Ie.value.arrayValue.values||[];case"array-contains":return[Ie.value]}return null}(u,l),g=function(U,z){const se=new Map;for(const Ie of Rd(z))for(const Ke of BT(U,Ie.fieldPath))switch(Ke.op){case"==":case"in":se.set(Ie.fieldPath.canonicalString(),Ke.value);break;case"not-in":case"!=":return se.set(Ie.fieldPath.canonicalString(),Ke.value),Array.from(se.values())}return null}(u,l),m=function(U,z){const se=[];let Ie=!0;for(const Ke of Rd(z)){const tt=0===Ke.kind?K5(U,Ke.fieldPath,U.startAt):Z5(U,Ke.fieldPath,U.startAt);se.push(tt.value),Ie&&(Ie=tt.inclusive)}return new Yc(se,Ie)}(u,l),v=function(U,z){const se=[];let Ie=!0;for(const Ke of Rd(z)){const tt=0===Ke.kind?Z5(U,Ke.fieldPath,U.endAt):K5(U,Ke.fieldPath,U.endAt);se.push(tt.value),Ie&&(Ie=tt.inclusive)}return new Yc(se,Ie)}(u,l),w=this.ln(l,u,m),S=this.ln(l,u,v),D=this.hn(l,u,g),L=this.Pn(l.indexId,h,w,m.inclusive,S,v.inclusive,D);return G.forEach(L,x=>i.j(x,t.limit).next(U=>{U.forEach(z=>{const se=Oe.fromSegments(z.documentKey);o.has(se)||(o=o.add(se),a.push(se))})}))}).next(()=>a)}return G.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:I_e(hn.create(e.filters,"and")).map(i=>wx(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,i,r,s,o,a){const l=(null!=t?t.length:1)*Math.max(i.length,s.length),u=l/(null!=t?t.length:1),h=[];for(let g=0;g<l;++g){const m=t?this.In(t[g/u]):ZT,v=this.Tn(e,m,i[g%u],r),w=this.En(e,m,s[g%u],o),S=a.map(D=>this.Tn(e,m,D,!0));h.push(...this.createRange(v,w,S))}return h}Tn(e,t,i,r){const s=new Ud(e,Oe.empty(),t,i);return r?s:s.Ht()}En(e,t,i,r){const s=new Ud(e,Oe.empty(),t,i);return r?s.Ht():s}cn(e,t){const i=new K8(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2;const r=this.un(t);return G.forEach(r,s=>this.cn(e,s).next(o=>{o?0!==i&&o.fields.length<function(l){let u=new mn(Ln.comparator),h=!1;for(const g of l.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:u=u.add(m.field));for(const g of l.orderBy)g.field.isKeyField()||(u=u.add(g.field));return u.size+(h?1:0)}(s)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}dn(e,t){const i=new ev;for(const r of Rd(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const o=i.jt(r.kind);Bd.St.ht(s,o)}return i.Ut()}In(e){const t=new ev;return Bd.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const i=new ev;return Bd.St.ht(Pd(this.databaseId,t),i.jt(function(s){const o=Rd(s);return 0===o.length?0:o[o.length-1].kind}(e))),i.Ut()}hn(e,t,i){if(null===i)return[];let r=[];r.push(new ev);let s=0;for(const o of Rd(e)){const a=i[s++];for(const l of r)if(this.Rn(t,o.fieldPath)&&Fy(a))r=this.Vn(r,o,a);else{const u=l.jt(o.kind);Bd.St.ht(a,u)}}return this.mn(r)}ln(e,t,i){return this.hn(e,t,i.position)}mn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Ut();return t}Vn(e,t,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new ev;l.seed(a.Ut()),Bd.St.ht(o,l.jt(t.kind)),s.push(l)}return s}Rn(e,t){return!!e.filters.find(i=>i instanceof jt&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=tv(e),r=zp(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(s=>{const o=[];return G.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(h,g){const m=g?new xp(g.sequenceNumber,new Fs(Ld(g.readTime),new Oe(Aa(g.documentKey)),g.largestBatchId)):xp.empty(),v=h.fields.map(([w,S])=>new Nd(Ln.fromServerFormat(w),S));return new Np(h.indexId,h.collectionGroup,v,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:ut(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=tv(e),s=zp(e);return this.fn(e).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>G.forEach(a,l=>s.put($8(l.indexId,this.user,o,i)))))}updateIndexEntries(e,t){const i=new Map;return G.forEach(t,(r,s)=>{const o=i.get(r.collectionGroup);return(o?G.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),G.forEach(a,l=>this.gn(e,r,l).next(u=>{const h=this.pn(s,l);return u.isEqual(h)?G.resolve():this.yn(e,s,l,u,h)}))))})}wn(e,t,i,r){return Gp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,i,r){return Gp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,t.key),t.key.path.toArray()])}gn(e,t,i){const r=Gp(e);let s=new mn(Jc);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,t)])},(o,a)=>{s=s.add(new Ud(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,t){let i=new mn(Jc);const r=this.dn(t,e);if(null==r)return i;const s=hx(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Fy(o))for(const a of o.arrayValue.values||[])i=i.add(new Ud(t.indexId,e.key,this.In(a),r))}else i=i.add(new Ud(t.indexId,e.key,ZT,r));return i}yn(e,t,i,r,s){fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,u,h,g,m){const v=l.getIterator(),w=u.getIterator();let S=Pp(v),D=Pp(w);for(;S||D;){let L=!1,x=!1;if(S&&D){const U=h(S,D);U<0?x=!0:U>0&&(L=!0)}else null!=S?x=!0:L=!0;L?(g(D),D=Pp(w)):x?(m(S),S=Pp(v)):(S=Pp(v),D=Pp(w))}}(r,s,Jc,a=>{o.push(this.wn(e,t,i,a))},a=>{o.push(this.Sn(e,t,i,a))}),G.waitFor(o)}fn(e){let t=1;return zp(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>Jc(o,a)).filter((o,a,l)=>!a||0!==Jc(o,l[a-1]));const r=[];r.push(e);for(const o of i){const a=Jc(o,e),l=Jc(o,t);if(0===a)r[0]=e.Ht();else if(a>0&&l<0)r.push(o),r.push(o.Ht());else if(l>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,ZT,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,ZT,[]]))}return s}bn(e,t){return Jc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(X8)}getMinOffset(e,t){return G.mapArray(this.un(t),i=>this.cn(e,i).next(r=>r||He())).next(X8)}}function J8(n){return zi(n,"collectionParents")}function Gp(n){return zi(n,"indexEntries")}function tv(n){return zi(n,"indexConfiguration")}function zp(n){return zi(n,"indexState")}function X8(n){qe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;fx(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Fs(e.readTime,e.documentKey,t)}const ez={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Sr{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Sr(e,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tz(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=i.Y({range:o},(h,g,m)=>(a++,m.delete()));s.push(l.next(()=>{qe(1===a)}));const u=[];for(const h of t.mutations){const g=I5(e,h.key.path,t.batchId);s.push(r.delete(g)),u.push(h.key)}return G.waitFor(s).next(()=>u)}function YT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw He();e=n.noDocument}return JSON.stringify(e).length}Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(41943040,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);class QT{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,t,i,r){qe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new QT(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xc(e).Y({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=Wp(e),o=Xc(e);return o.add({}).next(a=>{qe("number"==typeof a);const l=new Dx(a,t,i,r),u=function(v,w,S){const D=S.baseMutations.map(x=>Qy(v.ut,x)),L=S.mutations.map(x=>Qy(v.ut,x));return{userId:w,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:D,mutations:L}}(this.serializer,this.userId,l),h=[];let g=new mn((m,v)=>ut(m.canonicalString(),v.canonicalString()));for(const m of r){const v=I5(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(o.put(u)),h.push(s.put(v,pme))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),G.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return Xc(e).get(t).next(i=>i?(qe(i.userId===this.userId),Vd(this.serializer,i)):null)}Cn(e,t){return this.Dn[t]?G.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Dn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Xc(e).Y({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(qe(a.batchId>=i),s=Vd(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Xc(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xc(e).W("userMutationsIndex",t).next(i=>i.map(r=>Vd(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=xT(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return Wp(e).Y({range:r},(o,a,l)=>{const[u,h,g]=o,m=Aa(h);if(u===this.userId&&t.path.isEqual(m))return Xc(e).get(g).next(v=>{if(!v)throw He();qe(v.userId===this.userId),s.push(Vd(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new mn(ut);const r=[];return t.forEach(s=>{const o=xT(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Wp(e).Y({range:a},(u,h,g)=>{const[m,v,w]=u,S=Aa(v);m===this.userId&&s.path.isEqual(S)?i=i.add(w):g.done()});r.push(l)}),G.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=xT(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new mn(ut);return Wp(e).Y({range:o},(l,u,h)=>{const[g,m,v]=l,w=Aa(m);g===this.userId&&i.isPrefixOf(w)?w.length===r&&(a=a.add(v)):h.done()}).next(()=>this.vn(e,a))}vn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(Xc(e).get(s).next(o=>{if(null===o)throw He();qe(o.userId===this.userId),i.push(Vd(this.serializer,o))}))}),G.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return tz(e.ae,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),G.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Wp(e).Y({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=Aa(s[1]);r.push(l)}else a.done()}).next(()=>{qe(0===r.length)})})}containsKey(e,t){return nz(e,this.userId,t)}Mn(e){return iz(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nz(n,e,t){const i=xT(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return Wp(n).Y({range:s,J:!0},(a,l,u)=>{const[h,g,m]=a;h===e&&g===r&&(o=!0),u.done()}).next(()=>o)}function Xc(n){return zi(n,"mutations")}function Wp(n){return zi(n,"documentMutations")}function iz(n){return zi(n,"mutationQueues")}class jd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new jd(0)}static Nn(){return new jd(-1)}}class D_e{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const i=new jd(t.highestTargetId);return t.highestTargetId=i.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Ze.fromTimestamp(new zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(t,i),this.Ln(e,i))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qp(e).delete(t.targetId)).next(()=>this.Bn(e)).next(i=>(qe(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return qp(e).Y((o,a)=>{const l=Jy(a);l.sequenceNumber<=t&&null===i.get(l.targetId)&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>G.waitFor(s)).next(()=>r)}forEachTarget(e,t){return qp(e).Y((i,r)=>{const s=Jy(r);t(s)})}Bn(e){return rz(e).get("targetGlobalKey").next(t=>(qe(null!==t),t))}Ln(e,t){return rz(e).put("targetGlobalKey",t)}kn(e,t){return qp(e).put(j8(this.serializer,t))}qn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Od(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return qp(e).Y({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const u=Jy(a);By(t,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=eu(e);return t.forEach(o=>{const a=Cr(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),G.waitFor(r)}removeMatchingKeys(e,t,i){const r=eu(e);return G.forEach(t,s=>{const o=Cr(s.path);return G.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=eu(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=eu(e);let s=Tt();return r.Y({range:i,J:!0},(o,a,l)=>{const u=Aa(o[1]),h=new Oe(u);s=s.add(h)}).next(()=>s)}containsKey(e,t){const i=Cr(t.path),r=IDBKeyRange.bound([i],[g5(i)],!1,!0);let s=0;return eu(e).Y({index:"documentTargetsIndex",J:!0,range:r},([o,a],l,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}_t(e,t){return qp(e).get(t).next(i=>i?Jy(i):null)}}function qp(n){return zi(n,"targets")}function rz(n){return zi(n,"targetGlobal")}function eu(n){return zi(n,"targetDocuments")}function sz([n,e],[t,i]){const r=ut(n,t);return 0===r?ut(e,i):r}class A_e{constructor(e){this.Qn=e,this.buffer=new mn(sz),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();sz(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oz{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ie.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){$c(i)?fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Hc(i)}yield t.Gn(3e5)}))}}class R_e{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return G.resolve(Ls._e);const i=new A_e(t);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(ez)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ez):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let i,r,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,o=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,a=Date.now(),this.removeTargets(e,i,t))).next(g=>(s=g,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(u=Date.now(),Ap()<=Rs.in.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${r} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${g} documents in `+(u-l)+`ms\nTotal Duration: ${u-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}class N_e{constructor(e,t){this.db=e,this.garbageCollector=function az(n,e){return new R_e(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Yn(e){let t=0;return this.Hn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(i,r)=>t(r))}addReference(e,t,i){return JT(e,i)}removeReference(e,t,i){return JT(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return JT(e,t)}Xn(e,t){return function(r,s){let o=!1;return iz(r).Z(a=>nz(r,a,s).next(l=>(l&&(o=!0),G.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=t){const l=this.Xn(e,o).next(u=>{if(!u)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,Ze.min()),eu(e).delete([0,Cr(o.path)])))});r.push(l)}}).next(()=>G.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return JT(e,t)}Zn(e,t){const i=eu(e);let r,s=Ls._e;return i.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{0===o?(s!==Ls._e&&t(new Oe(Aa(r)),s),s=u,r=l):s=Ls._e}).next(()=>{s!==Ls._e&&t(new Oe(Aa(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function JT(n,e){return eu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Cr(e.path),sequenceNumber:r}));var r}class lz{constructor(){this.changes=new Al(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class x_e{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Hd(e).put(i)}removeEntry(e,t,i){return Hd(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],WT(o),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.er(e,i)))}getEntry(e,t){let i=Vn.newInvalidDocument(t);return Hd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(nv(t))},(r,s)=>{i=this.tr(t,s)}).next(()=>i)}nr(e,t){let i={size:0,document:Vn.newInvalidDocument(t)};return Hd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(nv(t))},(r,s)=>{i={document:this.tr(t,s),size:YT(s)}}).next(()=>i)}getEntries(e,t){let i=ys();return this.rr(e,t,(r,s)=>{const o=this.tr(r,s);i=i.insert(r,o)}).next(()=>i)}ir(e,t){let i=ys(),r=new Rn(Oe.comparator);return this.rr(e,t,(s,o)=>{const a=this.tr(s,o);i=i.insert(s,a),r=r.insert(s,YT(o))}).next(()=>({documents:i,sr:r}))}rr(e,t,i){if(t.isEmpty())return G.resolve();let r=new mn(hz);t.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(nv(r.first()),nv(r.last())),o=r.getIterator();let a=o.getNext();return Hd(e).Y({index:"documentKeyIndex",range:s},(l,u,h)=>{const g=Oe.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&hz(a,g)<0;)i(a,null),a=o.getNext();a&&a.isEqual(g)&&(i(a,u),a=o.hasNext()?o.getNext():null),a?h.U(nv(a)):h.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),WT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hd(e).W(IDBKeyRange.bound(a,l,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let h=ys();for(const g of u){const m=this.tr(Oe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(jy(t,m)||r.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,i,r){let s=ys();const o=dz(t,i),a=dz(t,Fs.max());return Hd(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const g=this.tr(Oe.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(g.key,g),s.size===r&&h.done()}).next(()=>s)}newChangeBuffer(e){return new P_e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return uz(e).get("remoteDocumentGlobalKey").next(t=>(qe(!!t),t))}er(e,t){return uz(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const i=function y_e(n,e){let t;if(e.document)t=O8(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Oe.fromSegments(e.noDocument.path),r=Ld(e.noDocument.readTime);t=Vn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return He();{const i=Oe.fromSegments(e.unknownDocument.path),r=Ld(e.unknownDocument.version);t=Vn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){const s=new zn(r[0],r[1]);return Ze.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(Ze.min()))return i}return Vn.newInvalidDocument(e)}}function cz(n){return new x_e(n)}class P_e extends lz{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Al(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new mn((s,o)=>ut(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(t.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=U8(this._r.serializer,o);r=r.add(s.path.popLast());const u=YT(l);i+=u-a.size,t.push(this._r.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){const l=U8(this._r.serializer,o.convertToNoDocument(Ze.min()));t.push(this._r.addEntry(e,s,l))}}),r.forEach(s=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),t.push(this._r.updateMetadata(e,i)),G.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(i=>(this.ar.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:i,sr:r})=>(r.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function uz(n){return zi(n,"remoteDocumentGlobal")}function Hd(n){return zi(n,"remoteDocumentsV14")}function nv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dz(n,e){const t=e.documentKey.path.toArray();return[n,WT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function hz(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=ut(t[s],i[s]),r)return r;return r=ut(t.length,i.length),r||(r=ut(t[t.length-2],i[i.length-2]),r||ut(t[t.length-1],i[i.length-1]))}class O_e{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fz{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&zy(i.mutation,r,_s.empty(),zn.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Tt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Tt()){const r=Na();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Hy();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Na();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Tt()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=ys();const o=$y(),a=$y();return t.forEach((l,u)=>{const h=i.get(u.key);r.has(u.key)&&(void 0===h||h.mutation instanceof Rl)?s=s.insert(u.key,u):void 0!==h?(o.set(u.key,h.mutation.getFieldMask()),zy(h.mutation,u,h.mutation.getFieldMask(),zn.now())):o.set(u.key,_s.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var g;return a.set(u,new O_e(h,null!==(g=o.get(u))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const i=$y();let r=new Rn((o,a)=>o-a),s=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(null===u)return;let h=i.get(l)||_s.empty();h=a.applyToLocalView(u,h),i.set(l,h);const g=(r.get(a.batchId)||Tt()).add(l);r=r.insert(a.batchId,g)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,g=r8();h.forEach(m=>{if(!s.has(m)){const v=f8(t.get(m),i.get(m));null!==v&&g.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,g))}return G.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return Oe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Tx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r);var o}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):G.resolve(Na());let a=-1,l=s;return o.next(u=>G.forEach(u,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Tt())).next(h=>({batchId:a,changes:i8(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(i=>{let r=Hy();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=Hy();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,l=>{const u=(g=t,m=l.child(s),new Dl(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();null===o.get(h)&&(o=o.insert(h,Vn.newInvalidDocument(h)))});let a=Hy();return o.forEach((l,u)=>{const h=s.get(l);void 0!==h&&zy(h.mutation,u,_s.empty(),zn.now()),jy(t,u)&&(a=a.insert(l,u))}),a})}}class M_e{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return G.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(r=t).id,version:r.version,createTime:mi(r.createTime)}),G.resolve();var r}getNamedQuery(e,t){return G.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(r=t).name,query:Fx(r.bundledQuery),readTime:mi(r.readTime)}),G.resolve();var r}}class k_e{constructor(){this.overlays=new Rn(Oe.comparator),this.lr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Na();return G.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.lt(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.lr.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const r=Na(),s=t.length+1,o=new Oe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return G.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Rn((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>i){let h=s.get(u.largestBatchId);null===h&&(h=Na(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Na(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return G.resolve(a)}lt(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Rx(t,i));let s=this.lr.get(t);void 0===s&&(s=Tt(),this.lr.set(t,s)),this.lr.set(t,s.add(i.key))}}class $x{constructor(){this.hr=new mn(Wi.Pr),this.Ir=new mn(Wi.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const i=new Wi(e,t);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.dr(new Wi(e,t))}Ar(e,t){e.forEach(i=>this.removeReference(i,t))}Rr(e){const t=new Oe(new zt([])),i=new Wi(t,e),r=new Wi(t,e+1),s=[];return this.Ir.forEachInRange([i,r],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Oe(new zt([])),i=new Wi(t,e),r=new Wi(t,e+1);let s=Tt();return this.Ir.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Wi(e,0),i=this.hr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Wi{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Oe.comparator(e.key,t.key)||ut(e.gr,t.gr)}static Tr(e,t){return ut(e.gr,t.gr)||Oe.comparator(e.key,t.key)}}class F_e{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new mn(Wi.Pr)}checkEmpty(e){return G.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.pr;this.pr++;const o=new Dx(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.yr=this.yr.add(new Wi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.Sr(t+1),s=r<0?0:r;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Wi(t,0),r=new Wi(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],o=>{const a=this.wr(o.gr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new mn(ut);return t.forEach(r=>{const s=new Wi(r,0),o=new Wi(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{i=i.add(a.gr)})}),G.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Oe.isDocumentKey(s)||(s=s.child(""));const o=new Wi(new Oe(s),0);let a=new mn(ut);return this.yr.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.gr)),!0)},o),G.resolve(this.br(a))}br(e){const t=[];return e.forEach(i=>{const r=this.wr(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){qe(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let i=this.yr;return G.forEach(t.mutations,r=>{const s=new Wi(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,t){const i=new Wi(t,0),r=this.yr.firstAfterOrEqual(i);return G.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return G.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class L_e{constructor(e){this.Cr=e,this.docs=new Rn(Oe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let i=ys();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Vn.newInvalidDocument(r))}),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=ys();const o=t.path,a=new Oe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||fx(_5(h),i)<=0||(r.has(h.key)||jy(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,i,r){He()}vr(e,t){return G.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new V_e(this)}getSize(e){return G.resolve(this.size)}}class V_e extends lz{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),G.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class B_e{constructor(e){this.persistence=e,this.Fr=new Al(t=>Od(t),By),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.Mr=0,this.Or=new $x,this.targetCount=0,this.Nr=jd.On()}forEachTarget(e,t){return this.Fr.forEach((i,r)=>t(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Mr&&(this.Mr=t),G.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new jd(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.kn(t),G.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),G.waitFor(s).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.Fr.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this.Or.Er(t,i),G.resolve()}removeMatchingKeys(e,t,i){this.Or.Ar(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Or.mr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this.Or.containsKey(t))}}class Gx{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Ls(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new B_e(this),this.indexManager=new C_e,this.remoteDocumentCache=new L_e(i=>this.referenceDelegate.Qr(i)),this.serializer=new B8(t),this.Kr=new M_e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new k_e,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new F_e(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const r=new U_e(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,t){return G.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}}class U_e extends v5{constructor(e){super(),this.currentSequenceNumber=e}}class XT{constructor(e){this.persistence=e,this.Gr=new $x,this.zr=null}static jr(e){return new XT(e)}get Hr(){if(this.zr)return this.zr;throw He()}addReference(e,t,i){return this.Gr.addReference(i,t),this.Hr.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Gr.removeReference(i,t),this.Hr.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),G.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Hr,i=>{const r=Oe.fromPath(i);return this.Jr(e,r).next(s=>{s||t.removeEntry(r,Ze.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(i=>{i?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return G.or([()=>G.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class j_e{constructor(e){this.serializer=e}N(e,t,i,r){const s=new NT("createOrUpgrade",t);var l;i<1&&r>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T5,{unique:!0}),l.createObjectStore("documentMutations"),pz(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=G.resolve();return i<3&&r>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),pz(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(l,u){return u.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T5,{unique:!0});const g=u.store("mutations"),m=h.map(v=>g.put(v));return G.waitFor(m)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(o=o.next(()=>this.Zr(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),i<7&&r>=7&&(o=o.next(()=>this.ei(s))),i<8&&r>=8&&(o=o.next(()=>this.ti(e,s))),i<9&&r>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(o=o.next(()=>this.ni(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{!function(l){const u=l.createObjectStore("documentOverlays",{keyPath:Sme});u.createIndex("collectionPathOverlayIndex",Dme,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Ame,{unique:!1})}(e)})),i<13&&r>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:gme});u.createIndex("documentKeyIndex",mme),u.createIndex("collectionGroupIndex",_me)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ii(e,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:wme}).createIndex("sequenceNumberIndex",Tme,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Ime}).createIndex("documentKeyIndex",Cme,{unique:!1})}(e))),o}Xr(e){let t=0;return e.store("remoteDocuments").Y((i,r)=>{t+=YT(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>G.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>G.forEach(a,l=>{qe(l.userId===s.userId);const u=Vd(this.serializer,l);return tz(e,s.userId,u).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Y((o,a)=>{const l=new zt(o),u=[0,Cr(l)];s.push(t.get(u).next(h=>h?G.resolve():t.put({targetId:0,path:Cr(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>G.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Eme});const i=t.store("collectionParents"),r=new Hx,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:Cr(l)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new zt(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,l],u)=>{const h=Aa(a);return s(h.popLast())}))}ni(e){const t=e.store("targets");return t.Y((i,r)=>{const s=Jy(r),o=j8(this.serializer,s);return t.put(o)})}ri(e,t){const i=t.store("remoteDocuments"),r=[];return i.Y((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(g=o,g.document?new Oe(zt.fromString(g.document.name).popFirst(5)):g.noDocument?Oe.fromSegments(g.noDocument.path):g.unknownDocument?Oe.fromSegments(g.unknownDocument.path):He()).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;r.push(a.put(u))}).next(()=>G.waitFor(r))}ii(e,t){const i=t.store("mutations"),r=cz(this.serializer),s=new Gx(XT.jr,this.serializer.ut);return i.W().next(o=>{const a=new Map;return o.forEach(l=>{var u;let h=null!==(u=a.get(l.userId))&&void 0!==u?u:Tt();Vd(this.serializer,l).keys().forEach(g=>h=h.add(g)),a.set(l.userId,h)}),G.forEach(a,(l,u)=>{const h=new Gi(u),g=qT.ct(this.serializer,h),m=s.getIndexManager(h),v=QT.ct(h,this.serializer,m,s.referenceDelegate);return new fz(r,v,g,m).recalculateAndSaveOverlaysForDocumentKeys(new mx(t,Ls._e),l).next()})})}}function pz(n){n.createObjectStore("targetDocuments",{keyPath:vme}).createIndex("documentTargetsIndex",bme,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yme,{unique:!0}),n.createObjectStore("targetGlobal")}const zx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wx{constructor(e,t,i,r,s,o,a,l,u,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.si=s,this.window=o,this.document=a,this.oi=u,this._i=h,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!Wx.D())throw new de(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new N_e(this,r),this.Ii=t+"main",this.serializer=new B8(l),this.Ti=new qo(this.Ii,this.ai,new j_e(this.serializer)),this.qr=new D_e(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cz(this.serializer),this.Kr=new v_e,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&gi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(Q.FAILED_PRECONDITION,zx);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Ls(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var i=(0,ie.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,ie.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,ie.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if($c(e))return fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return iv(e).get("owner").next(t=>G.resolve(this.wi(t)))}Si(e){return tI(e).delete(this.clientId)}bi(){var e=this;return(0,ie.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=zi(i,"clientMetadata");return r.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return G.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const i of t)e.Ei.removeItem(e.vi(i.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?G.resolve(!0):iv(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new de(Q.FAILED_PRECONDITION,zx);return!1}}return!(!this.networkEnabled||!this.inForeground)||tI(e).W().next(i=>void 0===this.Ci(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ie.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new mx(t,Ls._e);return e.pi(i).next(()=>e.Si(i))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(i=>this.Di(i.updateTimeMs,t)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>tI(e).W().next(t=>this.Ci(t,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return QT.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new S_e(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return qT.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,i){fe("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(l=this.ai)?Nme:14===l?D5:13===l?S5:12===l?Rme:11===l?C5:void He();var l;let o;return this.Ti.runTransaction(e,r,s,a=>(o=new mx(a,this.Lr?this.Lr.next():Ls._e),"readwrite-primary"===t?this.fi(o).next(l=>!!l||this.gi(o)).next(l=>{if(!l)throw gi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new de(Q.FAILED_PRECONDITION,y5);return i(o)}).next(l=>this.yi(o).next(()=>l)):this.Li(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return iv(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(Q.FAILED_PRECONDITION,zx)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return iv(e).put("owner",t)}static D(){return qo.D()}pi(e){const t=iv(e);return t.get("owner").next(i=>this.wi(i)?(fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve())}Di(e,t){const i=Date.now();return!(e<i-t||e>i&&(gi(`Detected an update time that is in the future: ${e} > ${i}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,C.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const i=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return fe("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return gi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){gi("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function iv(n){return zi(n,"owner")}function tI(n){return zi(n,"clientMetadata")}function qx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Kx{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ki=i,this.qi=r}static Qi(e,t){let i=Tt(),r=Tt();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Kx(e,t.fromCache,i,r)}}class H_e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gz{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.zi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new H_e;return this.Hi(e,t,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,t,o,a.size)})}).next(()=>s.result)}Ji(e,t,i,r){return i.documentReadCount<this.Ui?(Ap()<=Rs.in.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Lp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),G.resolve()):(Ap()<=Rs.in.DEBUG&&fe("QueryEngine","Query:",Lp(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(Ap()<=Rs.in.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Lp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(t))):G.resolve())}zi(e,t){if(Q5(t))return G.resolve(null);let i=Ur(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=UT(t,null,"F"),i=Ur(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Tt(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.Yi(t,a);return this.Zi(t,u,o,l.readTime)?this.zi(e,UT(t,null,"F")):this.Xi(e,u,t,l)}))})))}ji(e,t,i,r){return Q5(t)||r.isEqual(Ze.min())?G.resolve(null):this.Gi.getDocuments(e,i).next(s=>{const o=this.Yi(t,s);return this.Zi(t,o,i,r)?G.resolve(null):(Ap()<=Rs.in.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lp(t)),this.Xi(e,o,t,m5(r,-1)).next(a=>a))})}Yi(e,t){let i=new mn(t8(e));return t.forEach((r,s)=>{jy(e,s)&&(i=i.add(s))}),i}Zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,t,i){return Ap()<=Rs.in.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Lp(t)),this.Gi.getDocumentsMatchingQuery(e,t,Fs.min(),i)}Xi(e,t,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class $_e{constructor(e,t,i,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Rn(ut),this.ns=new Al(s=>Od(s),By),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fz(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function mz(n,e,t,i){return new $_e(n,e,t,i)}function _z(n,e){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,ie.Z)(function*(n,e){const t=Pe(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.os(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Tt();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(i,l).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})}),Zx.apply(this,arguments)}function yz(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function vz(n,e,t){let i=Tt(),r=Tt();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=ys();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ze.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||0===l.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):fe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{us:o,cs:r}})}function W_e(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Kp(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.qr.getTargetData(i,e).next(s=>s?(r=s,G.resolve(r)):t.qr.allocateTargetId(i).next(o=>(r=new Nl(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ts.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ts=t.ts.insert(i.targetId,i),t.ns.set(e,i.targetId)),i})}function Zp(n,e,t){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,ie.Z)(function*(n,e,t){const i=Pe(n),r=i.ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!$c(o))throw o;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)}),Yx.apply(this,arguments)}function nI(n,e,t){const i=Pe(n);let r=Ze.min(),s=Tt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const g=Pe(l),m=g.ns.get(h);return void 0!==m?G.resolve(g.ts.get(m)):g.qr.getTargetData(u,h)}(i,o,Ur(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.es.getDocumentsMatchingQuery(o,e,t?r:Ze.min(),t?s:Tt())).next(a=>(wz(i,e8(e),a),{documents:a,ls:s})))}function bz(n,e){const t=Pe(n),i=Pe(t.qr),r=t.ts.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(o=>o?o.target:null))}function Ez(n,e){const t=Pe(n),i=t.rs.get(e)||Ze.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.ss.getAllFromCollectionGroup(r,e,m5(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(wz(t,e,r),r))}function wz(n,e,t){let i=n.rs.get(e)||Ze.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.rs.set(e,i)}function Qx(){return Qx=(0,ie.Z)(function*(n,e,t,i){const r=Pe(n);let s=Tt(),o=ys();for(const u of t){const h=e.hs(u.metadata.name);u.document&&(s=s.add(h));const g=e.Ps(u);g.setReadTime(e.Is(u.metadata.readTime)),o=o.insert(h,g)}const a=r.ss.newChangeBuffer({trackRemovals:!0}),l=yield Kp(r,(h=i,Ur(kp(zt.fromString(`__bundle__/docs/${h}`)))));var h;return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>vz(u,a,o).next(h=>(a.apply(u),h)).next(h=>r.qr.removeMatchingKeysForTargetId(u,l.targetId).next(()=>r.qr.addMatchingKeys(u,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,h.us,h.cs)).next(()=>h.us)))}),Qx.apply(this,arguments)}function K_e(n,e){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,ie.Z)(function*(n,e,t=Tt()){const i=yield Kp(n,Ur(Fx(e.bundledQuery))),r=Pe(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=mi(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Kr.saveNamedQuery(s,e);const a=i.withResumeToken(Mi.EMPTY_BYTE_STRING,o);return r.ts=r.ts.insert(a.targetId,a),r.qr.updateTargetData(s,a).next(()=>r.qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.qr.addMatchingKeys(s,t,i.targetId)).next(()=>r.Kr.saveNamedQuery(s,e))})}),Jx.apply(this,arguments)}function Tz(n,e){return`firestore_clients_${n}_${e}`}function Iz(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Xx(n,e){return`firestore_targets_${n}_${e}`}class iI{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ts(e,t,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new de(r.error.code,r.error.message))),o?new iI(e,t,r.state,s):(gi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rv{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ts(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new de(i.error.code,i.error.message))),s?new rv(e,i.state,r):(gi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=Cx();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=E5(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new rI(e,s):(gi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class eP{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new eP(t.clientId,t.onlineState):(gi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tP{constructor(){this.activeTargetIds=Cx()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nP{constructor(e,t,i,r,s){this.window=e,this.si=t,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Rn(ut),this.started=!1,this.ps=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=Tz(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new tP),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ie.Z)(function*(){const t=yield e.syncEngine.Bi();for(const r of t){if(r===e.Rs)continue;const s=e.getItem(Tz(e.persistenceKey,r));if(s){const o=rI.Ts(r,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const i=e.storage.getItem(e.Cs);if(i){const r=e.Ms(i);r&&e.xs(r)}for(const r of e.ps)e.fs(r);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,i){this.Ns(e,t,i),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Xx(this.persistenceKey,e));if(i){const r=rv.Ts(e,i);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xx(this.persistenceKey,e))}updateQueryState(e,t,i){this.ks(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe("SharedClientState","READ",e,t),t}setItem(e,t){fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const i=e;if(i.storageArea===this.storage){if(fe("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ys)return void gi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,ie.Z)(function*(){if(t.started){if(null!==i.key)if(t.Ss.test(i.key)){if(null==i.newValue){const r=t.Ks(i.key);return t.$s(r,null)}{const r=t.Us(i.key,i.newValue);if(r)return t.$s(r.clientId,r)}}else if(t.bs.test(i.key)){if(null!==i.newValue){const r=t.Ws(i.key,i.newValue);if(r)return t.Gs(r)}}else if(t.Ds.test(i.key)){if(null!==i.newValue){const r=t.zs(i.key,i.newValue);if(r)return t.js(r)}}else if(i.key===t.Cs){if(null!==i.newValue){const r=t.Ms(i.newValue);if(r)return t.xs(r)}}else if(i.key===t.ws){const r=function(o){let a=Ls._e;if(null!=o)try{const l=JSON.parse(o);qe("number"==typeof l),a=l}catch(l){gi("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);r!==Ls._e&&t.sequenceNumberHandler(r)}else if(i.key===t.vs){const r=t.Hs(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Js(s)))}}else t.ps.push(i)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,i){const r=new iI(this.currentUser,e,t,i),s=Iz(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Es())}Bs(e){const t=Iz(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,i){const r=Xx(this.persistenceKey,e),s=new rv(e,t,i);this.setItem(r,s.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const i=this.Ks(e);return rI.Ts(i,t)}Ws(e,t){const i=this.bs.exec(e),r=Number(i[1]);return iI.Ts(new Gi(void 0!==i[2]?i[2]:null),r,t)}zs(e,t){const i=this.Ds.exec(e),r=Number(i[1]);return rv.Ts(r,t)}Ms(e){return eP.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const i=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),s=this.Os(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=Cx();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class Cz{constructor(){this.eo=new tP,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,i){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new tP,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Z_e{ro(e){}shutdown(){}}class Sz{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let sI=null;function iP(){return null===sI?sI=268435456+Math.round(2147483648*Math.random()):sI++,"0x"+sI.toString(16)}const Y_e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Q_e{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Dr="WebChannelConnection";class J_e extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+t.host,this.fo=`projects/${r}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get yo(){return!1}wo(t,i,r,s,o){const a=iP(),l=this.So(t,i);fe("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(t,l,u,r).then(h=>(fe("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw ms("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Co(t,i,r,s,o,a){return this.wo(t,i,r,s,o)}bo(t,i,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+Dp,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}So(t,i){return`${this.mo}/v1/${i}:${Y_e[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,i,r){const s=iP();return new Promise((o,a)=>{const l=new Zge;l.setWithCredentials(!0),l.listenOnce(qge.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ux.NO_ERROR:const h=l.getResponseJson();fe(Dr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ux.TIMEOUT:fe(Dr,`RPC '${e}' ${s} timed out`),a(new de(Q.DEADLINE_EXCEEDED,"Request time out"));break;case ux.HTTP_ERROR:const g=l.getStatus();if(fe(Dr,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m?.error;if(v&&v.status&&v.message){const w=function(D){const L=D.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(L)>=0?L:Q.UNKNOWN}(v.status);a(new de(w,v.message))}else a(new de(Q.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new de(Q.UNAVAILABLE,"Connection failed."));break;default:He()}}finally{fe(Dr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);fe(Dr,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",u,i,15)})}vo(e,t,i){const r=iP(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zge(),a=Wge(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const h=s.join("");fe(Dr,`Creating RPC '${e}' stream ${r}: ${h}`,l);const g=o.createWebChannel(h,l);let m=!1,v=!1;const w=new Q_e({co:D=>{v?fe(Dr,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(m||(fe(Dr,`Opening RPC '${e}' stream ${r} transport.`),g.open(),m=!0),fe(Dr,`RPC '${e}' stream ${r} sending:`,D),g.send(D))},lo:()=>g.close()}),S=(D,L,x)=>{D.listen(L,U=>{try{x(U)}catch(z){setTimeout(()=>{throw z},0)}})};return S(g,RT.EventType.OPEN,()=>{v||fe(Dr,`RPC '${e}' stream ${r} transport opened.`)}),S(g,RT.EventType.CLOSE,()=>{v||(v=!0,fe(Dr,`RPC '${e}' stream ${r} transport closed`),w.Ro())}),S(g,RT.EventType.ERROR,D=>{v||(v=!0,ms(Dr,`RPC '${e}' stream ${r} transport errored:`,D),w.Ro(new de(Q.UNAVAILABLE,"The operation could not be completed")))}),S(g,RT.EventType.MESSAGE,D=>{var L;if(!v){const x=D.data[0];qe(!!x);const z=x.error||(null===(L=x[0])||void 0===L?void 0:L.error);if(z){fe(Dr,`RPC '${e}' stream ${r} received error:`,z);const se=z.status;let Ie=function(_n){const Kn=wi[_n];if(void 0!==Kn)return v8(Kn)}(se),Ke=z.message;void 0===Ie&&(Ie=Q.INTERNAL,Ke="Unknown error status: "+se+" with message "+z.message),v=!0,w.Ro(new de(Ie,Ke)),g.close()}else fe(Dr,`RPC '${e}' stream ${r} received:`,x),w.Vo(x)}}),S(a,Kge.STAT_EVENT,D=>{D.stat===u5.PROXY?fe(Dr,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===u5.NOPROXY&&fe(Dr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.Ao()},0),w}}function Dz(){return typeof window<"u"?window:null}function oI(){return typeof document<"u"?document:null}function sv(n){return new l_e(n,!0)}class rP{constructor(e,t,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=t,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-i);r>0&&fe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Az{constructor(e,t,i,r,s,o,a,l){this.si=e,this.Ko=i,this.$o=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new rP(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,ie.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,ie.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var i=this;return(0,ie.Z)(function*(){i.t_(),i.n_(),i.zo.cancel(),i.Uo++,4!==e?i.zo.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(gi(t.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),i.zo.Lo()):t&&t.code===Q.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.r_(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===t&&this.s_(i,r)},i=>{e(()=>{const r=new de(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,t){const i=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){var e=this;this.state=5,this.zo.ko((0,ie.Z)(function*(){e.state=0,e.start()}))}o_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class X_e extends Az{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function d_e(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:He(),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(qe(void 0===h||"string"==typeof h),Mi.fromBase64String(h||"")):(qe(void 0===h||h instanceof Uint8Array),Mi.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=void 0===u.code?Q.UNKNOWN:v8(u.code);return new de(h,u.message||"")}(o);t=new I8(i,r,s,a||null)}else if("documentChange"in e){const i=e.documentChange,r=xa(n,i.document.name),s=mi(i.document.updateTime),o=i.document.createTime?mi(i.document.createTime):Ze.min(),a=new dr({mapValue:{fields:i.document.fields}}),l=Vn.newFoundDocument(r,s,o,a);t=new zT(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const i=e.documentDelete,r=xa(n,i.document),s=i.readTime?mi(i.readTime):Ze.min(),o=Vn.newNoDocument(r,s);t=new zT([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=xa(n,i.document);t=new zT([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return He();{const i=e.filter,{count:r=0,unchangedNames:s}=i,o=new n_e(r,s);t=new T8(i.targetId,o)}}var u;return t}(this.serializer,e),i=function(s){if(!("targetChange"in s))return Ze.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ze.min():o.readTime?mi(o.readTime):Ze.min()}(e);return this.listener.a_(t,i)}u_(e){const t={};t.database=Yy(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=VT(l)?{documents:M8(s,l)}:{query:kx(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=A8(s,o.resumeToken);const u=xx(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ze.min())>0){a.readTime=Hp(s,o.snapshotVersion.toTimestamp());const u=xx(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const i=function f_e(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.e_(t)}c_(e){const t={};t.database=Yy(this.serializer),t.removeTarget=e,this.e_(t)}}class eye extends Az{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function h_e(n,e){return n&&n.length>0?(qe(void 0!==e),n.map(t=>function(r,s){let o=mi(r.updateTime?r.updateTime:s);return o.isEqual(Ze.min())&&(o=mi(s)),new Jme(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=mi(e.commitTime);return this.listener.I_(i,t)}return qe(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Yy(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Qy(this.serializer,i))};this.e_(t)}}class tye extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new de(Q.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.wo(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new de(Q.UNKNOWN,r.toString())})}Co(e,t,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,t,i,s,o,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(Q.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class iye{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(gi(t),this.f_=!1):fe("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class rye{constructor(e,t,i,r,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{i.enqueueAndForget((0,ie.Z)(function*(){var l;tu(o)&&(fe("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,ie.Z)(function*(h){const g=Pe(h);g.C_.add(4),yield Yp(g),g.M_.set("Unknown"),g.C_.delete(4),yield ov(g)}),function u(h){return l.apply(this,arguments)})(o))}))}),this.M_=new iye(i,r)}}function ov(n){return oP.apply(this,arguments)}function oP(){return oP=(0,ie.Z)(function*(n){if(tu(n))for(const e of n.v_)yield e(!0)}),oP.apply(this,arguments)}function Yp(n){return aP.apply(this,arguments)}function aP(){return aP=(0,ie.Z)(function*(n){for(const e of n.v_)yield e(!1)}),aP.apply(this,arguments)}function aI(n,e){const t=Pe(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),uP(t)?cP(t):Jp(t).Ho()&&lP(t,e))}function av(n,e){const t=Pe(n),i=Jp(t);t.D_.delete(e),i.Ho()&&Rz(t,e),0===t.D_.size&&(i.Ho()?i.Zo():tu(t)&&t.M_.set("Unknown"))}function lP(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jp(n).u_(e)}function Rz(n,e){n.x_.Oe(e),Jp(n).c_(e)}function cP(n){n.x_=new r_e({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Jp(n).start(),n.M_.g_()}function uP(n){return tu(n)&&!Jp(n).jo()&&n.D_.size>0}function tu(n){return 0===Pe(n).C_.size}function Nz(n){n.x_=void 0}function sye(n){return dP.apply(this,arguments)}function dP(){return dP=(0,ie.Z)(function*(n){n.D_.forEach((e,t)=>{lP(n,e)})}),dP.apply(this,arguments)}function oye(n,e){return hP.apply(this,arguments)}function hP(){return hP=(0,ie.Z)(function*(n,e){Nz(n),uP(n)?(n.M_.w_(e),cP(n)):n.M_.set("Unknown")}),hP.apply(this,arguments)}function aye(n,e,t){return fP.apply(this,arguments)}function fP(){return fP=(0,ie.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof I8&&2===e.state&&e.cause)try{yield(i=(0,ie.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.D_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.D_.delete(l),s.x_.removeTarget(l))}),function r(s,o){return i.apply(this,arguments)})(n,e)}catch(i){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield lI(n,i)}else if(e instanceof zT?n.x_.$e(e):e instanceof T8?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(Ze.min()))try{const i=yield yz(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.D_.get(u);h&&s.D_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.D_.get(l);if(!h)return;s.D_.set(l,h.withResumeToken(Mi.EMPTY_BYTE_STRING,h.snapshotVersion)),Rz(s,l);const g=new Nl(h.target,l,u,h.sequenceNumber);lP(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){fe("RemoteStore","Failed to raise snapshot:",i),yield lI(n,i)}var i}),fP.apply(this,arguments)}function lI(n,e,t){return pP.apply(this,arguments)}function pP(){return pP=(0,ie.Z)(function*(n,e,t){if(!$c(e))throw e;n.C_.add(1),yield Yp(n),n.M_.set("Offline"),t||(t=()=>yz(n.localStore)),n.asyncQueue.enqueueRetryable((0,ie.Z)(function*(){fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield ov(n)}))}),pP.apply(this,arguments)}function xz(n,e){return e().catch(t=>lI(n,t,e))}function Qp(n){return gP.apply(this,arguments)}function gP(){return gP=(0,ie.Z)(function*(n){const e=Pe(n),t=nu(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;lye(e);)try{const r=yield W_e(e.localStore,i);if(null===r){0===e.b_.length&&t.Zo();break}i=r.batchId,cye(e,r)}catch(r){yield lI(e,r)}Pz(e)&&Oz(e)}),gP.apply(this,arguments)}function lye(n){return tu(n)&&n.b_.length<10}function cye(n,e){n.b_.push(e);const t=nu(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function Pz(n){return tu(n)&&!nu(n).jo()&&n.b_.length>0}function Oz(n){nu(n).start()}function uye(n){return mP.apply(this,arguments)}function mP(){return mP=(0,ie.Z)(function*(n){nu(n).E_()}),mP.apply(this,arguments)}function dye(n){return _P.apply(this,arguments)}function _P(){return _P=(0,ie.Z)(function*(n){const e=nu(n);for(const t of n.b_)e.P_(t.mutations)}),_P.apply(this,arguments)}function hye(n,e,t){return yP.apply(this,arguments)}function yP(){return yP=(0,ie.Z)(function*(n,e,t){const i=n.b_.shift(),r=Ax.from(i,e,t);yield xz(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Qp(n)}),yP.apply(this,arguments)}function fye(n,e){return vP.apply(this,arguments)}function vP(){return vP=(0,ie.Z)(function*(n,e){var t;e&&nu(n).h_&&(yield(t=(0,ie.Z)(function*(r,s){if(y8(a=s.code)&&a!==Q.ABORTED){const o=r.b_.shift();nu(r).Yo(),yield xz(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Qp(r)}var a}),function i(r,s){return t.apply(this,arguments)})(n,e)),Pz(n)&&Oz(n)}),vP.apply(this,arguments)}function Mz(n,e){return bP.apply(this,arguments)}function bP(){return bP=(0,ie.Z)(function*(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const i=tu(t);t.C_.add(3),yield Yp(t),i&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield ov(t)}),bP.apply(this,arguments)}function EP(n,e){return wP.apply(this,arguments)}function wP(){return wP=(0,ie.Z)(function*(n,e){const t=Pe(n);e?(t.C_.delete(2),yield ov(t)):e||(t.C_.add(2),yield Yp(t),t.M_.set("Unknown"))}),wP.apply(this,arguments)}function Jp(n){return n.O_||(n.O_=function(t,i,r){const s=Pe(t);return s.A_(),new X_e(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:sye.bind(null,n),Io:oye.bind(null,n),a_:aye.bind(null,n)}),n.v_.push(function(){var e=(0,ie.Z)(function*(t){t?(n.O_.Yo(),uP(n)?cP(n):n.M_.set("Unknown")):(yield n.O_.stop(),Nz(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function nu(n){return n.N_||(n.N_=function(t,i,r){const s=Pe(t);return s.A_(),new eye(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:uye.bind(null,n),Io:fye.bind(null,n),T_:dye.bind(null,n),I_:hye.bind(null,n)}),n.v_.push(function(){var e=(0,ie.Z)(function*(t){t?(n.N_.Yo(),yield Qp(n)):(yield n.N_.stop(),n.b_.length>0&&(fe("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class TP{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new TP(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new de(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(n,e){if(gi("AsyncQueue",`${e}: ${n}`),$c(n))return new de(Q.UNAVAILABLE,`${e}: ${n}`);throw n}class eg{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Oe.comparator(t.key,i.key):(t,i)=>Oe.comparator(t.key,i.key),this.keyedMap=Hy(),this.sortedSet=new Rn(this.comparator)}static emptySet(e){return new eg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof eg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new eg;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class kz{constructor(){this.B_=new Rn(Oe.comparator)}track(e){const t=e.doc.key,i=this.B_.get(t);i?0!==e.type&&3===i.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==i.type?this.B_=this.B_.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.B_=this.B_.remove(t):1===e.type&&2===i.type?this.B_=this.B_.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):He():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,i)=>{e.push(i)}),e}}class tg{constructor(e,t,i,r,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new tg(e,t,eg.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class pye{constructor(){this.k_=void 0,this.listeners=[]}}class gye{constructor(){this.queries=new Al(e=>X5(e),Uy),this.onlineState="Unknown",this.q_=new Set}}function IP(n,e){return CP.apply(this,arguments)}function CP(){return CP=(0,ie.Z)(function*(n,e){const t=Pe(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new pye),r)try{s.k_=yield t.onListen(i)}catch(o){const a=Xp(o,`Initialization of query '${Lp(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.Q_(t.onlineState),s.k_&&e.K_(s.k_)&&AP(t)}),CP.apply(this,arguments)}function SP(n,e){return DP.apply(this,arguments)}function DP(){return DP=(0,ie.Z)(function*(n,e){const t=Pe(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),DP.apply(this,arguments)}function mye(n,e){const t=Pe(n);let i=!1;for(const r of e){const o=t.queries.get(r.query);if(o){for(const a of o.listeners)a.K_(r)&&(i=!0);o.k_=r}}i&&AP(t)}function _ye(n,e,t){const i=Pe(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function AP(n){n.q_.forEach(e=>{e.next()})}class RP{constructor(e,t,i){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new tg(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=tg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class yye{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class Fz{constructor(e){this.serializer=e}hs(e){return xa(this.serializer,e)}Ps(e){return e.metadata.exists?O8(this.serializer,e.document,!1):Vn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return mi(e)}}class vye{constructor(e,t,i){this.X_=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Lz(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const i=zt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,i=new Fz(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.hs(r.metadata.name);for(const o of r.metadata.queries){const a=(t.get(o)||Tt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ie.Z)(function*(){const t=yield function q_e(n,e,t,i){return Qx.apply(this,arguments)}(e.localStore,new Fz(e.serializer),e.documents,e.X_.id),i=e.ta(e.documents);for(const r of e.queries)yield K_e(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function Lz(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Vz{constructor(e){this.key=e}}class Bz{constructor(e){this.key=e}}class Uz{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Tt(),this.mutatedKeys=Tt(),this._a=t8(e),this.aa=new eg(this._a)}get ua(){return this.ia}ca(e,t){const i=t?t.la:new kz,r=t?t.aa:this.aa;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,g)=>{const m=r.get(h),v=jy(this.query,g)?g:null,w=!!m&&this.mutatedKeys.has(m.key),S=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let D=!1;m&&v?m.data.isEqual(v.data)?w!==S&&(i.track({type:3,doc:v}),D=!0):this.ha(m,v)||(i.track({type:2,doc:v}),D=!0,(l&&this._a(v,l)>0||u&&this._a(v,u)<0)&&(a=!0)):!m&&v?(i.track({type:0,doc:v}),D=!0):m&&!v&&(i.track({type:1,doc:m}),D=!0,(l||u)&&(a=!0)),D&&(v?(o=o.add(v),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{aa:o,la:i,Zi:a,mutatedKeys:s}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((h,g)=>function(v,w){const S=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He()}};return S(v)-S(w)}(h.type,g.type)||this._a(h.doc,g.doc)),this.Pa(i),r=null!=r&&r;const a=t&&!r?this.Ia():[],l=0===this.oa.size&&this.current&&!r?1:0,u=l!==this.sa;return this.sa=l,0!==o.length||u?{snapshot:new tg(this.query,e.aa,s,o,e.mutatedKeys,0===l,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new kz,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Tt(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});const t=[];return e.forEach(i=>{this.oa.has(i)||t.push(new Bz(i))}),this.oa.forEach(i=>{e.has(i)||t.push(new Vz(i))}),t}da(e){this.ia=e.ls,this.oa=Tt();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return tg.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class bye{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Eye{constructor(e){this.key=e,this.Ra=!1}}class wye{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Al(a=>X5(a),Uy),this.fa=new Map,this.ga=new Set,this.pa=new Rn(Oe.comparator),this.ya=new Map,this.wa=new $x,this.Sa={},this.ba=new Map,this.Da=jd.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function Tye(n,e){return NP.apply(this,arguments)}function NP(){return NP=(0,ie.Z)(function*(n,e){const t=XP(n);let i,r;const s=t.ma.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Aa();else{const o=yield Kp(t.localStore,Ur(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield xP(t,e,i,"current"===a,o.resumeToken),t.isPrimaryClient&&aI(t.remoteStore,o)}return r}),NP.apply(this,arguments)}function xP(n,e,t,i,r){return PP.apply(this,arguments)}function PP(){return PP=(0,ie.Z)(function*(n,e,t,i,r){n.va=(g,m,v)=>{return(w=(0,ie.Z)(function*(D,L,x,U){let z=L.view.ca(x);z.Zi&&(z=yield nI(D.localStore,L.query,!1).then(({documents:tt})=>L.view.ca(tt,z)));const se=U&&U.targetChanges.get(L.targetId),Ie=U&&null!=U.targetMismatches.get(L.targetId),Ke=L.view.applyChanges(z,D.isPrimaryClient,se,Ie);return HP(D,L.targetId,Ke.Ta),Ke.snapshot}),function S(D,L,x,U){return w.apply(this,arguments)})(n,g,m,v);var w};const s=yield nI(n.localStore,e,!0),o=new Uz(e,s.ls),a=o.ca(s.documents),l=Ky.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),u=o.applyChanges(a,n.isPrimaryClient,l);HP(n,t,u.Ta);const h=new bye(e,t,o);return n.ma.set(e,h),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),u.snapshot}),PP.apply(this,arguments)}function Iye(n,e){return OP.apply(this,arguments)}function OP(){return OP=(0,ie.Z)(function*(n,e){const t=Pe(n),i=t.ma.get(e),r=t.fa.get(i.targetId);if(r.length>1)return t.fa.set(i.targetId,r.filter(s=>!Uy(s,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Zp(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),av(t.remoteStore,i.targetId),ng(t,i.targetId)}).catch(Hc))):(ng(t,i.targetId),yield Zp(t.localStore,i.targetId,!0))}),OP.apply(this,arguments)}function MP(){return MP=(0,ie.Z)(function*(n,e,t){const i=eO(n);try{const r=yield function(o,a){const l=Pe(o),u=zn.now(),h=a.reduce((v,w)=>v.add(w.key),Tt());let g,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=ys(),S=Tt();return l.ss.getEntries(v,h).next(D=>{w=D,w.forEach((L,x)=>{x.isValidDocument()||(S=S.add(L))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,w)).next(D=>{g=D;const L=[];for(const x of a){const U=e_e(x,g.get(x.key).overlayedDocument);null!=U&&L.push(new Rl(x.key,U,V5(U.value.mapValue),Wn.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,L,a)}).next(D=>{m=D;const L=D.applyToLocalDocumentSet(g,S);return l.documentOverlayCache.saveOverlays(v,D.batchId,L)})}).then(()=>({batchId:m.batchId,changes:i8(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Sa[o.currentUser.toKey()];u||(u=new Rn(ut)),u=u.insert(a,l),o.Sa[o.currentUser.toKey()]=u}(i,r.batchId,t),yield xl(i,r.changes),yield Qp(i.remoteStore)}catch(r){const s=Xp(r,"Failed to persist write");t.reject(s)}}),MP.apply(this,arguments)}function jz(n,e){return kP.apply(this,arguments)}function kP(){return kP=(0,ie.Z)(function*(n,e){const t=Pe(n);try{const i=yield function z_e(n,e){const t=Pe(n),i=e.snapshotVersion;let r=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ss.newChangeBuffer({trackRemovals:!0});r=t.ts;const a=[];e.targetChanges.forEach((h,g)=>{const m=r.get(g);if(!m)return;a.push(t.qr.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.qr.addMatchingKeys(s,h.addedDocuments,g)));let v=m.withSequenceNumber(s.currentSequenceNumber);var S,D,L;null!==e.targetMismatches.get(g)?v=v.withResumeToken(Mi.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,i)),r=r.insert(g,v),D=v,L=h,(0===(S=m).resumeToken.approximateByteSize()||D.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8||L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0)&&a.push(t.qr.updateTargetData(s,v))});let l=ys(),u=Tt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(vz(s,o,e.documentUpdates).next(h=>{l=h.us,u=h.cs})),!i.isEqual(Ze.min())){const h=t.qr.getLastRemoteSnapshotVersion(s).next(g=>t.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.ts=r,s))}(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.ya.get(s);o&&(qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ra=!0:r.modifiedDocuments.size>0?qe(o.Ra):r.removedDocuments.size>0&&(qe(o.Ra),o.Ra=!1))}),yield xl(t,i,e)}catch(i){yield Hc(i)}}),kP.apply(this,arguments)}function Hz(n,e,t){const i=Pe(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Pe(o);l.onlineState=a;let u=!1;l.queries.forEach((h,g)=>{for(const m of g.listeners)m.Q_(a)&&(u=!0)}),u&&AP(l)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Sye(n,e,t){return FP.apply(this,arguments)}function FP(){return FP=(0,ie.Z)(function*(n,e,t){const i=Pe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ya.get(e),s=r&&r.key;if(s){let o=new Rn(Oe.comparator);o=o.insert(s,Vn.newNoDocument(s,Ze.min()));const a=Tt().add(s),l=new qy(Ze.min(),new Map,new Rn(ut),o,a);yield jz(i,l),i.pa=i.pa.remove(s),i.ya.delete(e),$P(i)}else yield Zp(i.localStore,e,!1).then(()=>ng(i,e,t)).catch(Hc)}),FP.apply(this,arguments)}function Dye(n,e){return LP.apply(this,arguments)}function LP(){return LP=(0,ie.Z)(function*(n,e){const t=Pe(n),i=e.batch.batchId;try{const r=yield function G_e(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const g=u.batch,m=g.keys();let v=G.resolve();return m.forEach(w=>{v=v.next(()=>h.getEntry(l,w)).next(S=>{const D=u.docVersions.get(w);qe(null!==D),S.version.compareTo(D)<0&&(g.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),h.addEntry(S)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Tt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);jP(t,i,null),UP(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield xl(t,r)}catch(r){yield Hc(r)}}),LP.apply(this,arguments)}function Aye(n,e,t){return VP.apply(this,arguments)}function VP(){return VP=(0,ie.Z)(function*(n,e,t){const i=Pe(n);try{const r=yield function(o,a){const l=Pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(g=>(qe(null!==g),h=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);jP(i,e,t),UP(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield xl(i,r)}catch(r){yield Hc(r)}}),VP.apply(this,arguments)}function BP(){return BP=(0,ie.Z)(function*(n,e){const t=Pe(n);tu(t.remoteStore)||fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const a=Pe(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===i)return void e.resolve();const r=t.ba.get(i)||[];r.push(e),t.ba.set(i,r)}catch(i){const r=Xp(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),BP.apply(this,arguments)}function UP(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function jP(n,e,t){const i=Pe(n);let r=i.Sa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function ng(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.fa.get(e))n.ma.delete(i),t&&n.Va.Fa(i,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(i=>{n.wa.containsKey(i)||$z(n,i)})}function $z(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(av(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),$P(n))}function HP(n,e,t){for(const i of t)i instanceof Vz?(n.wa.addReference(i.key,e),Nye(n,i)):i instanceof Bz?(fe("SyncEngine","Document no longer in limbo: "+i.key),n.wa.removeReference(i.key,e),n.wa.containsKey(i.key)||$z(n,i.key)):He()}function Nye(n,e){const t=e.key,i=t.path.canonicalString();n.pa.get(t)||n.ga.has(i)||(fe("SyncEngine","New document in limbo: "+t),n.ga.add(i),$P(n))}function $P(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new Oe(zt.fromString(e)),i=n.Da.next();n.ya.set(i,new Eye(t)),n.pa=n.pa.insert(t,i),aI(n.remoteStore,new Nl(Ur(kp(t.path)),i,"TargetPurposeLimboResolution",Ls._e))}}function xl(n,e,t){return GP.apply(this,arguments)}function GP(){return GP=(0,ie.Z)(function*(n,e,t){const i=Pe(n),r=[],s=[],o=[];var a;i.ma.isEmpty()||(i.ma.forEach((a,l)=>{o.push(i.va(l,e,t).then(u=>{if((u||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,u?.fromCache?"not-current":"current"),u){r.push(u);const h=Kx.Qi(l.targetId,u);s.push(h)}}))}),yield Promise.all(o),i.Va.a_(r),yield(a=(0,ie.Z)(function*(u,h){const g=Pe(u);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>G.forEach(h,v=>G.forEach(v.ki,w=>g.persistence.referenceDelegate.addReference(m,v.targetId,w)).next(()=>G.forEach(v.qi,w=>g.persistence.referenceDelegate.removeReference(m,v.targetId,w)))))}catch(m){if(!$c(m))throw m;fe("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const w=g.ts.get(v),D=w.withLastLimboFreeSnapshotVersion(w.snapshotVersion);g.ts=g.ts.insert(v,D)}}}),function l(u,h){return a.apply(this,arguments)})(i.localStore,s))}),GP.apply(this,arguments)}function xye(n,e){return zP.apply(this,arguments)}function zP(){return zP=(0,ie.Z)(function*(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const i=yield _z(t.localStore,e);t.currentUser=e,(s=t).ba.forEach(a=>{a.forEach(l=>{l.reject(new de(Q.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield xl(t,i._s)}var s}),zP.apply(this,arguments)}function Pye(n,e){const t=Pe(n),i=t.ya.get(e);if(i&&i.Ra)return Tt().add(i.key);{let r=Tt();const s=t.fa.get(e);if(!s)return r;for(const o of s){const a=t.ma.get(o);r=r.unionWith(a.view.ua)}return r}}function Oye(n,e){return WP.apply(this,arguments)}function WP(){return WP=(0,ie.Z)(function*(n,e){const t=Pe(n),i=yield nI(t.localStore,e.query,!0),r=e.view.da(i);return t.isPrimaryClient&&HP(t,e.targetId,r.Ta),r}),WP.apply(this,arguments)}function Mye(n,e){return qP.apply(this,arguments)}function qP(){return qP=(0,ie.Z)(function*(n,e){const t=Pe(n);return Ez(t.localStore,e).then(i=>xl(t,i))}),qP.apply(this,arguments)}function kye(n,e,t,i){return KP.apply(this,arguments)}function KP(){return KP=(0,ie.Z)(function*(n,e,t,i){const r=Pe(n),s=yield function(a,l){const u=Pe(a),h=Pe(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Cn(g,l).next(m=>m?u.localDocuments.getDocuments(g,m):G.resolve(null)))}(r.localStore,e);var l;null!==s?("pending"===t?yield Qp(r.remoteStore):"acknowledged"===t||"rejected"===t?(jP(r,e,i||null),UP(r,e),l=e,Pe(Pe(r.localStore).mutationQueue).Fn(l)):He(),yield xl(r,s)):fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),KP.apply(this,arguments)}function ZP(){return ZP=(0,ie.Z)(function*(n,e){const t=Pe(n);if(XP(t),eO(t),!0===e&&!0!==t.Ca){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield Gz(t,i.toArray());t.Ca=!0,yield EP(t.remoteStore,!0);for(const s of r)aI(t.remoteStore,s)}else if(!1===e&&!1!==t.Ca){const i=[];let r=Promise.resolve();t.fa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(ng(t,o),Zp(t.localStore,o,!0))),av(t.remoteStore,o)}),yield r,yield Gz(t,i),function(o){const a=Pe(o);a.ya.forEach((l,u)=>{av(a.remoteStore,u)}),a.wa.Vr(),a.ya=new Map,a.pa=new Rn(Oe.comparator)}(t),t.Ca=!1,yield EP(t.remoteStore,!1)}}),ZP.apply(this,arguments)}function Gz(n,e,t){return YP.apply(this,arguments)}function YP(){return YP=(0,ie.Z)(function*(n,e,t){const i=Pe(n),r=[],s=[];for(const o of e){let a;const l=i.fa.get(o);if(l&&0!==l.length){a=yield Kp(i.localStore,Ur(l[0]));for(const u of l){const h=i.ma.get(u),g=yield Oye(i,h);g.snapshot&&s.push(g.snapshot)}}else{const u=yield bz(i.localStore,o);a=yield Kp(i.localStore,u),yield xP(i,zz(u),o,!1,a.resumeToken)}r.push(a)}return i.Va.a_(s),r}),YP.apply(this,arguments)}function zz(n){return Y5(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Lye(n){return t=Pe(n).localStore,Pe(Pe(t).persistence).Bi();var t}function Vye(n,e,t,i){return QP.apply(this,arguments)}function QP(){return QP=(0,ie.Z)(function*(n,e,t,i){const r=Pe(n);if(r.Ca)return void fe("SyncEngine","Ignoring unexpected query state notification.");const s=r.fa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield Ez(r.localStore,e8(s[0])),a=qy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Mi.EMPTY_BYTE_STRING);yield xl(r,o,a);break}case"rejected":yield Zp(r.localStore,e,!0),ng(r,e,i);break;default:He()}}),QP.apply(this,arguments)}function Bye(n,e,t){return JP.apply(this,arguments)}function JP(){return JP=(0,ie.Z)(function*(n,e,t){const i=XP(n);if(i.Ca){for(const r of e){if(i.fa.has(r)){fe("SyncEngine","Adding an already active target "+r);continue}const s=yield bz(i.localStore,r),o=yield Kp(i.localStore,s);yield xP(i,zz(s),o.targetId,!1,o.resumeToken),aI(i.remoteStore,o)}for(const r of t)i.fa.has(r)&&(yield Zp(i.localStore,r,!1).then(()=>{av(i.remoteStore,r),ng(i,r)}).catch(Hc))}}),JP.apply(this,arguments)}function XP(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sye.bind(null,e),e.Va.a_=mye.bind(null,e.eventManager),e.Va.Fa=_ye.bind(null,e.eventManager),e}function eO(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dye.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Aye.bind(null,e),e}class lv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ie.Z)(function*(){t.serializer=sv(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return mz(this.persistence,new gz,e.initialUser,this.serializer)}createPersistence(e){return new Gx(XT.jr,this.serializer)}createSharedClientState(e){return new Cz}terminate(){var e=this;return(0,ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tO extends lv{constructor(e,t,i){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ie.Z)(function*(){yield t().call(i,e),yield i.xa.initialize(i,e),yield eO(i.xa.syncEngine),yield Qp(i.xa.remoteStore),yield i.persistence.mi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return mz(this.persistence,new gz,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new oz(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new hme(t,this.persistence);return new dme(e.asyncQueue,i)}createPersistence(e){const t=qx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new Wx(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Dz(),oI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Cz}}class Wz extends tO{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ie.Z)(function*(){yield t().call(i,e);const r=i.xa.syncEngine;i.sharedClientState instanceof nP&&(i.sharedClientState.syncEngine={Ys:kye.bind(null,r),Zs:Vye.bind(null,r),Xs:Bye.bind(null,r),Bi:Lye.bind(null,r),Js:Mye.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.mi(function(){var s=(0,ie.Z)(function*(o){yield function Fye(n,e){return ZP.apply(this,arguments)}(i.xa.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Dz();if(!nP.D(t))throw new de(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=qx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nP(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class ig{initialize(e,t){var i=this;return(0,ie.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>Hz(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=xye.bind(null,i.syncEngine),yield EP(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gye}createDatastore(e){const t=sv(e.databaseInfo.databaseId),i=new J_e(e.databaseInfo);return new tye(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return i=this.localStore,r=this.datastore,s=e.asyncQueue,o=t=>Hz(this.syncEngine,t,0),a=Sz.D()?new Sz:new Z_e,new rye(i,r,s,o,a);var i,r,s,o,a}createSyncEngine(e,t){return function(r,s,o,a,l,u,h){const g=new wye(r,s,o,a,l,u);return h&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ie.Z)(function*(i){const r=Pe(i);fe("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield Yp(r),r.F_.shutdown(),r.M_.set("Unknown")}),function t(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function qz(n,e=10240){let t=0;return{read:()=>(0,ie.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ie.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class cI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Hye{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Oi,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,ie.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,ie.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,ie.Z)(function*(){const t=yield e.qa();if(null===t)return null;const i=e.La.decode(t),r=Number(i);isNaN(r)&&e.Qa(`length string (${i}) is not valid number`);const s=yield e.Ka(r);return new yye(JSON.parse(s),t.length+r)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,ie.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Ka(e){var t=this;return(0,ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const i=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,ie.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class $ye{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new de(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ie.Z)(function*(o,a){const l=Pe(o),u=Yy(l.serializer)+"/documents",h={documents:a.map(w=>Zy(l.serializer,w))},g=yield l.Co("BatchGetDocuments",u,h,a.length),m=new Map;g.forEach(w=>{const S=function u_e(n,e){return"found"in e?function(i,r){qe(!!r.found);const s=xa(i,r.found.name),o=mi(r.found.updateTime),a=r.found.createTime?mi(r.found.createTime):Ze.min(),l=new dr({mapValue:{fields:r.found.fields}});return Vn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(i,r){qe(!!r.missing),qe(!!r.readTime);const s=xa(i,r.missing),o=mi(r.readTime);return Vn.newNoDocument(s,o)}(n,e):He()}(l.serializer,w);m.set(S.key.toString(),S)});const v=[];return a.forEach(w=>{const S=m.get(w.toString());qe(!!S),v.push(S)}),v}),function s(o,a){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new jp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=Oe.fromPath(r);e.mutations.push(new Sx(s,e.precondition(s)))}),yield(i=(0,ie.Z)(function*(s,o){const a=Pe(s),l=Yy(a.serializer)+"/documents",u={writes:o.map(h=>Qy(a.serializer,h))};yield a.wo("Commit",l,u)}),function r(s,o){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw He();t=Ze.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new de(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ze.min())?Wn.exists(!1):Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ze.min()))throw new de(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Gye{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Wa=i.maxAttempts,this.zo=new rP(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,ie.Z)(function*(){const t=new $ye(e.datastore),i=e.za(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.ja(s)}))}).catch(r=>{e.ja(r)})}))}za(e){try{const t=this.updateFunction(e);return!Py(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!y8(t)}return!1}}class zye{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Gi.UNAUTHENTICATED,this.clientId=p5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,ie.Z)(function*(a){fe("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(fe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new de(Q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Xp(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function uI(n,e){return nO.apply(this,arguments)}function nO(){return nO=(0,ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,ie.Z)(function*(s){i.isEqual(s)||(yield _z(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),nO.apply(this,arguments)}function iO(n,e){return rO.apply(this,arguments)}function rO(){return rO=(0,ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield sO(n);fe("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>Mz(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Mz(e.remoteStore,s)),n._onlineComponents=e}),rO.apply(this,arguments)}function Kz(n){return"FirebaseError"===n.name?n.code===Q.FAILED_PRECONDITION||n.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function sO(n){return oO.apply(this,arguments)}function oO(){return oO=(0,ie.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield uI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Kz(t))throw t;ms("Error using user provided cache. Falling back to memory cache: "+t),yield uI(n,new lv)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),yield uI(n,new lv);return n._offlineComponents}),oO.apply(this,arguments)}function dI(n){return aO.apply(this,arguments)}function aO(){return aO=(0,ie.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield iO(n,n._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),yield iO(n,new ig))),n._onlineComponents}),aO.apply(this,arguments)}function Zz(n){return sO(n).then(e=>e.persistence)}function rg(n){return sO(n).then(e=>e.localStore)}function Yz(n){return dI(n).then(e=>e.remoteStore)}function lO(n){return dI(n).then(e=>e.syncEngine)}function sg(n){return cO.apply(this,arguments)}function cO(){return cO=(0,ie.Z)(function*(n){const e=yield dI(n),t=e.eventManager;return t.onListen=Tye.bind(null,e.syncEngine),t.onUnlisten=Iye.bind(null,e.syncEngine),t}),cO.apply(this,arguments)}function Jz(n,e,t={}){const i=new Oi;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(s,o,a,l,u){const h=new cI({next:m=>{o.enqueueAndForget(()=>SP(s,g));const v=m.docs.has(a);!v&&m.fromCache?u.reject(new de(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&"server"===l.source?u.reject(new de(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),g=new RP(kp(a.path),h,{includeMetadataChanges:!0,J_:!0});return IP(s,g)}(yield sg(n),n.asyncQueue,e,t,i)})),i.promise}function Xz(n,e,t={}){const i=new Oi;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(s,o,a,l,u){const h=new cI({next:m=>{o.enqueueAndForget(()=>SP(s,g)),m.fromCache&&"server"===l.source?u.reject(new de(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),g=new RP(a,h,{includeMetadataChanges:!0,J_:!0});return IP(s,g)}(yield sg(n),n.asyncQueue,e,t,i)})),i.promise}function eW(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const tW=new Map;function uO(n,e,t){if(!t)throw new de(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nW(n,e,t,i){if(!0===e&&!0===i)throw new de(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iW(n){if(!Oe.isDocumentKey(n))throw new de(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rW(n){if(Oe.isDocumentKey(n))throw new de(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(i=n).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof n?"a function":He()}function Vt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hI(n);throw new de(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function sW(n,e){if(e<=0)throw new de(Q.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class oW{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new de(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new de(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=eW(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new de(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cv{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oW({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new de(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new de(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oW(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new Xge;switch(i.type){case"firstParty":return new ime(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=tW.get(t);i&&(fe("ComponentProvider","Removing Datastore"),tW.delete(t),i.terminate())}(this),Promise.resolve()}}class hr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hr(this.firestore,e,this._query)}}class Bn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Pa extends hr{constructor(e,t,i){super(e,t,kp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Oe(e))}withConverter(e){return new Pa(this.firestore,e,this._path)}}function lW(n,e,...t){if(n=(0,C.m9)(n),uO("collection","path",e),n instanceof cv){const i=zt.fromString(e,...t);return rW(i),new Pa(n,null,i)}{if(!(n instanceof Bn||n instanceof Pa))throw new de(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(zt.fromString(e,...t));return rW(i),new Pa(n.firestore,null,i)}}function fI(n,e,...t){if(n=(0,C.m9)(n),1===arguments.length&&(e=p5.newId()),uO("doc","path",e),n instanceof cv){const i=zt.fromString(e,...t);return iW(i),new Bn(n,null,new Oe(i))}{if(!(n instanceof Bn||n instanceof Pa))throw new de(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(zt.fromString(e,...t));return iW(i),new Bn(n.firestore,n instanceof Pa?n.converter:null,new Oe(i))}}function cW(n,e){return n=(0,C.m9)(n),e=(0,C.m9)(e),(n instanceof Bn||n instanceof Pa)&&(e instanceof Bn||e instanceof Pa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dO(n,e){return n=(0,C.m9)(n),e=(0,C.m9)(e),n instanceof hr&&e instanceof hr&&n.firestore===e.firestore&&Uy(n._query,e._query)&&n.converter===e.converter}class ive{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new rP(this,"async_queue_retry"),this.iu=()=>{const t=oI();t&&fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=oI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=oI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new Oi;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,ie.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!$c(t))throw t;fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{throw this.eu=i,this.tu=!1,gi("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(i)),i}).then(i=>(this.tu=!1,i))));return this.Ja=t,t}enqueueAfterDelay(e,t,i){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=TP.createAndSchedule(this,e,t,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&He()}verifyOperationInProgress(){}uu(){var e=this;return(0,ie.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function hO(n){return function(t,i){if("object"!=typeof t||null===t)return!1;const r=t;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class rve{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Nn extends cv{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new ive,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||uW(this),this._firestoreClient.terminate()}}function li(n){return n._firestoreClient||uW(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function uW(n){var e,t,i;const r=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ome(n._databaseId,l,n._persistenceKey,(h=r).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eW(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;n._firestoreClient=new zye(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=r.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.localCache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function dW(n,e,t){const i=new Oi;return n.asyncQueue.enqueue((0,ie.Z)(function*(){try{yield uI(n,t),yield iO(n,e),i.resolve()}catch(r){const s=r;if(!Kz(s))throw s;ms("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function hW(n){if(n._initialized||n._terminated)throw new de(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oa(Mi.fromBase64String(e))}catch(t){throw new de(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oa(Mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new de(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $d{constructor(e){this._methodName=e}}class pI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}}const gve=/^__.*__$/;class mve{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Rl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Up(e,this.data,t,this.fieldTransforms)}}class fW{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Rl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pW(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He()}}class gI{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new gI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return yI(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(pW(this.Iu)&&gve.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class _ve{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||sv(e)}pu(e,t,i,r=!1){return new gI({Iu:e,methodName:t,gu:i,path:Ln.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gd(n){const e=n._freezeSettings(),t=sv(n._databaseId);return new _ve(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mI(n,e,t,i,r,s={}){const o=n.pu(s.merge||s.mergeFields?2:0,e,t,r);mO("Data must be an object, but it was:",o,i);const a=_W(i,o);let l,u;if(s.merge)l=new _s(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const m=hv(e,g,t);if(!o.contains(m))throw new de(Q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);vW(h,m)||h.push(m)}l=new _s(h),u=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=o.fieldTransforms;return new mve(new dr(a),l,u)}class dv extends $d{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dv}}function gW(n,e,t){return new gI({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fO extends $d{_toFieldTransform(e){return new Gy(e.path,new Vp)}isEqual(e){return e instanceof fO}}class yve extends $d{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=gW(this,e,!0),i=this.yu.map(s=>zd(s,t)),r=new Md(i);return new Gy(e.path,r)}isEqual(e){return this===e}}class vve extends $d{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=gW(this,e,!0),i=this.yu.map(s=>zd(s,t)),r=new kd(i);return new Gy(e.path,r)}isEqual(e){return this===e}}class bve extends $d{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new Bp(e.serializer,a8(e.serializer,this.wu));return new Gy(e.path,t)}isEqual(e){return this===e}}function pO(n,e,t,i){const r=n.pu(1,e,t);mO("Data must be an object, but it was:",r,i);const s=[],o=dr.empty();Gc(i,(l,u)=>{const h=_I(e,l,t);u=(0,C.m9)(u);const g=r.Ru(h);if(u instanceof dv)s.push(h);else{const m=zd(u,g);null!=m&&(s.push(h),o.set(h,m))}});const a=new _s(s);return new fW(o,a,r.fieldTransforms)}function gO(n,e,t,i,r,s){const o=n.pu(1,e,t),a=[hv(e,i,t)],l=[r];if(s.length%2!=0)throw new de(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(hv(e,s[m])),l.push(s[m+1]);const u=[],h=dr.empty();for(let m=a.length-1;m>=0;--m)if(!vW(u,a[m])){const v=a[m];let w=l[m];w=(0,C.m9)(w);const S=o.Ru(v);if(w instanceof dv)u.push(v);else{const D=zd(w,S);null!=D&&(u.push(v),h.set(v,D))}}const g=new _s(u);return new fW(h,g,o.fieldTransforms)}function mW(n,e,t,i=!1){return zd(t,n.pu(i?4:3,e))}function zd(n,e){if(yW(n=(0,C.m9)(n)))return mO("Unsupported field value:",e,n),_W(n,e);if(n instanceof $d)return function(i,r){if(!pW(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=zd(a,r.Vu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if(null===(i=(0,C.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return a8(r.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const s=zn.fromDate(i);return{timestampValue:Hp(r.serializer,s)}}if(i instanceof zn){const s=new zn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hp(r.serializer,s)}}if(i instanceof pI)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Oa)return{bytesValue:A8(r.serializer,i._byteString)};if(i instanceof Bn){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Px(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${hI(i)}`)}(n,e)}function _W(n,e){const t={};return R5(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gc(n,(i,r)=>{const s=zd(r,e.Eu(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function yW(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof zn||n instanceof pI||n instanceof Oa||n instanceof Bn||n instanceof $d)}function mO(n,e,t){if(!yW(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const i=hI(t);throw e.mu("an object"===i?n+" a custom object":n+" "+i)}var r}function hv(n,e,t){if((e=(0,C.m9)(e))instanceof Pl)return e._internalPath;if("string"==typeof e)return _I(n,e);throw yI("Field path arguments must be of type string or ",n,!1,void 0,t)}const Eve=new RegExp("[~\\*/\\[\\]]");function _I(n,e,t){if(e.search(Eve)>=0)throw yI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pl(...e.split("."))._internalPath}catch{throw yI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yI(n,e,t,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new de(Q.INVALID_ARGUMENT,a+n+l)}function vW(n,e){return n.some(t=>t.isEqual(e))}class fv{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wve extends fv{data(){return super.data()}}function vI(n,e){return"string"==typeof e?_I(n,e):e instanceof Pl?e._internalPath:e._delegate._internalPath}function bW(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new de(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _O{}class pv extends _O{}function iu(n,e,...t){let i=[];e instanceof _O&&i.push(e),i=i.concat(t),function(s){const o=s.filter(l=>l instanceof og).length,a=s.filter(l=>l instanceof gv).length;if(o>1||o>0&&a>0)throw new de(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class gv extends pv{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new gv(e,t,i)}_apply(e){const t=this._parse(e);return IW(e._query,t),new hr(e.firestore,e.converter,Ix(e._query,t))}_parse(e){const t=Gd(e.firestore);return function(s,o,a,l,u,h,g){let m;if(u.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new de(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){TW(g,h);const v=[];for(const w of g)v.push(wW(l,s,w));m={arrayValue:{values:v}}}else m=wW(l,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||TW(g,h),m=mW(a,"where",g,"in"===h||"not-in"===h);return jt.create(u,h,m)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class og extends _O{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new og(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)IW(o,l),o=Ix(o,l)}(e._query,t),new hr(e.firestore,e.converter,Ix(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yO extends pv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yO(e,t)}_apply(e){const t=function(r,s,o){if(null!==r.startAt)throw new de(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new de(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vy(s,o)}(e._query,this._field,this._direction);return new hr(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Dl(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class bI extends pv{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new bI(e,t,i)}_apply(e){return new hr(e.firestore,e.converter,UT(e._query,this._limit,this._limitType))}}class EI extends pv{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new EI(e,t,i)}_apply(e){const t=EW(e,this.type,this._docOrFields,this._inclusive);return new hr(e.firestore,e.converter,(s=t,new Dl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class wI extends pv{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new wI(e,t,i)}_apply(e){const t=EW(e,this.type,this._docOrFields,this._inclusive);return new hr(e.firestore,e.converter,(s=t,new Dl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function EW(n,e,t,i){if(t[0]=(0,C.m9)(t[0]),t[0]instanceof fv)return function(s,o,a,l,u){if(!l)throw new de(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Fp(s))if(g.field.isKeyField())h.push(Pd(o,l.key));else{const m=l.data.field(g.field);if(OT(m))throw new de(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const v=g.field.canonicalString();throw new de(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Yc(h,u)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Gd(n.firestore);return function(o,a,l,u,h,g){const m=o.explicitOrderBy;if(h.length>m.length)throw new de(Q.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let w=0;w<h.length;w++){const S=h[w];if(m[w].field.isKeyField()){if("string"!=typeof S)throw new de(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof S}`);if(!Tx(o)&&-1!==S.indexOf("/"))throw new de(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${S}' contains a slash.`);const D=o.path.child(zt.fromString(S));if(!Oe.isDocumentKey(D))throw new de(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const L=new Oe(D);v.push(Pd(a,L))}else{const D=mW(l,u,S);v.push(D)}}return new Yc(v,g)}(n._query,n.firestore._databaseId,r,e,t,i)}}function wW(n,e,t){if("string"==typeof(t=(0,C.m9)(t))){if(""===t)throw new de(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tx(e)&&-1!==t.indexOf("/"))throw new de(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(zt.fromString(t));if(!Oe.isDocumentKey(i))throw new de(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Pd(n,new Oe(i))}if(t instanceof Bn)return Pd(n,t._key);throw new de(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hI(t)}.`)}function TW(n,e){if(!Array.isArray(n)||0===n.length)throw new de(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IW(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new de(Q.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class vO{convertValue(e,t="none"){switch(Kc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw He()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Gc(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new pI(ai(e.latitude),ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=MT(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(My(e));default:return null}}convertTimestamp(e){const t=zc(e);return new zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=zt.fromString(e);qe(V8(i));const r=new Wc(i.get(1),i.get(3)),s=new Oe(i.popFirst(5));return r.isEqual(t)||gi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function TI(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class xve extends vO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class Wd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ol extends fv{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(vI("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class mv extends Ol{data(e={}){return super.data(e)}}class ru{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Wd(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new mv(this._firestore,this._userDataWriter,i.key,i,new Wd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new mv(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Wd(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new mv(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Wd(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Ove(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ove(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He()}}function SW(n,e){return n instanceof Ol&&e instanceof Ol?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ru&&e instanceof ru&&n._firestore===e._firestore&&dO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class su extends vO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function DW(n,e,t){n=Vt(n,Bn);const i=Vt(n.firestore,Nn),r=TI(n.converter,e,t);return ag(i,[mI(Gd(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Wn.none())])}function AW(n,e,t,...i){n=Vt(n,Bn);const r=Vt(n.firestore,Nn),s=Gd(r);let o;return o="string"==typeof(e=(0,C.m9)(e))||e instanceof Pl?gO(s,"updateDoc",n._key,e,t,i):pO(s,"updateDoc",n._key,e),ag(r,[o.toMutation(n._key,Wn.exists(!0))])}function RW(n,...e){var t,i,r;n=(0,C.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||hO(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(hO(e[o])){const g=e[o];e[o]=null===(t=g.next)||void 0===t?void 0:t.bind(g),e[o+1]=null===(i=g.error)||void 0===i?void 0:i.bind(g),e[o+2]=null===(r=g.complete)||void 0===r?void 0:r.bind(g)}let l,u,h;if(n instanceof Bn)u=Vt(n.firestore,Nn),h=kp(n._key.path),l={next:g=>{e[o]&&e[o](bO(u,n,g))},error:e[o+1],complete:e[o+2]};else{const g=Vt(n,hr);u=Vt(g.firestore,Nn),h=g._query;const m=new su(u);l={next:v=>{e[o]&&e[o](new ru(u,m,g,v))},error:e[o+1],complete:e[o+2]},bW(n._query)}return function(m,v,w,S){const D=new cI(S),L=new RP(v,D,w);return m.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return IP(yield sg(m),L)})),()=>{D.Na(),m.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return SP(yield sg(m),L)}))}}(li(u),h,a,l)}function ag(n,e){return function(i,r){const s=new Oi;return i.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function Cye(n,e,t){return MP.apply(this,arguments)}(yield lO(i),r,s)})),s.promise}(li(n),e)}function bO(n,e,t){const i=t.docs.get(e._key),r=new su(n);return new Ol(n,r,e._key,i,new Wd(t.hasPendingWrites,t.fromCache),e.converter)}const Qve={maxAttempts:5};class NW{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gd(e)}set(e,t,i){this._verifyNotCommitted();const r=ou(e,this._firestore),s=TI(r.converter,t,i),o=mI(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,Wn.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=ou(e,this._firestore);let o;return o="string"==typeof(t=(0,C.m9)(t))||t instanceof Pl?gO(this._dataReader,"WriteBatch.update",s._key,t,i,r):pO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ou(e,this._firestore);return this._mutations=this._mutations.concat(new jp(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ou(n,e){if((n=(0,C.m9)(n)).firestore!==e)throw new de(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Jve extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=Gd(t)}get(t){const i=ou(t,this._firestore),r=new xve(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||1!==s.length)return He();const o=s[0];if(o.isFoundDocument())return new fv(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new fv(this._firestore,r,i._key,null,i.converter);throw He()})}set(t,i,r){const s=ou(t,this._firestore),o=TI(s.converter,i,r),a=mI(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,r);return this._transaction.set(s._key,a),this}update(t,i,r,...s){const o=ou(t,this._firestore);let a;return a="string"==typeof(i=(0,C.m9)(i))||i instanceof Pl?gO(this._dataReader,"Transaction.update",o._key,i,r,s):pO(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(t){const i=ou(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ou(e,this._firestore),i=new su(this._firestore);return super.get(e).then(r=>new Ol(this._firestore,i,t._key,r._document,new Wd(!1,!1),t.converter))}}function wO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new de("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function MW(){if(typeof Uint8Array>"u")throw new de("unimplemented","Uint8Arrays are not available in this environment.")}function kW(){if(!function xme(){return typeof atob<"u"}())throw new de("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Dp=cs.SDK_VERSION,(0,cs._registerComponent)(new Lo.wA("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Nn(new tme(i.getProvider("auth-internal")),new rme(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new de(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,cs.registerVersion)(d5,"4.4.0",e),(0,cs.registerVersion)(d5,"4.4.0","esm2017")}();class _v{constructor(e){this._delegate=e}static fromBase64String(e){return kW(),new _v(Oa.fromBase64String(e))}static fromUint8Array(e){return MW(),new _v(Oa.fromUint8Array(e))}toBase64(){return kW(),this._delegate.toBase64()}toUint8Array(){return MW(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function TO(n){return function l0e(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class c0e{enableIndexedDbPersistence(e,t){return function ove(n,e){hW(n=Vt(n,Nn));const t=li(n);if(t._uninitializedComponentsProvider)throw new de(Q.FAILED_PRECONDITION,"SDK cache is already specified.");ms("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new ig;return dW(t,r,new tO(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ave(n){hW(n=Vt(n,Nn));const e=li(n);if(e._uninitializedComponentsProvider)throw new de(Q.FAILED_PRECONDITION,"SDK cache is already specified.");ms("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new ig;return dW(e,i,new Wz(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function lve(n){if(n._initialized&&!n._terminated)throw new de(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Oi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{yield(t=(0,ie.Z)(function*(r){if(!qo.D())return Promise.resolve();const s=r+"main";yield qo.delete(s)}),function i(r){return t.apply(this,arguments)})(qx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class FW{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ms("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function aW(n,e,t,i={}){var r;const s=(n=Vt(n,cv))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=Gi.MOCK_USER;else{a=(0,C.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new de(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Gi(u)}n._authCredentials=new eme(new h5(a,l))}}(this._delegate,e,t,i)}enableNetwork(){return function uve(n){return function Wye(n){return n.asyncQueue.enqueue((0,ie.Z)(function*(){const e=yield Zz(n),t=yield Yz(n);return e.setNetworkEnabled(!0),function(r){const s=Pe(r);return s.C_.delete(0),ov(s)}(t)}))}(li(n=Vt(n,Nn)))}(this._delegate)}disableNetwork(){return function dve(n){return function qye(n){return n.asyncQueue.enqueue((0,ie.Z)(function*(){const e=yield Zz(n),t=yield Yz(n);return e.setNetworkEnabled(!1),(i=(0,ie.Z)(function*(s){const o=Pe(s);o.C_.add(0),yield Yp(o),o.M_.set("Offline")}),function r(s){return i.apply(this,arguments)})(t);var i}))}(li(n=Vt(n,Nn)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,nW("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function cve(n){return function(t){const i=new Oi;return t.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function Rye(n,e){return BP.apply(this,arguments)}(yield lO(t),i)})),i.promise}(li(n=Vt(n,Nn)))}(this._delegate)}onSnapshotsInSync(e){return function Hve(n,e){return function Yye(n,e){const t=new cI(e);return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return r=yield sg(n),s=t,Pe(r).q_.add(s),void s.next();var r,s})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return r=yield sg(n),s=t,void Pe(r).q_.delete(s);var r,s}))}}(li(n=Vt(n,Nn)),hO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new de("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new lg(this,lW(this._delegate,e))}catch(t){throw jr(t,"collection()","Firestore.collection()")}}doc(e){try{return new ho(this,fI(this._delegate,e))}catch(t){throw jr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hr(this,function nve(n,e){if(n=Vt(n,cv),uO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new de(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hr(n,null,(i=e,new Dl(zt.emptyPath(),i)));var i}(this._delegate,e))}catch(t){throw jr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Xve(n,e,t){n=Vt(n,Nn);const i=Object.assign(Object.assign({},Qve),t);return function(s){if(s.maxAttempts<1)throw new de(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new Oi;return s.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){const u=yield function Qz(n){return dI(n).then(e=>e.datastore)}(s);new Gye(s.asyncQueue,u,a,o,l).run()})),l.promise}(li(n),r=>e(new Jve(n,r)),i)}(this._delegate,t=>e(new LW(this,t)))}batch(){return li(this._delegate),new VW(new NW(this._delegate,e=>ag(this._delegate,e)))}loadBundle(e){return function hve(n,e){const t=li(n=Vt(n,Nn)),i=new rve;return function Qye(n,e,t,i){const r=function(o,a){let l;return l="string"==typeof o?b8().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return qz(h,g);if(h instanceof ArrayBuffer)return qz(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new Hye(h,a);var h}(t,sv(e));n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){!function Uye(n,e,t){const i=Pe(n);var r;(r=(0,ie.Z)(function*(o,a,l){try{const u=yield a.getMetadata();if(yield function(w,S){const D=Pe(w),L=mi(S.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",x=>D.Kr.getBundleMetadata(x,S.id)).then(x=>!!x&&x.createTime.compareTo(L)>=0)}(o.localStore,u))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(w=u).totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}),Promise.resolve(new Set);l._updateProgress(Lz(u));const h=new vye(u,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const v=yield h.ea(g);v&&l._updateProgress(v),g=yield a.Ma()}const m=yield h.complete();return yield xl(o,m.ra,void 0),yield function(w,S){const D=Pe(w);return D.persistence.runTransaction("Save bundle","readwrite",L=>D.Kr.saveBundleMetadata(L,S))}(o.localStore,u),l._completeWith(m.progress),Promise.resolve(m.na)}catch(u){return ms("SyncEngine",`Loading bundle failed with ${u}`),l._failWith(u),Promise.resolve(new Set)}var w}),function s(o,a,l){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield lO(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function fve(n,e){return function Jye(n,e){return n.asyncQueue.enqueue((0,ie.Z)(function*(){return function(i,r){const s=Pe(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,r))}(yield rg(n),e)}))}(li(n=Vt(n,Nn)),e).then(t=>t?new hr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Hr(this,t):null)}}class CI extends vO{constructor(e){super(),this.firestore=e}convertBytes(e){return new _v(new Oa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ho.forKey(t,this.firestore,null)}}class LW{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new CI(e)}get(e){const t=Kd(e);return this._delegate.get(t).then(i=>new yv(this._firestore,new Ol(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Kd(e);return i?(wO("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Kd(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Kd(e);return this._delegate.delete(t),this}}class VW{constructor(e){this._delegate=e}set(e,t,i){const r=Kd(e);return i?(wO("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Kd(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Kd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qd{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new mv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vv(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=qd.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new qd(e,new CI(e),t),r.set(t,s)),s}}qd.INSTANCES=new WeakMap;class ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CI(e)}static forPath(e,t,i){if(e.length%2!=0)throw new de("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ho(t,new Bn(t._delegate,i,new Oe(e)))}static forKey(e,t,i){return new ho(t,new Bn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new lg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new lg(this.firestore,lW(this._delegate,e))}catch(t){throw jr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,C.m9)(e))instanceof Bn&&cW(this._delegate,e)}set(e,t){t=wO("DocumentReference.set",t);try{return t?DW(this._delegate,e,t):DW(this._delegate,e)}catch(i){throw jr(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?AW(this._delegate,e):AW(this._delegate,e,t,...i)}catch(r){throw jr(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Uve(n){return ag(Vt(n.firestore,Nn),[new jp(n._key,Wn.none())])}(this._delegate)}onSnapshot(...e){const t=BW(e),i=UW(e,r=>new yv(this.firestore,new Ol(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return RW(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function kve(n){n=Vt(n,Bn);const e=Vt(n.firestore,Nn),t=li(e),i=new su(e);return function Kye(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(i=(0,ie.Z)(function*(s,o,a){try{const l=yield function(h,g){const m=Pe(h);return m.persistence.runTransaction("read document","readonly",v=>m.localDocuments.getDocument(v,g))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new de(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const u=Xp(l,`Failed to get document '${o} from cache`);a.reject(u)}}),function r(s,o,a){return i.apply(this,arguments)})(yield rg(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Ol(e,i,n._key,r,new Wd(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Fve(n){n=Vt(n,Bn);const e=Vt(n.firestore,Nn);return Jz(li(e),n._key,{source:"server"}).then(t=>bO(e,n,t))}(this._delegate):function Mve(n){n=Vt(n,Bn);const e=Vt(n.firestore,Nn);return Jz(li(e),n._key).then(t=>bO(e,n,t))}(this._delegate),t.then(i=>new yv(this.firestore,new Ol(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new ho(this.firestore,this._delegate.withConverter(e?qd.getInstance(this.firestore,e):null))}}function jr(n,e,t){return n.message=n.message.replace(e,t),n}function BW(n){for(const e of n)if("object"==typeof e&&!TO(e))return e;return{}}function UW(n,e){var t,i;let r;return r=TO(n[0])?n[0]:TO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class yv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ho(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return SW(this._delegate,e._delegate)}}class vv extends yv{data(e){const t=this._delegate.data(e);return this._delegate._converter||function Jge(n,e){n||He()}(void 0!==t),t}}class Hr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CI(e)}where(e,t,i){try{return new Hr(this.firestore,iu(this._delegate,function Tve(n,e,t){const i=e,r=vI("where",n);return gv._create(r,i,t)}(e,t,i)))}catch(r){throw jr(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Hr(this.firestore,iu(this._delegate,function Ive(n,e="asc"){const t=e,i=vI("orderBy",n);return yO._create(i,t)}(e,t)))}catch(i){throw jr(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hr(this.firestore,iu(this._delegate,function Cve(n){return sW("limit",n),bI._create("limit",n,"F")}(e)))}catch(t){throw jr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Hr(this.firestore,iu(this._delegate,function Sve(n){return sW("limitToLast",n),bI._create("limitToLast",n,"L")}(e)))}catch(t){throw jr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hr(this.firestore,iu(this._delegate,function Dve(...n){return EI._create("startAt",n,!0)}(...e)))}catch(t){throw jr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hr(this.firestore,iu(this._delegate,function Ave(...n){return EI._create("startAfter",n,!1)}(...e)))}catch(t){throw jr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hr(this.firestore,iu(this._delegate,function Rve(...n){return wI._create("endBefore",n,!1)}(...e)))}catch(t){throw jr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hr(this.firestore,iu(this._delegate,function Nve(...n){return wI._create("endAt",n,!0)}(...e)))}catch(t){throw jr(t,"endAt()","Query.endAt()")}}isEqual(e){return dO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Vve(n){n=Vt(n,hr);const e=Vt(n.firestore,Nn),t=li(e),i=new su(e);return function Zye(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(i=(0,ie.Z)(function*(s,o,a){try{const l=yield nI(s,o,!0),u=new Uz(o,l.ls),h=u.ca(l.documents),g=u.applyChanges(h,!1);a.resolve(g.snapshot)}catch(l){const u=Xp(l,`Failed to execute query '${o} against cache`);a.reject(u)}}),function r(s,o,a){return i.apply(this,arguments)})(yield rg(n),e,t);var i})),t.promise}(t,n._query).then(r=>new ru(e,i,n,r))}(this._delegate):"server"===e?.source?function Bve(n){n=Vt(n,hr);const e=Vt(n.firestore,Nn),t=li(e),i=new su(e);return Xz(t,n._query,{source:"server"}).then(r=>new ru(e,i,n,r))}(this._delegate):function Lve(n){n=Vt(n,hr);const e=Vt(n.firestore,Nn),t=li(e),i=new su(e);return bW(n._query),Xz(t,n._query).then(r=>new ru(e,i,n,r))}(this._delegate),t.then(i=>new IO(this.firestore,new ru(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=BW(e),i=UW(e,r=>new IO(this.firestore,new ru(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return RW(this._delegate,t,i)}withConverter(e){return new Hr(this.firestore,this._delegate.withConverter(e?qd.getInstance(this.firestore,e):null))}}class d0e{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class IO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Hr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new d0e(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new vv(this._firestore,i))})}isEqual(e){return SW(this._delegate,e._delegate)}}class lg extends Hr{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ho(this.firestore,e):null}doc(e){try{return new ho(this.firestore,void 0===e?fI(this._delegate):fI(this._delegate,e))}catch(t){throw jr(t,"doc()","CollectionReference.doc()")}}add(e){return function jve(n,e){const t=Vt(n.firestore,Nn),i=fI(n),r=TI(n.converter,e);return ag(t,[mI(Gd(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Wn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new ho(this.firestore,t))}isEqual(e){return cW(this._delegate,e._delegate)}withConverter(e){return new lg(this.firestore,this._delegate.withConverter(e?qd.getInstance(this.firestore,e):null))}}function Kd(n){return Vt(n,Bn)}class CO{constructor(...e){this._delegate=new Pl(...e)}static documentId(){return new CO(Ln.keyField().canonicalString())}isEqual(e){return(e=(0,C.m9)(e))instanceof Pl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Zd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function t0e(){return new fO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Zd(e)}static delete(){const e=function e0e(){return new dv("deleteField")}();return e._methodName="FieldValue.delete",new Zd(e)}static arrayUnion(...e){const t=function n0e(...n){return new yve("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Zd(t)}static arrayRemove(...e){const t=function i0e(...n){return new vve("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Zd(t)}static increment(e){const t=function r0e(n){return new bve("increment",n)}(e);return t._methodName="FieldValue.increment",new Zd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const h0e={Firestore:FW,GeoPoint:pI,Timestamp:zn,Blob:_v,Transaction:LW,WriteBatch:VW,DocumentReference:ho,DocumentSnapshot:yv,Query:Hr,QueryDocumentSnapshot:vv,QuerySnapshot:IO,CollectionReference:lg,FieldPath:CO,FieldValue:Zd,setLogLevel:function u0e(n){!function Qge(n){jc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function jW(n,e){return function g0e(n,e=ME){return new ze(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function SO(n,e){return jW(n,e).pipe(Ue(t=>({payload:t,type:"query"})))}!function p0e(n){(function f0e(n,e){n.INTERNAL.registerComponent(new Lo.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},h0e)))})(n,(e,t)=>new FW(e,t,new c0e)),n.registerVersion("@firebase/firestore-compat","0.3.23")}(ro.Z);class HW{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=KW(i,t);return new zW(r,s,this.afs)}snapshotChanges(){return function m0e(n,e){return jW(n,e).pipe(Xm(void 0),wN(),Ue(t=>{const[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pi)}valueChanges(e={}){return this.snapshotChanges().pipe(Ue(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return k(this.ref.get(e)).pipe(pi)}}function SI(n,e){return SO(n,e).pipe(Xm(void 0),wN(),Ue(t=>{const[i,r]=t,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{const u=s.find(g=>g.doc.ref.isEqual(a.ref)),h=i?.payload.docs.find(g=>g.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function $W(n,e,t){return SI(n,t).pipe(Ff((i,r)=>function _0e(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function y0e(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return DO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return DO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return DO(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),mo(),Ue(i=>i.map(r=>({type:r.type,payload:r}))))}function DO(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function GW(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class zW{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=SI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ue(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Xm(void 0),wN(),bi(([i,r])=>r.length>0||!i),Ue(([,i])=>i),pi)}auditTrail(e){return this.stateChanges(e).pipe(Ff((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=GW(e);return $W(this.query,t,this.afs.schedulers.outsideAngular).pipe(pi)}valueChanges(e={}){return SO(this.query,this.afs.schedulers.outsideAngular).pipe(Ue(t=>t.payload.docs.map(i=>e.idField?{...i.data(),[e.idField]:i.id}:i.data())),pi)}get(e){return k(this.query.get(e)).pipe(pi)}add(e){return this.ref.add(e)}doc(e){return new HW(this.ref.doc(e),this.afs)}}class v0e{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?SI(this.query,this.afs.schedulers.outsideAngular).pipe(Ue(t=>t.filter(i=>e.indexOf(i.type)>-1)),bi(t=>t.length>0),pi):SI(this.query,this.afs.schedulers.outsideAngular).pipe(pi)}auditTrail(e){return this.stateChanges(e).pipe(Ff((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=GW(e);return $W(this.query,t,this.afs.schedulers.outsideAngular).pipe(pi)}valueChanges(e={}){return SO(this.query,this.afs.schedulers.outsideAngular).pipe(Ue(i=>i.payload.docs.map(r=>e.idField?{[e.idField]:r.id,...r.data()}:r.data())),pi)}get(e){return k(this.query.get(e)).pipe(pi)}}const WW=new Se("angularfire2.enableFirestorePersistence"),qW=new Se("angularfire2.firestore.persistenceSettings"),b0e=new Se("angularfire2.firestore.settings"),E0e=new Se("angularfire2.firestore.use-emulator");function KW(n,e=(t=>t)){return{query:e(n),ref:n}}let w0e=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,s,o,a,l,u,h,g,m,v,w,S,D,L,x){this.schedulers=l;const U=__(t,a,i),z=h;g&&uA(U,a,m,w,S,D,v,L),[this.firestore,this.persistenceEnabled$]=jE(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{const se=a.runOutsideAngular(()=>U.firestore());if(s&&se.settings(s),z&&se.useEmulator(...z),r&&!lE(o)){const Ie=()=>{try{return k(se.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(Ke){return typeof console<"u"&&console.warn(Ke),Re(!1)}};return[se,a.runOutsideAngular(Ie)]}return[se,Re(!1)]},[s,z,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=KW(r,i),a=this.schedulers.ngZone.run(()=>s);return new zW(a,o,this)}collectionGroup(t,i){const r=i||(o=>o),s=this.firestore.collectionGroup(t);return new v0e(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new HW(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(ee(Zf),ee(Yf,8),ee(WW,8),ee(b0e,8),ee(Do),ee(vt),ee(UE),ee(qW,8),ee(E0e,8),ee(dA,8),ee(rA,8),ee(sA,8),ee(oA,8),ee(aA,8),ee(lA,8),ee(cA,8),ee(BE,8))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),T0e=(()=>{class n{constructor(){ro.Z.registerVersion("angularfire",m_.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:WW,useValue:!0},{provide:qW,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Pt({type:n});static \u0275inj=Ct({providers:[w0e]})}return n})();class C0e{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new S0e(e,this.dueTime,this.scheduler))}}class S0e extends I{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(D0e,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function D0e(n){n.debouncedNext()}const ZW="firebasestorage.googleapis.com",YW="storageBucket";class Xn extends C.ZR{constructor(e,t,i=0){super(AO(e),`Firebase Storage: ${t} (${AO(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return AO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var qn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(qn||{});function AO(n){return"storage/"+n}function RO(){return new Xn(qn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function QW(){return new Xn(qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JW(){return new Xn(qn.CANCELED,"User canceled the upload/download.")}function XW(){return new Xn(qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cg(n){return new Xn(qn.INVALID_ARGUMENT,n)}function e6(){return new Xn(qn.APP_DELETED,"The Firebase app was deleted.")}function t6(n){return new Xn(qn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bv(n,e){return new Xn(qn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ev(n){throw new Xn(qn.INTERNAL_ERROR,"Internal error: "+n)}class Ar{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Ar.makeFromUrl(e,t)}catch{return new Ar(e,"")}if(""===i.path)return i;throw function L0e(n){return new Xn(qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+r+"(/(.*))?$","i");function u(z){z.path_=decodeURIComponent(z.path)}const g=t.replace(/[.]/g,"\\."),U=[{regex:a,indices:{bucket:1,path:3},postModify:function s(z){"/"===z.path.charAt(z.path.length-1)&&(z.path_=z.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${g}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:u},{regex:new RegExp(`^https?://${t===ZW?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:u}];for(let z=0;z<U.length;z++){const se=U[z],Ie=se.regex.exec(e);if(Ie){let tt=Ie[se.indices.path];tt||(tt=""),i=new Ar(Ie[se.indices.bucket],tt),se.postModify(i);break}}if(null==i)throw function F0e(n){return new Xn(qn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return i}}class H0e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function DI(n){return"string"==typeof n||n instanceof String}function n6(n){return NO()&&n instanceof Blob}function NO(){return typeof Blob<"u"}function xO(n,e,t,i){if(i<e)throw cg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw cg(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ml(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function i6(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var ug=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(ug||{});function r6(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||r||s}class K0e{constructor(e,t,i,r,s,o,a,l,u,h,g,m=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=g,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function z0e(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=RO();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(r.canceled?this.appDelete_?e6():JW():QW())};this.canceled_?t(0,new AI(!1,null,!0)):this.backoffId_=function $0e(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let u=!1;function h(...D){u||(u=!0,e.apply(null,D))}function g(D){r=setTimeout(()=>{r=null,n(v,l())},D)}function m(){s&&clearTimeout(s)}function v(D,...L){if(u)return void m();if(D)return m(),void h.call(null,D,...L);if(l()||o)return m(),void h.call(null,D,...L);let U;i<64&&(i*=2),1===a?(a=2,U=0):U=1e3*(i+Math.random()),g(U)}let w=!1;function S(D){w||(w=!0,m(),!u&&(null!==r?(D||(a=2),clearTimeout(r),g(0)):D||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,S(!0)},t),S}((i,r)=>{if(r)return void i(!1,new AI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ug.NO_ERROR,l=s.getStatus();if(!a||r6(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===ug.ABORT;return void i(!1,new AI(!1,null,h))}const u=-1!==this.successCodes_.indexOf(l);i(!0,new AI(u,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function G0e(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class AI{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function tbe(...n){const e=function ebe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(NO())return new Blob(n);throw new Xn(qn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Vs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class PO{constructor(e,t){this.data=e,this.contentType=t||null}}function OO(n,e){switch(n){case Vs.RAW:return new PO(s6(e));case Vs.BASE64:case Vs.BASE64URL:return new PO(o6(n,e));case Vs.DATA_URL:return new PO(function sbe(n){const e=new a6(n);return e.base64?o6(Vs.BASE64,e.rest):function rbe(n){let e;try{e=decodeURIComponent(n)}catch{throw bv(Vs.DATA_URL,"Malformed data URL.")}return s6(e)}(e.rest)}(e),function obe(n){return new a6(n).contentType}(e))}throw RO()}function s6(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function o6(n,e){switch(n){case Vs.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw bv(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Vs.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw bv(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function ibe(n){if(typeof atob>"u")throw function j0e(n){return new Xn(qn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(r){throw r.message.includes("polyfill")?r:bv(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class a6{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw bv(Vs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function abe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class Ma{constructor(e,t){let i=0,r="";n6(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(n6(this.data_)){const r=function nbe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new Ma(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ma(i,!0)}}static getBlob(...e){if(NO()){const t=e.map(i=>i instanceof Ma?i.data_:i);return new Ma(tbe.apply(null,t))}{const t=e.map(o=>DI(o)?OO(Vs.RAW,o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Ma(r,!0)}}uploadData(){return this.data_}}function MO(n){let e;try{e=JSON.parse(n)}catch{return null}return function q0e(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function l6(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function ube(n,e){return e}class $r{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||ube}}let RI=null;function wv(){if(RI)return RI;const n=[];n.push(new $r("bucket")),n.push(new $r("generation")),n.push(new $r("metageneration")),n.push(new $r("name","fullPath",!0));const t=new $r("name");t.xform=function e(s,o){return function dbe(n){return!DI(n)||n.length<2?n:l6(n)}(o)},n.push(t);const r=new $r("size");return r.xform=function i(s,o){return void 0!==o?Number(o):o},n.push(r),n.push(new $r("timeCreated")),n.push(new $r("updated")),n.push(new $r("md5Hash",null,!0)),n.push(new $r("cacheControl",null,!0)),n.push(new $r("contentDisposition",null,!0)),n.push(new $r("contentEncoding",null,!0)),n.push(new $r("contentLanguage",null,!0)),n.push(new $r("contentType",null,!0)),n.push(new $r("metadata","customMetadata",!0)),RI=n,RI}function c6(n,e,t){const i=MO(e);return null===i?null:function fbe(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const o=t[s];i[o.local]=o.xform(i,e[o.server])}return function hbe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Ar(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function kO(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const u6="prefixes",d6="items";class ka{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Fa(n){if(!n)throw RO()}function NI(n,e){return function t(i,r){const s=c6(n,r,e);return Fa(null!==s),s}}function dg(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function M0e(){return new Xn(qn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function O0e(){return new Xn(qn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function P0e(n){return new Xn(qn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function k0e(n){return new Xn(qn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function Tv(n){const e=dg(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function x0e(n){return new Xn(qn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function h6(n,e,t){const r=Ml(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ka(r,"GET",NI(n,t),o);return a.errorHandler=Tv(e),a}function vbe(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=Ml(e.bucketOnlyServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new ka(a,"GET",function _be(n,e){return function t(i,r){const s=function mbe(n,e,t){const i=MO(t);return null===i?null:function gbe(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[u6])for(const r of t[u6]){const s=r.replace(/\/$/,""),o=n._makeStorageReference(new Ar(e,s));i.prefixes.push(o)}if(t[d6])for(const r of t[d6]){const s=n._makeStorageReference(new Ar(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return Fa(null!==s),s}}(n,e.bucket),u);return h.urlParams=s,h.errorHandler=dg(e),h}function p6(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function Tbe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class xI{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function FO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Fa(!1)}return Fa(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Dbe={STATE_CHANGED:"state_changed"},Gr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function LO(n){switch(n){case"running":case"pausing":case"canceling":return Gr.RUNNING;case"paused":return Gr.PAUSED;case"success":return Gr.SUCCESS;case"canceled":return Gr.CANCELED;default:return Gr.ERROR}}class Abe{constructor(e,t,i){if(function W0e(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function hg(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let _6=null;class Rbe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ug.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ug.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ug.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw Ev("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ev("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ev("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ev("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ev("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Nbe extends Rbe{initXhr(){this.xhr_.responseType="text"}}function Ko(){return _6?_6():new Nbe}class y6{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=wv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(qn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(r6(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=QW()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(qn.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function Ibe(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o=p6(e,i,r),a={name:o.fullPath},l=Ml(s,n.host,n._protocol),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},g=kO(o,t),w=new ka(l,"POST",function v(S){let D;FO(S);try{D=S.getResponseHeader("X-Goog-Upload-URL")}catch{Fa(!1)}return Fa(DI(D)),D},n.maxUploadRetryTime);return w.urlParams=a,w.headers=h,w.body=g,w.errorHandler=dg(e),w}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Ko,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function Cbe(n,e,t,i){const l=new ka(t,"POST",function s(u){const h=FO(u,["active","final"]);let g=null;try{g=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fa(!1)}g||Fa(!1);const m=Number(g);return Fa(!isNaN(m)),new xI(m,i.size(),"final"===h)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=dg(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Ko,t,i);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new xI(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=function Sbe(n,e,t,i,r,s,o,a){const l=new xI(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function B0e(){return new Xn(qn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const u=l.total-l.current;let h=u;r>0&&(h=Math.min(h,r));const g=l.current;let v="";v=0===h?"finalize":u===h?"upload, finalize":"upload";const w={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${l.current}`},S=i.slice(g,g+h);if(null===S)throw XW();const U=new ka(t,"POST",function D(z,se){const Ie=FO(z,["active","final"]),Ke=l.current+h,tt=i.size();let _n;return _n="final"===Ie?NI(e,s)(z,se):null,new xI(Ke,tt,"final"===Ie,_n)},e.maxUploadRetryTime);return U.headers=w,U.body=S.uploadData(),U.progressCallback=a||null,U.errorHandler=dg(n),U}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Ko,r,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=h6(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Ko,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function g6(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let U="";for(let z=0;z<2;z++)U+=Math.random().toString().slice(2);return U}();o["Content-Type"]="multipart/related; boundary="+l;const u=p6(e,i,r),h=kO(u,t),v=Ma.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+l+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===v)throw XW();const w={name:u.fullPath},S=Ml(s,n.host,n._protocol),L=n.maxUploadRetryTime,x=new ka(S,"POST",NI(n,t),L);return x.urlParams=w,x.headers=o,x.body=v.uploadData(),x.errorHandler=dg(e),x}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Ko,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=JW(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=LO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new Abe(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(LO(this._state)){case Gr.SUCCESS:hg(this._resolve.bind(null,this.snapshot))();break;case Gr.CANCELED:case Gr.ERROR:hg(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(LO(this._state)){case Gr.RUNNING:case Gr.PAUSED:e.next&&hg(e.next.bind(e,this.snapshot))();break;case Gr.SUCCESS:e.complete&&hg(e.complete.bind(e))();break;default:e.error&&hg(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Yd{constructor(e,t){this._service=e,this._location=t instanceof Ar?t:Ar.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Yd(e,t)}get root(){const e=new Ar(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return l6(this._location.path)}get storage(){return this._service}get parent(){const e=function lbe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ar(this._location.bucket,e);return new Yd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw t6(e)}}function b6(n,e,t){return VO.apply(this,arguments)}function VO(){return VO=(0,ie.Z)(function*(n,e,t){const r=yield E6(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield b6(n,e,r.nextPageToken))}),VO.apply(this,arguments)}function E6(n,e){null!=e&&"number"==typeof e.maxResults&&xO("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=vbe(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,Ko)}function Hbe(n){n._throwIfRoot("getDownloadURL");const e=function bbe(n,e,t){const r=Ml(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ka(r,"GET",function ybe(n,e){return function t(i,r){const s=c6(n,r,e);return Fa(null!==s),function pbe(n,e,t,i){const r=MO(e);if(null===r||!DI(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const g=n.fullPath;return Ml("/b/"+o(n.bucket)+"/o/"+o(g),t,i)+i6({alt:"media",token:u})})[0]}(s,r,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Tv(e),a}(n.storage,n._location,wv());return n.storage.makeRequestWithTokens(e,Ko).then(t=>{if(null===t)throw function U0e(){return new Xn(qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function w6(n,e){const t=function cbe(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Ar(n._location.bucket,t);return new Yd(n.storage,i)}function T6(n,e){if(n instanceof BO){const t=n;if(null==t._bucket)throw function V0e(){return new Xn(qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YW+"' property when initializing the app?")}();const i=new Yd(t,t._bucket);return null!=e?T6(i,e):i}return void 0!==e?w6(n,e):n}function Wbe(n,e){if(e&&function Gbe(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof BO)return function zbe(n,e){return new Yd(n,e)}(n,e);throw cg("To use ref(service, url), the first argument must be a Storage instance.")}return T6(n,e)}function I6(n,e){const t=e?.[YW];return null==t?null:Ar.makeFromBucketSpec(t,n)}class BO{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=ZW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ar.makeFromBucketSpec(r,this._host):I6(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ar.makeFromBucketSpec(this._url,e):I6(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ie.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ie.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yd(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new H0e(e6());{const o=function X0e(n,e,t,i,r,s,o=!0){const a=i6(n.urlParams),l=n.url+a,u=Object.assign({},n.headers);return function Q0e(n,e){e&&(n["X-Firebase-GMPID"]=e)}(u,e),function Z0e(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(u,t),function Y0e(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(u,s),function J0e(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(u,i),new K0e(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var i=this;return(0,ie.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const C6="@firebase/storage";function A6(n,e){return Wbe(n=(0,C.m9)(n),e)}function nEe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new BO(t,i,r,e,cs.SDK_VERSION)}!function iEe(){(0,cs._registerComponent)(new Lo.wA("storage",nEe,"PUBLIC").setMultipleInstances(!0)),(0,cs.registerVersion)(C6,"0.12.0",""),(0,cs.registerVersion)(C6,"0.12.0","esm2017")}();class PI{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class N6{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new PI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new PI(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?o=>t(new PI(o,this,this._ref)):{next:t.next?o=>t.next(new PI(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class x6{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new kl(e,this._service))}get items(){return this._delegate.items.map(e=>new kl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class kl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function tEe(n,e){return w6(n,e)}(this._delegate,e);return new kl(t,this.storage)}get root(){return new kl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new kl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new N6(function Kbe(n,e,t){return function Lbe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new y6(n,new Ma(e),t)}(n=(0,C.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Vs.RAW,i){this._throwIfRoot("putString");const r=OO(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new N6(new y6(this._delegate,new Ma(r.data,!0),s),this)}listAll(){return function Jbe(n){return function Bbe(n){const e={prefixes:[],items:[]};return b6(n,e).then(()=>e)}(n=(0,C.m9)(n))}(this._delegate).then(e=>new x6(e,this.storage))}list(e){return function Qbe(n,e){return E6(n=(0,C.m9)(n),e)}(this._delegate,e||void 0).then(t=>new x6(t,this.storage))}getMetadata(){return function Zbe(n){return function Ube(n){n._throwIfRoot("getMetadata");const e=h6(n.storage,n._location,wv());return n.storage.makeRequestWithTokens(e,Ko)}(n=(0,C.m9)(n))}(this._delegate)}updateMetadata(e){return function Ybe(n,e){return function jbe(n,e){n._throwIfRoot("updateMetadata");const t=function Ebe(n,e,t,i){const s=Ml(e.fullServerUrl(),n.host,n._protocol),a=kO(t,i),u=n.maxOperationRetryTime,h=new ka(s,"PATCH",NI(n,i),u);return h.headers={"Content-Type":"application/json; charset=utf-8"},h.body=a,h.errorHandler=Tv(e),h}(n.storage,n._location,e,wv());return n.storage.makeRequestWithTokens(t,Ko)}(n=(0,C.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Xbe(n){return Hbe(n=(0,C.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function eEe(n){return function $be(n){n._throwIfRoot("deleteObject");const e=function wbe(n,e){const i=Ml(e.fullServerUrl(),n.host,n._protocol),a=new ka(i,"DELETE",function o(l,u){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Tv(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ko)}(n=(0,C.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw t6(e)}}class P6{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(O6(e))throw cg("ref() expected a child path but got a URL, use refFromURL instead.");return new kl(A6(this._delegate,e),this)}refFromURL(e){if(!O6(e))throw cg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ar.makeFromUrl(e,this._delegate.host)}catch{throw cg("refFromUrl() expected a valid full URL but got an invalid one.")}return new kl(A6(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function R6(n,e,t,i={}){!function qbe(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,C.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function O6(n){return/^[A-Za-z]+:\/\//.test(n)}function aEe(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new P6(t,i)}function M6(n){const e=function cEe(n){return new ze(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function I0e(n,e=tA){return t=>t.lift(new C0e(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Ue(t=>t.bytesTransferred/t.totalBytes*100))}}function OI(n){return{getDownloadURL:()=>Re(void 0).pipe(RU,$t(()=>n.getDownloadURL()),pi),getMetadata:()=>Re(void 0).pipe(RU,$t(()=>n.getMetadata()),pi),delete:()=>k(n.delete()),child:e=>OI(n.child(e)),updateMetadata:e=>k(n.updateMetadata(e)),put:(e,t)=>M6(n.put(e,t)),putString:(e,t,i)=>M6(n.putString(e,t,i)),list:e=>k(n.list(e)),listAll:()=>k(n.listAll())}}!function lEe(n){const e={TaskState:Gr,TaskEvent:Dbe,StringFormat:Vs,Storage:P6,Reference:kl};n.INTERNAL.registerComponent(new Lo.wA("storage-compat",aEe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.3")}(ro.Z);const uEe=new Se("angularfire2.storageBucket"),dEe=new Se("angularfire2.storage.maxUploadRetryTime"),hEe=new Se("angularfire2.storage.maxOperationRetryTime"),fEe=new Se("angularfire2.storage.use-emulator");let pEe=(()=>{class n{storage;constructor(t,i,r,s,o,a,l,u,h,g){const m=__(t,o,i);this.storage=jE(`${m.name}.storage.${r}`,"AngularFireStorage",m.name,()=>{const v=o.runOutsideAngular(()=>m.storage(r||void 0)),w=h;return w&&v.useEmulator(...w),l&&v.setMaxUploadRetryTime(l),u&&v.setMaxOperationRetryTime(u),v},[l,u])}ref(t){return OI(this.storage.ref(t))}refFromURL(t){return OI(this.storage.refFromURL(t))}upload(t,i,r){return OI(this.storage.ref(t)).put(i,r)}static \u0275fac=function(i){return new(i||n)(ee(Zf),ee(Yf,8),ee(uEe,8),ee(Do),ee(vt),ee(UE),ee(dEe,8),ee(hEe,8),ee(fEe,8),ee(BE,8))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),gEe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Pt({type:n});static \u0275inj=Ct({})}return n})(),mEe=(()=>{class n{constructor(){ro.Z.registerVersion("angularfire",m_.full,"gcs-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Pt({type:n});static \u0275inj=Ct({providers:[pEe],imports:[gEe]})}return n})();const k6_firebase={apiKey:"AIzaSyAKD3R8dMk-YpNi78GsHXvU_Tkhqp9u3XM",authDomain:"please-take-your-turn.firebaseapp.com",projectId:"please-take-your-turn",storageBucket:"please-take-your-turn.appspot.com",messagingSenderId:"386803685699",appId:"1:386803685699:web:63cff6e4163b36a971f7f6",measurementId:"G-9FT9L70K5D"};new class yEe extends Fo{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class _Ee extends OE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});RegExp(/[&<>"']/g.source);const ZEe=new Se("ng-select-selection-model");function YEe(){return new QEe}class QEe{constructor(){this._selected=[]}get value(){return this._selected}select(e,t,i){if(e.selected=!0,(!e.children||!t&&i)&&this._selected.push(e),t)if(e.parent){const r=e.parent.children.length,s=e.parent.children.filter(o=>o.selected).length;e.parent.selected=r===s}else e.children&&(this._setChildrenSelectedState(e.children,!0),this._removeChildren(e),this._selected=i&&this._activeChildren(e)?[...this._selected.filter(r=>r.parent!==e),e]:[...this._selected,...e.children.filter(r=>!r.disabled)])}unselect(e,t){if(this._selected=this._selected.filter(i=>i!==e),e.selected=!1,t)if(e.parent&&e.parent.selected){const i=e.parent.children;this._removeParent(e.parent),this._removeChildren(e.parent),this._selected.push(...i.filter(r=>r!==e&&!r.disabled)),e.parent.selected=!1}else e.children&&(this._setChildrenSelectedState(e.children,!1),this._removeChildren(e))}clear(e){this._selected=e?this._selected.filter(t=>t.disabled):[]}_setChildrenSelectedState(e,t){for(const i of e)i.disabled||(i.selected=t)}_removeChildren(e){this._selected=[...this._selected.filter(t=>t.parent!==e),...e.children.filter(t=>t.parent===e&&t.disabled&&t.selected)]}_removeParent(e){this._selected=this._selected.filter(t=>t!==e)}_activeChildren(e){return e.children.every(t=>!t.disabled||t.selected)}}let JEe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n});static#n=this.\u0275inj=Ct({providers:[{provide:ZEe,useValue:YEe}],imports:[yD]})}return n})(),XEe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Pt({type:n,bootstrap:[Hpe]});static#n=this.\u0275inj=Ct({providers:[Iw,QH,Cw,JH,XH],imports:[kee,Rce,Oce,dre.initializeApp(k6_firebase),Nle,T0e,mEe,q4,JEe,Fie,q4]})}return n})();Oee().bootstrapModule(XEe).catch(n=>console.error(n))},755:(fr,Un)=>{var N;!function(){"use strict";var $e=function(){this.init()};$e.prototype={init:function(){var _=this||T;return _._counter=1e3,_._html5AudioPool=[],_.html5PoolSize=10,_._codecs={},_._howls=[],_._muted=!1,_._volume=1,_._canPlayEvent="canplaythrough",_._navigator=typeof window<"u"&&window.navigator?window.navigator:null,_.masterGain=null,_.noAudio=!1,_.usingWebAudio=!0,_.autoSuspend=!0,_.ctx=null,_.autoUnlock=!0,_._setup(),_},volume:function(_){var E=this||T;if(_=parseFloat(_),E.ctx||ce(),typeof _<"u"&&_>=0&&_<=1){if(E._volume=_,E._muted)return E;E.usingWebAudio&&E.masterGain.gain.setValueAtTime(_,T.ctx.currentTime);for(var I=0;I<E._howls.length;I++)if(!E._howls[I]._webAudio)for(var B=E._howls[I]._getSoundIds(),Y=0;Y<B.length;Y++){var Z=E._howls[I]._soundById(B[Y]);Z&&Z._node&&(Z._node.volume=Z._volume*_)}return E}return E._volume},mute:function(_){var E=this||T;E.ctx||ce(),E._muted=_,E.usingWebAudio&&E.masterGain.gain.setValueAtTime(_?0:E._volume,T.ctx.currentTime);for(var I=0;I<E._howls.length;I++)if(!E._howls[I]._webAudio)for(var B=E._howls[I]._getSoundIds(),Y=0;Y<B.length;Y++){var Z=E._howls[I]._soundById(B[Y]);Z&&Z._node&&(Z._node.muted=!!_||Z._muted)}return E},stop:function(){for(var _=this||T,E=0;E<_._howls.length;E++)_._howls[E].stop();return _},unload:function(){for(var _=this||T,E=_._howls.length-1;E>=0;E--)_._howls[E].unload();return _.usingWebAudio&&_.ctx&&typeof _.ctx.close<"u"&&(_.ctx.close(),_.ctx=null,ce()),_},codecs:function(_){return(this||T)._codecs[_.replace(/^x-/,"")]},_setup:function(){var _=this||T;if(_.state=_.ctx&&_.ctx.state||"suspended",_._autoSuspend(),!_.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(_._canPlayEvent="canplay")}catch{_.noAudio=!0}else _.noAudio=!0;try{(new Audio).muted&&(_.noAudio=!0)}catch{}return _.noAudio||_._setupCodecs(),_},_setupCodecs:function(){var _=this||T,E=null;try{E=typeof Audio<"u"?new Audio:null}catch{return _}if(!E||"function"!=typeof E.canPlayType)return _;var I=E.canPlayType("audio/mpeg;").replace(/^no$/,""),B=_._navigator?_._navigator.userAgent:"",Y=B.match(/OPR\/(\d+)/g),Z=Y&&parseInt(Y[0].split("/")[1],10)<33,j=-1!==B.indexOf("Safari")&&-1===B.indexOf("Chrome"),Me=B.match(/Version\/(.*?) /),nt=j&&Me&&parseInt(Me[1],10)<15;return _._codecs={mp3:!(Z||!I&&!E.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!I,opus:!!E.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!E.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!E.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(E.canPlayType('audio/wav; codecs="1"')||E.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!E.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!E.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(E.canPlayType("audio/x-m4a;")||E.canPlayType("audio/m4a;")||E.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(E.canPlayType("audio/x-m4b;")||E.canPlayType("audio/m4b;")||E.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(E.canPlayType("audio/x-mp4;")||E.canPlayType("audio/mp4;")||E.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(nt||!E.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(nt||!E.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!E.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(E.canPlayType("audio/x-flac;")||E.canPlayType("audio/flac;")).replace(/^no$/,"")},_},_unlockAudio:function(){var _=this||T;if(!_._audioUnlocked&&_.ctx){_._audioUnlocked=!1,_.autoUnlock=!1,!_._mobileUnloaded&&44100!==_.ctx.sampleRate&&(_._mobileUnloaded=!0,_.unload()),_._scratchBuffer=_.ctx.createBuffer(1,1,22050);var E=function(I){for(;_._html5AudioPool.length<_.html5PoolSize;)try{var B=new Audio;B._unlocked=!0,_._releaseHtml5Audio(B)}catch{_.noAudio=!0;break}for(var Y=0;Y<_._howls.length;Y++)if(!_._howls[Y]._webAudio)for(var Z=_._howls[Y]._getSoundIds(),j=0;j<Z.length;j++){var Me=_._howls[Y]._soundById(Z[j]);Me&&Me._node&&!Me._node._unlocked&&(Me._node._unlocked=!0,Me._node.load())}_._autoResume();var nt=_.ctx.createBufferSource();nt.buffer=_._scratchBuffer,nt.connect(_.ctx.destination),typeof nt.start>"u"?nt.noteOn(0):nt.start(0),"function"==typeof _.ctx.resume&&_.ctx.resume(),nt.onended=function(){nt.disconnect(0),_._audioUnlocked=!0,document.removeEventListener("touchstart",E,!0),document.removeEventListener("touchend",E,!0),document.removeEventListener("click",E,!0),document.removeEventListener("keydown",E,!0);for(var yt=0;yt<_._howls.length;yt++)_._howls[yt]._emit("unlock")}};return document.addEventListener("touchstart",E,!0),document.addEventListener("touchend",E,!0),document.addEventListener("click",E,!0),document.addEventListener("keydown",E,!0),_}},_obtainHtml5Audio:function(){var _=this||T;if(_._html5AudioPool.length)return _._html5AudioPool.pop();var E=(new Audio).play();return E&&typeof Promise<"u"&&(E instanceof Promise||"function"==typeof E.then)&&E.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(_){var E=this||T;return _._unlocked&&E._html5AudioPool.push(_),E},_autoSuspend:function(){var _=this;if(_.autoSuspend&&_.ctx&&!(typeof _.ctx.suspend>"u")&&T.usingWebAudio){for(var E=0;E<_._howls.length;E++)if(_._howls[E]._webAudio)for(var I=0;I<_._howls[E]._sounds.length;I++)if(!_._howls[E]._sounds[I]._paused)return _;return _._suspendTimer&&clearTimeout(_._suspendTimer),_._suspendTimer=setTimeout(function(){if(_.autoSuspend){_._suspendTimer=null,_.state="suspending";var B=function(){_.state="suspended",_._resumeAfterSuspend&&(delete _._resumeAfterSuspend,_._autoResume())};_.ctx.suspend().then(B,B)}},3e4),_}},_autoResume:function(){var _=this;if(_.ctx&&!(typeof _.ctx.resume>"u")&&T.usingWebAudio)return"running"===_.state&&"interrupted"!==_.ctx.state&&_._suspendTimer?(clearTimeout(_._suspendTimer),_._suspendTimer=null):"suspended"===_.state||"running"===_.state&&"interrupted"===_.ctx.state?(_.ctx.resume().then(function(){_.state="running";for(var E=0;E<_._howls.length;E++)_._howls[E]._emit("resume")}),_._suspendTimer&&(clearTimeout(_._suspendTimer),_._suspendTimer=null)):"suspending"===_.state&&(_._resumeAfterSuspend=!0),_}};var T=new $e,$=function(_){_.src&&0!==_.src.length?this.init(_):console.error("An array of source files must be passed with any new Howl.")};$.prototype={init:function(_){var E=this;return T.ctx||ce(),E._autoplay=_.autoplay||!1,E._format="string"!=typeof _.format?_.format:[_.format],E._html5=_.html5||!1,E._muted=_.mute||!1,E._loop=_.loop||!1,E._pool=_.pool||5,E._preload="boolean"!=typeof _.preload&&"metadata"!==_.preload||_.preload,E._rate=_.rate||1,E._sprite=_.sprite||{},E._src="string"!=typeof _.src?_.src:[_.src],E._volume=void 0!==_.volume?_.volume:1,E._xhr={method:_.xhr&&_.xhr.method?_.xhr.method:"GET",headers:_.xhr&&_.xhr.headers?_.xhr.headers:null,withCredentials:!(!_.xhr||!_.xhr.withCredentials)&&_.xhr.withCredentials},E._duration=0,E._state="unloaded",E._sounds=[],E._endTimers={},E._queue=[],E._playLock=!1,E._onend=_.onend?[{fn:_.onend}]:[],E._onfade=_.onfade?[{fn:_.onfade}]:[],E._onload=_.onload?[{fn:_.onload}]:[],E._onloaderror=_.onloaderror?[{fn:_.onloaderror}]:[],E._onplayerror=_.onplayerror?[{fn:_.onplayerror}]:[],E._onpause=_.onpause?[{fn:_.onpause}]:[],E._onplay=_.onplay?[{fn:_.onplay}]:[],E._onstop=_.onstop?[{fn:_.onstop}]:[],E._onmute=_.onmute?[{fn:_.onmute}]:[],E._onvolume=_.onvolume?[{fn:_.onvolume}]:[],E._onrate=_.onrate?[{fn:_.onrate}]:[],E._onseek=_.onseek?[{fn:_.onseek}]:[],E._onunlock=_.onunlock?[{fn:_.onunlock}]:[],E._onresume=[],E._webAudio=T.usingWebAudio&&!E._html5,typeof T.ctx<"u"&&T.ctx&&T.autoUnlock&&T._unlockAudio(),T._howls.push(E),E._autoplay&&E._queue.push({event:"play",action:function(){E.play()}}),E._preload&&"none"!==E._preload&&E.load(),E},load:function(){var _=this,E=null;if(T.noAudio)_._emit("loaderror",null,"No audio support.");else{"string"==typeof _._src&&(_._src=[_._src]);for(var I=0;I<_._src.length;I++){var B,Y;if(_._format&&_._format[I])B=_._format[I];else{if("string"!=typeof(Y=_._src[I])){_._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(B=/^data:audio\/([^;,]+);/i.exec(Y))||(B=/\.([^.]+)$/.exec(Y.split("?",1)[0])),B&&(B=B[1].toLowerCase())}if(B||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),B&&T.codecs(B)){E=_._src[I];break}}if(E)return _._src=E,_._state="loading","https:"===window.location.protocol&&"http:"===E.slice(0,5)&&(_._html5=!0,_._webAudio=!1),new K(_),_._webAudio&&Fe(_),_;_._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(_,E){var I=this,B=null;if("number"==typeof _)B=_,_=null;else{if("string"==typeof _&&"loaded"===I._state&&!I._sprite[_])return null;if(typeof _>"u"&&(_="__default",!I._playLock)){for(var Y=0,Z=0;Z<I._sounds.length;Z++)I._sounds[Z]._paused&&!I._sounds[Z]._ended&&(Y++,B=I._sounds[Z]._id);1===Y?_=null:B=null}}var j=B?I._soundById(B):I._inactiveSound();if(!j)return null;if(B&&!_&&(_=j._sprite||"__default"),"loaded"!==I._state){j._sprite=_,j._ended=!1;var Me=j._id;return I._queue.push({event:"play",action:function(){I.play(Me)}}),Me}if(B&&!j._paused)return E||I._loadQueue("play"),j._id;I._webAudio&&T._autoResume();var nt=Math.max(0,j._seek>0?j._seek:I._sprite[_][0]/1e3),yt=Math.max(0,(I._sprite[_][0]+I._sprite[_][1])/1e3-nt),ze=1e3*yt/Math.abs(j._rate),ci=I._sprite[_][0]/1e3,Wr=(I._sprite[_][0]+I._sprite[_][1])/1e3;j._sprite=_,j._ended=!1;var ct=function(){j._paused=!1,j._seek=nt,j._start=ci,j._stop=Wr,j._loop=!(!j._loop&&!I._sprite[_][2])};if(!(nt>=Wr)){var ot=j._node;if(I._webAudio){var fn=function(){I._playLock=!1,ct(),I._refreshBuffer(j),ot.gain.setValueAtTime(j._muted||I._muted?0:j._volume,T.ctx.currentTime),j._playStart=T.ctx.currentTime,typeof ot.bufferSource.start>"u"?ot.bufferSource.noteGrainOn(0,nt,j._loop?86400:yt):ot.bufferSource.start(0,nt,j._loop?86400:yt),ze!==1/0&&(I._endTimers[j._id]=setTimeout(I._ended.bind(I,j),ze)),E||setTimeout(function(){I._emit("play",j._id),I._loadQueue()},0)};"running"===T.state&&"interrupted"!==T.ctx.state?fn():(I._playLock=!0,I.once("resume",fn),I._clearTimer(j._id))}else{var at=function(){ot.currentTime=nt,ot.muted=j._muted||I._muted||T._muted||ot.muted,ot.volume=j._volume*T.volume(),ot.playbackRate=j._rate;try{var Ue=ot.play();if(Ue&&typeof Promise<"u"&&(Ue instanceof Promise||"function"==typeof Ue.then)?(I._playLock=!0,ct(),Ue.then(function(){I._playLock=!1,ot._unlocked=!0,E?I._loadQueue():I._emit("play",j._id)}).catch(function(){I._playLock=!1,I._emit("playerror",j._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),j._ended=!0,j._paused=!0})):E||(I._playLock=!1,ct(),I._emit("play",j._id)),ot.playbackRate=j._rate,ot.paused)return void I._emit("playerror",j._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==_||j._loop?I._endTimers[j._id]=setTimeout(I._ended.bind(I,j),ze):(I._endTimers[j._id]=function(){I._ended(j),ot.removeEventListener("ended",I._endTimers[j._id],!1)},ot.addEventListener("ended",I._endTimers[j._id],!1))}catch(Us){I._emit("playerror",j._id,Us)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===ot.src&&(ot.src=I._src,ot.load());var Ki=window&&window.ejecta||!ot.readyState&&T._navigator.isCocoonJS;if(ot.readyState>=3||Ki)at();else{I._playLock=!0,I._state="loading";var Ti=function(){I._state="loaded",at(),ot.removeEventListener(T._canPlayEvent,Ti,!1)};ot.addEventListener(T._canPlayEvent,Ti,!1),I._clearTimer(j._id)}}return j._id}I._ended(j)},pause:function(_){var E=this;if("loaded"!==E._state||E._playLock)return E._queue.push({event:"pause",action:function(){E.pause(_)}}),E;for(var I=E._getSoundIds(_),B=0;B<I.length;B++){E._clearTimer(I[B]);var Y=E._soundById(I[B]);if(Y&&!Y._paused&&(Y._seek=E.seek(I[B]),Y._rateSeek=0,Y._paused=!0,E._stopFade(I[B]),Y._node))if(E._webAudio){if(!Y._node.bufferSource)continue;typeof Y._node.bufferSource.stop>"u"?Y._node.bufferSource.noteOff(0):Y._node.bufferSource.stop(0),E._cleanBuffer(Y._node)}else(!isNaN(Y._node.duration)||Y._node.duration===1/0)&&Y._node.pause();arguments[1]||E._emit("pause",Y?Y._id:null)}return E},stop:function(_,E){var I=this;if("loaded"!==I._state||I._playLock)return I._queue.push({event:"stop",action:function(){I.stop(_)}}),I;for(var B=I._getSoundIds(_),Y=0;Y<B.length;Y++){I._clearTimer(B[Y]);var Z=I._soundById(B[Y]);Z&&(Z._seek=Z._start||0,Z._rateSeek=0,Z._paused=!0,Z._ended=!0,I._stopFade(B[Y]),Z._node&&(I._webAudio?Z._node.bufferSource&&(typeof Z._node.bufferSource.stop>"u"?Z._node.bufferSource.noteOff(0):Z._node.bufferSource.stop(0),I._cleanBuffer(Z._node)):(!isNaN(Z._node.duration)||Z._node.duration===1/0)&&(Z._node.currentTime=Z._start||0,Z._node.pause(),Z._node.duration===1/0&&I._clearSound(Z._node))),E||I._emit("stop",Z._id))}return I},mute:function(_,E){var I=this;if("loaded"!==I._state||I._playLock)return I._queue.push({event:"mute",action:function(){I.mute(_,E)}}),I;if(typeof E>"u"){if("boolean"!=typeof _)return I._muted;I._muted=_}for(var B=I._getSoundIds(E),Y=0;Y<B.length;Y++){var Z=I._soundById(B[Y]);Z&&(Z._muted=_,Z._interval&&I._stopFade(Z._id),I._webAudio&&Z._node?Z._node.gain.setValueAtTime(_?0:Z._volume,T.ctx.currentTime):Z._node&&(Z._node.muted=!!T._muted||_),I._emit("mute",Z._id))}return I},volume:function(){var I,B,j,_=this,E=arguments;if(0===E.length)return _._volume;if(1===E.length||2===E.length&&typeof E[1]>"u"?_._getSoundIds().indexOf(E[0])>=0?B=parseInt(E[0],10):I=parseFloat(E[0]):E.length>=2&&(I=parseFloat(E[0]),B=parseInt(E[1],10)),!(typeof I<"u"&&I>=0&&I<=1))return(j=B?_._soundById(B):_._sounds[0])?j._volume:0;if("loaded"!==_._state||_._playLock)return _._queue.push({event:"volume",action:function(){_.volume.apply(_,E)}}),_;typeof B>"u"&&(_._volume=I),B=_._getSoundIds(B);for(var Me=0;Me<B.length;Me++)(j=_._soundById(B[Me]))&&(j._volume=I,E[2]||_._stopFade(B[Me]),_._webAudio&&j._node&&!j._muted?j._node.gain.setValueAtTime(I,T.ctx.currentTime):j._node&&!j._muted&&(j._node.volume=I*T.volume()),_._emit("volume",j._id));return _},fade:function(_,E,I,B){var Y=this;if("loaded"!==Y._state||Y._playLock)return Y._queue.push({event:"fade",action:function(){Y.fade(_,E,I,B)}}),Y;_=Math.min(Math.max(0,parseFloat(_)),1),E=Math.min(Math.max(0,parseFloat(E)),1),I=parseFloat(I),Y.volume(_,B);for(var Z=Y._getSoundIds(B),j=0;j<Z.length;j++){var Me=Y._soundById(Z[j]);if(Me){if(B||Y._stopFade(Z[j]),Y._webAudio&&!Me._muted){var nt=T.ctx.currentTime,yt=nt+I/1e3;Me._volume=_,Me._node.gain.setValueAtTime(_,nt),Me._node.gain.linearRampToValueAtTime(E,yt)}Y._startFadeInterval(Me,_,E,I,Z[j],typeof B>"u")}}return Y},_startFadeInterval:function(_,E,I,B,Y,Z){var j=this,Me=E,nt=I-E,yt=Math.abs(nt/.01),ze=Math.max(4,yt>0?B/yt:B),ci=Date.now();_._fadeTo=I,_._interval=setInterval(function(){var Wr=(Date.now()-ci)/B;ci=Date.now(),Me+=nt*Wr,Me=Math.round(100*Me)/100,Me=nt<0?Math.max(I,Me):Math.min(I,Me),j._webAudio?_._volume=Me:j.volume(Me,_._id,!0),Z&&(j._volume=Me),(I<E&&Me<=I||I>E&&Me>=I)&&(clearInterval(_._interval),_._interval=null,_._fadeTo=null,j.volume(I,_._id),j._emit("fade",_._id))},ze)},_stopFade:function(_){var E=this,I=E._soundById(_);return I&&I._interval&&(E._webAudio&&I._node.gain.cancelScheduledValues(T.ctx.currentTime),clearInterval(I._interval),I._interval=null,E.volume(I._fadeTo,_),I._fadeTo=null,E._emit("fade",_)),E},loop:function(){var I,B,Y,_=this,E=arguments;if(0===E.length)return _._loop;if(1===E.length){if("boolean"!=typeof E[0])return!!(Y=_._soundById(parseInt(E[0],10)))&&Y._loop;_._loop=I=E[0]}else 2===E.length&&(I=E[0],B=parseInt(E[1],10));for(var Z=_._getSoundIds(B),j=0;j<Z.length;j++)(Y=_._soundById(Z[j]))&&(Y._loop=I,_._webAudio&&Y._node&&Y._node.bufferSource&&(Y._node.bufferSource.loop=I,I&&(Y._node.bufferSource.loopStart=Y._start||0,Y._node.bufferSource.loopEnd=Y._stop,_.playing(Z[j])&&(_.pause(Z[j],!0),_.play(Z[j],!0)))));return _},rate:function(){var I,B,j,_=this,E=arguments;if(0===E.length?B=_._sounds[0]._id:1===E.length?_._getSoundIds().indexOf(E[0])>=0?B=parseInt(E[0],10):I=parseFloat(E[0]):2===E.length&&(I=parseFloat(E[0]),B=parseInt(E[1],10)),"number"!=typeof I)return(j=_._soundById(B))?j._rate:_._rate;if("loaded"!==_._state||_._playLock)return _._queue.push({event:"rate",action:function(){_.rate.apply(_,E)}}),_;typeof B>"u"&&(_._rate=I),B=_._getSoundIds(B);for(var Me=0;Me<B.length;Me++)if(j=_._soundById(B[Me])){_.playing(B[Me])&&(j._rateSeek=_.seek(B[Me]),j._playStart=_._webAudio?T.ctx.currentTime:j._playStart),j._rate=I,_._webAudio&&j._node&&j._node.bufferSource?j._node.bufferSource.playbackRate.setValueAtTime(I,T.ctx.currentTime):j._node&&(j._node.playbackRate=I);var nt=_.seek(B[Me]),ze=1e3*((_._sprite[j._sprite][0]+_._sprite[j._sprite][1])/1e3-nt)/Math.abs(j._rate);(_._endTimers[B[Me]]||!j._paused)&&(_._clearTimer(B[Me]),_._endTimers[B[Me]]=setTimeout(_._ended.bind(_,j),ze)),_._emit("rate",j._id)}return _},seek:function(){var I,B,_=this,E=arguments;if(0===E.length?_._sounds.length&&(B=_._sounds[0]._id):1===E.length?_._getSoundIds().indexOf(E[0])>=0?B=parseInt(E[0],10):_._sounds.length&&(B=_._sounds[0]._id,I=parseFloat(E[0])):2===E.length&&(I=parseFloat(E[0]),B=parseInt(E[1],10)),typeof B>"u")return 0;if("number"==typeof I&&("loaded"!==_._state||_._playLock))return _._queue.push({event:"seek",action:function(){_.seek.apply(_,E)}}),_;var j=_._soundById(B);if(j){if(!("number"==typeof I&&I>=0)){if(_._webAudio){var ze=_.playing(B)?T.ctx.currentTime-j._playStart:0;return j._seek+((j._rateSeek?j._rateSeek-j._seek:0)+ze*Math.abs(j._rate))}return j._node.currentTime}var Me=_.playing(B);Me&&_.pause(B,!0),j._seek=I,j._ended=!1,_._clearTimer(B),!_._webAudio&&j._node&&!isNaN(j._node.duration)&&(j._node.currentTime=I);var nt=function(){Me&&_.play(B,!0),_._emit("seek",B)};if(Me&&!_._webAudio){var yt=function(){_._playLock?setTimeout(yt,0):nt()};setTimeout(yt,0)}else nt()}return _},playing:function(_){var E=this;if("number"==typeof _){var I=E._soundById(_);return!!I&&!I._paused}for(var B=0;B<E._sounds.length;B++)if(!E._sounds[B]._paused)return!0;return!1},duration:function(_){var E=this,I=E._duration,B=E._soundById(_);return B&&(I=E._sprite[B._sprite][1]/1e3),I},state:function(){return this._state},unload:function(){for(var _=this,E=_._sounds,I=0;I<E.length;I++)E[I]._paused||_.stop(E[I]._id),_._webAudio||(_._clearSound(E[I]._node),E[I]._node.removeEventListener("error",E[I]._errorFn,!1),E[I]._node.removeEventListener(T._canPlayEvent,E[I]._loadFn,!1),E[I]._node.removeEventListener("ended",E[I]._endFn,!1),T._releaseHtml5Audio(E[I]._node)),delete E[I]._node,_._clearTimer(E[I]._id);var B=T._howls.indexOf(_);B>=0&&T._howls.splice(B,1);var Y=!0;for(I=0;I<T._howls.length;I++)if(T._howls[I]._src===_._src||_._src.indexOf(T._howls[I]._src)>=0){Y=!1;break}return xe&&Y&&delete xe[_._src],T.noAudio=!1,_._state="unloaded",_._sounds=[],_=null,null},on:function(_,E,I,B){return"function"==typeof E&&this["_on"+_].push(B?{id:I,fn:E,once:B}:{id:I,fn:E}),this},off:function(_,E,I){var B=this,Y=B["_on"+_],Z=0;if("number"==typeof E&&(I=E,E=null),E||I)for(Z=0;Z<Y.length;Z++){var j=I===Y[Z].id;if(E===Y[Z].fn&&j||!E&&j){Y.splice(Z,1);break}}else if(_)B["_on"+_]=[];else{var Me=Object.keys(B);for(Z=0;Z<Me.length;Z++)0===Me[Z].indexOf("_on")&&Array.isArray(B[Me[Z]])&&(B[Me[Z]]=[])}return B},once:function(_,E,I){return this.on(_,E,I,1),this},_emit:function(_,E,I){for(var B=this,Y=B["_on"+_],Z=Y.length-1;Z>=0;Z--)(!Y[Z].id||Y[Z].id===E||"load"===_)&&(setTimeout(function(j){j.call(this,E,I)}.bind(B,Y[Z].fn),0),Y[Z].once&&B.off(_,Y[Z].fn,Y[Z].id));return B._loadQueue(_),B},_loadQueue:function(_){var E=this;if(E._queue.length>0){var I=E._queue[0];I.event===_&&(E._queue.shift(),E._loadQueue()),_||I.action()}return E},_ended:function(_){var E=this,I=_._sprite;if(!E._webAudio&&_._node&&!_._node.paused&&!_._node.ended&&_._node.currentTime<_._stop)return setTimeout(E._ended.bind(E,_),100),E;var B=!(!_._loop&&!E._sprite[I][2]);if(E._emit("end",_._id),!E._webAudio&&B&&E.stop(_._id,!0).play(_._id),E._webAudio&&B){E._emit("play",_._id),_._seek=_._start||0,_._rateSeek=0,_._playStart=T.ctx.currentTime;var Y=1e3*(_._stop-_._start)/Math.abs(_._rate);E._endTimers[_._id]=setTimeout(E._ended.bind(E,_),Y)}return E._webAudio&&!B&&(_._paused=!0,_._ended=!0,_._seek=_._start||0,_._rateSeek=0,E._clearTimer(_._id),E._cleanBuffer(_._node),T._autoSuspend()),!E._webAudio&&!B&&E.stop(_._id,!0),E},_clearTimer:function(_){var E=this;if(E._endTimers[_]){if("function"!=typeof E._endTimers[_])clearTimeout(E._endTimers[_]);else{var I=E._soundById(_);I&&I._node&&I._node.removeEventListener("ended",E._endTimers[_],!1)}delete E._endTimers[_]}return E},_soundById:function(_){for(var E=this,I=0;I<E._sounds.length;I++)if(_===E._sounds[I]._id)return E._sounds[I];return null},_inactiveSound:function(){var _=this;_._drain();for(var E=0;E<_._sounds.length;E++)if(_._sounds[E]._ended)return _._sounds[E].reset();return new K(_)},_drain:function(){var _=this,E=_._pool,I=0,B=0;if(!(_._sounds.length<E)){for(B=0;B<_._sounds.length;B++)_._sounds[B]._ended&&I++;for(B=_._sounds.length-1;B>=0;B--){if(I<=E)return;_._sounds[B]._ended&&(_._webAudio&&_._sounds[B]._node&&_._sounds[B]._node.disconnect(0),_._sounds.splice(B,1),I--)}}},_getSoundIds:function(_){if(typeof _>"u"){for(var I=[],B=0;B<this._sounds.length;B++)I.push(this._sounds[B]._id);return I}return[_]},_refreshBuffer:function(_){return _._node.bufferSource=T.ctx.createBufferSource(),_._node.bufferSource.buffer=xe[this._src],_._node.bufferSource.connect(_._panner?_._panner:_._node),_._node.bufferSource.loop=_._loop,_._loop&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop||0),_._node.bufferSource.playbackRate.setValueAtTime(_._rate,T.ctx.currentTime),this},_cleanBuffer:function(_){var I=T._navigator&&T._navigator.vendor.indexOf("Apple")>=0;if(!_.bufferSource)return this;if(T._scratchBuffer&&_.bufferSource&&(_.bufferSource.onended=null,_.bufferSource.disconnect(0),I))try{_.bufferSource.buffer=T._scratchBuffer}catch{}return _.bufferSource=null,this},_clearSound:function(_){/MSIE |Trident\//.test(T._navigator&&T._navigator.userAgent)||(_.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var K=function(_){this._parent=_,this.init()};K.prototype={init:function(){var _=this,E=_._parent;return _._muted=E._muted,_._loop=E._loop,_._volume=E._volume,_._rate=E._rate,_._seek=0,_._paused=!0,_._ended=!0,_._sprite="__default",_._id=++T._counter,E._sounds.push(_),_.create(),_},create:function(){var _=this,E=_._parent,I=T._muted||_._muted||_._parent._muted?0:_._volume;return E._webAudio?(_._node=typeof T.ctx.createGain>"u"?T.ctx.createGainNode():T.ctx.createGain(),_._node.gain.setValueAtTime(I,T.ctx.currentTime),_._node.paused=!0,_._node.connect(T.masterGain)):T.noAudio||(_._node=T._obtainHtml5Audio(),_._errorFn=_._errorListener.bind(_),_._node.addEventListener("error",_._errorFn,!1),_._loadFn=_._loadListener.bind(_),_._node.addEventListener(T._canPlayEvent,_._loadFn,!1),_._endFn=_._endListener.bind(_),_._node.addEventListener("ended",_._endFn,!1),_._node.src=E._src,_._node.preload=!0===E._preload?"auto":E._preload,_._node.volume=I*T.volume(),_._node.load()),_},reset:function(){var _=this,E=_._parent;return _._muted=E._muted,_._loop=E._loop,_._volume=E._volume,_._rate=E._rate,_._seek=0,_._rateSeek=0,_._paused=!0,_._ended=!0,_._sprite="__default",_._id=++T._counter,_},_errorListener:function(){var _=this;_._parent._emit("loaderror",_._id,_._node.error?_._node.error.code:0),_._node.removeEventListener("error",_._errorFn,!1)},_loadListener:function(){var _=this,E=_._parent;E._duration=Math.ceil(10*_._node.duration)/10,0===Object.keys(E._sprite).length&&(E._sprite={__default:[0,1e3*E._duration]}),"loaded"!==E._state&&(E._state="loaded",E._emit("load"),E._loadQueue()),_._node.removeEventListener(T._canPlayEvent,_._loadFn,!1)},_endListener:function(){var _=this,E=_._parent;E._duration===1/0&&(E._duration=Math.ceil(10*_._node.duration)/10,E._sprite.__default[1]===1/0&&(E._sprite.__default[1]=1e3*E._duration),E._ended(_)),_._node.removeEventListener("ended",_._endFn,!1)}};var xe={},Fe=function(_){var E=_._src;if(xe[E])return _._duration=xe[E].duration,void M(_);if(/^data:[^;]+;base64,/.test(E)){for(var I=atob(E.split(",")[1]),B=new Uint8Array(I.length),Y=0;Y<I.length;++Y)B[Y]=I.charCodeAt(Y);Ae(B.buffer,_)}else{var Z=new XMLHttpRequest;Z.open(_._xhr.method,E,!0),Z.withCredentials=_._xhr.withCredentials,Z.responseType="arraybuffer",_._xhr.headers&&Object.keys(_._xhr.headers).forEach(function(j){Z.setRequestHeader(j,_._xhr.headers[j])}),Z.onload=function(){var j=(Z.status+"")[0];"0"===j||"2"===j||"3"===j?Ae(Z.response,_):_._emit("loaderror",null,"Failed loading audio file with status: "+Z.status+".")},Z.onerror=function(){_._webAudio&&(_._html5=!0,_._webAudio=!1,_._sounds=[],delete xe[E],_.load())},_t(Z)}},_t=function(_){try{_.send()}catch{_.onerror()}},Ae=function(_,E){var I=function(){E._emit("loaderror",null,"Decoding audio data failed.")},B=function(Y){Y&&E._sounds.length>0?(xe[E._src]=Y,M(E,Y)):I()};typeof Promise<"u"&&1===T.ctx.decodeAudioData.length?T.ctx.decodeAudioData(_).then(B).catch(I):T.ctx.decodeAudioData(_,B,I)},M=function(_,E){E&&!_._duration&&(_._duration=E.duration),0===Object.keys(_._sprite).length&&(_._sprite={__default:[0,1e3*_._duration]}),"loaded"!==_._state&&(_._state="loaded",_._emit("load"),_._loadQueue())},ce=function(){if(T.usingWebAudio){try{typeof AudioContext<"u"?T.ctx=new AudioContext:typeof webkitAudioContext<"u"?T.ctx=new webkitAudioContext:T.usingWebAudio=!1}catch{T.usingWebAudio=!1}T.ctx||(T.usingWebAudio=!1);var _=/iP(hone|od|ad)/.test(T._navigator&&T._navigator.platform),E=T._navigator&&T._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),I=E?parseInt(E[1],10):null;if(_&&I&&I<9){var B=/safari/.test(T._navigator&&T._navigator.userAgent.toLowerCase());T._navigator&&!B&&(T.usingWebAudio=!1)}T.usingWebAudio&&(T.masterGain=typeof T.ctx.createGain>"u"?T.ctx.createGainNode():T.ctx.createGain(),T.masterGain.gain.setValueAtTime(T._muted?0:T._volume,T.ctx.currentTime),T.masterGain.connect(T.ctx.destination)),T._setup()}};void 0!==(N=function(){return{Howler:T,Howl:$}}.apply(Un,[]))&&(fr.exports=N),Un.Howler=T,Un.Howl=$,typeof global<"u"?(global.HowlerGlobal=$e,global.Howler=T,global.Howl=$,global.Sound=K):typeof window<"u"&&(window.HowlerGlobal=$e,window.Howler=T,window.Howl=$,window.Sound=K)}(),function(){"use strict";var T;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(T){var $=this;if(!$.ctx||!$.ctx.listener)return $;for(var K=$._howls.length-1;K>=0;K--)$._howls[K].stereo(T);return $},HowlerGlobal.prototype.pos=function(T,$,K){var xe=this;return xe.ctx&&xe.ctx.listener?"number"!=typeof T?xe._pos:(xe._pos=[T,$="number"!=typeof $?xe._pos[1]:$,K="number"!=typeof K?xe._pos[2]:K],typeof xe.ctx.listener.positionX<"u"?(xe.ctx.listener.positionX.setTargetAtTime(xe._pos[0],Howler.ctx.currentTime,.1),xe.ctx.listener.positionY.setTargetAtTime(xe._pos[1],Howler.ctx.currentTime,.1),xe.ctx.listener.positionZ.setTargetAtTime(xe._pos[2],Howler.ctx.currentTime,.1)):xe.ctx.listener.setPosition(xe._pos[0],xe._pos[1],xe._pos[2]),xe):xe},HowlerGlobal.prototype.orientation=function(T,$,K,xe,Fe,_t){var Ae=this;if(!Ae.ctx||!Ae.ctx.listener)return Ae;var M=Ae._orientation;return"number"!=typeof T?M:(Ae._orientation=[T,$="number"!=typeof $?M[1]:$,K="number"!=typeof K?M[2]:K,xe="number"!=typeof xe?M[3]:xe,Fe="number"!=typeof Fe?M[4]:Fe,_t="number"!=typeof _t?M[5]:_t],typeof Ae.ctx.listener.forwardX<"u"?(Ae.ctx.listener.forwardX.setTargetAtTime(T,Howler.ctx.currentTime,.1),Ae.ctx.listener.forwardY.setTargetAtTime($,Howler.ctx.currentTime,.1),Ae.ctx.listener.forwardZ.setTargetAtTime(K,Howler.ctx.currentTime,.1),Ae.ctx.listener.upX.setTargetAtTime(xe,Howler.ctx.currentTime,.1),Ae.ctx.listener.upY.setTargetAtTime(Fe,Howler.ctx.currentTime,.1),Ae.ctx.listener.upZ.setTargetAtTime(_t,Howler.ctx.currentTime,.1)):Ae.ctx.listener.setOrientation(T,$,K,xe,Fe,_t),Ae)},Howl.prototype.init=(T=Howl.prototype.init,function($){var K=this;return K._orientation=$.orientation||[1,0,0],K._stereo=$.stereo||null,K._pos=$.pos||null,K._pannerAttr={coneInnerAngle:typeof $.coneInnerAngle<"u"?$.coneInnerAngle:360,coneOuterAngle:typeof $.coneOuterAngle<"u"?$.coneOuterAngle:360,coneOuterGain:typeof $.coneOuterGain<"u"?$.coneOuterGain:0,distanceModel:typeof $.distanceModel<"u"?$.distanceModel:"inverse",maxDistance:typeof $.maxDistance<"u"?$.maxDistance:1e4,panningModel:typeof $.panningModel<"u"?$.panningModel:"HRTF",refDistance:typeof $.refDistance<"u"?$.refDistance:1,rolloffFactor:typeof $.rolloffFactor<"u"?$.rolloffFactor:1},K._onstereo=$.onstereo?[{fn:$.onstereo}]:[],K._onpos=$.onpos?[{fn:$.onpos}]:[],K._onorientation=$.onorientation?[{fn:$.onorientation}]:[],T.call(this,$)}),Howl.prototype.stereo=function(T,$){var K=this;if(!K._webAudio)return K;if("loaded"!==K._state)return K._queue.push({event:"stereo",action:function(){K.stereo(T,$)}}),K;var xe=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof $>"u"){if("number"!=typeof T)return K._stereo;K._stereo=T,K._pos=[T,0,0]}for(var Fe=K._getSoundIds($),_t=0;_t<Fe.length;_t++){var Ae=K._soundById(Fe[_t]);if(Ae){if("number"!=typeof T)return Ae._stereo;Ae._stereo=T,Ae._pos=[T,0,0],Ae._node&&(Ae._pannerAttr.panningModel="equalpower",(!Ae._panner||!Ae._panner.pan)&&$e(Ae,xe),"spatial"===xe?typeof Ae._panner.positionX<"u"?(Ae._panner.positionX.setValueAtTime(T,Howler.ctx.currentTime),Ae._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),Ae._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):Ae._panner.setPosition(T,0,0):Ae._panner.pan.setValueAtTime(T,Howler.ctx.currentTime)),K._emit("stereo",Ae._id)}}return K},Howl.prototype.pos=function(T,$,K,xe){var Fe=this;if(!Fe._webAudio)return Fe;if("loaded"!==Fe._state)return Fe._queue.push({event:"pos",action:function(){Fe.pos(T,$,K,xe)}}),Fe;if($="number"!=typeof $?0:$,K="number"!=typeof K?-.5:K,typeof xe>"u"){if("number"!=typeof T)return Fe._pos;Fe._pos=[T,$,K]}for(var _t=Fe._getSoundIds(xe),Ae=0;Ae<_t.length;Ae++){var M=Fe._soundById(_t[Ae]);if(M){if("number"!=typeof T)return M._pos;M._pos=[T,$,K],M._node&&((!M._panner||M._panner.pan)&&$e(M,"spatial"),typeof M._panner.positionX<"u"?(M._panner.positionX.setValueAtTime(T,Howler.ctx.currentTime),M._panner.positionY.setValueAtTime($,Howler.ctx.currentTime),M._panner.positionZ.setValueAtTime(K,Howler.ctx.currentTime)):M._panner.setPosition(T,$,K)),Fe._emit("pos",M._id)}}return Fe},Howl.prototype.orientation=function(T,$,K,xe){var Fe=this;if(!Fe._webAudio)return Fe;if("loaded"!==Fe._state)return Fe._queue.push({event:"orientation",action:function(){Fe.orientation(T,$,K,xe)}}),Fe;if($="number"!=typeof $?Fe._orientation[1]:$,K="number"!=typeof K?Fe._orientation[2]:K,typeof xe>"u"){if("number"!=typeof T)return Fe._orientation;Fe._orientation=[T,$,K]}for(var _t=Fe._getSoundIds(xe),Ae=0;Ae<_t.length;Ae++){var M=Fe._soundById(_t[Ae]);if(M){if("number"!=typeof T)return M._orientation;M._orientation=[T,$,K],M._node&&(M._panner||(M._pos||(M._pos=Fe._pos||[0,0,-.5]),$e(M,"spatial")),typeof M._panner.orientationX<"u"?(M._panner.orientationX.setValueAtTime(T,Howler.ctx.currentTime),M._panner.orientationY.setValueAtTime($,Howler.ctx.currentTime),M._panner.orientationZ.setValueAtTime(K,Howler.ctx.currentTime)):M._panner.setOrientation(T,$,K)),Fe._emit("orientation",M._id)}}return Fe},Howl.prototype.pannerAttr=function(){var K,xe,Fe,T=this,$=arguments;if(!T._webAudio)return T;if(0===$.length)return T._pannerAttr;if(1===$.length){if("object"!=typeof $[0])return(Fe=T._soundById(parseInt($[0],10)))?Fe._pannerAttr:T._pannerAttr;K=$[0],typeof xe>"u"&&(K.pannerAttr||(K.pannerAttr={coneInnerAngle:K.coneInnerAngle,coneOuterAngle:K.coneOuterAngle,coneOuterGain:K.coneOuterGain,distanceModel:K.distanceModel,maxDistance:K.maxDistance,refDistance:K.refDistance,rolloffFactor:K.rolloffFactor,panningModel:K.panningModel}),T._pannerAttr={coneInnerAngle:typeof K.pannerAttr.coneInnerAngle<"u"?K.pannerAttr.coneInnerAngle:T._coneInnerAngle,coneOuterAngle:typeof K.pannerAttr.coneOuterAngle<"u"?K.pannerAttr.coneOuterAngle:T._coneOuterAngle,coneOuterGain:typeof K.pannerAttr.coneOuterGain<"u"?K.pannerAttr.coneOuterGain:T._coneOuterGain,distanceModel:typeof K.pannerAttr.distanceModel<"u"?K.pannerAttr.distanceModel:T._distanceModel,maxDistance:typeof K.pannerAttr.maxDistance<"u"?K.pannerAttr.maxDistance:T._maxDistance,refDistance:typeof K.pannerAttr.refDistance<"u"?K.pannerAttr.refDistance:T._refDistance,rolloffFactor:typeof K.pannerAttr.rolloffFactor<"u"?K.pannerAttr.rolloffFactor:T._rolloffFactor,panningModel:typeof K.pannerAttr.panningModel<"u"?K.pannerAttr.panningModel:T._panningModel})}else 2===$.length&&(K=$[0],xe=parseInt($[1],10));for(var _t=T._getSoundIds(xe),Ae=0;Ae<_t.length;Ae++)if(Fe=T._soundById(_t[Ae])){var M=Fe._pannerAttr;M={coneInnerAngle:typeof K.coneInnerAngle<"u"?K.coneInnerAngle:M.coneInnerAngle,coneOuterAngle:typeof K.coneOuterAngle<"u"?K.coneOuterAngle:M.coneOuterAngle,coneOuterGain:typeof K.coneOuterGain<"u"?K.coneOuterGain:M.coneOuterGain,distanceModel:typeof K.distanceModel<"u"?K.distanceModel:M.distanceModel,maxDistance:typeof K.maxDistance<"u"?K.maxDistance:M.maxDistance,refDistance:typeof K.refDistance<"u"?K.refDistance:M.refDistance,rolloffFactor:typeof K.rolloffFactor<"u"?K.rolloffFactor:M.rolloffFactor,panningModel:typeof K.panningModel<"u"?K.panningModel:M.panningModel};var ce=Fe._panner;ce||(Fe._pos||(Fe._pos=T._pos||[0,0,-.5]),$e(Fe,"spatial"),ce=Fe._panner),ce.coneInnerAngle=M.coneInnerAngle,ce.coneOuterAngle=M.coneOuterAngle,ce.coneOuterGain=M.coneOuterGain,ce.distanceModel=M.distanceModel,ce.maxDistance=M.maxDistance,ce.refDistance=M.refDistance,ce.rolloffFactor=M.rolloffFactor,ce.panningModel=M.panningModel}return T},Sound.prototype.init=function(T){return function(){var $=this,K=$._parent;$._orientation=K._orientation,$._stereo=K._stereo,$._pos=K._pos,$._pannerAttr=K._pannerAttr,T.call(this),$._stereo?K.stereo($._stereo):$._pos&&K.pos($._pos[0],$._pos[1],$._pos[2],$._id)}}(Sound.prototype.init),Sound.prototype.reset=function(T){return function(){var $=this,K=$._parent;return $._orientation=K._orientation,$._stereo=K._stereo,$._pos=K._pos,$._pannerAttr=K._pannerAttr,$._stereo?K.stereo($._stereo):$._pos?K.pos($._pos[0],$._pos[1],$._pos[2],$._id):$._panner&&($._panner.disconnect(0),$._panner=void 0,K._refreshBuffer($)),T.call(this)}}(Sound.prototype.reset);var $e=function(T,$){"spatial"===($=$||"spatial")?(T._panner=Howler.ctx.createPanner(),T._panner.coneInnerAngle=T._pannerAttr.coneInnerAngle,T._panner.coneOuterAngle=T._pannerAttr.coneOuterAngle,T._panner.coneOuterGain=T._pannerAttr.coneOuterGain,T._panner.distanceModel=T._pannerAttr.distanceModel,T._panner.maxDistance=T._pannerAttr.maxDistance,T._panner.refDistance=T._pannerAttr.refDistance,T._panner.rolloffFactor=T._pannerAttr.rolloffFactor,T._panner.panningModel=T._pannerAttr.panningModel,typeof T._panner.positionX<"u"?(T._panner.positionX.setValueAtTime(T._pos[0],Howler.ctx.currentTime),T._panner.positionY.setValueAtTime(T._pos[1],Howler.ctx.currentTime),T._panner.positionZ.setValueAtTime(T._pos[2],Howler.ctx.currentTime)):T._panner.setPosition(T._pos[0],T._pos[1],T._pos[2]),typeof T._panner.orientationX<"u"?(T._panner.orientationX.setValueAtTime(T._orientation[0],Howler.ctx.currentTime),T._panner.orientationY.setValueAtTime(T._orientation[1],Howler.ctx.currentTime),T._panner.orientationZ.setValueAtTime(T._orientation[2],Howler.ctx.currentTime)):T._panner.setOrientation(T._orientation[0],T._orientation[1],T._orientation[2])):(T._panner=Howler.ctx.createStereoPanner(),T._panner.pan.setValueAtTime(T._stereo,Howler.ctx.currentTime)),T._panner.connect(T._node),T._paused||T._parent.pause(T._id,!0).play(T._id,!0)}}()},614:()=>{"use strict";const fr=":";const go=function(k,...H){if(go.translate){const le=go.translate(k,H);k=le[0],H=le[1]}let J=Xo(k[0],k.raw[0]);for(let le=1;le<k.length;le++)J+=H[le-1]+Xo(k[le],k.raw[le]);return J},Va=":";function Xo(k,H){return H.charAt(0)===Va?k.substring(function Zi(k,H){for(let J=1,le=1;J<k.length;J++,le++)if("\\"===H[le])le++;else if(k[J]===fr)return J;throw new Error(`Unterminated $localize metadata block in "${H}".`)}(k,H)+1):k}globalThis.$localize=go},106:(fr,Un,st)=>{"use strict";st.d(Un,{Z:()=>B});var N=st(58),$e=st(537),T=st(534),$=st(879);class K{constructor(Z,j){this._delegate=Z,this.firebase=j,(0,T._addComponent)(Z,new $e.wA("app-compat",()=>this,"PUBLIC")),this.container=Z.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this._delegate.automaticDataCollectionEnabled=Z}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Z=>{this._delegate.checkDestroyed(),Z()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,T.deleteApp)(this._delegate)))}_getService(Z,j=T._DEFAULT_ENTRY_NAME){var Me;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(Z);return!nt.isInitialized()&&"EXPLICIT"===(null===(Me=nt.getComponent())||void 0===Me?void 0:Me.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:j})}_removeServiceInstance(Z,j=T._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Z).clearInstance(j)}_addComponent(Z){(0,T._addComponent)(this._delegate,Z)}_addOrOverwriteComponent(Z){(0,T._addOrOverwriteComponent)(this._delegate,Z)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Fe=new N.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),M=function Ae(){const Y=function _t(Y){const Z={},j={__esModule:!0,initializeApp:function yt(ct,ot={}){const fn=T.initializeApp(ct,ot);if((0,N.r3)(Z,fn.name))return Z[fn.name];const at=new Y(fn,j);return Z[fn.name]=at,at},app:nt,registerVersion:T.registerVersion,setLogLevel:T.setLogLevel,onLog:T.onLog,apps:null,SDK_VERSION:T.SDK_VERSION,INTERNAL:{registerComponent:function ci(ct){const ot=ct.name,fn=ot.replace("-compat","");if(T._registerComponent(ct)&&"PUBLIC"===ct.type){const at=(Ki=nt())=>{if("function"!=typeof Ki[fn])throw Fe.create("invalid-app-argument",{appName:ot});return Ki[fn]()};void 0!==ct.serviceProps&&(0,N.ZB)(at,ct.serviceProps),j[fn]=at,Y.prototype[fn]=function(...Ki){return this._getService.bind(this,ot).apply(this,ct.multipleInstances?Ki:[])}}return"PUBLIC"===ct.type?j[fn]:null},removeApp:function Me(ct){delete Z[ct]},useAsService:function Wr(ct,ot){return"serverAuth"===ot?null:ot},modularAPIs:T}};function nt(ct){if(!(0,N.r3)(Z,ct=ct||T._DEFAULT_ENTRY_NAME))throw Fe.create("no-app",{appName:ct});return Z[ct]}return j.default=j,Object.defineProperty(j,"apps",{get:function ze(){return Object.keys(Z).map(ct=>Z[ct])}}),nt.App=Y,j}(K);return Y.INTERNAL=Object.assign(Object.assign({},Y.INTERNAL),{createFirebaseNamespace:Ae,extendNamespace:function Z(j){(0,N.ZB)(Y,j)},createSubscribe:N.ne,ErrorFactory:N.LL,deepExtend:N.ZB}),Y}(),ce=new $.Yd("@firebase/app-compat");if((0,N.jU)()&&void 0!==self.firebase){ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Y=self.firebase.SDK_VERSION;Y&&Y.indexOf("LITE")>=0&&ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const B=M;!function I(Y){(0,T.registerVersion)("@firebase/app-compat","0.2.25",Y)}()},534:(fr,Un,st)=>{"use strict";st.r(Un),st.d(Un,{FirebaseError:()=>$.ZR,SDK_VERSION:()=>ih,_DEFAULT_ENTRY_NAME:()=>ft,_addComponent:()=>yn,_addOrOverwriteComponent:()=>an,_apps:()=>oe,_clearComponents:()=>gr,_components:()=>Jt,_getProvider:()=>Ii,_registerComponent:()=>Re,_removeServiceInstance:()=>Tn,deleteApp:()=>Ba,getApp:()=>Xt,getApps:()=>Zt,initializeApp:()=>Bl,onLog:()=>Zr,registerVersion:()=>$t,setLogLevel:()=>Ul});var N=st(861),$e=st(537),T=st(879),$=st(58);const K=(ne,q)=>q.some(he=>ne instanceof he);let xe,Fe;const M=new WeakMap,ce=new WeakMap,_=new WeakMap,E=new WeakMap,I=new WeakMap;let Z={get(ne,q,he){if(ne instanceof IDBTransaction){if("done"===q)return ce.get(ne);if("objectStoreNames"===q)return ne.objectStoreNames||_.get(ne);if("store"===q)return he.objectStoreNames[1]?void 0:he.objectStore(he.objectStoreNames[0])}return yt(ne[q])},set:(ne,q,he)=>(ne[q]=he,!0),has:(ne,q)=>ne instanceof IDBTransaction&&("done"===q||"store"===q)||q in ne};function nt(ne){return"function"==typeof ne?function Me(ne){return ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ne)?function(...q){return ne.apply(ze(this),q),yt(M.get(this))}:function(...q){return yt(ne.apply(ze(this),q))}:function(q,...he){const je=ne.call(ze(this),q,...he);return _.set(je,q.sort?q.sort():[q]),yt(je)}}(ne):(ne instanceof IDBTransaction&&function Y(ne){if(ce.has(ne))return;const q=new Promise((he,je)=>{const Qe=()=>{ne.removeEventListener("complete",Mt),ne.removeEventListener("error",Et),ne.removeEventListener("abort",Et)},Mt=()=>{he(),Qe()},Et=()=>{je(ne.error||new DOMException("AbortError","AbortError")),Qe()};ne.addEventListener("complete",Mt),ne.addEventListener("error",Et),ne.addEventListener("abort",Et)});ce.set(ne,q)}(ne),K(ne,function _t(){return xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ne,Z):ne)}function yt(ne){if(ne instanceof IDBRequest)return function B(ne){const q=new Promise((he,je)=>{const Qe=()=>{ne.removeEventListener("success",Mt),ne.removeEventListener("error",Et)},Mt=()=>{he(yt(ne.result)),Qe()},Et=()=>{je(ne.error),Qe()};ne.addEventListener("success",Mt),ne.addEventListener("error",Et)});return q.then(he=>{he instanceof IDBCursor&&M.set(he,ne)}).catch(()=>{}),I.set(q,ne),q}(ne);if(E.has(ne))return E.get(ne);const q=nt(ne);return q!==ne&&(E.set(ne,q),I.set(q,ne)),q}const ze=ne=>I.get(ne),ct=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],fn=new Map;function at(ne,q){if(!(ne instanceof IDBDatabase)||q in ne||"string"!=typeof q)return;if(fn.get(q))return fn.get(q);const he=q.replace(/FromIndex$/,""),je=q!==he,Qe=ot.includes(he);if(!(he in(je?IDBIndex:IDBObjectStore).prototype)||!Qe&&!ct.includes(he))return;const Mt=function(){var Et=(0,N.Z)(function*(ei,...ln){const ta=this.transaction(ei,Qe?"readwrite":"readonly");let du=ta.store;return je&&(du=du.index(ln.shift())),(yield Promise.all([du[he](...ln),Qe&&ta.done]))[0]});return function(ln){return Et.apply(this,arguments)}}();return fn.set(q,Mt),Mt}!function j(ne){Z=ne(Z)}(ne=>({...ne,get:(q,he,je)=>at(q,he)||ne.get(q,he,je),has:(q,he)=>!!at(q,he)||ne.has(q,he)}));class Ki{constructor(q){this.container=q}getPlatformInfoString(){return this.container.getProviders().map(he=>{if(function Ti(ne){const q=ne.getComponent();return"VERSION"===q?.type}(he)){const je=he.getImmediate();return`${je.library}/${je.version}`}return null}).filter(he=>he).join(" ")}}const Ue="@firebase/app",qr=new T.Yd("@firebase/app"),ft="[DEFAULT]",xn={[Ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},oe=new Map,Jt=new Map;function yn(ne,q){try{ne.container.addComponent(q)}catch(he){qr.debug(`Component ${q.name} failed to register with FirebaseApp ${ne.name}`,he)}}function an(ne,q){ne.container.addOrOverwriteComponent(q)}function Re(ne){const q=ne.name;if(Jt.has(q))return qr.debug(`There were multiple attempts to register component ${q}.`),!1;Jt.set(q,ne);for(const he of oe.values())yn(he,ne);return!0}function Ii(ne,q){const he=ne.container.getProvider("heartbeat").getImmediate({optional:!0});return he&&he.triggerHeartbeat(),ne.container.getProvider(q)}function Tn(ne,q,he=ft){Ii(ne,q).clearInstance(he)}function gr(){Jt.clear()}const Ci=new $.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ea{constructor(q,he,je){this._isDeleted=!1,this._options=Object.assign({},q),this._config=Object.assign({},he),this._name=he.name,this._automaticDataCollectionEnabled=he.automaticDataCollectionEnabled,this._container=je,this.container.addComponent(new $e.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this.checkDestroyed(),this._automaticDataCollectionEnabled=q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(q){this._isDeleted=q}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}const ih="10.7.1";function Bl(ne,q={}){let he=ne;"object"!=typeof q&&(q={name:q});const je=Object.assign({name:ft,automaticDataCollectionEnabled:!1},q),Qe=je.name;if("string"!=typeof Qe||!Qe)throw Ci.create("bad-app-name",{appName:String(Qe)});if(he||(he=(0,$.aH)()),!he)throw Ci.create("no-options");const Mt=oe.get(Qe);if(Mt){if((0,$.vZ)(he,Mt.options)&&(0,$.vZ)(je,Mt.config))return Mt;throw Ci.create("duplicate-app",{appName:Qe})}const Et=new $e.H0(Qe);for(const ln of Jt.values())Et.addComponent(ln);const ei=new ea(he,je,Et);return oe.set(Qe,ei),ei}function Xt(ne=ft){const q=oe.get(ne);if(!q&&ne===ft&&(0,$.aH)())return Bl();if(!q)throw Ci.create("no-app",{appName:ne});return q}function Zt(){return Array.from(oe.values())}function Ba(ne){return js.apply(this,arguments)}function js(){return(js=(0,N.Z)(function*(ne){const q=ne.name;oe.has(q)&&(oe.delete(q),yield Promise.all(ne.container.getProviders().map(he=>he.delete())),ne.isDeleted=!0)})).apply(this,arguments)}function $t(ne,q,he){var je;let Qe=null!==(je=xn[ne])&&void 0!==je?je:ne;he&&(Qe+=`-${he}`);const Mt=Qe.match(/\s|\//),Et=q.match(/\s|\//);if(Mt||Et){const ei=[`Unable to register library "${Qe}" with version "${q}":`];return Mt&&ei.push(`library name "${Qe}" contains illegal characters (whitespace or "/")`),Mt&&Et&&ei.push("and"),Et&&ei.push(`version name "${q}" contains illegal characters (whitespace or "/")`),void qr.warn(ei.join(" "))}Re(new $e.wA(`${Qe}-version`,()=>({library:Qe,version:q}),"VERSION"))}function Zr(ne,q){if(null!==ne&&"function"!=typeof ne)throw Ci.create("invalid-log-argument");(0,T.Am)(ne,q)}function Ul(ne){(0,T.Ub)(ne)}const mo="firebase-heartbeat-database",uu=1,P="firebase-heartbeat-store";let R=null;function F(){return R||(R=function ci(ne,q,{blocked:he,upgrade:je,blocking:Qe,terminated:Mt}={}){const Et=indexedDB.open(ne,q),ei=yt(Et);return je&&Et.addEventListener("upgradeneeded",ln=>{je(yt(Et.result),ln.oldVersion,ln.newVersion,yt(Et.transaction),ln)}),he&&Et.addEventListener("blocked",ln=>he(ln.oldVersion,ln.newVersion,ln)),ei.then(ln=>{Mt&&ln.addEventListener("close",()=>Mt()),Qe&&ln.addEventListener("versionchange",ta=>Qe(ta.oldVersion,ta.newVersion,ta))}).catch(()=>{}),ei}(mo,uu,{upgrade:(ne,q)=>{0===q&&ne.createObjectStore(P)}}).catch(ne=>{throw Ci.create("idb-open",{originalErrorMessage:ne.message})})),R}function W(){return(W=(0,N.Z)(function*(ne){try{return yield(yield F()).transaction(P).objectStore(P).get(Ve(ne))}catch(q){if(q instanceof $.ZR)qr.warn(q.message);else{const he=Ci.create("idb-get",{originalErrorMessage:q?.message});qr.warn(he.message)}}})).apply(this,arguments)}function Ge(ne,q){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,N.Z)(function*(ne,q){try{const je=(yield F()).transaction(P,"readwrite");yield je.objectStore(P).put(q,Ve(ne)),yield je.done}catch(he){if(he instanceof $.ZR)qr.warn(he.message);else{const je=Ci.create("idb-set",{originalErrorMessage:he?.message});qr.warn(je.message)}}})).apply(this,arguments)}function Ve(ne){return`${ne.name}!${ne.options.appId}`}class Rr{constructor(q){this.container=q,this._heartbeatsCache=null;const he=this.container.getProvider("app").getImmediate();this._storage=new bs(he),this._heartbeatsCachePromise=this._storage.read().then(je=>(this._heartbeatsCache=je,je))}triggerHeartbeat(){var q=this;return(0,N.Z)(function*(){var he,je;const Mt=q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=Bt();if((null!=(null===(he=q._heartbeatsCache)||void 0===he?void 0:he.heartbeats)||(q._heartbeatsCache=yield q._heartbeatsCachePromise,null!=(null===(je=q._heartbeatsCache)||void 0===je?void 0:je.heartbeats)))&&q._heartbeatsCache.lastSentHeartbeatDate!==Et&&!q._heartbeatsCache.heartbeats.some(ei=>ei.date===Et))return q._heartbeatsCache.heartbeats.push({date:Et,agent:Mt}),q._heartbeatsCache.heartbeats=q._heartbeatsCache.heartbeats.filter(ei=>{const ln=new Date(ei.date).valueOf();return Date.now()-ln<=2592e6}),q._storage.overwrite(q._heartbeatsCache)})()}getHeartbeatsHeader(){var q=this;return(0,N.Z)(function*(){var he;if(null===q._heartbeatsCache&&(yield q._heartbeatsCachePromise),null==(null===(he=q._heartbeatsCache)||void 0===he?void 0:he.heartbeats)||0===q._heartbeatsCache.heartbeats.length)return"";const je=Bt(),{heartbeatsToSend:Qe,unsentEntries:Mt}=function ae(ne,q=1024){const he=[];let je=ne.slice();for(const Qe of ne){const Mt=he.find(Et=>Et.agent===Qe.agent);if(Mt){if(Mt.dates.push(Qe.date),Xe(he)>q){Mt.dates.pop();break}}else if(he.push({agent:Qe.agent,dates:[Qe.date]}),Xe(he)>q){he.pop();break}je=je.slice(1)}return{heartbeatsToSend:he,unsentEntries:je}}(q._heartbeatsCache.heartbeats),Et=(0,$.L)(JSON.stringify({version:2,heartbeats:Qe}));return q._heartbeatsCache.lastSentHeartbeatDate=je,Mt.length>0?(q._heartbeatsCache.heartbeats=Mt,yield q._storage.overwrite(q._heartbeatsCache)):(q._heartbeatsCache.heartbeats=[],q._storage.overwrite(q._heartbeatsCache)),Et})()}}function Bt(){return(new Date).toISOString().substring(0,10)}class bs{constructor(q){this.app=q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,N.Z)(function*(){return!!(0,$.hl)()&&(0,$.eu)().then(()=>!0).catch(()=>!1)})()}read(){var q=this;return(0,N.Z)(function*(){if(yield q._canUseIndexedDBPromise){const je=yield function X(ne){return W.apply(this,arguments)}(q.app);return je?.heartbeats?je:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(q){var he=this;return(0,N.Z)(function*(){var je;if(yield he._canUseIndexedDBPromise){const Mt=yield he.read();return Ge(he.app,{lastSentHeartbeatDate:null!==(je=q.lastSentHeartbeatDate)&&void 0!==je?je:Mt.lastSentHeartbeatDate,heartbeats:q.heartbeats})}})()}add(q){var he=this;return(0,N.Z)(function*(){var je;if(yield he._canUseIndexedDBPromise){const Mt=yield he.read();return Ge(he.app,{lastSentHeartbeatDate:null!==(je=q.lastSentHeartbeatDate)&&void 0!==je?je:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...q.heartbeats]})}})()}}function Xe(ne){return(0,$.L)(JSON.stringify({version:2,heartbeats:ne})).length}!function xt(ne){Re(new $e.wA("platform-logger",q=>new Ki(q),"PRIVATE")),Re(new $e.wA("heartbeat",q=>new Rr(q),"PRIVATE")),$t(Ue,"0.9.25",ne),$t(Ue,"0.9.25","esm2017"),$t("fire-js","")}("")},537:(fr,Un,st)=>{"use strict";st.d(Un,{H0:()=>_t,wA:()=>T,zt:()=>K});var N=st(861),$e=st(58);class T{constructor(M,ce,_){this.name=M,this.instanceFactory=ce,this.type=_,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(M){return this.instantiationMode=M,this}setMultipleInstances(M){return this.multipleInstances=M,this}setServiceProps(M){return this.serviceProps=M,this}setInstanceCreatedCallback(M){return this.onInstanceCreated=M,this}}const $="[DEFAULT]";class K{constructor(M,ce){this.name=M,this.container=ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(M){const ce=this.normalizeInstanceIdentifier(M);if(!this.instancesDeferred.has(ce)){const _=new $e.BH;if(this.instancesDeferred.set(ce,_),this.isInitialized(ce)||this.shouldAutoInitialize())try{const E=this.getOrInitializeService({instanceIdentifier:ce});E&&_.resolve(E)}catch{}}return this.instancesDeferred.get(ce).promise}getImmediate(M){var ce;const _=this.normalizeInstanceIdentifier(M?.identifier),E=null!==(ce=M?.optional)&&void 0!==ce&&ce;if(!this.isInitialized(_)&&!this.shouldAutoInitialize()){if(E)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:_})}catch(I){if(E)return null;throw I}}getComponent(){return this.component}setComponent(M){if(M.name!==this.name)throw Error(`Mismatching Component ${M.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=M,this.shouldAutoInitialize()){if(function Fe(Ae){return"EAGER"===Ae.instantiationMode}(M))try{this.getOrInitializeService({instanceIdentifier:$})}catch{}for(const[ce,_]of this.instancesDeferred.entries()){const E=this.normalizeInstanceIdentifier(ce);try{const I=this.getOrInitializeService({instanceIdentifier:E});_.resolve(I)}catch{}}}}clearInstance(M=$){this.instancesDeferred.delete(M),this.instancesOptions.delete(M),this.instances.delete(M)}delete(){var M=this;return(0,N.Z)(function*(){const ce=Array.from(M.instances.values());yield Promise.all([...ce.filter(_=>"INTERNAL"in _).map(_=>_.INTERNAL.delete()),...ce.filter(_=>"_delete"in _).map(_=>_._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(M=$){return this.instances.has(M)}getOptions(M=$){return this.instancesOptions.get(M)||{}}initialize(M={}){const{options:ce={}}=M,_=this.normalizeInstanceIdentifier(M.instanceIdentifier);if(this.isInitialized(_))throw Error(`${this.name}(${_}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const E=this.getOrInitializeService({instanceIdentifier:_,options:ce});for(const[I,B]of this.instancesDeferred.entries())_===this.normalizeInstanceIdentifier(I)&&B.resolve(E);return E}onInit(M,ce){var _;const E=this.normalizeInstanceIdentifier(ce),I=null!==(_=this.onInitCallbacks.get(E))&&void 0!==_?_:new Set;I.add(M),this.onInitCallbacks.set(E,I);const B=this.instances.get(E);return B&&M(B,E),()=>{I.delete(M)}}invokeOnInitCallbacks(M,ce){const _=this.onInitCallbacks.get(ce);if(_)for(const E of _)try{E(M,ce)}catch{}}getOrInitializeService({instanceIdentifier:M,options:ce={}}){let _=this.instances.get(M);if(!_&&this.component&&(_=this.component.instanceFactory(this.container,{instanceIdentifier:(Ae=M,Ae===$?void 0:Ae),options:ce}),this.instances.set(M,_),this.instancesOptions.set(M,ce),this.invokeOnInitCallbacks(_,M),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,M,_)}catch{}var Ae;return _||null}normalizeInstanceIdentifier(M=$){return this.component?this.component.multipleInstances?M:$:M}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _t{constructor(M){this.name=M,this.providers=new Map}addComponent(M){const ce=this.getProvider(M.name);if(ce.isComponentSet())throw new Error(`Component ${M.name} has already been registered with ${this.name}`);ce.setComponent(M)}addOrOverwriteComponent(M){this.getProvider(M.name).isComponentSet()&&this.providers.delete(M.name),this.addComponent(M)}getProvider(M){if(this.providers.has(M))return this.providers.get(M);const ce=new K(M,this);return this.providers.set(M,ce),ce}getProviders(){return Array.from(this.providers.values())}}},879:(fr,Un,st)=>{"use strict";st.d(Un,{Am:()=>Ae,Ub:()=>_t,Yd:()=>Fe,in:()=>$e});const N=[];var $e=function(M){return M[M.DEBUG=0]="DEBUG",M[M.VERBOSE=1]="VERBOSE",M[M.INFO=2]="INFO",M[M.WARN=3]="WARN",M[M.ERROR=4]="ERROR",M[M.SILENT=5]="SILENT",M}($e||{});const T={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},$=$e.INFO,K={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},xe=(M,ce,..._)=>{if(ce<M.logLevel)return;const E=(new Date).toISOString(),I=K[ce];if(!I)throw new Error(`Attempted to log a message with an invalid logType (value: ${ce})`);console[I](`[${E}]  ${M.name}:`,..._)};class Fe{constructor(ce){this.name=ce,this._logLevel=$,this._logHandler=xe,this._userLogHandler=null,N.push(this)}get logLevel(){return this._logLevel}set logLevel(ce){if(!(ce in $e))throw new TypeError(`Invalid value "${ce}" assigned to \`logLevel\``);this._logLevel=ce}setLogLevel(ce){this._logLevel="string"==typeof ce?T[ce]:ce}get logHandler(){return this._logHandler}set logHandler(ce){if("function"!=typeof ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(ce){this._userLogHandler=ce}debug(...ce){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...ce),this._logHandler(this,$e.DEBUG,...ce)}log(...ce){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...ce),this._logHandler(this,$e.VERBOSE,...ce)}info(...ce){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...ce),this._logHandler(this,$e.INFO,...ce)}warn(...ce){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...ce),this._logHandler(this,$e.WARN,...ce)}error(...ce){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...ce),this._logHandler(this,$e.ERROR,...ce)}}function _t(M){N.forEach(ce=>{ce.setLogLevel(M)})}function Ae(M,ce){for(const _ of N){let E=null;ce&&ce.level&&(E=T[ce.level]),_.userLogHandler=null===M?null:(I,B,...Y)=>{const Z=Y.map(j=>{if(null==j)return null;if("string"==typeof j)return j;if("number"==typeof j||"boolean"==typeof j)return j.toString();if(j instanceof Error)return j.message;try{return JSON.stringify(j)}catch{return null}}).filter(j=>j).join(" ");B>=(E??I.logLevel)&&M({level:$e[B].toLowerCase(),message:Z,args:Y,type:I.name})}}}},980:(fr,Un,st)=>{"use strict";st.r(Un);var N=st(861),$e=st(106),T=st(58),$=st(534),K=st(879);function Ae(f,c){var d={};for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&c.indexOf(p)<0&&(d[p]=f[p]);if(null!=f&&"function"==typeof Object.getOwnPropertySymbols){var y=0;for(p=Object.getOwnPropertySymbols(f);y<p.length;y++)c.indexOf(p[y])<0&&Object.prototype.propertyIsEnumerable.call(f,p[y])&&(d[p[y]]=f[p[y]])}return d}"function"==typeof SuppressedError&&SuppressedError;var vs=st(537);const pr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Va=function Vl(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Xo=function go(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},k=new T.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),J=new K.Yd("@firebase/auth");function we(f,...c){J.logLevel<=K.in.ERROR&&J.error(`Auth (${$.SDK_VERSION}): ${f}`,...c)}function ve(f,...c){throw xn(f,...c)}function Je(f,...c){return xn(f,...c)}function Ht(f,c,d){const p=Object.assign(Object.assign({},Xo()),{[c]:d});return new T.LL("auth","Firebase",p).create(c,{appName:f.name})}function ft(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&ve(f,"argument-error"),Ht(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xn(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return k.create(f,...c)}function oe(f,c,...d){if(!f)throw xn(c,...d)}function Jt(f){const c="INTERNAL ASSERTION FAILED: "+f;throw we(c),new Error(c)}function yn(f,c){f||Jt(c)}function an(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Re(){return"http:"===Ii()||"https:"===Ii()}function Ii(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Kr{constructor(c,d){this.shortDelay=c,this.longDelay=d,yn(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,T.uI)()||(0,T.b$)()}get(){return function Tn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Re()||(0,T.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ci(f,c){yn(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class ea{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Jt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Jt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Jt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ih={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Bl=new Kr(3e4,6e4);function Xt(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function Zt(f,c,d,p){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,N.Z)(function*(f,c,d,p,y={}){return js(f,y,(0,N.Z)(function*(){let b={},A={};p&&("GET"===c?A=p:b={body:JSON.stringify(p)});const O=(0,T.xO)(Object.assign({key:f.config.apiKey},A)).slice(1),te=yield f._getAdditionalHeaders();return te["Content-Type"]="application/json",f.languageCode&&(te["X-Firebase-Locale"]=f.languageCode),ea.fetch()(mo(f,f.config.apiHost,d,O),Object.assign({method:c,headers:te,referrerPolicy:"no-referrer"},b))}))})).apply(this,arguments)}function js(f,c,d){return $t.apply(this,arguments)}function $t(){return($t=(0,N.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},ih),c);try{const y=new P(f),b=yield Promise.race([d(),y.promise]);y.clearNetworkTimeout();const A=yield b.json();if("needConfirmation"in A)throw R(f,"account-exists-with-different-credential",A);if(b.ok&&!("errorMessage"in A))return A;{const O=b.ok?A.errorMessage:A.error.message,[te,re]=O.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===te)throw R(f,"credential-already-in-use",A);if("EMAIL_EXISTS"===te)throw R(f,"email-already-in-use",A);if("USER_DISABLED"===te)throw R(f,"user-disabled",A);const be=p[te]||te.toLowerCase().replace(/[_\s]+/g,"-");if(re)throw Ht(f,be,re);ve(f,be)}}catch(y){if(y instanceof T.ZR)throw y;ve(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function Zr(f,c,d,p){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,N.Z)(function*(f,c,d,p,y={}){const b=yield Zt(f,c,d,p,y);return"mfaPendingCredential"in b&&ve(f,"multi-factor-auth-required",{_serverResponse:b}),b})).apply(this,arguments)}function mo(f,c,d,p){const y=`${c}${d}?${p}`;return f.config.emulator?Ci(f.config,y):`${f.config.apiScheme}://${y}`}function uu(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class P{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Je(this.auth,"network-request-failed")),Bl.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function R(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const y=Je(f,c,p);return y.customData._tokenResponse=d,y}function F(f){return void 0!==f&&void 0!==f.getResponse}function X(f){return void 0!==f&&void 0!==f.enterprise}class W{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return uu(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Ce(){return(Ce=(0,N.Z)(function*(f){return(yield Zt(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ve(f,c){return ui.apply(this,arguments)}function ui(){return(ui=(0,N.Z)(function*(f,c){return Zt(f,"GET","/v2/recaptchaConfig",Xt(f,c))})).apply(this,arguments)}function Rr(){return(Rr=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function ae(){return(ae=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Xe(){return(Xe=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function xt(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function he(){return(he=(0,N.Z)(function*(f,c=!1){const d=(0,T.m9)(f),p=yield d.getIdToken(c),y=Qe(p);oe(y&&y.exp&&y.auth_time&&y.iat,d.auth,"internal-error");const b="object"==typeof y.firebase?y.firebase:void 0,A=b?.sign_in_provider;return{claims:y,token:p,authTime:xt(je(y.auth_time)),issuedAtTime:xt(je(y.iat)),expirationTime:xt(je(y.exp)),signInProvider:A||null,signInSecondFactor:b?.sign_in_second_factor||null}})).apply(this,arguments)}function je(f){return 1e3*Number(f)}function Qe(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return we("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,T.tV)(d);return y?JSON.parse(y):(we("Failed to decode base64 JWT payload"),null)}catch(y){return we("Caught error parsing JWT payload as JSON",y?.toString()),null}}function Et(f,c){return ei.apply(this,arguments)}function ei(){return(ei=(0,N.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof T.ZR&&function ln({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class ta{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const y=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,N.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,N.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class du{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=xt(this.lastLoginAt),this.creationTime=xt(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rh(f){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,N.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),y=yield Et(f,function bs(f,c){return Xe.apply(this,arguments)}(d,{idToken:p}));oe(y?.users.length,d,"internal-error");const b=y.users[0];f._notifyReloadListener(b);const A=null!==(c=b.providerUserInfo)&&void 0!==c&&c.length?function GO(f){return f.map(c=>{var{providerId:d}=c,p=Ae(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(b.providerUserInfo):[],O=function jI(f,c){return[...f.filter(p=>!c.some(y=>y.providerId===p.providerId)),...c]}(f.providerData,A),be=!!f.isAnonymous&&!(f.email&&b.passwordHash||O?.length),Te={uid:b.localId,displayName:b.displayName||null,photoURL:b.photoUrl||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,tenantId:b.tenantId||null,providerData:O,metadata:new du(b.createdAt,b.lastLoginAt),isAnonymous:be};Object.assign(f,Te)}),Dv.apply(this,arguments)}function Av(){return(Av=(0,N.Z)(function*(f){const c=(0,T.m9)(f);yield rh(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function et(){return(et=(0,N.Z)(function*(f,c){const d=yield js(f,{},(0,N.Z)(function*(){const p=(0,T.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:y,apiKey:b}=f.config,A=mo(f,y,"/v1/token",`key=${b}`),O=yield f._getAdditionalHeaders();return O["Content-Type"]="application/x-www-form-urlencoded",ea.fetch()(A,{method:"POST",headers:O,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function Rv(){return(Rv=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v2/accounts:revokeToken",Xt(f,c))})).apply(this,arguments)}class sh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){oe(c.idToken,"internal-error"),oe(typeof c.idToken<"u","internal-error"),oe(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Mt(f){const c=Qe(f);return oe(c,"internal-error"),oe(typeof c.exp<"u","internal-error"),oe(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,N.Z)(function*(){return oe(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,N.Z)(function*(){const{accessToken:y,refreshToken:b,expiresIn:A}=yield function Yr(f,c){return et.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(y,b,Number(A))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:y,expirationTime:b}=d,A=new sh;return p&&(oe("string"==typeof p,"internal-error",{appName:c}),A.refreshToken=p),y&&(oe("string"==typeof y,"internal-error",{appName:c}),A.accessToken=y),b&&(oe("number"==typeof b,"internal-error",{appName:c}),A.expirationTime=b),A}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new sh,this.toJSON())}_performRefresh(){return Jt("not implemented")}}function ye(f,c){oe("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class jl{constructor(c){var{uid:d,auth:p,stsTokenManager:y}=c,b=Ae(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ta(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=b.displayName||null,this.email=b.email||null,this.emailVerified=b.emailVerified||!1,this.phoneNumber=b.phoneNumber||null,this.photoURL=b.photoURL||null,this.isAnonymous=b.isAnonymous||!1,this.tenantId=b.tenantId||null,this.providerData=b.providerData?[...b.providerData]:[],this.metadata=new du(b.createdAt||void 0,b.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,N.Z)(function*(){const p=yield Et(d,d.stsTokenManager.getToken(d.auth,c));return oe(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function q(f){return he.apply(this,arguments)}(this,c)}reload(){return function UI(f){return Av.apply(this,arguments)}(this)}_assign(c){this!==c&&(oe(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new jl(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,N.Z)(function*(){let y=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),y=!0),d&&(yield rh(p)),yield p.auth._persistUserIfCurrent(p),y&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,N.Z)(function*(){const d=yield c.getIdToken();return yield Et(c,function di(f,c){return Rr.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,y,b,A,O,te,re,be;const Te=null!==(p=d.displayName)&&void 0!==p?p:void 0,dt=null!==(y=d.email)&&void 0!==y?y:void 0,Lt=null!==(b=d.phoneNumber)&&void 0!==b?b:void 0,nr=null!==(A=d.photoURL)&&void 0!==A?A:void 0,rs=null!==(O=d.tenantId)&&void 0!==O?O:void 0,Mr=null!==(te=d._redirectEventId)&&void 0!==te?te:void 0,kn=null!==(re=d.createdAt)&&void 0!==re?re:void 0,cc=null!==(be=d.lastLoginAt)&&void 0!==be?be:void 0,{uid:Xh,emailVerified:pm,isAnonymous:Q0,providerData:ef,stsTokenManager:J0}=d;oe(Xh&&J0,c,"internal-error");const X0=sh.fromJSON(this.name,J0);oe("string"==typeof Xh,c,"internal-error"),ye(Te,c.name),ye(dt,c.name),oe("boolean"==typeof pm,c,"internal-error"),oe("boolean"==typeof Q0,c,"internal-error"),ye(Lt,c.name),ye(nr,c.name),ye(rs,c.name),ye(Mr,c.name),ye(kn,c.name),ye(cc,c.name);const gm=new jl({uid:Xh,auth:c,email:dt,emailVerified:pm,displayName:Te,isAnonymous:Q0,photoURL:nr,phoneNumber:Lt,tenantId:rs,stsTokenManager:X0,createdAt:kn,lastLoginAt:cc});return ef&&Array.isArray(ef)&&(gm.providerData=ef.map(eb=>Object.assign({},eb))),Mr&&(gm._redirectEventId=Mr),gm}static _fromIdTokenResponse(c,d,p=!1){return(0,N.Z)(function*(){const y=new sh;y.updateFromServerResponse(d);const b=new jl({uid:d.localId,auth:c,stsTokenManager:y,isAnonymous:p});return yield rh(b),b})()}}const Ct=new Map;function Fi(f){yn(f instanceof Function,"Expected a class definition");let c=Ct.get(f);return c?(yn(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,Ct.set(f,c),c)}const Ua=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,N.Z)(function*(){return!0})()}_set(d,p){var y=this;return(0,N.Z)(function*(){y.storage[d]=p})()}_get(d){var p=this;return(0,N.Z)(function*(){const y=p.storage[d];return void 0===y?null:y})()}_remove(d){var p=this;return(0,N.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function ja(f,c,d){return`firebase:${f}:${c}:${d}`}class _o{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:y,name:b}=this.auth;this.fullUserKey=ja(this.userKey,y.apiKey,b),this.fullPersistenceKey=ja("persistence",y.apiKey,b),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,N.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?jl._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,N.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,N.Z)(function*(){if(!d.length)return new _o(Fi(Ua),c,p);const y=(yield Promise.all(d.map(function(){var re=(0,N.Z)(function*(be){if(yield be._isAvailable())return be});return function(be){return re.apply(this,arguments)}}()))).filter(re=>re);let b=y[0]||Fi(Ua);const A=ja(p,c.config.apiKey,c.name);let O=null;for(const re of d)try{const be=yield re._get(A);if(be){const Te=jl._fromJSON(c,be);re!==b&&(O=Te),b=re;break}}catch{}const te=y.filter(re=>re._shouldAllowMigration);return b._shouldAllowMigration&&te.length?(b=te[0],O&&(yield b._set(A,O.toJSON())),yield Promise.all(d.map(function(){var re=(0,N.Z)(function*(be){if(be!==b)try{yield be._remove(A)}catch{}});return function(be){return re.apply(this,arguments)}}())),new _o(b,c,p)):new _o(b,c,p)})()}}function hu(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(St(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(oh(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(pg(c))return"Blackberry";if(Yi(c))return"Webos";if(ah(c))return"Safari";if((c.includes("chrome/")||Nv(c))&&!c.includes("edge/"))return"Chrome";if(Ha(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function oh(f=(0,T.z$)()){return/firefox\//i.test(f)}function ah(f=(0,T.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Nv(f=(0,T.z$)()){return/crios\//i.test(f)}function St(f=(0,T.z$)()){return/iemobile/i.test(f)}function Ha(f=(0,T.z$)()){return/android/i.test(f)}function pg(f=(0,T.z$)()){return/blackberry/i.test(f)}function Yi(f=(0,T.z$)()){return/webos/i.test(f)}function $a(f=(0,T.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function HI(f=(0,T.z$)()){return $a(f)||Ha(f)||Yi(f)||pg(f)||/windows phone/i.test(f)||St(f)}function lh(f,c=[]){let d;switch(f){case"Browser":d=hu((0,T.z$)());break;case"Worker":d=`${hu((0,T.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${$.SDK_VERSION}/${p}`}class gg{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=b=>new Promise((A,O)=>{try{A(c(b))}catch(te){O(te)}});p.onAbort=d,this.queue.push(p);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,N.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const y of d.queue)yield y(c),y.onAbort&&p.push(y.onAbort)}catch(y){p.reverse();for(const b of p)try{b()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function fu(){return(fu=(0,N.Z)(function*(f,c={}){return Zt(f,"GET","/v2/passwordPolicy",Xt(f,c))})).apply(this,arguments)}class mg{constructor(c){var d,p,y,b;const A=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=A.minPasswordLength)&&void 0!==d?d:6,A.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=A.maxPasswordLength),void 0!==A.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=A.containsLowercaseCharacter),void 0!==A.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=A.containsUppercaseCharacter),void 0!==A.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=A.containsNumericCharacter),void 0!==A.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=A.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(b=c.forceUpgradeOnSignin)&&void 0!==b&&b,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,y,b,A,O;const te={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,te),this.validatePasswordCharacterOptions(c,te),te.isValid&&(te.isValid=null===(d=te.meetsMinPasswordLength)||void 0===d||d),te.isValid&&(te.isValid=null===(p=te.meetsMaxPasswordLength)||void 0===p||p),te.isValid&&(te.isValid=null===(y=te.containsLowercaseLetter)||void 0===y||y),te.isValid&&(te.isValid=null===(b=te.containsUppercaseLetter)||void 0===b||b),te.isValid&&(te.isValid=null===(A=te.containsNumericCharacter)||void 0===A||A),te.isValid&&(te.isValid=null===(O=te.containsNonAlphanumericCharacter)||void 0===O||O),te}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),y&&(d.meetsMaxPasswordLength=c.length<=y)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let y=0;y<c.length;y++)p=c.charAt(y),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,y,b){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=b))}}class ZO{constructor(c,d,p,y){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GI(this),this.idTokenSubscription=new GI(this),this.beforeStateQueue=new gg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=Fi(d)),this._initializationPromise=this.queue((0,N.Z)(function*(){var y,b;if(!p._deleted&&(p.persistenceManager=yield _o.create(p,c),!p._deleted)){if(null!==(y=p._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(b=p.currentUser)||void 0===b?void 0:b.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,N.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,N.Z)(function*(){var p;const y=yield d.assertedPersistence.getCurrentUser();let b=y,A=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const O=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,te=b?._redirectEventId,re=yield d.tryRedirectSignIn(c);(!O||O===te)&&re?.user&&(b=re.user,A=!0)}if(!b)return d.directlySetCurrentUser(null);if(!b._redirectEventId){if(A)try{yield d.beforeStateQueue.runMiddleware(b)}catch(O){b=y,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(O))}return b?d.reloadAndSetCurrentUserOrClear(b):d.directlySetCurrentUser(null)}return oe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===b._redirectEventId?d.directlySetCurrentUser(b):d.reloadAndSetCurrentUserOrClear(b)})()}tryRedirectSignIn(c){var d=this;return(0,N.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,N.Z)(function*(){try{yield rh(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function gr(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,N.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,N.Z)(function*(){const p=c?(0,T.m9)(c):null;return p&&oe(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,N.Z)(function*(){if(!p._deleted)return c&&oe(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,N.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,N.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,N.Z)(function*(){yield d.assertedPersistence.setPersistence(Fi(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,N.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,N.Z)(function*(){const d=yield function xv(f){return fu.apply(this,arguments)}(c),p=new mg(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new T.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,N.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(y.tenantId=d.tenantId),yield function zO(f,c){return Rv.apply(this,arguments)}(d,y)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,N.Z)(function*(){const y=yield p.getOrInitRedirectPersistenceManager(d);return null===c?y.removeCurrentUser():y.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,N.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&Fi(c)||d._popupRedirectResolver;oe(p,d,"argument-error"),d.redirectPersistenceManager=yield _o.create(d,[Fi(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,N.Z)(function*(){var p,y;return d._isInitialized&&(yield d.queue((0,N.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(y=d.redirectUser)||void 0===y?void 0:y._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,N.Z)(function*(){if(c===d.currentUser)return d.queue((0,N.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,y){if(this._deleted)return()=>{};const b="function"==typeof d?d:d.next.bind(d);let A=!1;const O=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(O,this,"internal-error"),O.then(()=>{A||b(this.currentUser)}),"function"==typeof d){const te=c.addObserver(d,p,y);return()=>{A=!0,te()}}{const te=c.addObserver(d);return()=>{A=!0,te()}}}directlySetCurrentUser(c){var d=this;return(0,N.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=lh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,N.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const y=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();y&&(p["X-Firebase-Client"]=y);const b=yield c._getAppCheckToken();return b&&(p["X-Firebase-AppCheck"]=b),p})()}_getAppCheckToken(){var c=this;return(0,N.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function le(f,...c){J.logLevel<=K.in.WARN&&J.warn(`Auth (${$.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function In(f){return(0,T.m9)(f)}class GI{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,T.ne)(d=>this.observer=d)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pv(f){return new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=y=>{const b=Je("internal-error");b.customData=y,d(b)},p.type="text/javascript",p.charset="UTF-8",function YO(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)})}function Hl(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Ov{constructor(c){this.type="recaptcha-enterprise",this.auth=In(c)}verify(c="verify",d=!1){var p=this;return(0,N.Z)(function*(){function b(){return b=(0,N.Z)(function*(O){if(!d){if(null==O.tenantId&&null!=O._agentRecaptchaConfig)return O._agentRecaptchaConfig.siteKey;if(null!=O.tenantId&&void 0!==O._tenantRecaptchaConfigs[O.tenantId])return O._tenantRecaptchaConfigs[O.tenantId].siteKey}return new Promise(function(){var te=(0,N.Z)(function*(re,be){Ve(O,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Te=>{if(void 0!==Te.recaptchaKey){const dt=new W(Te);return null==O.tenantId?O._agentRecaptchaConfig=dt:O._tenantRecaptchaConfigs[O.tenantId]=dt,re(dt.siteKey)}be(new Error("recaptcha Enterprise site key undefined"))}).catch(Te=>{be(Te)})});return function(re,be){return te.apply(this,arguments)}}())}),b.apply(this,arguments)}function A(O,te,re){const be=window.grecaptcha;X(be)?be.enterprise.ready(()=>{be.enterprise.execute(O,{action:c}).then(Te=>{te(Te)}).catch(()=>{te("NO_RECAPTCHA")})}):re(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((O,te)=>{(function y(O){return b.apply(this,arguments)})(p.auth).then(re=>{if(!d&&X(window.grecaptcha))A(re,O,te);else{if(typeof window>"u")return void te(new Error("RecaptchaVerifier is only supported in browser"));Pv("https://www.google.com/recaptcha/enterprise.js?render="+re).then(()=>{A(re,O,te)}).catch(be=>{te(be)})}}).catch(re=>{te(re)})})})()}}function Mv(f,c,d){return uh.apply(this,arguments)}function uh(){return(uh=(0,N.Z)(function*(f,c,d,p=!1){const y=new Ov(f);let b;try{b=yield y.verify(d)}catch{b=yield y.verify(d,!0)}const A=Object.assign({},c);return Object.assign(A,p?{captchaResp:b}:{captchaResponse:b}),Object.assign(A,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(A,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),A})).apply(this,arguments)}function Hs(f,c,d,p){return yg.apply(this,arguments)}function yg(){return yg=(0,N.Z)(function*(f,c,d,p){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const b=yield Mv(f,c,d,"getOobCode"===d);return p(f,b)}return p(f,c).catch(function(){var b=(0,N.Z)(function*(A){if("auth/missing-recaptcha-token"===A.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const O=yield Mv(f,c,d,"getOobCode"===d);return p(f,O)}return Promise.reject(A)});return function(A){return b.apply(this,arguments)}}())}),yg.apply(this,arguments)}function pu(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function $l(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class Gl{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return Jt("not implemented")}_getIdTokenResponse(c){return Jt("not implemented")}_linkToIdToken(c,d){return Jt("not implemented")}_getReauthenticationResolver(c){return Jt("not implemented")}}function Fv(f,c){return Es.apply(this,arguments)}function Es(){return(Es=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:resetPassword",Xt(f,c))})).apply(this,arguments)}function Nr(){return(Nr=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function $s(f,c){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function gu(){return(gu=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:update",Xt(f,c))})).apply(this,arguments)}function Eg(f,c){return fh.apply(this,arguments)}function fh(){return(fh=(0,N.Z)(function*(f,c){return Zr(f,"POST","/v1/accounts:signInWithPassword",Xt(f,c))})).apply(this,arguments)}function Qr(f,c){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:sendOobCode",Xt(f,c))})).apply(this,arguments)}function ph(){return(ph=(0,N.Z)(function*(f,c){return Qr(f,c)})).apply(this,arguments)}function wg(f,c){return gh.apply(this,arguments)}function gh(){return(gh=(0,N.Z)(function*(f,c){return Qr(f,c)})).apply(this,arguments)}function Vv(f,c){return za.apply(this,arguments)}function za(){return(za=(0,N.Z)(function*(f,c){return Qr(f,c)})).apply(this,arguments)}function mh(){return(mh=(0,N.Z)(function*(f,c){return Qr(f,c)})).apply(this,arguments)}function _h(){return(_h=(0,N.Z)(function*(f,c){return Zr(f,"POST","/v1/accounts:signInWithEmailLink",Xt(f,c))})).apply(this,arguments)}function Tg(){return(Tg=(0,N.Z)(function*(f,c){return Zr(f,"POST","/v1/accounts:signInWithEmailLink",Xt(f,c))})).apply(this,arguments)}class Qi extends Gl{constructor(c,d,p,y=null){super("password",p),this._email=c,this._password=d,this._tenantId=y}static _fromEmailAndPassword(c,d){return new Qi(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new Qi(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,N.Z)(function*(){switch(d.signInMethod){case"password":return Hs(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Eg);case"emailLink":return function qI(f,c){return _h.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:ve(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,N.Z)(function*(){switch(p.signInMethod){case"password":return Hs(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$s);case"emailLink":return function KI(f,c){return Tg.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:ve(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function yo(f,c){return yh.apply(this,arguments)}function yh(){return(yh=(0,N.Z)(function*(f,c){return Zr(f,"POST","/v1/accounts:signInWithIdp",Xt(f,c))})).apply(this,arguments)}class Gs extends Gl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Gs(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):ve("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y}=d,b=Ae(d,["providerId","signInMethod"]);if(!p||!y)return null;const A=new Gs(p,y);return A.idToken=b.idToken||void 0,A.accessToken=b.accessToken||void 0,A.secret=b.secret,A.nonce=b.nonce,A.pendingToken=b.pendingToken||null,A}_getIdTokenResponse(c){return yo(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,yo(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,yo(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,T.xO)(d)}return c}}function Ig(){return(Ig=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:sendVerificationCode",Xt(f,c))})).apply(this,arguments)}function Cg(){return(Cg=(0,N.Z)(function*(f,c){return Zr(f,"POST","/v1/accounts:signInWithPhoneNumber",Xt(f,c))})).apply(this,arguments)}function Sg(){return(Sg=(0,N.Z)(function*(f,c){const d=yield Zr(f,"POST","/v1/accounts:signInWithPhoneNumber",Xt(f,c));if(d.temporaryProof)throw R(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const mr={USER_NOT_FOUND:"user-not-found"};function Dg(){return(Dg=(0,N.Z)(function*(f,c){return Zr(f,"POST","/v1/accounts:signInWithPhoneNumber",Xt(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),mr)})).apply(this,arguments)}class Wa extends Gl{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Wa({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Wa({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function Uv(f,c){return Cg.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function QI(f,c){return Sg.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function JI(f,c){return Dg.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:y}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:y}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:y,temporaryProof:b}=c;return p||d||y||b?new Wa({verificationId:d,verificationCode:p,phoneNumber:y,temporaryProof:b}):null}}class zl{constructor(c){var d,p,y,b,A,O;const te=(0,T.zd)((0,T.pd)(c)),re=null!==(d=te.apiKey)&&void 0!==d?d:null,be=null!==(p=te.oobCode)&&void 0!==p?p:null,Te=function Pt(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=te.mode)&&void 0!==y?y:null);oe(re&&be&&Te,"argument-error"),this.apiKey=re,this.operation=Te,this.code=be,this.continueUrl=null!==(b=te.continueUrl)&&void 0!==b?b:null,this.languageCode=null!==(A=te.languageCode)&&void 0!==A?A:null,this.tenantId=null!==(O=te.tenantId)&&void 0!==O?O:null}static parseLink(c){const d=function XI(f){const c=(0,T.zd)((0,T.pd)(f)).link,d=c?(0,T.zd)((0,T.pd)(c)).deep_link_id:null,p=(0,T.zd)((0,T.pd)(f)).deep_link_id;return(p?(0,T.zd)((0,T.pd)(p)).link:null)||p||d||c||f}(c);try{return new zl(d)}catch{return null}}}let Li=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return Qi._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const y=zl.parseLink(p);return oe(y,"argument-error"),Qi._fromEmailAndCode(d,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class pt{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class jn extends pt{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ti extends jn{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return oe("providerId"in d&&"signInMethod"in d,"argument-error"),Gs._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return oe(c.idToken||c.accessToken,"argument-error"),Gs._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ti.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ti.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:y,pendingToken:b,nonce:A,providerId:O}=c;if(!p&&!y&&!d&&!b||!O)return null;try{return new ti(O)._credential({idToken:d,accessToken:p,nonce:A,pendingToken:b})}catch{return null}}}let qa=(()=>{class f extends jn{constructor(){super("facebook.com")}static credential(d){return Gs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),_r=(()=>{class f extends jn{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return Gs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:y}=d;if(!p&&!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Ag=(()=>{class f extends jn{constructor(){super("github.com")}static credential(d){return Gs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class vo extends Gl{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return yo(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,yo(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,yo(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y,pendingToken:b}=d;return p&&y&&b&&p===y?new vo(p,b):null}static _create(c,d){return new vo(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class vh extends pt{constructor(c){oe(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return vh.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return vh.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=vo.fromJSON(c);return oe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return vo._create(p,d)}catch{return null}}}let Pn=(()=>{class f extends jn{constructor(){super("twitter.com")}static credential(d,p){return Gs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:y}=d;if(!p||!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Le(f,c){return lt.apply(this,arguments)}function lt(){return(lt=(0,N.Z)(function*(f,c){return Zr(f,"POST","/v1/accounts:signUp",Xt(f,c))})).apply(this,arguments)}class kt{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,y=!1){return(0,N.Z)(function*(){const b=yield jl._fromIdTokenResponse(c,p,y),A=Jr(p);return new kt({user:b,providerId:A,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,N.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const y=Jr(p);return new kt({user:c,providerId:y,_tokenResponse:p,operationType:d})})()}}function Jr(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function _i(){return(_i=(0,N.Z)(function*(f){var c;const d=In(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new kt({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Le(d,{returnSecureToken:!0}),y=yield kt._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(y.user),y})).apply(this,arguments)}class bo extends T.ZR{constructor(c,d,p,y){var b;super(d.code,d.message),this.operationType=p,this.user=y,Object.setPrototypeOf(this,bo.prototype),this.customData={appName:c.name,tenantId:null!==(b=c.tenantId)&&void 0!==b?b:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,y){return new bo(c,d,p,y)}}function Hn(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(b=>{throw"auth/multi-factor-auth-required"===b.code?bo._fromErrorAndOperation(f,b,c,p):b})}function Eo(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function rt(){return rt=(0,N.Z)(function*(f,c){const d=(0,T.m9)(f);yield wo(!0,d,c);const{providerUserInfo:p}=yield function Bt(f,c){return ae.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),y=Eo(p||[]);return d.providerData=d.providerData.filter(b=>y.has(b.providerId)),y.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),rt.apply(this,arguments)}function Ka(f,c){return bh.apply(this,arguments)}function bh(){return(bh=(0,N.Z)(function*(f,c,d=!1){const p=yield Et(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return kt._forOperation(f,"link",p)})).apply(this,arguments)}function wo(f,c,d){return On.apply(this,arguments)}function On(){return(On=(0,N.Z)(function*(f,c,d){yield rh(c);const y=!1===f?"provider-already-linked":"no-such-provider";oe(Eo(c.providerData).has(d)===f,c.auth,y)})).apply(this,arguments)}function ql(f,c){return ia.apply(this,arguments)}function ia(){return(ia=(0,N.Z)(function*(f,c,d=!1){const{auth:p}=f,y="reauthenticate";try{const b=yield Et(f,Hn(p,y,c,f),d);oe(b.idToken,p,"internal-error");const A=Qe(b.idToken);oe(A,p,"internal-error");const{sub:O}=A;return oe(f.uid===O,p,"user-mismatch"),kt._forOperation(f,y,b)}catch(b){throw"auth/user-not-found"===b?.code&&ve(p,"user-mismatch"),b}})).apply(this,arguments)}function ws(f,c){return Za.apply(this,arguments)}function Za(){return(Za=(0,N.Z)(function*(f,c,d=!1){const p="signIn",y=yield Hn(f,p,c),b=yield kt._fromIdTokenResponse(f,p,y);return d||(yield f._updateCurrentUser(b.user)),b})).apply(this,arguments)}function _u(f,c){return zs.apply(this,arguments)}function zs(){return(zs=(0,N.Z)(function*(f,c){return ws(In(f),c)})).apply(this,arguments)}function Ws(f,c){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,N.Z)(function*(f,c){const d=(0,T.m9)(f);return yield wo(!1,d,c.providerId),Ka(d,c)})).apply(this,arguments)}function Kl(f,c){return It.apply(this,arguments)}function It(){return(It=(0,N.Z)(function*(f,c){return ql((0,T.m9)(f),c)})).apply(this,arguments)}function yu(){return(yu=(0,N.Z)(function*(f,c){return Zr(f,"POST","/v1/accounts:signInWithCustomToken",Xt(f,c))})).apply(this,arguments)}function Xr(){return Xr=(0,N.Z)(function*(f,c){const d=In(f),p=yield function QO(f,c){return yu.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),y=yield kt._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(y.user),y}),Xr.apply(this,arguments)}class ra{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?sa._fromServerResponse(c,d):"totpInfo"in d?Qa._fromServerResponse(c,d):ve(c,"internal-error")}}class sa extends ra{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new sa(d)}}class Qa extends ra{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new Qa(d)}}function ni(f,c,d){var p;oe((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),oe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(oe(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(oe(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function $v(f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,N.Z)(function*(f){const c=In(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function vu(){return(vu=(0,N.Z)(function*(f,c,d){const p=In(f),y={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&ni(p,y,d),yield Hs(p,y,"getOobCode",wg)})).apply(this,arguments)}function Zl(){return Zl=(0,N.Z)(function*(f,c,d){yield Fv((0,T.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,N.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&$v(f),y});return function(y){return p.apply(this,arguments)}}())}),Zl.apply(this,arguments)}function bu(){return bu=(0,N.Z)(function*(f,c){yield function hh(f,c){return gu.apply(this,arguments)}((0,T.m9)(f),{oobCode:c})}),bu.apply(this,arguments)}function Gv(f,c){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,N.Z)(function*(f,c){const d=(0,T.m9)(f),p=yield Fv(d,{oobCode:c}),y=p.requestType;switch(oe(y,d,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(p.mfaInfo,d,"internal-error");default:oe(p.email,d,"internal-error")}let b=null;return p.mfaInfo&&(b=ra._fromServerResponse(In(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:b},operation:y}})).apply(this,arguments)}function Ng(){return(Ng=(0,N.Z)(function*(f,c){const{data:d}=yield Gv((0,T.m9)(f),c);return d.email})).apply(this,arguments)}function zv(){return(zv=(0,N.Z)(function*(f,c,d){const p=In(f),A=yield Hs(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Le).catch(te=>{throw"auth/password-does-not-meet-requirements"===te.code&&$v(f),te}),O=yield kt._fromIdTokenResponse(p,"signIn",A);return yield p._updateCurrentUser(O.user),O})).apply(this,arguments)}function Wv(){return(Wv=(0,N.Z)(function*(f,c,d){const p=In(f),y={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function b(A,O){oe(O.handleCodeInApp,p,"argument-error"),O&&ni(p,A,O)})(y,d),yield Hs(p,y,"getOobCode",Vv)})).apply(this,arguments)}function qv(){return(qv=(0,N.Z)(function*(f,c,d){const p=(0,T.m9)(f),y=Li.credentialWithLink(c,d||an());return oe(y._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),_u(p,y)})).apply(this,arguments)}function Kv(){return(Kv=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:createAuthUri",Xt(f,c))})).apply(this,arguments)}function Zv(){return Zv=(0,N.Z)(function*(f,c){const p={identifier:c,continueUri:Re()?an():"http://localhost"},{signinMethods:y}=yield function iM(f,c){return Kv.apply(this,arguments)}((0,T.m9)(f),p);return y||[]}),Zv.apply(this,arguments)}function Eh(){return Eh=(0,N.Z)(function*(f,c){const d=(0,T.m9)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&ni(d.auth,y,c);const{email:b}=yield function Lv(f,c){return ph.apply(this,arguments)}(d.auth,y);b!==f.email&&(yield f.reload())}),Eh.apply(this,arguments)}function Qv(){return Qv=(0,N.Z)(function*(f,c,d){const p=(0,T.m9)(f),b={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&ni(p.auth,b,d);const{email:A}=yield function Bv(f,c){return mh.apply(this,arguments)}(p.auth,b);A!==f.email&&(yield f.reload())}),Qv.apply(this,arguments)}function Jv(){return(Jv=(0,N.Z)(function*(f,c){return Zt(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function qs(){return qs=(0,N.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,T.m9)(f),b={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},A=yield Et(p,function oM(f,c){return Jv.apply(this,arguments)}(p.auth,b));p.displayName=A.displayName||null,p.photoURL=A.photoUrl||null;const O=p.providerData.find(({providerId:te})=>"password"===te);O&&(O.displayName=p.displayName,O.photoURL=p.photoURL),yield p._updateTokensIfNecessary(A)}),qs.apply(this,arguments)}function yi(f,c,d){return Yl.apply(this,arguments)}function Yl(){return Yl=(0,N.Z)(function*(f,c,d){const{auth:p}=f,b={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(b.email=c),d&&(b.password=d);const A=yield Et(f,function dh(f,c){return Nr.apply(this,arguments)}(p,b));yield f._updateTokensIfNecessary(A,!0)}),Yl.apply(this,arguments)}class el{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class xg extends el{constructor(c,d,p,y){super(c,d,p),this.username=y}}class Xv extends el{constructor(c,d){super(c,"facebook.com",d)}}class e0 extends xg{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Pg extends el{constructor(c,d){super(c,"google.com",d)}}class t0 extends xg{constructor(c,d,p){super(c,"twitter.com",d,p)}}function Og(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function es(f){var c,d;if(!f)return null;const{providerId:p}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},b=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const A=null===(d=null===(c=Qe(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(A)return new el(b,"anonymous"!==A&&"custom"!==A?A:null)}if(!p)return null;switch(p){case"facebook.com":return new Xv(b,y);case"github.com":return new e0(b,y);case"google.com":return new Pg(b,y);case"twitter.com":return new t0(b,y,f.screenName||null);case"custom":case"anonymous":return new el(b,null);default:return new el(b,p,y)}}(d)}class Ql{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new Ql("enroll",c,d)}static _fromMfaPendingCredential(c){return new Ql("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ql._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return Ql._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Ih{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=In(c),y=d.customData._serverResponse,b=(y.mfaInfo||[]).map(O=>ra._fromServerResponse(p,O));oe(y.mfaPendingCredential,p,"internal-error");const A=Ql._fromMfaPendingCredential(y.mfaPendingCredential);return new Ih(A,b,function(){var O=(0,N.Z)(function*(te){const re=yield te._process(p,A);delete y.mfaInfo,delete y.mfaPendingCredential;const be=Object.assign(Object.assign({},y),{idToken:re.idToken,refreshToken:re.refreshToken});switch(d.operationType){case"signIn":const Te=yield kt._fromIdTokenResponse(p,d.operationType,be);return yield p._updateCurrentUser(Te.user),Te;case"reauthenticate":return oe(d.user,p,"internal-error"),kt._forOperation(d.user,d.operationType,be);default:ve(p,"internal-error")}});return function(te){return O.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,N.Z)(function*(){return d.signInResolver(c)})()}}class Ch{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>ra._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Ch(c)}getSession(){var c=this;return(0,N.Z)(function*(){return Ql._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,N.Z)(function*(){const y=c,b=yield p.getSession(),A=yield Et(p.user,y._process(p.user.auth,b,d));return yield p.user._updateTokensIfNecessary(A),p.user.reload()})()}unenroll(c){var d=this;return(0,N.Z)(function*(){const p="string"==typeof c?c:c.uid,y=yield d.user.getIdToken();try{const b=yield Et(d.user,function oC(f,c){return Zt(f,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(f,c))}(d.user.auth,{idToken:y,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:A})=>A!==p),yield d.user._updateTokensIfNecessary(b),yield d.user.reload()}catch(b){throw b}})()}}const Sh=new WeakMap,Dh="__sak";class r0{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Dh,"1"),this.storage.removeItem(Dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Lg=(()=>{class f extends r0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function s0(){const f=(0,T.z$)();return ah(f)||$a(f)}()&&function Se(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=HI(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const y=this.storage.getItem(p),b=this.localCache[p];y!==b&&d(p,b,y)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((O,te,re)=>{this.notifyListeners(O,re)});const y=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const O=this.storage.getItem(y);if(d.newValue!==O)null!==d.newValue?this.storage.setItem(y,d.newValue):this.storage.removeItem(y);else if(this.localCache[y]===d.newValue&&!p)return}const b=()=>{const O=this.storage.getItem(y);!p&&this.localCache[y]===O||this.notifyListeners(y,O)},A=this.storage.getItem(y);!function KO(){return(0,T.w1)()&&10===document.documentMode}()||A===d.newValue||d.newValue===d.oldValue?b():setTimeout(b,10)}notifyListeners(d,p){this.localCache[d]=p;const y=this.listeners[d];if(y)for(const b of Array.from(y))b(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var y=()=>super._set,b=this;return(0,N.Z)(function*(){yield y().call(b,d,p),b.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,y=this;return(0,N.Z)(function*(){const b=yield p().call(y,d);return y.localCache[d]=JSON.stringify(b),b})()}_remove(d){var p=()=>super._remove,y=this;return(0,N.Z)(function*(){yield p().call(y,d),delete y.localCache[d]})()}}return f.type="LOCAL",f})(),vn=(()=>{class f extends r0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let cC=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(b=>b.isListeningto(d));if(p)return p;const y=new f(d);return this.receivers.push(y),y}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,N.Z)(function*(){const y=d,{eventId:b,eventType:A,data:O}=y.data,te=p.handlersMap[A];if(!te?.size)return;y.ports[0].postMessage({status:"ack",eventId:b,eventType:A});const re=Array.from(te).map(function(){var Te=(0,N.Z)(function*(dt){return dt(y.origin,O)});return function(dt){return Te.apply(this,arguments)}}()),be=yield function a0(f){return Promise.all(f.map(function(){var c=(0,N.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(re);y.ports[0].postMessage({status:"done",eventId:b,eventType:A,response:be})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Tu(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class l0{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var y=this;return(0,N.Z)(function*(){const b=typeof MessageChannel<"u"?new MessageChannel:null;if(!b)throw new Error("connection_unavailable");let A,O;return new Promise((te,re)=>{const be=Tu("",20);b.port1.start();const Te=setTimeout(()=>{re(new Error("unsupported_event"))},p);O={messageChannel:b,onMessage(dt){const Lt=dt;if(Lt.data.eventId===be)switch(Lt.data.status){case"ack":clearTimeout(Te),A=setTimeout(()=>{re(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),te(Lt.data.response);break;default:clearTimeout(Te),clearTimeout(A),re(new Error("invalid_response"))}}},y.handlers.add(O),b.port1.addEventListener("message",O.onMessage),y.target.postMessage({eventType:c,eventId:be,data:d},[b.port2])}).finally(()=>{O&&y.removeMessageHandler(O)})})()}}function Zn(){return window}function Iu(){return typeof Zn().WorkerGlobalScope<"u"&&"function"==typeof Zn().importScripts}function ts(){return(ts=(0,N.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const cn="firebaseLocalStorageDb",tl="firebaseLocalStorage",Xi="fbase_key";class Cu{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Su(f,c){return f.transaction([tl],c?"readwrite":"readonly").objectStore(tl)}function er(){const f=indexedDB.open(cn,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(tl,{keyPath:Xi})}catch(y){d(y)}}),f.addEventListener("success",(0,N.Z)(function*(){const p=f.result;p.objectStoreNames.contains(tl)?c(p):(p.close(),yield function Jl(){const f=indexedDB.deleteDatabase(cn);return new Cu(f).toPromise()}(),c(yield er()))}))})}function d0(f,c,d){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,N.Z)(function*(f,c,d){const p=Su(f,!0).put({[Xi]:c,value:d});return new Cu(p).toPromise()})).apply(this,arguments)}function Ks(){return(Ks=(0,N.Z)(function*(f,c){const d=Su(f,!1).get(c),p=yield new Cu(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Ug(f,c){const d=Su(f,!0).delete(c);return new Cu(d).toPromise()}const nl=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,N.Z)(function*(){return d.db||(d.db=yield er()),d.db})()}_withRetries(d){var p=this;return(0,N.Z)(function*(){let y=0;for(;;)try{const b=yield p._openDb();return yield d(b)}catch(b){if(y++>3)throw b;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,N.Z)(function*(){return Iu()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,N.Z)(function*(){d.receiver=cC._getInstance(function u0(){return Iu()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,N.Z)(function*(y,b){return{keyProcessed:(yield d._poll()).includes(b.key)}});return function(y,b){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,N.Z)(function*(y,b){return["keyChanged"]});return function(y,b){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,N.Z)(function*(){var p,y;if(d.activeServiceWorker=yield function dC(){return ts.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new l0(d.activeServiceWorker);const b=yield d.sender._send("ping",{},800);b&&null!==(p=b[0])&&void 0!==p&&p.fulfilled&&null!==(y=b[0])&&void 0!==y&&y.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,N.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function c0(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,N.Z)(function*(){try{if(!indexedDB)return!1;const d=yield er();return yield d0(d,Dh,"1"),yield Ug(d,Dh),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,N.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var y=this;return(0,N.Z)(function*(){return y._withPendingWrite((0,N.Z)(function*(){return yield y._withRetries(b=>d0(b,d,p)),y.localCache[d]=p,y.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,N.Z)(function*(){const y=yield p._withRetries(b=>function hC(f,c){return Ks.apply(this,arguments)}(b,d));return p.localCache[d]=y,y})()}_remove(d){var p=this;return(0,N.Z)(function*(){return p._withPendingWrite((0,N.Z)(function*(){return yield p._withRetries(y=>Ug(y,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,N.Z)(function*(){const p=yield d._withRetries(A=>{const O=Su(A,!1).getAll();return new Cu(O).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const y=[],b=new Set;if(0!==p.length)for(const{fbase_key:A,value:O}of p)b.add(A),JSON.stringify(d.localCache[A])!==JSON.stringify(O)&&(d.notifyListeners(A,O),y.push(A));for(const A of Object.keys(d.localCache))d.localCache[A]&&!b.has(A)&&(d.notifyListeners(A,null),y.push(A));return y})()}notifyListeners(d,p){this.localCache[d]=p;const y=this.listeners[d];if(y)for(const b of Array.from(y))b(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,N.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Ah=1e12;class _C{constructor(c){this.auth=c,this.counter=Ah,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new p0(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||Ah;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||Ah))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,N.Z)(function*(){var p;return null===(p=d._widgets.get(c||Ah))||void 0===p||p.execute(),""})()}}class p0{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof c?document.getElementById(c):c;oe(y,"argument-error",{appName:d}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xl(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const jg=Hl("rcb"),yC=new Kr(3e4,6e4);class bC{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Zn().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return oe(function EC(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&F(Zn().grecaptcha)?Promise.resolve(Zn().grecaptcha):new Promise((p,y)=>{const b=Zn().setTimeout(()=>{y(Je(c,"network-request-failed"))},yC.get());Zn()[jg]=()=>{Zn().clearTimeout(b),delete Zn()[jg];const O=Zn().grecaptcha;if(!O||!F(O))return void y(Je(c,"internal-error"));const te=O.render;O.render=(re,be)=>{const Te=te(re,be);return this.counter++,Te},this.hostLanguage=d,p(O)},Pv(`https://www.google.com/recaptcha/api.js??${(0,T.xO)({onload:jg,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(b),y(Je(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=Zn().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ue{load(c){return(0,N.Z)(function*(){return new _C(c)})()}clearedOneInstance(){}}const Ft="recaptcha",Dt={theme:"light",type:"image"};class At{constructor(c,d,p=Object.assign({},Dt)){this.parameters=p,this.type=Ft,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(c),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof d?document.getElementById(d):d;oe(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ue:new bC,this.validateStartingState()}verify(){var c=this;return(0,N.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(b=>{const A=O=>{O&&(c.tokenChangeListeners.delete(A),b(O))};c.tokenChangeListeners.add(A),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=Zn()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,N.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,N.Z)(function*(){oe(Re()&&!Iu(),c.auth,"internal-error"),yield function Si(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function Ge(f){return Ce.apply(this,arguments)}(c.auth);oe(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Rh{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Wa._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function ns(){return(ns=(0,N.Z)(function*(f,c,d){const p=In(f),y=yield Ru(p,c,(0,T.m9)(d));return new Rh(y,b=>_u(p,b))})).apply(this,arguments)}function Au(){return(Au=(0,N.Z)(function*(f,c,d){const p=(0,T.m9)(f);yield wo(!1,p,"phone");const y=yield Ru(p.auth,c,(0,T.m9)(d));return new Rh(y,b=>Ws(p,b))})).apply(this,arguments)}function g0(){return(g0=(0,N.Z)(function*(f,c,d){const p=(0,T.m9)(f),y=yield Ru(p.auth,c,(0,T.m9)(d));return new Rh(y,b=>Kl(p,b))})).apply(this,arguments)}function Ru(f,c,d){return Di.apply(this,arguments)}function Di(){return Di=(0,N.Z)(function*(f,c,d){var p;const y=yield d.verify();try{let b;if(oe("string"==typeof y,f,"argument-error"),oe(d.type===Ft,f,"argument-error"),b="string"==typeof c?{phoneNumber:c}:c,"session"in b){const A=b.session;if("phoneNumber"in b)return oe("enroll"===A.type,f,"internal-error"),(yield function sC(f,c){return Zt(f,"POST","/v2/accounts/mfaEnrollment:start",Xt(f,c))}(f,{idToken:A.credential,phoneEnrollmentInfo:{phoneNumber:b.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{oe("signin"===A.type,f,"internal-error");const O=(null===(p=b.multiFactorHint)||void 0===p?void 0:p.uid)||b.multiFactorUid;return oe(O,f,"missing-multi-factor-info"),(yield function gC(f,c){return Zt(f,"POST","/v2/accounts/mfaSignIn:start",Xt(f,c))}(f,{mfaPendingCredential:A.credential,mfaEnrollmentId:O,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:A}=yield function YI(f,c){return Ig.apply(this,arguments)}(f,{phoneNumber:b.phoneNumber,recaptchaToken:y});return A}}finally{d._reset()}}),Di.apply(this,arguments)}function Nh(){return(Nh=(0,N.Z)(function*(f,c){yield Ka((0,T.m9)(f),c)})).apply(this,arguments)}let Zs=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=In(d)}verifyPhoneNumber(d,p){return Ru(this.auth,d,(0,T.m9)(p))}static credential(d,p){return Wa._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:y}=d;return p&&y?Wa._fromTokenResponse(p,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function tr(f,c){return c?Fi(c):(oe(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class $g extends Gl{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return yo(c,this._buildIdpRequest())}_linkToIdToken(c,d){return yo(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return yo(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function m0(f){return ws(f.auth,new $g(f),f.bypassAuthState)}function TC(f){const{auth:c,user:d}=f;return oe(d,c,"internal-error"),ql(d,new $g(f),f.bypassAuthState)}function IC(f){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,N.Z)(function*(f){const{auth:c,user:d}=f;return oe(d,c,"internal-error"),Ka(d,new $g(f),f.bypassAuthState)})).apply(this,arguments)}class xh{constructor(c,d,p,y,b=!1){this.auth=c,this.resolver=p,this.user=y,this.bypassAuthState=b,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,N.Z)(function*(p,y){c.pendingPromise={resolve:p,reject:y};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(b){c.reject(b)}});return function(p,y){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,N.Z)(function*(){const{urlResponse:p,sessionId:y,postBody:b,tenantId:A,error:O,type:te}=c;if(O)return void d.reject(O);const re={auth:d.auth,requestUri:p,sessionId:y,tenantId:A||void 0,postBody:b||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(te)(re))}catch(be){d.reject(be)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return m0;case"linkViaPopup":case"linkViaRedirect":return IC;case"reauthViaPopup":case"reauthViaRedirect":return TC;default:ve(this.auth,"internal-error")}}resolve(c){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _0=new Kr(2e3,1e4);function zg(){return(zg=(0,N.Z)(function*(f,c,d){const p=In(f);ft(f,c,pt);const y=tr(p,d);return new Oh(p,"signInViaPopup",c,y).executeNotNull()})).apply(this,arguments)}function xu(){return(xu=(0,N.Z)(function*(f,c,d){const p=(0,T.m9)(f);ft(p.auth,c,pt);const y=tr(p.auth,d);return new Oh(p.auth,"reauthViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}function Ph(){return(Ph=(0,N.Z)(function*(f,c,d){const p=(0,T.m9)(f);ft(p.auth,c,pt);const y=tr(p.auth,d);return new Oh(p.auth,"linkViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}let Oh=(()=>{class f extends xh{constructor(d,p,y,b,A){super(d,p,b,A),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,N.Z)(function*(){const p=yield d.execute();return oe(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,N.Z)(function*(){yn(1===d.filter.length,"Popup operations only handle one event");const p=Tu();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(y=>{d.reject(y)}),d.resolver._isIframeWebStorageSupported(d.auth,y=>{y||d.reject(Je(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Je(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,y;this.pollId=null!==(y=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Je(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,_0.get())};d()}}return f.currentPopupAction=null,f})();const b0="pendingRedirect",il=new Map;class CC extends xh{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,N.Z)(function*(){let p=il.get(d.auth._key());if(!p){try{const b=(yield function SC(f,c){return Ai.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(b)}catch(y){p=()=>Promise.reject(y)}il.set(d.auth._key(),p)}return d.bypassAuthState||il.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,N.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const y=yield p.auth._redirectUserForId(c.eventId);if(y)return p.user=y,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,N.Z)(function*(){})()}cleanUp(){}}function Ai(){return(Ai=(0,N.Z)(function*(f,c){const d=w0(c),p=E0(f);if(!(yield p._isAvailable()))return!1;const y="true"===(yield p._get(d));return yield p._remove(d),y})).apply(this,arguments)}function Io(f,c){return bn.apply(this,arguments)}function bn(){return(bn=(0,N.Z)(function*(f,c){return E0(f)._set(w0(c),"true")})).apply(this,arguments)}function Wg(f,c){il.set(f._key(),c)}function E0(f){return Fi(f._redirectPersistence)}function w0(f){return ja(b0,f.config.apiKey,f.name)}function T0(f,c,d){return function I0(f,c,d){return ec.apply(this,arguments)}(f,c,d)}function ec(){return(ec=(0,N.Z)(function*(f,c,d){const p=In(f);ft(f,c,pt),yield p._initializationPromise;const y=tr(p,d);return yield Io(y,p),y._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function oa(f,c,d){return function AC(f,c,d){return tc.apply(this,arguments)}(f,c,d)}function tc(){return(tc=(0,N.Z)(function*(f,c,d){const p=(0,T.m9)(f);ft(p.auth,c,pt),yield p.auth._initializationPromise;const y=tr(p.auth,d);yield Io(y,p.auth);const b=yield nc(p);return y._openRedirect(p.auth,c,"reauthViaRedirect",b)})).apply(this,arguments)}function Mh(f,c,d){return function kh(f,c,d){return Pu.apply(this,arguments)}(f,c,d)}function Pu(){return(Pu=(0,N.Z)(function*(f,c,d){const p=(0,T.m9)(f);ft(p.auth,c,pt),yield p.auth._initializationPromise;const y=tr(p.auth,d);yield wo(!1,p,c.providerId),yield Io(y,p.auth);const b=yield nc(p);return y._openRedirect(p.auth,c,"linkViaRedirect",b)})).apply(this,arguments)}function Fh(){return(Fh=(0,N.Z)(function*(f,c){return yield In(f)._initializationPromise,Lh(f,c,!1)})).apply(this,arguments)}function Lh(f,c){return aa.apply(this,arguments)}function aa(){return(aa=(0,N.Z)(function*(f,c,d=!1){const p=In(f),y=tr(p,c),A=yield new CC(p,y,d).execute();return A&&!d&&(delete A.user._redirectEventId,yield p._persistUserIfCurrent(A.user),yield p._setRedirectUser(null,c)),A})).apply(this,arguments)}function nc(f){return qg.apply(this,arguments)}function qg(){return(qg=(0,N.Z)(function*(f){const c=Tu(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class Vh{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function NC(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S0(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!S0(c)){const y=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Je(this.auth,y))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(RC(c))}saveEventToCache(c){this.cachedEventUids.add(RC(c)),this.lastProcessedEventTime=Date.now()}}function RC(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function S0({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function xC(f){return D0.apply(this,arguments)}function D0(){return(D0=(0,N.Z)(function*(f,c={}){return Zt(f,"GET","/v1/projects",c)})).apply(this,arguments)}const Kg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ou=/^https?/;function rl(){return(rl=(0,N.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield xC(f);for(const d of c)try{if(Zg(d))return}catch{}ve(f,"unauthorized-domain")})).apply(this,arguments)}function Zg(f){const c=an(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const A=new URL(f);return""===A.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&A.hostname===p}if(!Ou.test(d))return!1;if(Kg.test(f))return p===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(p)}const Bh=new Kr(3e4,6e4);function OC(){const f=Zn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Mu=null;const Ys=new Kr(5e3,15e3),kC="__/auth/iframe",Uh="emulator/auth/iframe",Yg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jh(f){const c=f.config;oe(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?Ci(c,Uh):`https://${f.config.authDomain}/${kC}`,p={apiKey:c.apiKey,appName:f.name,v:$.SDK_VERSION},y=R0.get(f.config.apiHost);y&&(p.eid=y);const b=f._getFrameworks();return b.length&&(p.fw=b.join(",")),`${d}?${(0,T.xO)(p).slice(1)}`}function Jg(){return Jg=(0,N.Z)(function*(f){const c=yield function MC(f){return Mu=Mu||function A0(f){return new Promise((c,d)=>{var p,y,b;function A(){OC(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{OC(),d(Je(f,"network-request-failed"))},timeout:Bh.get()})}if(null!==(y=null===(p=Zn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==y&&y.Iframe)c(gapi.iframes.getContext());else{if(null===(b=Zn().gapi)||void 0===b||!b.load){const O=Hl("iframefcb");return Zn()[O]=()=>{gapi.load?A():d(Je(f,"network-request-failed"))},Pv(`https://apis.google.com/js/api.js?onload=${O}`).catch(te=>d(te))}A()}}).catch(c=>{throw Mu=null,c})}(f),Mu}(f),d=Zn().gapi;return oe(d,f,"internal-error"),c.open({where:document.body,url:jh(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yg,dontclear:!0},p=>new Promise(function(){var y=(0,N.Z)(function*(b,A){yield p.restyle({setHideOnLeave:!1});const O=Je(f,"network-request-failed"),te=Zn().setTimeout(()=>{A(O)},Ys.get());function re(){Zn().clearTimeout(te),b(p)}p.ping(re).then(re,()=>{A(O)})});return function(b,A){return y.apply(this,arguments)}}()))}),Jg.apply(this,arguments)}const N0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ku{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const M0="__/auth/handler",k0="emulator/auth/handler",Fu=encodeURIComponent("fac");function Xg(f,c,d,p,y,b){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,N.Z)(function*(f,c,d,p,y,b){oe(f.config.authDomain,f,"auth-domain-config-required"),oe(f.config.apiKey,f,"invalid-api-key");const A={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:$.SDK_VERSION,eventId:y};if(c instanceof pt){c.setDefaultLanguage(f.languageCode),A.providerId=c.providerId||"",(0,T.xb)(c.getCustomParameters())||(A.customParameters=JSON.stringify(c.getCustomParameters()));for(const[be,Te]of Object.entries(b||{}))A[be]=Te}if(c instanceof jn){const be=c.getScopes().filter(Te=>""!==Te);be.length>0&&(A.scopes=be.join(","))}f.tenantId&&(A.tid=f.tenantId);const O=A;for(const be of Object.keys(O))void 0===O[be]&&delete O[be];const te=yield f._getAppCheckToken(),re=te?`#${Fu}=${encodeURIComponent(te)}`:"";return`${function VC({config:f}){return f.emulator?Ci(f,k0):`https://${f.authDomain}/${M0}`}(f)}?${(0,T.xO)(O).slice(1)}${re}`})).apply(this,arguments)}const Mn="webStorageSupport",F0=class em{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vn,this._completeRedirectFn=Lh,this._overrideRedirectResult=Wg}_openPopup(c,d,p,y){var b=this;return(0,N.Z)(function*(){var A;yn(null===(A=b.eventManagers[c._key()])||void 0===A?void 0:A.manager,"_initialize() not called before _openPopup()");const O=yield Xg(c,d,p,an(),y);return function sl(f,c,d,p=500,y=600){const b=Math.max((window.screen.availHeight-y)/2,0).toString(),A=Math.max((window.screen.availWidth-p)/2,0).toString();let O="";const te=Object.assign(Object.assign({},N0),{width:p.toString(),height:y.toString(),top:b,left:A}),re=(0,T.z$)().toLowerCase();d&&(O=Nv(re)?"_blank":d),oh(re)&&(c=c||"http://localhost",te.scrollbars="yes");const be=Object.entries(te).reduce((dt,[Lt,nr])=>`${dt}${Lt}=${nr},`,"");if(function pn(f=(0,T.z$)()){var c;return $a(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(re)&&"_self"!==O)return function LC(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",O),new ku(null);const Te=window.open(c||"",O,be);oe(Te,f,"popup-blocked");try{Te.focus()}catch{}return new ku(Te)}(c,O,Tu())})()}_openRedirect(c,d,p,y){var b=this;return(0,N.Z)(function*(){return yield b._originValidation(c),function uC(f){Zn().location.href=f}(yield Xg(c,d,p,an(),y)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:y,promise:b}=this.eventManagers[d];return y?Promise.resolve(y):(yn(b,"If manager is not set, promise should be"),b)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,N.Z)(function*(){const p=yield function Qg(f){return Jg.apply(this,arguments)}(c),y=new Vh(c);return p.register("authEvent",b=>(oe(b?.authEvent,c,"invalid-auth-event"),{status:y.onEvent(b.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:y},d.iframes[c._key()]=p,y})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Mn,{type:Mn},y=>{var b;const A=null===(b=y?.[0])||void 0===b?void 0:b[Mn];void 0!==A&&d(!!A),ve(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function PC(f){return rl.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return HI()||ah()||$a()}};class L0{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return Jt("unexpected MultiFactorSessionType")}}}class Co extends L0{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Co(c)}_finalizeEnroll(c,d,p){return function Fg(f,c){return Zt(f,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function it(f,c){return Zt(f,"POST","/v2/accounts/mfaSignIn:finalize",Xt(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ic=(()=>{class f{constructor(){}static assertion(d){return Co._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var ol="@firebase/auth";class UC{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,N.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function al(){return window}(0,T.Pz)("authIdTokenMaxAge"),function mM(f){(0,$._registerComponent)(new vs.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),y=c.getProvider("heartbeat"),b=c.getProvider("app-check-internal"),{apiKey:A,authDomain:O}=p.options;oe(A&&!A.includes(":"),"invalid-api-key",{appName:p.name});const te={apiKey:A,authDomain:O,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lh(f)},re=new ZO(p,y,b,te);return function kv(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(Fi);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(re,d),re},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,$._registerComponent)(new vs.wA("auth-internal",c=>{const d=In(c.getProvider("auth").getImmediate());return new UC(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,$.registerVersion)(ol,"1.5.1",function gM(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,$.registerVersion)(ol,"1.5.1","esm2017")}("Browser");function nm(){return nm=(0,N.Z)(function*(f,c,d){var p;const{BuildInfo:y}=al();yn(c.sessionId,"AuthEvent did not contain a session ID");const b=yield function Uu(f){return rm.apply(this,arguments)}(c.sessionId),A={};return $a()?A.ibi=y.packageName:Ha()?A.apn=y.packageName:ve(f,"operation-not-supported-in-this-environment"),y.displayName&&(A.appDisplayName=y.displayName),A.sessionId=b,Xg(f,d,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,A)}),nm.apply(this,arguments)}function im(){return(im=(0,N.Z)(function*(f){const{BuildInfo:c}=al(),d={};$a()?d.iosBundleId=c.packageName:Ha()?d.androidPackageName=c.packageName:ve(f,"operation-not-supported-in-this-environment"),yield xC(f,d)})).apply(this,arguments)}function Hh(){return(Hh=(0,N.Z)(function*(f,c,d){const{cordova:p}=al();let y=()=>{};try{yield new Promise((b,A)=>{let O=null;function te(){var Te;b();const dt=null===(Te=p.plugins.browsertab)||void 0===Te?void 0:Te.close;"function"==typeof dt&&dt(),"function"==typeof d?.close&&d.close()}function re(){O||(O=window.setTimeout(()=>{A(Je(f,"redirect-cancelled-by-user"))},2e3))}function be(){"visible"===document?.visibilityState&&re()}c.addPassiveListener(te),document.addEventListener("resume",re,!1),Ha()&&document.addEventListener("visibilitychange",be,!1),y=()=>{c.removePassiveListener(te),document.removeEventListener("resume",re,!1),document.removeEventListener("visibilitychange",be,!1),O&&window.clearTimeout(O)}})}finally{y()}})).apply(this,arguments)}function rm(){return(rm=(0,N.Z)(function*(f){const c=function bM(f){if(yn(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),d=new Uint8Array(c);for(let p=0;p<f.length;p++)d[p]=f.charCodeAt(p);return d}(f),d=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(d)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class EM extends Vh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(c)),super.onEvent(c)}initialized(){var c=this;return(0,N.Z)(function*(){yield c.initPromise})()}}function ll(f){return V0.apply(this,arguments)}function V0(){return(V0=(0,N.Z)(function*(f){const c=yield om()._get(am(f));return c&&(yield om()._remove(am(f))),c})).apply(this,arguments)}function GC(){const f=[];for(let d=0;d<20;d++){const p=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return f.join("")}function om(){return Fi(Lg)}function am(f){return ja("authEvent",f.config.apiKey,f.name)}function Gh(f){if(!f?.includes("?"))return{};const[c,...d]=f.split("?");return(0,T.zd)(d.join("?"))}const qC=class zh{constructor(){this._redirectPersistence=vn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Lh,this._overrideRedirectResult=Wg}_initialize(c){var d=this;return(0,N.Z)(function*(){const p=c._key();let y=d.eventManagers.get(p);return y||(y=new EM(c),d.eventManagers.set(p,y),d.attachCallbackListeners(c,y)),y})()}_openPopup(c){ve(c,"operation-not-supported-in-this-environment")}_openRedirect(c,d,p,y){var b=this;return(0,N.Z)(function*(){!function $h(f){var c,d,p,y,b,A,O,te,re,be;const Te=al();oe("function"==typeof(null===(c=Te?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof(null===(d=Te?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe("function"==typeof(null===(b=null===(y=null===(p=Te?.cordova)||void 0===p?void 0:p.plugins)||void 0===y?void 0:y.browsertab)||void 0===b?void 0:b.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(te=null===(O=null===(A=Te?.cordova)||void 0===A?void 0:A.plugins)||void 0===O?void 0:O.browsertab)||void 0===te?void 0:te.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(be=null===(re=Te?.cordova)||void 0===re?void 0:re.InAppBrowser)||void 0===be?void 0:be.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const A=yield b._initialize(c);yield A.initialized(),A.resetRedirect(),function DC(){il.clear()}(),yield b._originValidation(c);const O=function xr(f,c,d=null){return{type:c,eventId:d,urlResponse:null,sessionId:GC(),postBody:null,tenantId:f.tenantId,error:Je(f,"no-auth-event")}}(c,p,y);yield function sm(f,c){return om()._set(am(f),c)}(c,O);const te=yield function hi(f,c,d){return nm.apply(this,arguments)}(c,O,d),re=yield function is(f){const{cordova:c}=al();return new Promise(d=>{c.plugins.browsertab.isAvailable(p=>{let y=null;p?c.plugins.browsertab.openUrl(f):y=c.InAppBrowser.open(f,function qO(f=(0,T.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),d(y)})})}(te);return function sc(f,c,d){return Hh.apply(this,arguments)}(c,A,re)})()}_isIframeWebStorageSupported(c,d){throw new Error("Method not implemented.")}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Bu(f){return im.apply(this,arguments)}(c)),this.originValidationPromises[d]}attachCallbackListeners(c,d){const{universalLinks:p,handleOpenURL:y,BuildInfo:b}=al(),A=setTimeout((0,N.Z)(function*(){yield ll(c),d.onEvent(oc())}),500),O=function(){var be=(0,N.Z)(function*(Te){clearTimeout(A);const dt=yield ll(c);let Lt=null;dt&&Te?.url&&(Lt=function B0(f,c){var d,p;const y=function WC(f){const c=Gh(f),d=c.link?decodeURIComponent(c.link):void 0,p=Gh(d).link,y=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Gh(y).link||y||p||d||f}(c);if(y.includes("/__/auth/callback")){const b=Gh(y),A=b.firebaseError?function zC(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(b.firebaseError)):null,O=null===(p=null===(d=A?.code)||void 0===d?void 0:d.split("auth/"))||void 0===p?void 0:p[1],te=O?Je(O):null;return te?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:te,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:y,postBody:null}}return null}(dt,Te.url)),d.onEvent(Lt||oc())});return function(dt){return be.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,O);const te=y,re=`${b.packageName.toLowerCase()}://`;al().handleOpenURL=function(){var be=(0,N.Z)(function*(Te){if(Te.toLowerCase().startsWith(re)&&O({url:Te}),"function"==typeof te)try{te(Te)}catch(dt){console.error(dt)}});return function(Te){return be.apply(this,arguments)}}()}};function oc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Je("no-auth-event")}}function cl(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function cm(f=(0,T.z$)()){return!("file:"!==cl()&&"ionic:"!==cl()&&"capacitor:"!==cl()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function j0(){try{const f=self.localStorage,c=Tu();if(f)return f.setItem(c,"1"),f.removeItem(c),!function ju(f=(0,T.z$)()){return function QC(){return(0,T.w1)()&&11===document?.documentMode}()||function ac(f=(0,T.z$)()){return/Edge\/\d+/.test(f)}(f)}()||(0,T.hl)()}catch{return H0()&&(0,T.hl)()}return!1}function H0(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kh(){return(function qh(){return"http:"===cl()||"https:"===cl()}()||(0,T.ru)()||cm())&&!function YC(){return(0,T.b$)()||(0,T.UG)()}()&&j0()&&!H0()}function $0(){return cm()&&typeof document<"u"}function um(){return(um=(0,N.Z)(function*(){return!!$0()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const Pr={LOCAL:"local",NONE:"none",SESSION:"session"},ca=oe,dm="persistence";function Zh(f){return G0.apply(this,arguments)}function G0(){return(G0=(0,N.Z)(function*(f){yield f._initializationPromise;const c=e1(),d=ja(dm,f.config.apiKey,f.name);c&&c.setItem(d,f._getPersistence())})).apply(this,arguments)}function e1(){var f;try{return(null===(f=function JC(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const t1=oe;class ua{constructor(){this.browserResolver=Fi(F0),this.cordovaResolver=Fi(qC),this.underlyingResolver=null,this._redirectPersistence=vn,this._completeRedirectFn=Lh,this._overrideRedirectResult=Wg}_initialize(c){var d=this;return(0,N.Z)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,d,p,y){var b=this;return(0,N.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._openPopup(c,d,p,y)})()}_openRedirect(c,d,p,y){var b=this;return(0,N.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._openRedirect(c,d,p,y)})()}_isIframeWebStorageSupported(c,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,d)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return $0()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return t1(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,N.Z)(function*(){if(c.underlyingResolver)return;const d=yield function wM(){return um.apply(this,arguments)}();c.underlyingResolver=d?c.cordovaResolver:c.browserResolver})()}}function Yh(f){return f.unwrap()}function IM(f){return n1(f)}function n1(f){const{_tokenResponse:c}=f instanceof T.ZR?f.customData:f;if(!c)return null;if(!(f instanceof T.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Zs.credentialFromResult(f);const d=c.providerId;if(!d||d===pr.PASSWORD)return null;let p;switch(d){case pr.GOOGLE:p=_r;break;case pr.FACEBOOK:p=qa;break;case pr.GITHUB:p=Ag;break;case pr.TWITTER:p=Pn;break;default:const{oauthIdToken:y,oauthAccessToken:b,oauthTokenSecret:A,pendingToken:O,nonce:te}=c;return b||A||y||O?O?d.startsWith("saml.")?vo._create(d,O):Gs._fromParams({providerId:d,signInMethod:d,pendingToken:O,idToken:y,accessToken:b}):new ti(d).credential({idToken:y,accessToken:b,rawNonce:te}):null}return f instanceof T.ZR?p.credentialFromError(f):p.credentialFromResult(f)}function Or(f,c){return c.catch(d=>{throw d instanceof T.ZR&&function hm(f,c){var d;const p=null===(d=c.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new CM(f,function kg(f,c){var d;const p=(0,T.m9)(f),y=c;return oe(c.customData.operationType,p,"argument-error"),oe(null===(d=y.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),Ih._fromError(p,y)}(f,c));else if(p){const y=n1(c),b=c;y&&(b.credential=y,b.tenantId=p.tenantId||void 0,b.email=p.email||void 0,b.phoneNumber=p.phoneNumber||void 0)}}(f,d),d}).then(d=>{const y=d.user;return{operationType:d.operationType,credential:IM(d),additionalUserInfo:Og(d),user:So.getOrCreate(y)}})}function W0(f,c){return q0.apply(this,arguments)}function q0(){return(q0=(0,N.Z)(function*(f,c){const d=yield c;return{verificationId:d.verificationId,confirm:p=>Or(f,d.confirm(p))}})).apply(this,arguments)}class CM{constructor(c,d){this.resolver=d,this.auth=function TM(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Or(Yh(this.auth),this.resolver.resolveSignIn(c))}}class So{constructor(c){this._delegate=c,this.multiFactor=function aC(f){const c=(0,T.m9)(f);return Sh.has(c)||Sh.set(c,Ch._fromUser(c)),Sh.get(c)}(c)}static getOrCreate(c){return So.USER_MAP.has(c)||So.USER_MAP.set(c,new So(c)),So.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var d=this;return(0,N.Z)(function*(){return Or(d.auth,Ws(d._delegate,c))})()}linkWithPhoneNumber(c,d){var p=this;return(0,N.Z)(function*(){return W0(p.auth,function Hg(f,c,d){return Au.apply(this,arguments)}(p._delegate,c,d))})()}linkWithPopup(c){var d=this;return(0,N.Z)(function*(){return Or(d.auth,function v0(f,c,d){return Ph.apply(this,arguments)}(d._delegate,c,ua))})()}linkWithRedirect(c){var d=this;return(0,N.Z)(function*(){return yield Zh(In(d.auth)),Mh(d._delegate,c,ua)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var d=this;return(0,N.Z)(function*(){return Or(d.auth,Kl(d._delegate,c))})()}reauthenticateWithPhoneNumber(c,d){return W0(this.auth,function wC(f,c,d){return g0.apply(this,arguments)}(this._delegate,c,d))}reauthenticateWithPopup(c){return Or(this.auth,function y0(f,c,d){return xu.apply(this,arguments)}(this._delegate,c,ua))}reauthenticateWithRedirect(c){var d=this;return(0,N.Z)(function*(){return yield Zh(In(d.auth)),oa(d._delegate,c,ua)})()}sendEmailVerification(c){return function sM(f,c){return Eh.apply(this,arguments)}(this._delegate,c)}unlink(c){var d=this;return(0,N.Z)(function*(){return yield function Wl(f,c){return rt.apply(this,arguments)}(d._delegate,c),d})()}updateEmail(c){return function aM(f,c){return yi((0,T.m9)(f),c,null)}(this._delegate,c)}updatePassword(c){return function lM(f,c){return yi((0,T.m9)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function To(f,c){return Nh.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Xa(f,c){return qs.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,d){return function Yv(f,c,d){return Qv.apply(this,arguments)}(this._delegate,c,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}So.USER_MAP=new WeakMap;const da=oe;let Hu=(()=>{class f{constructor(d,p){if(this.app=d,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=d.options;da(y,"invalid-api-key",{appName:d.name}),da(y,"invalid-api-key",{appName:d.name});const b=typeof window<"u"?ua:void 0;this._delegate=p.initialize({options:{persistence:K0(y,d.name),popupRedirectResolver:b}}),this._delegate._updateErrorMap(Va),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?So.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,p){!function Ne(f,c,d){const p=In(f);oe(p._canInitEmulator,p,"emulator-config-failed"),oe(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const y=!!d?.disableWarnings,b=pu(c),{host:A,port:O}=function bg(f){const c=pu(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(p);if(y){const b=y[1];return{host:b,port:$l(p.substr(b.length+1))}}{const[b,A]=p.split(":");return{host:b,port:$l(A)}}}(c);p.config.emulator={url:`${b}//${A}${null===O?"":`:${O}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:A,port:O,protocol:b.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function WI(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,d,p)}applyActionCode(d){return function Ts(f,c){return bu.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return Gv(this._delegate,d)}confirmPasswordReset(d,p){return function Ja(f,c,d){return Zl.apply(this,arguments)}(this._delegate,d,p)}createUserWithEmailAndPassword(d,p){var y=this;return(0,N.Z)(function*(){return Or(y._delegate,function tC(f,c,d){return zv.apply(this,arguments)}(y._delegate,d,p))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function rM(f,c){return Zv.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function tM(f,c){const d=zl.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,N.Z)(function*(){da(Kh(),d._delegate,"operation-not-supported-in-this-environment");const p=yield function C0(f,c){return Fh.apply(this,arguments)}(d._delegate,ua);return p?Or(d._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function KC(f,c){In(f)._logFramework(c)}(this._delegate,d)}onAuthStateChanged(d,p,y){const{next:b,error:A,complete:O}=fm(d,p,y);return this._delegate.onAuthStateChanged(b,A,O)}onIdTokenChanged(d,p,y){const{next:b,error:A,complete:O}=fm(d,p,y);return this._delegate.onIdTokenChanged(b,A,O)}sendSignInLinkToEmail(d,p){return function eM(f,c,d){return Wv.apply(this,arguments)}(this._delegate,d,p)}sendPasswordResetEmail(d,p){return function Ji(f,c,d){return vu.apply(this,arguments)}(this._delegate,d,p||void 0)}setPersistence(d){var p=this;return(0,N.Z)(function*(){let y;switch(function XC(f,c){ca(Object.values(Pr).includes(c),f,"invalid-persistence-type"),(0,T.b$)()?ca(c!==Pr.SESSION,f,"unsupported-persistence-type"):(0,T.UG)()?ca(c===Pr.NONE,f,"unsupported-persistence-type"):H0()?ca(c===Pr.NONE||c===Pr.LOCAL&&(0,T.hl)(),f,"unsupported-persistence-type"):ca(c===Pr.NONE||j0(),f,"unsupported-persistence-type")}(p._delegate,d),d){case Pr.SESSION:y=vn;break;case Pr.LOCAL:y=(yield Fi(nl)._isAvailable())?nl:Lg;break;case Pr.NONE:y=Ua;break;default:return ve("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Or(this._delegate,function mu(f){return _i.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Or(this._delegate,_u(this._delegate,d))}signInWithCustomToken(d){return Or(this._delegate,function Hv(f,c){return Xr.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,p){return Or(this._delegate,function XO(f,c,d){return _u((0,T.m9)(f),Li.credential(c,d)).catch(function(){var p=(0,N.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&$v(f),y});return function(y){return p.apply(this,arguments)}}())}(this._delegate,d,p))}signInWithEmailLink(d,p){return Or(this._delegate,function nM(f,c,d){return qv.apply(this,arguments)}(this._delegate,d,p))}signInWithPhoneNumber(d,p){return W0(this._delegate,function Du(f,c,d){return ns.apply(this,arguments)}(this._delegate,d,p))}signInWithPopup(d){var p=this;return(0,N.Z)(function*(){return da(Kh(),p._delegate,"operation-not-supported-in-this-environment"),Or(p._delegate,function Gg(f,c,d){return zg.apply(this,arguments)}(p._delegate,d,ua))})()}signInWithRedirect(d){var p=this;return(0,N.Z)(function*(){return da(Kh(),p._delegate,"operation-not-supported-in-this-environment"),yield Zh(p._delegate),T0(p._delegate,d,ua)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function JO(f,c){return Ng.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=Pr,f})();function fm(f,c,d){let p=f;"function"!=typeof f&&({next:p,error:c,complete:d}=f);const y=p;return{next:A=>y(A&&So.getOrCreate(A)),error:c,complete:d}}function K0(f,c){const d=function z0(f,c){const d=e1();if(!d)return[];const p=ja(dm,f,c);switch(d.getItem(p)){case Pr.NONE:return[Ua];case Pr.LOCAL:return[nl,vn];case Pr.SESSION:return[vn];default:return[]}}(f,c);if(typeof self<"u"&&!d.includes(nl)&&d.push(nl),typeof window<"u")for(const p of[Lg,vn])d.includes(p)||d.push(p);return d.includes(Ua)||d.push(Ua),d}class Qh{constructor(){this.providerId="phone",this._delegate=new Zs(Yh($e.Z.auth()))}static credential(c,d){return Zs.credential(c,d)}verifyPhoneNumber(c,d){return this._delegate.verifyPhoneNumber(c,d)}unwrap(){return this._delegate}}Qh.PHONE_SIGN_IN_METHOD=Zs.PHONE_SIGN_IN_METHOD,Qh.PROVIDER_ID=Zs.PROVIDER_ID;const lc=oe;class Z0{constructor(c,d,p=$e.Z.app()){var y;lc(null===(y=p.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new At(p.auth(),c,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Jh(f){f.INTERNAL.registerComponent(new vs.wA("auth-compat",c=>{const d=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new Hu(d,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Li,FacebookAuthProvider:qa,GithubAuthProvider:Ag,GoogleAuthProvider:_r,OAuthProvider:ti,SAMLAuthProvider:vh,PhoneAuthProvider:Qh,PhoneMultiFactorGenerator:ic,RecaptchaVerifier:Z0,TwitterAuthProvider:Pn,Auth:Hu,AuthCredential:Gl,Error:T.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.1")}($e.Z)},861:(fr,Un,st)=>{"use strict";function N(T,$,K,xe,Fe,_t,Ae){try{var M=T[_t](Ae),ce=M.value}catch(_){return void K(_)}M.done?$(ce):Promise.resolve(ce).then(xe,Fe)}function $e(T){return function(){var $=this,K=arguments;return new Promise(function(xe,Fe){var _t=T.apply($,K);function Ae(ce){N(_t,xe,Fe,Ae,M,"next",ce)}function M(ce){N(_t,xe,Fe,Ae,M,"throw",ce)}Ae(void 0)})}}st.d(Un,{Z:()=>$e})}},fr=>{var Un=N=>fr(fr.s=N);Un(614),Un(274)}]);